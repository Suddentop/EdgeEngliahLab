/*! For license information please see main.d9ceb864.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},62:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){for(var e=[o,a],t=0;t<e.length;t++){var n=e[t];n&&(n.parentNode&&n.parentNode.removeChild(n))}o=a=null,l=[]},t.log=function(){console.log("bodyTrap ----------"),console.log(l.length);for(var e=[o,a],t=0;t<e.length;t++){var n=e[t]||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")};var r,s=n(959),i=(r=s)&&r.__esModule?r:{default:r};var o=void 0,a=void 0,l=[];function c(){0!==l.length&&l[l.length-1].focusContent()}i.default.subscribe(function(e,t){o||a||((o=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),o.style.position="absolute",o.style.opacity="0",o.setAttribute("tabindex","0"),o.addEventListener("focus",c),(a=o.cloneNode()).addEventListener("focus",c)),(l=t).length>0?(document.body.firstChild!==o&&document.body.insertBefore(o,document.body.firstChild),document.body.lastChild!==a&&document.body.appendChild(a)):(o.parentElement&&o.parentElement.removeChild(o),a.parentElement&&a.parentElement.removeChild(a))})},147:(e,t,n)=>{"use strict";n.d(t,{XR:()=>Se,qk:()=>ke,c7:()=>Te,KR:()=>_e,D:()=>Ne});var r=n(150),s=n(529),i=n(812);const o="firebasestorage.googleapis.com",a="storageBucket";class l extends s.g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(u(e),"Firebase Storage: ".concat(t," (").concat(u(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,l.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return u(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var c,d;function u(e){return"storage/"+e}function h(){return new l(c.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function p(){return new l(c.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function m(){return new l(c.CANCELED,"User canceled the upload/download.")}function f(){return new l(c.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function g(e){return new l(c.INVALID_ARGUMENT,e)}function y(){return new l(c.APP_DELETED,"The Firebase app was deleted.")}function v(e,t){return new l(c.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function x(e){throw new l(c.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(c||(c={}));class b{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=b.makeFromUrl(e,t)}catch(s){return new b(e,"")}if(""===n.path)return n;throw r=e,new l(c.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),d=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://".concat(t===o?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:i}];for(let o=0;o<d.length;o++){const t=d[o],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new b(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new l(c.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class w{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function j(e){return"string"===typeof e||e instanceof String}function N(e){return k()&&e instanceof Blob}function k(){return"undefined"!==typeof Blob}function S(e,t,n,r){if(r<t)throw g("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw g("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function _(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function T(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function C(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(d||(d={}));class E{constructor(e,t,n,r,s,i,o,a,l,c,d){let u=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=d,this.retry=u,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new I(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===d.NO_ERROR,s=n.getStatus();if(!t||C(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===d.ABORT;return void e(!1,new I(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new I(i,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());void 0!==e?n(e):n()}catch(i){r(i)}else if(null!==s){const e=h();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?y():m())}else{r(p())}};this.canceled_?t(0,new I(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return 2===a}let c=!1;function d(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function u(t){s=setTimeout(()=>{s=null,e(p,l())},t)}function h(){i&&clearTimeout(i)}function p(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return h(),void d.call(null,e,...n);if(l()||o)return h(),void d.call(null,e,...n);let i;r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),u(i)}let m=!1;function f(e){m||(m=!0,h(),c||(null!==s?(e||(a=2),clearTimeout(s),u(0)):e||(a=1)))}return u(0),i=setTimeout(()=>{o=!0,f(!0)},n),f}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class I{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function A(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function R(){const e=A();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(k())return new Blob(n);throw new l(c.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function O(e){if("undefined"===typeof atob)throw t="base-64",new l(c.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const P="raw",F="base64",D="base64url",z="data_url";class L{constructor(e,t){this.data=e,this.contentType=t||null}}function M(e,t){switch(e){case P:return new L(B(t));case F:case D:return new L(U(e,t));case z:return new L(function(e){const t=new W(e);return t.base64?U(F,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw v(z,"Malformed data URL.")}return B(t)}(t.rest)}(t),new W(t).contentType)}throw h()}function B(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function U(e,t){switch(e){case F:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw v(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case D:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw v(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=O(t)}catch(s){if(s.message.includes("polyfill"))throw s;throw v(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class W{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw v(z,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class V{constructor(e,t){let n=0,r="";N(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(N(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new V(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new V(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(k()){const e=t.map(e=>e instanceof V?e.data_:e);return new V(R.apply(null,e))}{const e=t.map(e=>j(e)?M(P,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let s=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]}),new V(r,!0)}}uploadData(){return this.data_}}function q(e){let t;try{t=JSON.parse(e)}catch(r){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function H(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function K(e,t){return t}class J{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||K}}let Y=null;function Q(){if(Y)return Y;const e=[];e.push(new J("bucket")),e.push(new J("generation")),e.push(new J("metageneration")),e.push(new J("name","fullPath",!0));const t=new J("name");t.xform=function(e,t){return function(e){return!j(e)||e.length<2?e:H(e)}(t)},e.push(t);const n=new J("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new J("timeCreated")),e.push(new J("updated")),e.push(new J("md5Hash",null,!0)),e.push(new J("cacheControl",null,!0)),e.push(new J("contentDisposition",null,!0)),e.push(new J("contentEncoding",null,!0)),e.push(new J("contentLanguage",null,!0)),e.push(new J("contentType",null,!0)),e.push(new J("metadata","customMetadata",!0)),Y=e,Y}function G(e,t,n){const r={type:"file"},s=n.length;for(let i=0;i<s;i++){const e=n[i];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,s=new b(n,r);return t._makeStorageReference(s)}})}(r,e),r}function $(e,t,n){const r=q(t);if(null===r)return null;return G(e,r,n)}function X(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Z{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ee(e){if(!e)throw h()}function te(e,t){return function(n,r){const s=$(e,r,t);return ee(null!==s),s}}function ne(e,t){return function(n,r){const s=$(e,r,t);return ee(null!==s),function(e,t,n,r){const s=q(t);if(null===s)return null;if(!j(s.downloadTokens))return null;const i=s.downloadTokens;if(0===i.length)return null;const o=encodeURIComponent;return i.split(",").map(t=>{const s=e.bucket,i=e.fullPath;return _("/b/"+o(s)+"/o/"+o(i),n,r)+T({alt:"media",token:t})})[0]}(s,r,e.host,e._protocol)}}function re(e){return function(t,n){let r;var s,i;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new l(c.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new l(c.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=e.bucket,r=new l(c.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(s=e.path,r=new l(c.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function se(e){const t=re(e);return function(n,r){let s=t(n,r);var i;return 404===n.getStatus()&&(i=e.path,s=new l(c.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),s.serverResponse=r.serverResponse,s}}function ie(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function oe(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=ie(t,r,s),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+X(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",d="\r\n--"+a+"--",u=V.getBlob(c,r,d);if(null===u)throw f();const h={name:l.fullPath},p=_(i,e.host,e._protocol),m=e.maxUploadRetryTime,g=new Z(p,"POST",te(e,n),m);return g.urlParams=h,g.headers=o,g.body=u.uploadData(),g.errorHandler=re(t),g}let ae=null;class le{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=d.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=d.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=d.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw x("cannot .send() more than once");if((0,s.zJ)(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw x("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw x("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw x("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw x("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ce extends le{initXhr(){this.xhr_.responseType="text"}}function de(){return ae?ae():new ce}class ue{constructor(e,t){this._service=e,this._location=t instanceof b?t:b.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ue(e,t)}get root(){const e=new b(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return H(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new b(this._location.bucket,e);return new ue(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new l(c.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function he(e,t,n){e._throwIfRoot("uploadBytes");const r=oe(e.storage,e._location,Q(),new V(t,!0),n);return e.storage.makeRequestWithTokens(r,de).then(t=>({metadata:t,ref:e}))}function pe(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=_(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,i=new Z(r,"GET",ne(e,n),s);return i.errorHandler=se(t),i}(e.storage,e._location,Q());return e.storage.makeRequestWithTokens(t,de).then(e=>{if(null===e)throw new l(c.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function me(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=_(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,s=new Z(n,"DELETE",function(e,t){},r);return s.successCodes=[200,204],s.errorHandler=se(t),s}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,de)}function fe(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new b(e._location.bucket,n);return new ue(e.storage,r)}function ge(e,t){if(e instanceof xe){const n=e;if(null==n._bucket)throw new l(c.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+a+"' property when initializing the app?");const r=new ue(n,n._bucket);return null!=t?ge(r,t):r}return void 0!==t?fe(e,t):e}function ye(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof xe)return new ue(e,t);throw g("To use ref(service, url), the first argument must be a Storage instance.")}return ge(e,t)}function ve(e,t){const n=null===t||void 0===t?void 0:t[a];return null==n?null:b.makeFromBucketSpec(n,e)}class xe{constructor(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=o,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?b.makeFromBucketSpec(r,this._host):ve(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=b.makeFromBucketSpec(this._url,e):this._bucket=ve(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){S("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){S("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ue(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new w(y());{const i=function(e,t,n,r,s,i){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=T(e.urlParams),c=e.url+l,d=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(d,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(d,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(d,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(d,r),new E(c,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,o,a)}(e,this._appId,n,r,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const be="@firebase/storage",we="0.13.14",je="storage";function Ne(e,t,n){return he(e=(0,s.Ku)(e),t,n)}function ke(e){return pe(e=(0,s.Ku)(e))}function Se(e){return me(e=(0,s.Ku)(e))}function _e(e,t){return ye(e=(0,s.Ku)(e),t)}function Te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1?arguments[1]:void 0;e=(0,s.Ku)(e);const n=(0,r.j6)(e,je).getImmediate({identifier:t}),i=(0,s.yU)("storage");return i&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=(0,s.zJ)(t);i&&((0,s.gE)("https://".concat(e.host,"/b")),(0,s.P1)("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(e._overrideAuthToken="string"===typeof o?o:(0,s.Fy)(o,e.app.options.projectId))}(e,t,n,r)}(n,...i),n}function Ce(e,t){let{instanceIdentifier:n}=t;const s=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new xe(s,i,o,n,r.MF)}(0,r.om)(new i.uA(je,Ce,"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(be,we,""),(0,r.KO)(be,we,"esm2017")},150:(e,t,n)=>{"use strict";n.d(t,{MF:()=>ue,j6:()=>oe,xZ:()=>ae,om:()=>ie,Sx:()=>pe,Wp:()=>he,KO:()=>me});var r=n(812),s=n(443),i=n(529),o=n(555);let a,l;const c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap;let m={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return d.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(v(this),n),y(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(e.apply(v(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(v(this),t,...r);return u.set(i,t.sort?t.sort():[t]),y(i)}}function g(e){return"function"===typeof e?f(e):(e instanceof IDBTransaction&&function(e){if(d.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});d.set(e,t)}(e),t=e,(a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,m):e);var t}function y(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(y(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),p.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=g(e);return t!==e&&(h.set(e,t),p.set(t,e)),t}const v=e=>p.get(e);const x=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function j(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!x.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(i=i.index(a.shift())),(await Promise.all([i[n](...a),s&&t.done]))[0]};return w.set(t,i),i}m=(e=>(0,o.A)((0,o.A)({},e),{},{get:(t,n,r)=>j(t,n)||e.get(t,n,r),has:(t,n)=>!!j(t,n)||e.has(t,n)}))(m);class N{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const k="@firebase/app",S="0.13.2",_=new s.Vy("@firebase/app"),T="@firebase/app-compat",C="@firebase/analytics-compat",E="@firebase/analytics",I="@firebase/app-check-compat",A="@firebase/app-check",R="@firebase/auth",O="@firebase/auth-compat",P="@firebase/database",F="@firebase/data-connect",D="@firebase/database-compat",z="@firebase/functions",L="@firebase/functions-compat",M="@firebase/installations",B="@firebase/installations-compat",U="@firebase/messaging",W="@firebase/messaging-compat",V="@firebase/performance",q="@firebase/performance-compat",H="@firebase/remote-config",K="@firebase/remote-config-compat",J="@firebase/storage",Y="@firebase/storage-compat",Q="@firebase/firestore",G="@firebase/ai",$="@firebase/firestore-compat",X="firebase",Z="[DEFAULT]",ee={[k]:"fire-core",[T]:"fire-core-compat",[E]:"fire-analytics",[C]:"fire-analytics-compat",[A]:"fire-app-check",[I]:"fire-app-check-compat",[R]:"fire-auth",[O]:"fire-auth-compat",[P]:"fire-rtdb",[F]:"fire-data-connect",[D]:"fire-rtdb-compat",[z]:"fire-fn",[L]:"fire-fn-compat",[M]:"fire-iid",[B]:"fire-iid-compat",[U]:"fire-fcm",[W]:"fire-fcm-compat",[V]:"fire-perf",[q]:"fire-perf-compat",[H]:"fire-rc",[K]:"fire-rc-compat",[J]:"fire-gcs",[Y]:"fire-gcs-compat",[Q]:"fire-fst",[$]:"fire-fst-compat",[G]:"fire-vertex","fire-js":"fire-js",[X]:"fire-js-all"},te=new Map,ne=new Map,re=new Map;function se(e,t){try{e.container.addComponent(t)}catch(n){_.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ie(e){const t=e.name;if(re.has(t))return _.debug("There were multiple attempts to register component ".concat(t,".")),!1;re.set(t,e);for(const n of te.values())se(n,e);for(const n of ne.values())se(n,e);return!0}function oe(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ae(e){return null!==e&&void 0!==e&&void 0!==e.settings}const le={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ce=new i.FA("app","Firebase",le);class de{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ce.create("app-deleted",{appName:this._name})}}const ue="11.10.0";function he(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const s=Object.assign({name:Z,automaticDataCollectionEnabled:!0},t),o=s.name;if("string"!==typeof o||!o)throw ce.create("bad-app-name",{appName:String(o)});if(n||(n=(0,i.T9)()),!n)throw ce.create("no-options");const a=te.get(o);if(a){if((0,i.bD)(n,a.options)&&(0,i.bD)(s,a.config))return a;throw ce.create("duplicate-app",{appName:o})}const l=new r.h1(o);for(const r of re.values())l.addComponent(r);const c=new de(n,s,l);return te.set(o,c),c}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;const t=te.get(e);if(!t&&e===Z&&(0,i.T9)())return he();if(!t)throw ce.create("no-app",{appName:e});return t}function me(e,t,n){var s;let i=null!==(s=ee[e])&&void 0!==s?s:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void _.warn(e.join(" "))}ie(new r.uA("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const fe="firebase-heartbeat-store";let ge=null;function ye(){return ge||(ge=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=y(o);return r&&o.addEventListener("upgradeneeded",e=>{r(y(o.result),e.oldVersion,e.newVersion,y(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(fe)}catch(n){console.warn(n)}}}).catch(e=>{throw ce.create("idb-open",{originalErrorMessage:e.message})})),ge}async function ve(e,t){try{const n=(await ye()).transaction(fe,"readwrite"),r=n.objectStore(fe);await r.put(t,xe(e)),await n.done}catch(n){if(n instanceof i.g)_.warn(n.message);else{const e=ce.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});_.warn(e.message)}}}function xe(e){return"".concat(e.name,"!").concat(e.options.appId)}class be{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new je(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=we();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){_.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=we(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Ne(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ne(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=(0,i.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return _.warn(t),""}}}function we(){return(new Date).toISOString().substring(0,10)}class je{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,i.zW)()&&(0,i.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ye()).transaction(fe),n=await t.objectStore(fe).get(xe(e));return await t.done,n}catch(t){if(t instanceof i.g)_.warn(t.message);else{const e=ce.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});_.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ve(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ve(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ne(e){return(0,i.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var ke;ke="",ie(new r.uA("platform-logger",e=>new N(e),"PRIVATE")),ie(new r.uA("heartbeat",e=>new be(e),"PRIVATE")),me(k,S,ke),me(k,S,"esm2017"),me("fire-js","")},153:(e,t,n)=>{"use strict";var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:d,props:i,_owner:a.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},173:(e,t,n)=>{e.exports=n(497)()},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=x.prototype=new v;b.constructor=x,f(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var s,i={},o=null,a=null;if(null!=t)for(s in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)j.call(t,s)&&!k.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:o,ref:a,props:i,_owner:N.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,s,i,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===i?"."+C(l,0):i,w(o)?(s="",null!=e&&(s=e.replace(T,"$&/")+"/"),E(o,t,s,"",function(e){return e})):null!=o&&(_(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,s+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var d=i+C(a=e[c],c);l+=E(a,t,s,d,o)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(a=e.next()).done;)l+=E(a=a.value,t,s,d=i+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],s=0;return E(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:N};function F(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=o,t.PureComponent=x,t.StrictMode=i,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=F,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=f({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=N.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!k.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:o,props:s,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=F,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,i.default)(e);if(!n.length)return void t.preventDefault();var r=void 0,s=t.shiftKey,a=n[0],l=n[n.length-1],c=o();if(e===c){if(!s)return;r=l}l!==c||s||(r=a);a===c&&s&&(r=l);if(r)return t.preventDefault(),void r.focus();var d=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==d||"Chrome"==d[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var u=n.indexOf(c);u>-1&&(u+=s?-1:1);if("undefined"===typeof(r=n[u]))return t.preventDefault(),void(r=s?l:a).focus();t.preventDefault(),r.focus()};var r,s=n(682),i=(r=s)&&r.__esModule?r:{default:r};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.activeElement.shadowRoot?o(e.activeElement.shadowRoot):e.activeElement}e.exports=t.default},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},219:(e,t,n)=>{"use strict";var r=n(763),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?o:a[e.$$typeof]||s}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var c=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(m){var s=p(n);s&&s!==m&&e(t,s,r)}var o=d(n);u&&(o=o.concat(u(n)));for(var a=l(t),f=l(n),g=0;g<o.length;++g){var y=o[g];if(!i[y]&&(!r||!r[y])&&(!f||!f[y])&&(!a||!a[y])){var v=h(n,y);try{c(t,y,v)}catch(x){}}}}return t}},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,o=s>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,d=e[c];if(0>i(l,n))c<s&&0>i(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<s&&0>i(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],u=1,h=null,p=3,m=!1,f=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(g=!1,b(e),!f)if(null!==r(c))f=!0,O(j);else{var t=r(d);null!==t&&P(w,t.startTime-e)}}function j(e,n){f=!1,g&&(g=!1,v(_),_=-1),m=!0;var i=p;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!E());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&s(c),b(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&P(w,u.startTime-n),l=!1}return l}finally{h=null,p=i,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,S=null,_=-1,T=5,C=-1;function E(){return!(t.unstable_now()-C<T)}function I(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?N():(k=!1,S=null)}}else k=!1}if("function"===typeof x)N=function(){x(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=I,N=function(){R.postMessage(null)}}else N=function(){y(I,0)};function O(e){S=e,k||(k=!0,N())}function P(e,n){_=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,O(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>o?(e.sortIndex=i,n(d,e),null===r(c)&&e===r(d)&&(g?(v(_),_=-1):g=!0,P(w,i-o))):(e.sortIndex=a,n(c,e),f||m||(f=!0,O(j))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},322:(e,t,n)=>{"use strict";n.d(t,{Lw:()=>l,MC:()=>c,ev:()=>a,getWorkTypePoints:()=>i,updateWorkTypePoints:()=>o});var r=n(472),s=n(558);const i=async()=>{try{const e=(0,r.doc)(s.db,"settings","workTypePoints"),t=await(0,r.x7)(e);return t.exists()?t.data().points||[]:[{id:"1",name:"\uc720\ud615#01",points:10,description:"\ubb38\uc7a5 \uc21c\uc11c \ud14c\uc2a4\ud2b8"},{id:"2",name:"\uc720\ud615#02",points:15,description:"\ub3c5\ud574 \ubb38\uc81c \uc0dd\uc131"},{id:"3",name:"\uc720\ud615#03",points:12,description:"\uc5b4\ud718 \ub2e8\uc5b4 \ubb38\uc81c"},{id:"4",name:"\uc720\ud615#04",points:18,description:"\ube48\uce78(\uad6c) \ucd94\ub860 \ubb38\uc81c"},{id:"5",name:"\uc720\ud615#05",points:20,description:"\ube48\uce78(\ubb38\uc7a5) \ucd94\ub860 \ubb38\uc81c"},{id:"6",name:"\uc720\ud615#06",points:16,description:"\ubb38\uc7a5 \uc704\uce58 \ucd94\ub860 \ubb38\uc81c"},{id:"7",name:"\uc720\ud615#07",points:22,description:"\uc8fc\uc694 \uc544\uc774\ub514\uc5b4 \ucd94\ub860 \ubb38\uc81c"},{id:"8",name:"\uc720\ud615#08",points:25,description:"\uc81c\ubaa9 \ucd94\ub860 \ubb38\uc81c"},{id:"9",name:"\uc720\ud615#09",points:14,description:"\ubb38\ubc95 \uc624\ub958 \ubb38\uc81c"},{id:"10",name:"\uc720\ud615#10",points:30,description:"\ubcf5\ud569 \ubb38\ubc95 \uc624\ub958 \ubb38\uc81c"},{id:"11",name:"\uc720\ud615#11",points:18,description:"\uae30\uc0ac \uc21c\uc11c \ubb38\uc81c"},{id:"12",name:"\uc720\ud615#12",points:20,description:"\uc601\uc5b4\ub2e8\uc5b4 \ubb38\uc81c"},{id:"13",name:"\uc720\ud615#13",points:12,description:"\ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c(\ub2e8\uc5b4-\uc8fc\uad00\uc2dd)"},{id:"14",name:"\uc720\ud615#14",points:15,description:"\ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c(\ubb38\uc7a5-\uc8fc\uad00\uc2dd)"}]}catch(e){throw console.error("\uc720\ud615\ubcc4 \ud3ec\uc778\ud2b8 \uc124\uc815 \ub85c\ub4dc \uc624\ub958:",e),e}},o=async e=>{try{const t=(0,r.doc)(s.db,"settings","workTypePoints");(await(0,r.x7)(t)).exists()?await(0,r.updateDoc)(t,{points:e}):await(0,r.BN)(t,{points:e})}catch(t){throw console.error("\uc720\ud615\ubcc4 \ud3ec\uc778\ud2b8 \uc124\uc815 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958:",t),t}},a=async(e,t,n,o,a)=>{try{const l=(await i()).find(e=>e.id===t);if(!l)throw new Error("\uc720\ud615\ubcc4 \ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const c=l.points,d=(0,r.doc)(s.db,"users",e),u=await(0,r.x7)(d);if(!u.exists())throw new Error("\uc0ac\uc6a9\uc790\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const h=u.data().points||0;if(h<c)return{success:!1,deductedPoints:0,remainingPoints:h,error:"\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4."};await(0,r.updateDoc)(d,{points:(0,r.GV)(-c)});const p={userId:e,userName:o,userNickname:a,type:"subtract",amount:c,reason:"".concat(n," \ubb38\uc81c \uc0dd\uc131"),timestamp:new Date,workTypeId:t,workTypeName:n};return await(0,r.addDoc)((0,r.collection)(s.db,"pointTransactions"),p),{success:!0,deductedPoints:c,remainingPoints:h-c}}catch(l){throw console.error("\ud3ec\uc778\ud2b8 \ucc28\uac10 \uc624\ub958:",l),l}},l=async function(e,t,n,i,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\ub85c \uc778\ud55c \ud3ec\uc778\ud2b8 \ud658\ubd88";try{const l=(0,r.doc)(s.db,"users",e);await(0,r.updateDoc)(l,{points:(0,r.GV)(t)});const c={userId:e,userName:i,userNickname:o,type:"refund",amount:t,reason:a,timestamp:new Date,workTypeName:n};await(0,r.addDoc)((0,r.collection)(s.db,"pointTransactions"),c)}catch(l){throw console.error("\ud3ec\uc778\ud2b8 \ud658\ubd88 \uc624\ub958:",l),l}},c=async e=>{try{const t=(0,r.doc)(s.db,"users",e),n=await(0,r.x7)(t);return n.exists()&&n.data().points||0}catch(t){throw console.error("\uc0ac\uc6a9\uc790 \ud3ec\uc778\ud2b8 \uc870\ud68c \uc624\ub958:",t),t}}},366:e=>{"use strict";var t=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty,s="undefined"!==typeof Element;function i(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){var a,l,c,d=t(e),u=t(o);if(d&&u){if((l=e.length)!=o.length)return!1;for(a=l;0!==a--;)if(!i(e[a],o[a]))return!1;return!0}if(d!=u)return!1;var h=e instanceof Date,p=o instanceof Date;if(h!=p)return!1;if(h&&p)return e.getTime()==o.getTime();var m=e instanceof RegExp,f=o instanceof RegExp;if(m!=f)return!1;if(m&&f)return e.toString()==o.toString();var g=n(e);if((l=g.length)!==n(o).length)return!1;for(a=l;0!==a--;)if(!r.call(o,g[a]))return!1;if(s&&e instanceof Element&&o instanceof Element)return e===o;for(a=l;0!==a--;)if(("_owner"!==(c=g[a])||!e.$$typeof)&&!i(e[c],o[c]))return!1;return!0}return e!==e&&o!==o}e.exports=function(e,t){try{return i(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},395:(e,t,n)=>{"use strict";n.d(t,{Uz:()=>h});var r=n(150),s=n(529),i=n(812);const o="functions";s.g;class a{constructor(e,t,n,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,(0,r.xZ)(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(e=>this.auth=e,()=>{}),this.messaging||n.get().then(e=>this.messaging=e,()=>{}),this.appCheck||null===s||void 0===s||s.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(e){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(e){return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const l="us-central1";class c{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return fetch(...arguments)};this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new a(e,t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(s);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=l}catch(o){this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}const d="@firebase/functions",u="0.12.9";function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;const n=(0,r.j6)((0,s.Ku)(e),o).getImmediate({identifier:t}),i=(0,s.yU)("functions");return i&&function(e,t,n){!function(e,t,n){const r=(0,s.zJ)(t);e.emulatorOrigin="http".concat(r?"s":"","://").concat(t,":").concat(n),r&&((0,s.gE)(e.emulatorOrigin),(0,s.P1)("Functions",!0))}((0,s.Ku)(e),t,n)}(n,...i),n}var p;(0,r.om)(new i.uA(o,(e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("messaging-internal"),o=e.getProvider("app-check-internal");return new c(r,s,i,o,n)},"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(d,u,p),(0,r.KO)(d,u,"esm2017")},396:(e,t,n)=>{var r;!function(){"use strict";var s=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:s,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:s&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:s&&!!window.screen};void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}()},401:()=>{console.log=()=>{},console.warn=()=>{},console.error=()=>{},console.info=()=>{},console.debug=()=>{},console.trace=()=>{},console.table=()=>{},console.group=()=>{},console.groupEnd=()=>{},console.groupCollapsed=()=>{},console.time=()=>{},console.timeEnd=()=>{},console.count=()=>{},console.countReset=()=>{},console.clear=()=>{},console.dir=()=>{},console.dirxml=()=>{},console.assert=()=>{},console.profile=()=>{},console.profileEnd=()=>{},console.timeStamp=()=>{},console.timeline=()=>{},console.timelineEnd=()=>{},console.markTimeline=()=>{},console.measure=()=>{},console.measureEnd=()=>{},console.takeHeapSnapshot=()=>{}},439:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(43),a=g(n(173)),l=f(n(774)),c=g(n(206)),d=f(n(619)),u=f(n(841)),h=n(821),p=g(h),m=g(n(959));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}n(62);var y={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},v=0,x=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOverlayRef=function(e){n.overlay=e,n.props.overlayRef&&n.props.overlayRef(e)},n.setContentRef=function(e){n.content=e,n.props.contentRef&&n.props.contentRef(e)},n.afterClose=function(){var e=n.props,t=e.appElement,r=e.ariaHideApp,s=e.htmlOpenClassName,i=e.bodyOpenClassName,o=e.parentSelector,a=o&&o().ownerDocument||document;i&&u.remove(a.body,i),s&&u.remove(a.getElementsByTagName("html")[0],s),r&&v>0&&0===(v-=1)&&d.show(t),n.props.shouldFocusAfterRender&&(n.props.shouldReturnFocusAfterClose?(l.returnFocus(n.props.preventScroll),l.teardownScopedFocus()):l.popWithoutFocus()),n.props.onAfterClose&&n.props.onAfterClose(),m.default.deregister(n)},n.open=function(){n.beforeOpen(),n.state.afterOpen&&n.state.beforeClose?(clearTimeout(n.closeTimer),n.setState({beforeClose:!1})):(n.props.shouldFocusAfterRender&&(l.setupScopedFocus(n.node),l.markForFocusLater()),n.setState({isOpen:!0},function(){n.openAnimationFrame=requestAnimationFrame(function(){n.setState({afterOpen:!0}),n.props.isOpen&&n.props.onAfterOpen&&n.props.onAfterOpen({overlayEl:n.overlay,contentEl:n.content})})}))},n.close=function(){n.props.closeTimeoutMS>0?n.closeWithTimeout():n.closeWithoutTimeout()},n.focusContent=function(){return n.content&&!n.contentHasFocus()&&n.content.focus({preventScroll:!0})},n.closeWithTimeout=function(){var e=Date.now()+n.props.closeTimeoutMS;n.setState({beforeClose:!0,closesAt:e},function(){n.closeTimer=setTimeout(n.closeWithoutTimeout,n.state.closesAt-Date.now())})},n.closeWithoutTimeout=function(){n.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},n.afterClose)},n.handleKeyDown=function(e){(function(e){return"Tab"===e.code||9===e.keyCode})(e)&&(0,c.default)(n.content,e),n.props.shouldCloseOnEsc&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&(e.stopPropagation(),n.requestClose(e))},n.handleOverlayOnClick=function(e){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose&&n.props.shouldCloseOnOverlayClick&&(n.ownerHandlesClose()?n.requestClose(e):n.focusContent()),n.shouldClose=null},n.handleContentOnMouseUp=function(){n.shouldClose=!1},n.handleOverlayOnMouseDown=function(e){n.props.shouldCloseOnOverlayClick||e.target!=n.overlay||e.preventDefault()},n.handleContentOnClick=function(){n.shouldClose=!1},n.handleContentOnMouseDown=function(){n.shouldClose=!1},n.requestClose=function(e){return n.ownerHandlesClose()&&n.props.onRequestClose(e)},n.ownerHandlesClose=function(){return n.props.onRequestClose},n.shouldBeClosed=function(){return!n.state.isOpen&&!n.state.beforeClose},n.contentHasFocus=function(){return document.activeElement===n.content||n.content.contains(document.activeElement)},n.buildClassName=function(e,t){var r="object"===("undefined"===typeof t?"undefined":s(t))?t:{base:y[e],afterOpen:y[e]+"--after-open",beforeClose:y[e]+"--before-close"},i=r.base;return n.state.afterOpen&&(i=i+" "+r.afterOpen),n.state.beforeClose&&(i=i+" "+r.beforeClose),"string"===typeof t&&t?i+" "+t:i},n.attributesFromObject=function(e,t){return Object.keys(t).reduce(function(n,r){return n[e+"-"+r]=t[r],n},{})},n.state={afterOpen:!1,beforeClose:!1},n.shouldClose=null,n.moveFromContentToOverlay=null,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,n=e.ariaHideApp,r=e.htmlOpenClassName,s=e.bodyOpenClassName,i=e.parentSelector,o=i&&i().ownerDocument||document;s&&u.add(o.body,s),r&&u.add(o.getElementsByTagName("html")[0],r),n&&(v+=1,d.hide(t)),m.default.register(this)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,s=e.overlayClassName,i=e.defaultStyles,o=e.children,a=n?{}:i.content,l=s?{}:i.overlay;if(this.shouldBeClosed())return null;var c={ref:this.setOverlayRef,className:this.buildClassName("overlay",s),style:r({},l,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},d=r({id:t,ref:this.setContentRef,style:r({},a,this.props.style.content),className:this.buildClassName("content",n),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",r({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),u=this.props.contentElement(d,o);return this.props.overlayElement(c,u)}}]),t}(o.Component);x.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},x.propTypes={isOpen:a.default.bool.isRequired,defaultStyles:a.default.shape({content:a.default.object,overlay:a.default.object}),style:a.default.shape({content:a.default.object,overlay:a.default.object}),className:a.default.oneOfType([a.default.string,a.default.object]),overlayClassName:a.default.oneOfType([a.default.string,a.default.object]),parentSelector:a.default.func,bodyOpenClassName:a.default.string,htmlOpenClassName:a.default.string,ariaHideApp:a.default.bool,appElement:a.default.oneOfType([a.default.instanceOf(p.default),a.default.instanceOf(h.SafeHTMLCollection),a.default.instanceOf(h.SafeNodeList),a.default.arrayOf(a.default.instanceOf(p.default))]),onAfterOpen:a.default.func,onAfterClose:a.default.func,onRequestClose:a.default.func,closeTimeoutMS:a.default.number,shouldFocusAfterRender:a.default.bool,shouldCloseOnOverlayClick:a.default.bool,shouldReturnFocusAfterClose:a.default.bool,preventScroll:a.default.bool,role:a.default.string,contentLabel:a.default.string,aria:a.default.object,data:a.default.object,children:a.default.node,shouldCloseOnEsc:a.default.bool,overlayRef:a.default.func,contentRef:a.default.func,id:a.default.string,overlayElement:a.default.func,contentElement:a.default.func,testId:a.default.string},t.default=x,e.exports=t.default},440:e=>{"use strict";var t=function(){};e.exports=t},443:(e,t,n)=>{"use strict";n.d(t,{$b:()=>s,Vy:()=>c});const r=[];var s;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(s||(s={}));const i={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},o=s.INFO,a={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=a[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),o=2;o<s;o++)i[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in s))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...t),this._logHandler(this,s.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...t),this._logHandler(this,s.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.INFO,...t),this._logHandler(this,s.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.WARN,...t),this._logHandler(this,s.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.ERROR,...t),this._logHandler(this,s.ERROR,...t)}}},458:(e,t,n)=>{"use strict";n.d(t,{eJ:()=>ht,Wm:()=>mt,xI:()=>Un,hg:()=>yt,sendPasswordResetEmail:()=>ut,x9:()=>pt,CI:()=>vt,f3:()=>ft});var r=n(150),s=n(529),i=n(443);function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var a=n(812);function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c=l,d=new s.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),u=new i.Vy("@firebase/auth");function h(e){if(u.logLevel<=i.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];u.error("Auth (".concat(r.MF,"): ").concat(e),...n)}}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw y(e,...n)}function m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return y(e,...n)}function f(e,t,n){const r=Object.assign(Object.assign({},c()),{[t]:n});return new s.FA("auth","Firebase",r).create(t,{appName:e.name})}function g(e){return f(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return d.create(e,...n)}function v(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw y(t,...r)}}function x(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function b(e,t){e||x(t)}function w(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function j(){return"http:"===N()||"https:"===N()}function N(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,s.jZ)()||(0,s.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(j()||(0,s.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function S(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class _{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void x("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void x("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void x("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const T={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},C=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],E=new k(3e4,6e4);function I(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function A(e,t,n,r){return R(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=(0,s.Am)(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},i);return(0,s.c1)()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,s.zJ)(e.emulatorConfig.host)&&(c.credentials="include"),_.fetch()(await P(e,e.config.apiHost,n,a),c)})}async function R(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},T),t);try{const t=new D(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw z(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw z(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw z(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw z(e,"user-disabled",i);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw f(e,a,o);p(e,a)}}catch(i){if(i instanceof s.g)throw i;p(e,"network-request-failed",{message:String(i)})}}async function O(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await A(e,t,n,r,s);return"mfaPendingCredential"in i&&p(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function P(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r),i=e,o=i.config.emulator?S(e.config,s):"".concat(e.config.apiScheme,"://").concat(s);if(C.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(o).toString()}return o}function F(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class D{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(m(this.auth,"network-request-failed")),E.get())})}}function z(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=m(e,t,r);return s.customData._tokenResponse=n,s}function L(e){return void 0!==e&&void 0!==e.enterprise}class M{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return F(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function B(e,t){return A(e,"GET","/v2/recaptchaConfig",I(e,t))}async function U(e,t){return A(e,"POST","/v1/accounts:lookup",t)}function W(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function V(e){return 1e3*Number(e)}function q(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,s.u)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(i){return h("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function H(e){const t=q(e);return v(t,"internal-error"),v("undefined"!==typeof t.exp,"internal-error"),v("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function K(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof s.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class J{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Y{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=W(this.lastLoginAt),this.creationTime=W(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Q(e){var t;const n=e.auth,r=await e.getIdToken(),s=await K(e,U(n,{idToken:r}));v(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const o=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?G(i.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const d=e.isAnonymous,u=!(e.email&&i.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!d&&u,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Y(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function G(e){return e.map(e=>{var{providerId:t}=e,n=o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class ${constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){v(e.idToken,"internal-error"),v("undefined"!==typeof e.idToken,"internal-error"),v("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):H(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){v(0!==e.length,"internal-error");const t=H(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(v(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await R(e,{},async()=>{const n=(0,s.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await P(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:n};return e.emulatorConfig&&(0,s.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),_.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new $;return n&&(v("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(v("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(v("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $,this.toJSON())}_performRefresh(){return x("not implemented")}}function X(e,t){v("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Z{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new J(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Y(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await K(this,this.stsTokenManager.getToken(this.auth,e));return v(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,s.Ku)(e),r=await n.getIdToken(t),i=q(r);v(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:W(V(i.auth_time)),issuedAtTime:W(V(i.iat)),expirationTime:W(V(i.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,s.Ku)(e);await Q(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(v(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Z(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Q(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,r.xZ)(this.auth.app))return Promise.reject(g(this.auth));const e=await this.getIdToken();return await K(this,async function(e,t){return A(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,o,a,l,c;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,u=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(i=t.photoURL)&&void 0!==i?i:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,f=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:x,emailVerified:b,isAnonymous:w,providerData:j,stsTokenManager:N}=t;v(x&&N,e,"internal-error");const k=$.fromJSON(this.name,N);v("string"===typeof x,e,"internal-error"),X(d,e.name),X(u,e.name),v("boolean"===typeof b,e,"internal-error"),v("boolean"===typeof w,e,"internal-error"),X(h,e.name),X(p,e.name),X(m,e.name),X(f,e.name),X(g,e.name),X(y,e.name);const S=new Z({uid:x,auth:e,email:u,emailVerified:b,displayName:d,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:k,createdAt:g,lastLoginAt:y});return j&&Array.isArray(j)&&(S.providerData=j.map(e=>Object.assign({},e))),f&&(S._redirectEventId=f),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new $;r.updateFromServerResponse(t);const s=new Z({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Q(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];v(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?G(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),o=new $;o.updateFromIdToken(n);const a=new Z({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Y(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(a,l),a}}const ee=new Map;function te(e){b(e instanceof Function,"Expected a class definition");let t=ee.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ee.set(e,t),t)}class ne{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ne.type="NONE";const re=ne;function se(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ie{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=se(this.userKey,r.apiKey,s),this.fullPersistenceKey=se("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await U(this.auth,{idToken:e}).catch(()=>{});return t?Z._fromGetAccountInfoResponse(this.auth,t,e):null}return Z._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ie(te(re),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||te(re);const i=se(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const r=await U(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Z._fromGetAccountInfoResponse(e,r,t)}else n=Z._fromJSON(e,t);c!==s&&(o=n),s=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new ie(s,e,n)):new ie(s,e,n)}}function oe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(de(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ae(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(he(t))return"Blackberry";if(pe(t))return"Webos";if(le(t))return"Safari";if((t.includes("chrome/")||ce(t))&&!t.includes("edge/"))return"Chrome";if(ue(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/firefox\//i.test(e)}function le(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/crios\//i.test(e)}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/iemobile/i.test(e)}function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/android/i.test(e)}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/blackberry/i.test(e)}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/webos/i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return me(e)||ue(e)||pe(e)||he(e)||/windows phone/i.test(e)||de(e)}function ge(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=oe((0,s.ZQ)());break;case"Worker":t="".concat(oe((0,s.ZQ)()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(r.MF,"/").concat(i)}class ye{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(s){r(s)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class ve{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsUppercaseLetter)||void 0===s||s),a.isValid&&(a.isValid=null===(i=a.containsNumericCharacter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class xe{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new we(this),this.idTokenSubscription=new we(this),this.beforeStateQueue=new ye(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=te(t)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await ie.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await U(this,{idToken:e}),n=await Z._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,r.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null===s||void 0===s?void 0:s._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==r||!(null===o||void 0===o?void 0:o.user)||(s=o.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return v(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Q(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,r.xZ)(this.app))return Promise.reject(g(this));const t=e?(0,s.Ku)(e):null;return t&&v(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&v(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,r.xZ)(this.app)?Promise.reject(g(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,r.xZ)(this.app)?Promise.reject(g(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(te(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return A(e,"GET","/v2/passwordPolicy",I(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ve(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new s.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return A(e,"POST","/v2/accounts:revokeToken",I(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&te(e)||this._popupRedirectResolver;v(t,this,"argument-error"),this.redirectPersistenceManager=await ie.create(this,[te(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(v(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ge(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(u.logLevel<=i.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];u.warn("Auth (".concat(r.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function be(e){return(0,s.Ku)(e)}class we{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.tD)(e=>this.observer=e)}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let je={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ne(e){return je.loadJS(e)}function ke(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Se{constructor(){this.enterprise=new _e}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _e{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Te="NO_RECAPTCHA";class Ce{constructor(e){this.type="recaptcha-enterprise",this.auth=be(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;L(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Te)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Se).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{B(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new M(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&L(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=je.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Ne(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Ee(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new Ce(e);let o;if(s)o=Te;else try{o=await i.verify(n)}catch(l){o=await i.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ie(e,t,n,r,s){var i,o;if("EMAIL_PASSWORD_PROVIDER"===s){if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Ee(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await Ee(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const s=await Ee(e,t,n);return r(e,s).catch(async s=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(s.code==="auth/".concat("missing-recaptcha-token")||s.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const s=await Ee(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await Ee(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function Ae(e){const t=be(e),n=await B(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new M(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Ce(t).verify()}}function Re(e,t,n){const r=be(e);v(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Oe(t),{host:a,port:l}=function(e){const t=Oe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Pe(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Pe(t)}}}(t),c=null===l?"":":".concat(l),d={url:"".concat(o,"//").concat(a).concat(c,"/")},u=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return v(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void v((0,s.bD)(d,r.config.emulator)&&(0,s.bD)(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=d,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,(0,s.zJ)(a)?((0,s.gE)("".concat(o,"//").concat(a).concat(c)),(0,s.P1)("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Oe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Pe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Fe{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return x("not implemented")}_getIdTokenResponse(e){return x("not implemented")}_linkToIdToken(e,t){return x("not implemented")}_getReauthenticationResolver(e){return x("not implemented")}}async function De(e,t){return A(e,"POST","/v1/accounts:signUp",t)}async function ze(e,t){return O(e,"POST","/v1/accounts:signInWithPassword",I(e,t))}async function Le(e,t){return A(e,"POST","/v1/accounts:sendOobCode",I(e,t))}async function Me(e,t){return Le(e,t)}class Be extends Fe{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Be(e,t,"password")}static _fromEmailAndCode(e,t){return new Be(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ie(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ze,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return O(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{email:this._email,oobCode:this._password});default:p(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ie(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",De,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return O(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:p(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ue(e,t){return O(e,"POST","/v1/accounts:signInWithIdp",I(e,t))}class We extends Fe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new We(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):p("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=o(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new We(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Ue(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ue(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ue(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.Am)(t)}return e}}async function Ve(e,t){return A(e,"POST","/v1/accounts:sendVerificationCode",I(e,t))}const qe={USER_NOT_FOUND:"user-not-found"};class He extends Fe{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new He({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new He({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return O(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await O(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t));if(n.temporaryProof)throw z(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return O(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),qe)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new He({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Ke{constructor(e){var t,n,r,i,o,a;const l=(0,s.I9)((0,s.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,d=null!==(n=l.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);v(c&&d&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=d,this.continueUrl=null!==(i=l.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=l.lang)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,s.I9)((0,s.hp)(e)).link,n=t?(0,s.I9)((0,s.hp)(t)).deep_link_id:null,r=(0,s.I9)((0,s.hp)(e)).deep_link_id;return(r?(0,s.I9)((0,s.hp)(r)).link:null)||r||n||t||e}(e);try{return new Ke(t)}catch(n){return null}}}class Je{constructor(){this.providerId=Je.PROVIDER_ID}static credential(e,t){return Be._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ke.parseLink(t);return v(n,"argument-error"),Be._fromEmailAndCode(e,n.code,n.tenantId)}}Je.PROVIDER_ID="password",Je.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Je.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ye{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Qe extends Ye{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ge extends Qe{constructor(){super("facebook.com")}static credential(e){return We._fromParams({providerId:Ge.PROVIDER_ID,signInMethod:Ge.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ge.credentialFromTaggedObject(e)}static credentialFromError(e){return Ge.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ge.credential(t.oauthAccessToken)}catch(n){return null}}}Ge.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ge.PROVIDER_ID="facebook.com";class $e extends Qe{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return We._fromParams({providerId:$e.PROVIDER_ID,signInMethod:$e.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $e.credentialFromTaggedObject(e)}static credentialFromError(e){return $e.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return $e.credential(n,r)}catch(s){return null}}}$e.GOOGLE_SIGN_IN_METHOD="google.com",$e.PROVIDER_ID="google.com";class Xe extends Qe{constructor(){super("github.com")}static credential(e){return We._fromParams({providerId:Xe.PROVIDER_ID,signInMethod:Xe.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xe.credentialFromTaggedObject(e)}static credentialFromError(e){return Xe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Xe.credential(t.oauthAccessToken)}catch(n){return null}}}Xe.GITHUB_SIGN_IN_METHOD="github.com",Xe.PROVIDER_ID="github.com";class Ze extends Qe{constructor(){super("twitter.com")}static credential(e,t){return We._fromParams({providerId:Ze.PROVIDER_ID,signInMethod:Ze.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ze.credentialFromTaggedObject(e)}static credentialFromError(e){return Ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ze.credential(n,r)}catch(s){return null}}}async function et(e,t){return O(e,"POST","/v1/accounts:signUp",I(e,t))}Ze.TWITTER_SIGN_IN_METHOD="twitter.com",Ze.PROVIDER_ID="twitter.com";class tt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await Z._fromIdTokenResponse(e,n,r),i=nt(n);return new tt({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=nt(n);return new tt({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function nt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class rt extends s.g{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,rt.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new rt(e,t,n,r)}}function st(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw rt._fromErrorAndOperation(e,n,t,r);throw n})}async function it(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await K(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return tt._forOperation(e,"link",r)}async function ot(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:s}=e;if((0,r.xZ)(s.app))return Promise.reject(g(s));const i="reauthenticate";try{const r=await K(e,st(s,i,t,e),n);v(r.idToken,s,"internal-error");const o=q(r.idToken);v(o,s,"internal-error");const{sub:a}=o;return v(e.uid===a,s,"user-mismatch"),tt._forOperation(e,i,r)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&p(s,"user-mismatch"),o}}async function at(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const s="signIn",i=await st(e,s,t),o=await tt._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(o.user),o}async function lt(e,t){return at(be(e),t)}function ct(e,t,n){var r;v((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),v("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),v("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(v(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(v(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function dt(e){const t=be(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ut(e,t,n){const r=be(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&ct(r,s,n),await Ie(r,s,"getOobCode",Me,"EMAIL_PASSWORD_PROVIDER")}async function ht(e,t,n){if((0,r.xZ)(e.app))return Promise.reject(g(e));const s=be(e),i=Ie(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",et,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&dt(e),t}),a=await tt._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function pt(e,t,n){return(0,r.xZ)(e.app)?Promise.reject(g(e)):lt((0,s.Ku)(e),Je.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&dt(e),t})}async function mt(e,t){const n={identifier:t,continueUri:j()?w():"http://localhost"},{signinMethods:r}=await async function(e,t){return A(e,"POST","/v1/accounts:createAuthUri",I(e,t))}((0,s.Ku)(e),n);return r||[]}function ft(e,t){return gt((0,s.Ku)(e),null,t)}async function gt(e,t,n){const{auth:r}=e,s={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(s.email=t),n&&(s.password=n);const i=await K(e,async function(e,t){return A(e,"POST","/v1/accounts:update",t)}(r,s));await e._updateTokensIfNecessary(i,!0)}function yt(e,t,n,r){return(0,s.Ku)(e).onAuthStateChanged(t,n,r)}function vt(e){return(0,s.Ku)(e).signOut()}function xt(e,t){return A(e,"POST","/v2/accounts/mfaEnrollment:start",I(e,t))}new WeakMap;const bt="__sak";class wt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bt,"1"),this.storage.removeItem(bt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class jt extends wt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}jt.type="LOCAL";const Nt=jt;function kt(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(s))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function St(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class _t{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=St(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return kt(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=St(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=St(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=kt(n);const s=setInterval(()=>{const e=kt(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}_t.type="COOKIE";class Tt extends wt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Tt.type="SESSION";const Ct=Tt;class Et{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Et(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(i).map(async e=>e(t.origin,s)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function It(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Et.receivers=[];class At{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const l=It("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(t.data.response);break;default:clearTimeout(c),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Rt(){return window}function Ot(){return"undefined"!==typeof Rt().WorkerGlobalScope&&"function"===typeof Rt().importScripts}const Pt="firebaseLocalStorageDb",Ft="firebaseLocalStorage",Dt="fbase_key";class zt{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lt(e,t){return e.transaction([Ft],t?"readwrite":"readonly").objectStore(Ft)}function Mt(){const e=indexedDB.open(Pt,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Ft,{keyPath:Dt})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Ft)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Pt);return new zt(e).toPromise()}(),t(await Mt()))})})}async function Bt(e,t,n){const r=Lt(e,!0).put({[Dt]:t,value:n});return new zt(r).toPromise()}function Ut(e,t){const n=Lt(e,!0).delete(t);return new zt(n).toPromise()}class Wt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Mt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ot()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Et._getInstance(Ot()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new At(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mt();return await Bt(e,bt,"1"),await Ut(e,bt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Bt(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Lt(e,!1).get(t),r=await new zt(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ut(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Lt(e,!1).getAll();return new zt(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Wt.type="LOCAL";const Vt=Wt;function qt(e,t){return A(e,"POST","/v2/accounts/mfaSignIn:start",I(e,t))}ke("rcb"),new k(3e4,6e4);const Ht="recaptcha";async function Kt(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Ae(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){v("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=Ie(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Te){v((null===n||void 0===n?void 0:n.type)===Ht,e,"argument-error");return xt(e,await Jt(e,t,n))}return xt(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{v("signin"===t.type,e,"internal-error");const i=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;v(i,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Ie(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Te){v((null===n||void 0===n?void 0:n.type)===Ht,e,"argument-error");return qt(e,await Jt(e,t,n))}return qt(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Ie(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Te){v((null===n||void 0===n?void 0:n.type)===Ht,e,"argument-error");return Ve(e,await Jt(e,t,n))}return Ve(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Jt(e,t,n){v(n.type===Ht,e,"argument-error");const r=await n.verify();v("string"===typeof r,e,"argument-error");const s=Object.assign({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Yt{constructor(e){this.providerId=Yt.PROVIDER_ID,this.auth=be(e)}verifyPhoneNumber(e,t){return Kt(this.auth,e,(0,s.Ku)(t))}static credential(e,t){return He._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Yt.credentialFromTaggedObject(t)}static credentialFromError(e){return Yt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?He._fromTokenResponse(n,r):null}}function Qt(e,t){return t?te(t):(v(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Yt.PROVIDER_ID="phone",Yt.PHONE_SIGN_IN_METHOD="phone";class Gt extends Fe{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ue(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ue(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ue(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $t(e){return at(e.auth,new Gt(e),e.bypassAuthState)}function Xt(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),ot(n,new Gt(e),e.bypassAuthState)}async function Zt(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),it(n,new Gt(e),e.bypassAuthState)}class en{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:o}=e;if(i)return void this.reject(i);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $t;case"linkViaPopup":case"linkViaRedirect":return Zt;case"reauthViaPopup":case"reauthViaRedirect":return Xt;default:p(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const tn=new k(2e3,1e4);class nn extends en{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,nn.currentPopupAction&&nn.currentPopupAction.cancel(),nn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return v(e,this.auth,"internal-error"),e}async onExecution(){b(1===this.filter.length,"Popup operations only handle one event");const e=It();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(m(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(m(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(m(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,tn.get())};e()}}nn.currentPopupAction=null;const rn=new Map;class sn extends en{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=rn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ln(t),r=an(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}rn.set(this.auth._key(),e)}return this.bypassAuthState||rn.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function on(e,t){rn.set(e._key(),t)}function an(e){return te(e._redirectPersistence)}function ln(e){return se("pendingRedirect",e.config.apiKey,e.name)}async function cn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const s=be(e),i=Qt(s,t),o=new sn(s,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,t)),a}class dn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!hn(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(m(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(un(e))}saveEventToCache(e){this.cachedEventUids.add(un(e)),this.lastProcessedEventTime=Date.now()}}function un(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function hn(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const pn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mn=/^https?/;async function fn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return A(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(gn(r))return}catch(n){}p(e,"unauthorized-domain")}function gn(e){const t=w(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!mn.test(n))return!1;if(pn.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const yn=new k(3e4,6e4);function vn(){const e=Rt().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function xn(e){return new Promise((t,n)=>{var r,s,i;function o(){vn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vn(),n(m(e,"network-request-failed"))},timeout:yn.get()})}if(null===(s=null===(r=Rt().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Rt().gapi)||void 0===i?void 0:i.load)){const t=ke("iframefcb");return Rt()[t]=()=>{gapi.load?o():n(m(e,"network-request-failed"))},Ne("".concat(je.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw bn=null,e})}let bn=null;const wn=new k(5e3,15e3),jn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kn(e){const t=e.config;v(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?S(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:t.apiKey,appName:e.name,v:r.MF},o=Nn.get(e.config.apiHost);o&&(i.eid=o);const a=e._getFrameworks();return a.length&&(i.fw=a.join(",")),"".concat(n,"?").concat((0,s.Am)(i).slice(1))}async function Sn(e){const t=await function(e){return bn=bn||xn(e),bn}(e),n=Rt().gapi;return v(n,e,"internal-error"),t.open({where:document.body,url:kn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jn,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=m(e,"network-request-failed"),i=Rt().setTimeout(()=>{r(s)},wn.get());function o(){Rt().clearTimeout(i),n(t)}t.ping(o).then(o,()=>{r(s)})}))}const _n={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Tn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Cn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},_n),{width:r.toString(),height:i.toString(),top:o,left:a}),d=(0,s.ZQ)().toLowerCase();n&&(l=ce(d)?"_blank":n),ae(d)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return me(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(d)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new Tn(null);const h=window.open(t||"",l,u);v(h,e,"popup-blocked");try{h.focus()}catch(p){}return new Tn(h)}const En="__/auth/handler",In="emulator/auth/handler",An=encodeURIComponent("fac");async function Rn(e,t,n,i,o,a){v(e.config.authDomain,e,"auth-domain-config-required"),v(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:r.MF,eventId:o};if(t instanceof Ye){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,s.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof Qe){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const d=await e._getAppCheckToken(),u=d?"#".concat(An,"=").concat(encodeURIComponent(d)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(En);return S(t,In)}(e),"?").concat((0,s.Am)(c).slice(1)).concat(u)}const On="webStorageSupport";const Pn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ct,this._completeRedirectFn=cn,this._overrideRedirectResult=on}async _openPopup(e,t,n,r){var s;b(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Cn(e,await Rn(e,t,n,w(),r),It())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Rt().location.href=e}(await Rn(e,t,n,w(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Sn(e),n=new dn(e);return t.register("authEvent",t=>{v(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(On,{type:On},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[On];void 0!==s&&t(!!s),p(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fn(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fe()||le()||me()}};var Fn="@firebase/auth",Dn="1.10.8";class zn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ln=(0,s.XA)("authIdTokenMaxAge")||300;let Mn=null;const Bn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ln)return;const s=null===n||void 0===n?void 0:n.token;Mn!==s&&(Mn=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:"Bearer ".concat(s)}:{}}))};function Un(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();const t=(0,r.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,r.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,s.bD)(r,null!==t&&void 0!==t?t:{}))return e;p(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Pn,persistence:[Vt,Nt,Ct]}),i=(0,s.XA)("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=Bn(e.toString());!function(e,t,n){(0,s.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,s.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}const o=(0,s.Tj)("auth");return o&&Re(n,"http://".concat(o)),n}var Wn;je={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=m("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Wn="Browser",(0,r.om)(new a.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;v(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Wn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ge(Wn)},c=new xe(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(te);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,r.om)(new a.uA("auth-internal",e=>(e=>new zn(e))(be(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KO)(Fn,Dn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Wn)),(0,r.KO)(Fn,Dn,"esm2017")},472:(e,t,n)=>{"use strict";n.d(t,{addDoc:()=>kc,collection:()=>il,kd:()=>Nc,doc:()=>ol,getCountFromServer:()=>Cc,x7:()=>vc,getDocs:()=>bc,aU:()=>hl,GV:()=>Ic,limit:()=>sc,aQ:()=>Sc,orderBy:()=>nc,query:()=>$l,serverTimestamp:()=>Ec,BN:()=>wc,startAfter:()=>oc,updateDoc:()=>jc,where:()=>Zl});var r,s,i=n(150),o=n(812),a=n(443),l=n(529),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},d={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;o=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(o<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((i=(t=n+((o=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((s=i+((o=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function i(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,o=0;o<t;){if(0==i)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(s[i++]=e.charCodeAt(o++),i==this.blockSize){n(this,s),i=0;break}}else for(;o<t;)if(s[i++]=e[o++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var o={};function a(e){return-128<=e&&128>e?function(e,t){var n=o;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new i([0|e],0>e?-1:0)}):new i([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return f(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var c=a(0),u=a(1),h=a(16777216);function p(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function m(e){return-1==e.h}function f(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(u)}function g(e,t){return e.add(f(t))}function y(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function x(e,t){if(p(t))throw Error("division by zero");if(p(e))return new v(c,c);if(m(e))return t=x(f(e),t),new v(f(t.g),f(t.h));if(m(t))return t=x(e,f(t)),new v(f(t.g),t.h);if(30<e.g.length){if(m(e)||m(t))throw Error("slowDivide_ only works with positive integers.");for(var n=u,r=t;0>=r.l(e);)n=b(n),r=b(r);var s=w(n,1),i=w(r,1);for(r=w(r,2),n=w(n,2);!p(r);){var o=i.add(r);0>=o.l(e)&&(s=s.add(n),i=o),r=w(r,1),n=w(n,1)}return t=g(e,s.j(t)),new v(s,t)}for(s=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(i=l(n)).j(t);m(o)||0<o.l(e);)o=(i=l(n-=r)).j(t);p(i)&&(i=u),s=s.add(i),e=g(e,o)}return new v(s,e)}function b(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function w(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],o=0;o<r;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(m(this))return-f(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(p(this))return"0";if(m(this))return"-"+f(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var s=x(n,t).g,i=((0<(n=g(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(p(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return m(e=g(this,e))?-1:p(e)?0:1},e.abs=function(){return m(this)?f(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var o=r+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(p(this)||p(e))return c;if(m(this))return m(e)?f(this).j(f(e)):f(f(this).j(e));if(m(e))return f(this.j(f(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var o=this.i(r)>>>16,a=65535&this.i(r),d=e.i(s)>>>16,u=65535&e.i(s);n[2*r+2*s]+=a*u,y(n,2*r+2*s),n[2*r+2*s+1]+=o*u,y(n,2*r+2*s+1),n[2*r+2*s+1]+=a*d,y(n,2*r+2*s+1),n[2*r+2*s+2]+=o*d,y(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return x(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,s=d.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=l,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return f(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),s=c,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),a=parseInt(t.substring(i,i+o),n);8>o?(o=l(Math.pow(n,o)),s=s.j(o).add(l(a))):s=(s=s.j(r)).add(l(a))}return s},r=d.Integer=i}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var u,h,p,m,f,g,y,v,x="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},b={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof x&&x];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in s))break e;s=s[o]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function d(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function w(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function j(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function N(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function k(e){return/^[\s\xa0]*$/.test(e)}function S(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function _(e){return _[" "](e),e}_[" "]=function(){};var T=-1!=S().indexOf("Gecko")&&!(-1!=S().toLowerCase().indexOf("webkit")&&-1==S().indexOf("Edge"))&&!(-1!=S().indexOf("Trident")||-1!=S().indexOf("MSIE"))&&-1==S().indexOf("Edge");function C(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function E(e){const t={};for(const n in e)t[n]=e[n];return t}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<I.length;t++)n=I[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function R(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function O(e){s.setTimeout(()=>{throw e},0)}function P(){var e=M;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var F=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new D,e=>e.reset());class D{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let z,L=!1,M=new class{constructor(){this.h=this.g=null}add(e,t){const n=F.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},B=()=>{const e=s.Promise.resolve(void 0);z=()=>{e.then(U)}};var U=()=>{for(var e;e=P();){try{e.h.call(e.g)}catch(n){O(n)}var t=F;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}L=!1};function W(){this.s=this.s,this.C=this.C}function V(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},V.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function H(e,t){if(V.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(T){e:{try{_(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:K[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&H.aa.h.call(this)}}w(H,V);var K={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var J="closure_listenable_"+(1e6*Math.random()|0),Y=0;function Q(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++Y,this.da=this.fa=!1}function G(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function $(e){this.src=e,this.g={},this.h=0}function X(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(G(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Z(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}$.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=Z(e,t,r,s);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Q(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var ee="closure_lm_"+(1e6*Math.random()|0),te={};function ne(e,t,n,r,s){if(r&&r.once)return se(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)ne(e,t[i],n,r,s);return null}return n=ue(n),e&&e[J]?e.K(t,n,o(r)?!!r.capture:!!r,s):re(e,t,n,!1,r,s)}function re(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var a=o(s)?!!s.capture:!!s,l=ce(e);if(l||(e[ee]=l=new $(e)),(n=l.add(t,n,r,a,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=le;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)q||(s=a),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(ae(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function se(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)se(e,t[i],n,r,s);return null}return n=ue(n),e&&e[J]?e.L(t,n,o(r)?!!r.capture:!!r,s):re(e,t,n,!0,r,s)}function ie(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)ie(e,t[i],n,r,s);else r=o(r)?!!r.capture:!!r,n=ue(n),e&&e[J]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Z(i=e.g[t],n,r,s))&&(G(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=ce(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Z(t,n,r,s)),(n=-1<e?t[e]:null)&&oe(n))}function oe(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[J])X(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ae(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ce(t))?(X(n,e),0==n.h&&(n.src=null,t[ee]=null)):G(e)}}}function ae(e){return e in te?te[e]:te[e]="on"+e}function le(e,t){if(e.da)e=!0;else{t=new H(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&oe(e),e=n.call(r,t)}return e}function ce(e){return(e=e[ee])instanceof $?e:null}var de="__closure_events_fn_"+(1e9*Math.random()>>>0);function ue(e){return"function"===typeof e?e:(e[de]||(e[de]=function(t){return e.handleEvent(t)}),e[de])}function he(){W.call(this),this.i=new $(this),this.M=this,this.F=null}function pe(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new V(t,e);else if(t instanceof V)t.target=t.target||e;else{var s=t;A(t=new V(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=me(o,r,!0,t)&&s}if(s=me(o=t.g=e,r,!0,t)&&s,s=me(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=me(o=t.g=n[i],r,!1,t)&&s}function me(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&X(e.i,o),s=!1!==a.call(l,r)&&s}}return s&&!r.defaultPrevented}function fe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ge(e){e.g=fe(()=>{e.g=null,e.i&&(e.i=!1,ge(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}w(he,W),he.prototype[J]=!0,he.prototype.removeEventListener=function(e,t,n,r){ie(this,e,t,n,r)},he.prototype.N=function(){if(he.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)G(n[r]);delete t.g[e],t.h--}}this.F=null},he.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},he.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ye extends W{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ve(e){W.call(this),this.h=e,this.g={}}w(ve,W);var xe=[];function be(e){C(e.g,function(e,t){this.g.hasOwnProperty(t)&&oe(e)},e),e.g={}}ve.prototype.N=function(){ve.aa.N.call(this),be(this)},ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var we=s.JSON.stringify,je=s.JSON.parse,Ne=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function ke(){}function Se(e){return e.h||(e.h=e.i())}function _e(){}ke.prototype.h=null;var Te={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ce(){V.call(this,"d")}function Ee(){V.call(this,"c")}w(Ce,V),w(Ee,V);var Ie={},Ae=null;function Re(){return Ae=Ae||new he}function Oe(e){V.call(this,Ie.La,e)}function Pe(e){const t=Re();pe(t,new Oe(t))}function Fe(e,t){V.call(this,Ie.STAT_EVENT,e),this.stat=t}function De(e){const t=Re();pe(t,new Fe(t,e))}function ze(e,t){V.call(this,Ie.Ma,e),this.size=t}function Le(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Me(){this.g=!0}function Be(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<s.length;o++)s[o]=""}}}return we(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}Ie.La="serverreachability",w(Oe,V),Ie.STAT_EVENT="statevent",w(Fe,V),Ie.Ma="timingevent",w(ze,V),Me.prototype.xa=function(){this.g=!1},Me.prototype.info=function(){};var Ue,We={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ve={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function qe(){}function He(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ve(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ke}function Ke(){this.i=null,this.g="",this.h=!1}w(qe,ke),qe.prototype.g=function(){return new XMLHttpRequest},qe.prototype.i=function(){return{}},Ue=new qe;var Je={},Ye={};function Qe(e,t,n){e.L=1,e.v=wt(gt(t)),e.m=n,e.P=!0,Ge(e,null)}function Ge(e,t){e.F=Date.now(),Ze(e),e.A=gt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Ft(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Ke,e.g=Nn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ye(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(xe[0]=s.toString()),s=xe);for(var i=0;i<s.length;i++){var o=ne(n,s[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?E(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Pe(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var u=d.split("_");o=2<=u.length&&"type"==u[1]?o+(d+"=")+c+"&":o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function $e(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Xe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ye:(n=Number(t.substring(n,r)),isNaN(n)?Je:(r+=1)+n>t.length?Ye:(t=t.slice(r,r+n),e.C=r+n,t))}function Ze(e){e.S=Date.now()+e.I,et(e,e.I)}function et(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Le(c(e.ba,e),t)}function tt(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function nt(e){0==e.j.G||e.J||vn(e.j,e)}function rt(e){tt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,be(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function st(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ct(n.h,e)))if(!e.K&&ct(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(d){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;yn(n),an(n)}mn(n),De(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Le(c(n.Za,n),6e3));if(1>=lt(n.h)&&n.ca){try{n.ca()}catch(d){}n.ca=void 0}}else bn(n,11)}else if((e.K||n.g==e)&&yn(n),!k(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const d=c[5];null!=d&&"number"===typeof d&&0<d&&(r=1.5*d,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(dt(i,i.h),i.h=null))}if(r.D){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,bt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=jn(r,r.J?r.ia:null,r.W),o.K){ut(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(tt(a),Ze(a)),r.g=o}else pn(r);0<n.i.length&&cn(n)}else"stop"!=c[0]&&"close"!=c[0]||bn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?bn(n,7):on(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Pe()}catch(d){}}He.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},He.prototype.Y=function(e){try{if(e==this.g)e:{const h=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=h||7==t||Pe(),tt(this);var n=this.g.Z();this.X=n;t:if($e(this)){var r=nn(this.g);e="";var i=r.length,o=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rt(this),nt(this);var a="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+o})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(l)){var d=l;break t}}d=null}if(!(n=d)){this.o=!1,this.s=3,De(12),rt(this),nt(this);break e}Be(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,st(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Xe(this,a),e==Ye){4==h&&(this.s=4,De(14),n=!1),Be(this.i,this.l,null,"[Incomplete Response]");break}if(e==Je){this.s=4,De(15),Be(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Be(this.i,this.l,e,null),st(this,e)}if($e(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,De(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var u=this.j;u.g==this&&u.ba&&!u.M&&(u.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),fn(u),u.M=!0,De(11))}}else Be(this.i,this.l,a,"[Invalid Chunked Response]"),rt(this),nt(this)}else Be(this.i,this.l,a,null),st(this,a);4==h&&rt(this),this.o&&!this.J&&(4==h?vn(this.j,this):(this.o=!1,Ze(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(k(e[r]))continue;var n=R(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,De(12)):(this.s=0,De(13)),rt(this),nt(this)}}}catch(h){}},He.prototype.cancel=function(){this.J=!0,rt(this)},He.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Pe(),De(17)),rt(this),this.s=2,nt(this)):et(this,this.S-e)};var it=class{constructor(e,t){this.g=e,this.map=t}};function ot(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function at(e){return!!e.h||!!e.g&&e.g.size>=e.j}function lt(e){return e.h?1:e.g?e.g.size:0}function ct(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function dt(e,t){e.g?e.g.add(t):e.h=t}function ut(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ht(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return j(e.i)}function pt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,o=0;o<s;o++)t.call(void 0,r[o],n&&n[o],e)}ot.prototype.cancel=function(){if(this.i=ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ft(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ft){this.h=e.h,yt(this,e.j),this.o=e.o,this.g=e.g,vt(this,e.s),this.l=e.l;var t=e.i,n=new At;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),xt(this,n),this.m=e.m}else e&&(t=String(e).match(mt))?(this.h=!1,yt(this,t[1]||"",!0),this.o=jt(t[2]||""),this.g=jt(t[3]||"",!0),vt(this,t[4]),this.l=jt(t[5]||"",!0),xt(this,t[6]||"",!0),this.m=jt(t[7]||"")):(this.h=!1,this.i=new At(null,this.h))}function gt(e){return new ft(e)}function yt(e,t,n){e.j=n?jt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function vt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function xt(e,t,n){t instanceof At?(e.i=t,function(e,t){t&&!e.j&&(Rt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Ot(this,t),Ft(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=Nt(t,Et)),e.i=new At(t,e.h))}function bt(e,t,n){e.i.set(t,n)}function wt(e){return bt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function jt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Nt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,kt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function kt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ft.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Nt(t,_t,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(Nt(t,_t,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Nt(n,"/"==n.charAt(0)?Ct:Tt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",Nt(n,It)),e.join("")};var St,_t=/[#\/\?@]/g,Tt=/[#\?:]/g,Ct=/[#\?]/g,Et=/[#\?@]/g,It=/#/g;function At(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Rt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ot(e,t){Rt(e),t=Dt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Pt(e,t){return Rt(e),t=Dt(e,t),e.g.has(t)}function Ft(e,t,n){Ot(e,t),0<n.length&&(e.i=null,e.g.set(Dt(e,t),j(n)),e.h+=n.length)}function Dt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function zt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Lt(){this.g=new Ne}function Mt(e,t,n){const r=n||"";try{pt(e,function(e,n){let s=e;o(e)&&(s=we(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Bt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ut(e,t){he.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Wt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Vt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,qt(e)}function qt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ht(e){let t="";return C(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Kt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ht(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):bt(e,t,n))}function Jt(e){he.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=At.prototype).add=function(e,t){Rt(this),this.i=null,e=Dt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Rt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Rt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Rt(this);let t=[];if("string"===typeof e)Pt(this,e)&&(t=t.concat(this.g.get(Dt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Rt(this),this.i=null,Pt(this,e=Dt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var s=i;""!==o[r]&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")},w(Bt,ke),Bt.prototype.g=function(){return new Ut(this.l,this.j)},Bt.prototype.i=(St={},function(){return St}),w(Ut,he),(e=Ut.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,qt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,qt(this)),this.g&&(this.readyState=3,qt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Vt(this):qt(this),3==this.readyState&&Wt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Vt(this))},e.Qa=function(e){this.g&&(this.response=e,Vt(this))},e.ga=function(){this.g&&Vt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ut.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),w(Jt,he);var Yt=/^https?$/i,Qt=["POST","PUT"];function Gt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,$t(e),Zt(e)}function $t(e){e.A||(e.A=!0,pe(e,"complete"),pe(e,"error"))}function Xt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))fe(e.Ea,0,e);else if(pe(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var o=String(e.D).match(mt)[1]||null;!o&&s.self&&s.self.location&&(o=s.self.location.protocol.slice(0,-1)),i=!Yt.test(o?o.toLowerCase():"")}n=i}if(n)pe(e,"complete"),pe(e,"success");else{e.m=6;try{var a=2<tn(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",$t(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||pe(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function en(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sn(e){this.Aa=0,this.i=[],this.j=new Me,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new ot(e&&e.concurrentRequestLimit),this.Da=new Lt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function on(e){if(ln(e),3==e.G){var t=e.U++,n=gt(e.I);if(bt(n,"SID",e.K),bt(n,"RID",t),bt(n,"TYPE","terminate"),un(e,n),(t=new He(e,e.j,t)).L=2,t.v=wt(gt(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=Nn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ze(t)}wn(e)}function an(e){e.g&&(fn(e),e.g.cancel(),e.g=null)}function ln(e){an(e),e.u&&(s.clearTimeout(e.u),e.u=null),yn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function cn(e){if(!at(e.h)&&!e.s){e.s=!0;var t=e.Ga;z||B(),L||(z(),L=!0),M.add(t,e),e.B=0}}function dn(e,t){var n;n=t?t.l:e.U++;const r=gt(e.I);bt(r,"SID",e.K),bt(r,"RID",n),bt(r,"AID",e.T),un(e,r),e.m&&e.o&&Kt(r,e.m,e.o),n=new He(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),dt(e.h,n),Qe(n,r,t)}function un(e,t){e.H&&C(e.H,function(e,n){bt(t,n,e)}),e.l&&pt({},function(e,n){bt(t,n,e)})}function hn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=s[a].g;const l=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),o=!1;else try{Mt(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function pn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;z||B(),L||(z(),L=!0),M.add(t,e),e.v=0}}function mn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Le(c(e.Fa,e),xn(e,e.v)),e.v++,!0)}function fn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function gn(e){e.g=new He(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=gt(e.qa);bt(t,"RID","rpc"),bt(t,"SID",e.K),bt(t,"AID",e.T),bt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&bt(t,"TO",e.ja),bt(t,"TYPE","xmlhttp"),un(e,t),e.m&&e.o&&Kt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=wt(gt(t)),n.m=null,n.P=!0,Ge(n,e)}function yn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function vn(e,t){var n=null;if(e.g==t){yn(e),fn(e),e.g=null;var r=2}else{if(!ct(e.h,t))return;n=t.D,ut(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;pe(r=Re(),new ze(r,n)),cn(e)}else pn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(lt(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Le(c(e.Ga,e,t),xn(e,e.B)),e.B++,!0))}(e,t)||2==r&&mn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:bn(e,5);break;case 4:bn(e,10);break;case 3:bn(e,6);break;default:bn(e,2)}}function xn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function bn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ft(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||yt(r,"https"),wt(r),t?function(e,t){const n=new Me;if(s.Image){const r=new Image;r.onload=d(zt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=d(zt,n,"TestLoadImage: error",!1,t,r),r.onabort=d(zt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=d(zt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Me;const n=new AbortController,r=setTimeout(()=>{n.abort(),zt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?zt(0,0,!0,t):zt(0,0,!1,t)}).catch(()=>{clearTimeout(r),zt(0,0,!1,t)})}(r.toString(),n)}else De(2);e.G=0,e.l&&e.l.sa(t),wn(e),ln(e)}function wn(e){if(e.G=0,e.ka=[],e.l){const t=ht(e.h);0==t.length&&0==e.i.length||(N(e.ka,t),N(e.ka,e.i),e.h.i.length=0,j(e.i),e.i.length=0),e.l.ra()}}function jn(e,t,n){var r=n instanceof ft?gt(n):new ft(n);if(""!=r.g)t&&(r.g=t+"."+r.g),vt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new ft(null);r&&yt(o,r),t&&(o.g=t),i&&vt(o,i),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&bt(r,n,t),bt(r,"VER",e.la),un(e,r),r}function Nn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Jt(new Bt({eb:n})):new Jt(e.pa)).Ha(e.J),t}function kn(){}function Sn(){}function _n(e,t){he.call(this),this.g=new sn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!k(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new En(this)}function Tn(e){Ce.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Cn(){Ee.call(this),this.status=1}function En(e){this.g=e}(e=Jt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ue.g(),this.v=this.o?Se(this.o):Se(Ue),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Gt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Qt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Gt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,pe(this,"complete"),pe(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Jt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Xt(this):this.bb())},e.bb=function(){Xt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(St){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(St){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),je(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=sn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){De(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=jn(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new He(this,this.j,e);let i=this.o;if(this.S&&(i?(i=E(i),A(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,s,t),bt(n=gt(this.I),"RID",e),bt(n,"CVER",22),this.D&&bt(n,"X-HTTP-Session-Id",this.D),un(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Ht(i)))+"&"+t:this.m&&Kt(n,this.m,i)),dt(this.h,s),this.Ua&&bt(n,"TYPE","init"),this.P?(bt(n,"$req",t),bt(n,"SID","null"),s.T=!0,Qe(s,n,null)):Qe(s,n,t),this.G=2}}else 3==this.G&&(e?dn(this,e):0==this.i.length||at(this.h)||dn(this))},e.Fa=function(){if(this.u=null,gn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Le(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,De(10),an(this),gn(this))},e.Za=function(){null!=this.C&&(this.C=null,an(this),mn(this),De(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=kn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Sn.prototype.g=function(e,t){return new _n(e,t)},w(_n,he),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){on(this.g)},_n.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=we(e),e=n);t.i.push(new it(t.Ya++,e)),3==t.G&&cn(t)},_n.prototype.N=function(){this.g.l=null,delete this.j,on(this.g),delete this.g,_n.aa.N.call(this)},w(Tn,Ce),w(Cn,Ee),w(En,kn),En.prototype.ua=function(){pe(this.g,"a")},En.prototype.ta=function(e){pe(this.g,new Tn(e))},En.prototype.sa=function(e){pe(this.g,new Cn)},En.prototype.ra=function(){pe(this.g,"b")},Sn.prototype.createWebChannel=Sn.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,v=b.createWebChannelTransport=function(){return new Sn},y=b.getStatEventTarget=function(){return Re()},g=b.Event=Ie,f=b.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},We.NO_ERROR=0,We.TIMEOUT=8,We.HTTP_ERROR=6,m=b.ErrorCode=We,Ve.COMPLETE="complete",p=b.EventType=Ve,_e.EventType=Te,Te.OPEN="a",Te.CLOSE="b",Te.ERROR="c",Te.MESSAGE="d",he.prototype.listen=he.prototype.K,h=b.WebChannel=_e,b.FetchXmlHttpFactory=Bt,Jt.prototype.listenOnce=Jt.prototype.L,Jt.prototype.getLastError=Jt.prototype.Ka,Jt.prototype.getLastErrorCode=Jt.prototype.Ba,Jt.prototype.getStatus=Jt.prototype.Z,Jt.prototype.getResponseJson=Jt.prototype.Oa,Jt.prototype.getResponseText=Jt.prototype.oa,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Ha,u=b.XhrIo=Jt}).apply("undefined"!==typeof x?x:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const w="@firebase/firestore",j="4.8.0";class N{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}N.UNAUTHENTICATED=new N(null),N.GOOGLE_CREDENTIALS=new N("google-credentials-uid"),N.FIRST_PARTY=new N("first-party-uid"),N.MOCK_USER=new N("mock-user");let k="11.10.0";const S=new a.Vy("@firebase/firestore");function _(){return S.logLevel}function T(e){if(S.logLevel<=a.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(I);S.debug("Firestore (".concat(k,"): ").concat(e),...s)}}function C(e){if(S.logLevel<=a.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(I);S.error("Firestore (".concat(k,"): ").concat(e),...s)}}function E(e){if(S.logLevel<=a.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(I);S.warn("Firestore (".concat(k,"): ").concat(e),...s)}}function I(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function A(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,R(e,r,n)}function R(e,t,n){let r="FIRESTORE (".concat(k,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw C(r),new Error(r)}function O(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||R(t,s,r)}function P(e,t){return e}const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class D extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class z{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class L{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class M{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(N.UNAUTHENTICATED))}shutdown(){}}class B{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class U{constructor(e){this.t=e,this.currentUser=N.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){O(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new z;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new z,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{T("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new z)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(O("string"==typeof t.accessToken,31837,{l:t}),new L(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return O(null===e||"string"==typeof e,2055,{h:e}),new N(e)}}class W{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=N.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class V{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new W(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(N.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,i.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){O(void 0===this.o,3512);const n=e=>{null!=e.error&&T("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,T("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{T("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new q(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(O("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new q(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function K(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function J(){return new TextEncoder}class Y{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=K(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Q(e,t){return e<t?-1:e>t?1:0}function G(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return Q(r,s);{const i=J(),o=X(i.encode($(e,n)),i.encode($(t,n)));return 0!==o?o:Q(r,s)}}n+=r>65535?2:1}return Q(e.length,t.length)}function $(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function X(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Q(e[n],t[n]);return Q(e.length,t.length)}function Z(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const ee="__name__";class te{constructor(e,t,n){void 0===t?t=0:t>e.length&&A(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&A(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===te.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof te?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=te.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Q(e.length,t.length)}static compareSegments(e,t){const n=te.isNumericId(e),r=te.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?te.extractNumericId(e).compare(te.extractNumericId(t)):G(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class ne extends te{construct(e,t,n){return new ne(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new D(F.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new ne(e)}static emptyPath(){return new ne([])}}const re=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class se extends te{construct(e,t,n){return new se(e,t,n)}static isValidIdentifier(e){return re.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),se.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ee}static keyField(){return new se([ee])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new D(F.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new D(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new D(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new D(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new se(t)}static emptyPath(){return new se([])}}class ie{constructor(e){this.path=e}static fromPath(e){return new ie(ne.fromString(e))}static fromName(e){return new ie(ne.fromString(e).popFirst(5))}static empty(){return new ie(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ne.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new ne(e.slice()))}}function oe(e,t,n){if(!n)throw new D(F.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ae(e){if(!ie.isDocumentKey(e))throw new D(F.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function le(e){if(ie.isDocumentKey(e))throw new D(F.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ce(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function de(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":A(12329,{type:typeof e})}function ue(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new D(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=de(e);throw new D(F.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function he(e,t){if(t<=0)throw new D(F.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function pe(e,t){const n={typeString:e};return t&&(n.value=t),n}function me(e,t){if(!ce(e))throw new D(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(s&&typeof o!==s){n="JSON field '".concat(r,"' must be a ").concat(s,".");break}if(void 0!==i&&o!==i.value){n="Expected '".concat(r,"' field to equal '").concat(i.value,"'");break}}if(n)throw new D(F.INVALID_ARGUMENT,n);return!0}const fe=-62135596800,ge=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ge);return new ye(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new D(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new D(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fe)throw new D(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ge}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(me(e,ye._jsonSchema))return new ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fe;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ye._jsonSchemaVersion="firestore/timestamp/1.0",ye._jsonSchema={type:pe("string",ye._jsonSchemaVersion),seconds:pe("number"),nanoseconds:pe("number")};class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new ye(0,0))}static max(){return new ve(new ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const xe=-1;class be{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}be.UNKNOWN_ID=-1;function we(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=ve.fromTimestamp(1e9===r?new ye(n+1,0):new ye(n,r));return new Ne(s,ie.empty(),t)}function je(e){return new Ne(e.readTime,e.key,xe)}class Ne{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ne(ve.min(),ie.empty(),xe)}static max(){return new Ne(ve.max(),ie.empty(),xe)}}function ke(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ie.comparator(e.documentKey,t.documentKey),0!==n?n:Q(e.largestBatchId,t.largestBatchId))}const Se="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _e{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Te(e){if(e.code!==F.FAILED_PRECONDITION||e.message!==Se)throw e;T("LocalStore","Unexpectedly lost primary lease")}class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&A(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ce((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ce?t:Ce.resolve(t)}catch(e){return Ce.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.reject(t)}static resolve(e){return new Ce((t,n)=>{t(e)})}static reject(e){return new Ce((t,n)=>{n(e)})}static waitFor(e){return new Ce((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Ce.resolve(!1);for(const n of e)t=t.next(e=>e?Ce.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Ce((n,r)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const l=a;t(e[l]).next(e=>{i[l]=e,++o,o===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Ce((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function Ee(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ie(e){return"IndexedDbTransactionError"===e.name}class Ae{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Ae.ue=-1;const Re=-1;function Oe(e){return null==e}function Pe(e){return 0===e&&1/e==-1/0}function Fe(e){return"number"==typeof e&&Number.isInteger(e)&&!Pe(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const De="\x01";function ze(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Me(t)),t=Le(e.get(n),t);return Me(t)}function Le(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case De:n+="\x01\x11";break;default:n+=t}}return n}function Me(e){return e+De+"\x01"}const Be="remoteDocuments",Ue="owner",We="mutationQueues",Ve="mutations";const qe="documentMutations",He="remoteDocumentsV14",Ke="remoteDocumentGlobal",Je="targets",Ye="targetDocuments",Qe="targetGlobal",Ge="collectionParents",$e="clientMetadata",Xe="bundles",Ze="namedQueries",et="indexConfiguration",tt="indexState",nt="indexEntries",rt="documentOverlays",st="globals",it=[We,Ve,qe,Be,Je,Ue,Qe,Ye,$e,Ke,Ge,Xe,Ze],ot=[We,Ve,qe,He,Je,Ue,Qe,Ye,$e,Ke,Ge,Xe,Ze,rt],at=ot,lt=[...at,et,tt,nt];function ct(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function dt(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ut(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r,e));return n}function ht(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class pt{constructor(e,t){this.comparator=e,this.root=t||ft.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mt(this.root,e,this.comparator,!1)}getReverseIterator(){return new mt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mt(this.root,e,this.comparator,!0)}}class mt{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:ft.RED,this.left=null!=r?r:ft.EMPTY,this.right=null!=s?s:ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new ft(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ft.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw A(43730,{key:this.key,value:this.value});if(this.right.isRed())throw A(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw A(27949);return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1,ft.EMPTY=new class{constructor(){this.size=0}get key(){throw A(57766)}get value(){throw A(16141)}get color(){throw A(16727)}get left(){throw A(29726)}get right(){throw A(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yt(this.data.getIterator())}getIteratorFrom(e){return new yt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof gt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gt(this.comparator);return t.data=e,t}}class yt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class vt{constructor(e){this.fields=e,e.sort(se.comparator)}static empty(){return new vt([])}unionWith(e){let t=new gt(se.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new vt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Z(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class xt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new xt("Invalid base64 string: "+e):e}}(e);return new bt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const wt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jt(e){if(O(!!e,39018),"string"==typeof e){let t=0;const n=wt.exec(e);if(O(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Nt(e.seconds),nanos:Nt(e.nanos)}}function Nt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function kt(e){return"string"==typeof e?bt.fromBase64String(e):bt.fromUint8Array(e)}const St="server_timestamp",_t="__type__",Tt="__previous_value__",Ct="__local_write_time__";function Et(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[_t])||void 0===n?void 0:n.stringValue)===St}function It(e){const t=e.mapValue.fields[Tt];return Et(t)?It(t):t}function At(e){const t=jt(e.mapValue.fields[Ct].timestampValue);return new ye(t.seconds,t.nanos)}class Rt{constructor(e,t,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Ot="(default)";class Pt{constructor(e,t){this.projectId=e,this.database=t||Ot}static empty(){return new Pt("","")}get isDefaultDatabase(){return this.database===Ot}isEqual(e){return e instanceof Pt&&e.projectId===this.projectId&&e.database===this.database}}const Ft="__type__",Dt="__max__",zt={mapValue:{fields:{__type__:{stringValue:Dt}}}},Lt="__vector__",Mt="value";function Bt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Et(e)?4:rn(e)?9007199254740991:tn(e)?10:11:A(28295,{value:e})}function Ut(e,t){if(e===t)return!0;const n=Bt(e);if(n!==Bt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return At(e).isEqual(At(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=jt(e.timestampValue),r=jt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return kt(e.bytesValue).isEqual(kt(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Nt(e.geoPointValue.latitude)===Nt(t.geoPointValue.latitude)&&Nt(e.geoPointValue.longitude)===Nt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Nt(e.integerValue)===Nt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Nt(e.doubleValue),r=Nt(t.doubleValue);return n===r?Pe(n)===Pe(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Z(e.arrayValue.values||[],t.arrayValue.values||[],Ut);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ct(n)!==ct(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Ut(n[s],r[s])))return!1;return!0}(e,t);default:return A(52216,{left:e})}}function Wt(e,t){return void 0!==(e.values||[]).find(e=>Ut(e,t))}function Vt(e,t){if(e===t)return 0;const n=Bt(e),r=Bt(t);if(n!==r)return Q(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Q(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Nt(e.integerValue||e.doubleValue),r=Nt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return qt(e.timestampValue,t.timestampValue);case 4:return qt(At(e),At(t));case 5:return G(e.stringValue,t.stringValue);case 6:return function(e,t){const n=kt(e),r=kt(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Q(n[s],r[s]);if(0!==e)return e}return Q(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Q(Nt(e.latitude),Nt(t.latitude));return 0!==n?n:Q(Nt(e.longitude),Nt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ht(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const o=e.fields||{},a=t.fields||{},l=null===(n=o[Mt])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Mt])||void 0===r?void 0:r.arrayValue,d=Q((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==d?d:Ht(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===zt.mapValue&&t===zt.mapValue)return 0;if(e===zt.mapValue)return 1;if(t===zt.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let o=0;o<r.length&&o<i.length;++o){const e=G(r[o],i[o]);if(0!==e)return e;const t=Vt(n[r[o]],s[i[o]]);if(0!==t)return t}return Q(r.length,i.length)}(e.mapValue,t.mapValue);default:throw A(23264,{le:n})}}function qt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Q(e,t);const n=jt(e),r=jt(t),s=Q(n.seconds,r.seconds);return 0!==s?s:Q(n.nanos,r.nanos)}function Ht(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Vt(n[s],r[s]);if(e)return e}return Q(n.length,r.length)}function Kt(e){return Jt(e)}function Jt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=jt(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return kt(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ie.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Jt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(Jt(e.fields[s]));return n+"}"}(e.mapValue):A(61005,{value:e})}function Yt(e){switch(Bt(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=It(e);return t?16+Yt(t):16;case 5:return 2*e.stringValue.length;case 6:return kt(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Yt(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return dt(e.fields,(e,n)=>{t+=e.length+Yt(n)}),t}(e.mapValue);default:throw A(13486,{value:e})}}function Qt(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Gt(e){return!!e&&"integerValue"in e}function $t(e){return!!e&&"arrayValue"in e}function Xt(e){return!!e&&"nullValue"in e}function Zt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function en(e){return!!e&&"mapValue"in e}function tn(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Ft])||void 0===n?void 0:n.stringValue)===Lt}function nn(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return dt(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=nn(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=nn(e.arrayValue.values[n]);return t}return Object.assign({},e)}function rn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Dt}class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!en(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nn(t)}setAll(e){let t=se.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=nn(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());en(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ut(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];en(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){dt(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new sn(nn(this.value))}}function on(e){const t=[];return dt(e.fields,(e,n)=>{const r=new se([e]);if(en(n)){const e=on(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new vt(t)}class an{constructor(e,t,n,r,s,i,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new an(e,0,ve.min(),ve.min(),ve.min(),sn.empty(),0)}static newFoundDocument(e,t,n,r){return new an(e,1,t,ve.min(),n,r,0)}static newNoDocument(e,t){return new an(e,2,t,ve.min(),ve.min(),sn.empty(),0)}static newUnknownDocument(e,t){return new an(e,3,t,ve.min(),ve.min(),sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ln{constructor(e,t){this.position=e,this.inclusive=t}}function cn(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(r=i.field.isKeyField()?ie.comparator(ie.fromName(o.referenceValue),n.key):Vt(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function dn(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ut(e.position[n],t.position[n]))return!1;return!0}class un{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function hn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class pn{}class mn extends pn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new jn(e,t,n):"array-contains"===t?new _n(e,n):"in"===t?new Tn(e,n):"not-in"===t?new Cn(e,n):"array-contains-any"===t?new En(e,n):new mn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Nn(e,n):new kn(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Vt(t,this.value)):null!==t&&Bt(this.value)===Bt(t)&&this.matchesComparison(Vt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return A(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends pn{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new fn(e,t)}matches(e){return gn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function gn(e){return"and"===e.op}function yn(e){return vn(e)&&gn(e)}function vn(e){for(const t of e.filters)if(t instanceof fn)return!1;return!0}function xn(e){if(e instanceof mn)return e.field.canonicalString()+e.op.toString()+Kt(e.value);if(yn(e))return e.filters.map(e=>xn(e)).join(",");{const t=e.filters.map(e=>xn(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function bn(e,t){return e instanceof mn?function(e,t){return t instanceof mn&&e.op===t.op&&e.field.isEqual(t.field)&&Ut(e.value,t.value)}(e,t):e instanceof fn?function(e,t){return t instanceof fn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&bn(n,t.filters[r]),!0)}(e,t):void A(19439)}function wn(e){return e instanceof mn?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Kt(e.value))}(e):e instanceof fn?function(e){return e.op.toString()+" {"+e.getFilters().map(wn).join(" ,")+"}"}(e):"Filter"}class jn extends mn{constructor(e,t,n){super(e,t,n),this.key=ie.fromName(n.referenceValue)}matches(e){const t=ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class Nn extends mn{constructor(e,t){super(e,"in",t),this.keys=Sn("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kn extends mn{constructor(e,t){super(e,"not-in",t),this.keys=Sn("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ie.fromName(e.referenceValue))}class _n extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $t(t)&&Wt(t.arrayValue,this.value)}}class Tn extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Wt(this.value.arrayValue,t)}}class Cn extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Wt(this.value.arrayValue,t)}}class En extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$t(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Wt(this.value.arrayValue,e))}}class In{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=o,this.Pe=null}}function An(e){return new In(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Rn(e){const t=P(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>xn(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Oe(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Kt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Kt(e)).join(",")),t.Pe=e}return t.Pe}function On(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!hn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!dn(e.startAt,t.startAt)&&dn(e.endAt,t.endAt)}function Pn(e){return ie.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Fn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Dn(e,t,n,r,s,i,o,a){return new Fn(e,t,n,r,s,i,o,a)}function zn(e){return new Fn(e)}function Ln(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Mn(e){return null!==e.collectionGroup}function Bn(e){const t=P(e);if(null===t.Te){t.Te=[];const e=new Set;for(const s of t.explicitOrderBy)t.Te.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new gt(se.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new un(r,n))}),e.has(se.keyField().canonicalString())||t.Te.push(new un(se.keyField(),n))}return t.Te}function Un(e){const t=P(e);return t.Ie||(t.Ie=Vn(t,Bn(e))),t.Ie}function Wn(e){const t=P(e);return t.de||(t.de=Vn(t,e.explicitOrderBy)),t.de}function Vn(e,t){if("F"===e.limitType)return An(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new un(e.field,t)});const n=e.endAt?new ln(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ln(e.startAt.position,e.startAt.inclusive):null;return An(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function qn(e,t){const n=e.filters.concat([t]);return new Fn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Hn(e,t,n){return new Fn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Kn(e,t){return On(Un(e),Un(t))&&e.limitType===t.limitType}function Jn(e){return"".concat(Rn(Un(e)),"|lt:").concat(e.limitType)}function Yn(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>wn(e)).join(", "),"]")),Oe(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Kt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Kt(e)).join(",")),"Target(".concat(t,")")}(Un(e)),"; limitType=").concat(e.limitType,")")}function Qn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ie.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Bn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=cn(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Bn(e),t))&&!(e.endAt&&!function(e,t,n){const r=cn(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Bn(e),t))}(e,t)}function Gn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function $n(e){return(t,n)=>{let r=!1;for(const s of Bn(e)){const e=Xn(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Xn(e,t,n){const r=e.field.isKeyField()?ie.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Vt(r,s):A(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return A(19790,{direction:e.dir})}}class Zn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){dt(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return ht(this.inner)}size(){return this.innerSize}}const er=new pt(ie.comparator);function tr(){return er}const nr=new pt(ie.comparator);function rr(){let e=nr;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function sr(e){let t=nr;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ir(){return ar()}function or(){return ar()}function ar(){return new Zn(e=>e.toString(),(e,t)=>e.isEqual(t))}const lr=new pt(ie.comparator),cr=new gt(ie.comparator);function dr(){let e=cr;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const ur=new gt(Q);function hr(){return ur}function pr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pe(t)?"-0":t}}function mr(e){return{integerValue:""+e}}function fr(e,t){return Fe(t)?mr(t):pr(e,t)}class gr{constructor(){this._=void 0}}function yr(e,t,n){return e instanceof br?function(e,t){const n={fields:{[_t]:{stringValue:St},[Ct]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Et(t)&&(t=It(t)),t&&(n.fields[Tt]=t),{mapValue:n}}(n,t):e instanceof wr?jr(e,t):e instanceof Nr?kr(e,t):function(e,t){const n=xr(e,t),r=_r(n)+_r(e.Ee);return Gt(n)&&Gt(e.Ee)?mr(r):pr(e.serializer,r)}(e,t)}function vr(e,t,n){return e instanceof wr?jr(e,t):e instanceof Nr?kr(e,t):n}function xr(e,t){return e instanceof Sr?function(e){return Gt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class br extends gr{}class wr extends gr{constructor(e){super(),this.elements=e}}function jr(e,t){const n=Tr(t);for(const r of e.elements)n.some(e=>Ut(e,r))||n.push(r);return{arrayValue:{values:n}}}class Nr extends gr{constructor(e){super(),this.elements=e}}function kr(e,t){let n=Tr(t);for(const r of e.elements)n=n.filter(e=>!Ut(e,r));return{arrayValue:{values:n}}}class Sr extends gr{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function _r(e){return Nt(e.integerValue||e.doubleValue)}function Tr(e){return $t(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Cr{constructor(e,t){this.field=e,this.transform=t}}class Er{constructor(e,t){this.version=e,this.transformResults=t}}class Ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ir}static exists(e){return new Ir(void 0,e)}static updateTime(e){return new Ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ar(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Rr{}function Or(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Vr(e.key,Ir.none()):new Lr(e.key,e.data,Ir.none());{const n=e.data,r=sn.empty();let s=new gt(se.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Mr(e.key,r,new vt(s.toArray()),Ir.none())}}function Pr(e,t,n){e instanceof Lr?function(e,t,n){const r=e.value.clone(),s=Ur(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Mr?function(e,t,n){if(!Ar(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ur(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Br(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Fr(e,t,n,r){return e instanceof Lr?function(e,t,n,r){if(!Ar(e.precondition,t))return n;const s=e.value.clone(),i=Wr(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Mr?function(e,t,n,r){if(!Ar(e.precondition,t))return n;const s=Wr(e.fieldTransforms,r,t),i=t.data;return i.setAll(Br(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ar(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Dr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=xr(r.transform,e||null);null!=s&&(null===n&&(n=sn.empty()),n.set(r.field,s))}return n||null}function zr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Z(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof wr&&t instanceof wr||e instanceof Nr&&t instanceof Nr?Z(e.elements,t.elements,Ut):e instanceof Sr&&t instanceof Sr?Ut(e.Ee,t.Ee):e instanceof br&&t instanceof br}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Lr extends Rr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Mr extends Rr{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Br(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ur(e,t,n){const r=new Map;O(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,vr(o,a,n[s]))}return r}function Wr(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,yr(e,i,t))}return r}class Vr extends Rr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qr extends Rr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Hr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Pr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Fr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Fr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=or();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=t.has(r.key)?null:o;const a=Or(i,o);null!==a&&n.set(r.key,a),i.isValidDocument()||i.convertToNoDocument(ve.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dr())}isEqual(e){return this.batchId===e.batchId&&Z(this.mutations,e.mutations,(e,t)=>zr(e,t))&&Z(this.baseMutations,e.baseMutations,(e,t)=>zr(e,t))}}class Kr{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){O(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let r=lr;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Kr(e,t,n,r)}}class Jr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Yr{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}class Qr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gr,$r;function Xr(e){switch(e){case F.OK:return A(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return A(15467,{code:e})}}function Zr(e){if(void 0===e)return C("GRPC error has no .code"),F.UNKNOWN;switch(e){case Gr.OK:return F.OK;case Gr.CANCELLED:return F.CANCELLED;case Gr.UNKNOWN:return F.UNKNOWN;case Gr.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Gr.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Gr.INTERNAL:return F.INTERNAL;case Gr.UNAVAILABLE:return F.UNAVAILABLE;case Gr.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Gr.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Gr.NOT_FOUND:return F.NOT_FOUND;case Gr.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Gr.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Gr.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Gr.ABORTED:return F.ABORTED;case Gr.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Gr.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Gr.DATA_LOSS:return F.DATA_LOSS;default:return A(39323,{code:e})}}($r=Gr||(Gr={}))[$r.OK=0]="OK",$r[$r.CANCELLED=1]="CANCELLED",$r[$r.UNKNOWN=2]="UNKNOWN",$r[$r.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$r[$r.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$r[$r.NOT_FOUND=5]="NOT_FOUND",$r[$r.ALREADY_EXISTS=6]="ALREADY_EXISTS",$r[$r.PERMISSION_DENIED=7]="PERMISSION_DENIED",$r[$r.UNAUTHENTICATED=16]="UNAUTHENTICATED",$r[$r.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$r[$r.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$r[$r.ABORTED=10]="ABORTED",$r[$r.OUT_OF_RANGE=11]="OUT_OF_RANGE",$r[$r.UNIMPLEMENTED=12]="UNIMPLEMENTED",$r[$r.INTERNAL=13]="INTERNAL",$r[$r.UNAVAILABLE=14]="UNAVAILABLE",$r[$r.DATA_LOSS=15]="DATA_LOSS";let es=null;const ts=new r([4294967295,4294967295],0);function ns(e){const t=J().encode(e),n=new s;return n.update(t),new Uint8Array(n.digest())}function rs(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new r([n,s],0),new r([i,o],0)]}class ss{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new is("Invalid padding: ".concat(t));if(n<0)throw new is("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new is("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new is("Invalid padding when bitmap length is 0: ".concat(t));this.fe=8*e.length-t,this.ge=r.fromNumber(this.fe)}pe(e,t,n){let s=e.add(t.multiply(r.fromNumber(n)));return 1===s.compare(ts)&&(s=new r([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const t=ns(e),[n,r]=rs(t);for(let s=0;s<this.hashCount;s++){const e=this.pe(n,r,s);if(!this.ye(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new ss(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.fe)return;const t=ns(e),[n,r]=rs(t);for(let s=0;s<this.hashCount;s++){const e=this.pe(n,r,s);this.we(e)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class is extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class os{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,as.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new os(ve.min(),r,new pt(Q),tr(),dr())}}class as{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new as(n,t,dr(),dr(),dr())}}class ls{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=r}}class cs{constructor(e,t){this.targetId=e,this.De=t}}class ds{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class us{constructor(){this.ve=0,this.Ce=ms(),this.Fe=bt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=dr(),t=dr(),n=dr();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:A(38017,{changeType:s})}}),new as(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=ms()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,O(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class hs{constructor(e){this.We=e,this.Ge=new Map,this.ze=tr(),this.je=ps(),this.Je=ps(),this.He=new pt(Q)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:A(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((e,n)=>{this.nt(n)&&t(n)})}it(e){const t=e.targetId,n=e.De.count,r=this.st(t);if(r){const s=r.target;if(Pn(s))if(0===n){const e=new ie(s.path);this.Xe(t,e,an.newNoDocument(e,ve.min()))}else O(1===n,20013,{expectedCount:n});else{const r=this.ot(t);if(r!==n){const n=this._t(e),s=n?this.ut(n,e,r):1;if(0!==s){this.rt(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,e)}null==es||es.ct(function(e,t,n,r,s){var i,o,a,l,c,d;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(a=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(d=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==d?d:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.De,this.We.lt(),n,s))}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,o;try{i=kt(n).toUint8Array()}catch(e){if(e instanceof xt)return E("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new ss(i,r,s)}catch(e){return E(e instanceof is?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.fe?null:o}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.We.lt(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.Xe(t,n,null),r++)}),r}Pt(e){const t=new Map;this.Ge.forEach((n,r)=>{const s=this.st(r);if(s){if(n.current&&Pn(s.target)){const t=new ie(s.target.path);this.Tt(t).has(r)||this.It(r,t)||this.Xe(r,t,an.newNoDocument(t,e))}n.Ne&&(t.set(r,n.Le()),n.ke())}});let n=dr();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.st(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ze.forEach((t,n)=>n.setReadTime(e));const r=new os(e,t,this.He,this.ze,n);return this.ze=tr(),this.je=ps(),this.Je=ps(),this.He=new pt(Q),r}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new us,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new gt(Q),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new gt(Q),this.je=this.je.insert(e,t)),t}nt(e){const t=null!==this.st(e);return t||T("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new us),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function ps(){return new pt(ie.comparator)}function ms(){return new pt(ie.comparator)}const fs={asc:"ASCENDING",desc:"DESCENDING"},gs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ys={and:"AND",or:"OR"};class vs{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xs(e,t){return e.useProto3Json||Oe(t)?t:{value:t}}function bs(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ws(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function js(e,t){return bs(e,t.toTimestamp())}function Ns(e){return O(!!e,49232),ve.fromTimestamp(function(e){const t=jt(e);return new ye(t.seconds,t.nanos)}(e))}function ks(e,t){return Ss(e,t).canonicalString()}function Ss(e,t){const n=function(e){return new ne(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function _s(e){const t=ne.fromString(e);return O(Js(t),10190,{key:t.toString()}),t}function Ts(e,t){return ks(e.databaseId,t.path)}function Cs(e,t){const n=_s(t);if(n.get(1)!==e.databaseId.projectId)throw new D(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new D(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ie(Rs(n))}function Es(e,t){return ks(e.databaseId,t)}function Is(e){const t=_s(e);return 4===t.length?ne.emptyPath():Rs(t)}function As(e){return new ne(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Rs(e){return O(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Os(e,t,n){return{name:Ts(e,t),fields:n.value.mapValue.fields}}function Ps(e,t){let n;if(t instanceof Lr)n={update:Os(e,t.key,t.value)};else if(t instanceof Vr)n={delete:Ts(e,t.key)};else if(t instanceof Mr)n={update:Os(e,t.key,t.data),updateMask:Ks(t.fieldMask)};else{if(!(t instanceof qr))return A(16599,{Rt:t.type});n={verify:Ts(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof br)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof wr)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Nr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Sr)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw A(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:js(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:A(27497)}(e,t.precondition)),n}function Fs(e,t){return{documents:[Es(e,t.path)]}}function Ds(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Es(e,s);const i=function(e){if(0!==e.length)return Hs(fn.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Vs(e.field),direction:Bs(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=xs(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{Vt:n,parent:s}}function zs(e,t,n,r){const{Vt:s,parent:i}=Ds(e,t),o={},a=[];let l=0;return n.forEach(e=>{const t=r?e.alias:"aggregate_"+l++;o[t]=e.alias,"count"===e.aggregateType?a.push({alias:t,count:{}}):"avg"===e.aggregateType?a.push({alias:t,avg:{field:Vs(e.fieldPath)}}):"sum"===e.aggregateType&&a.push({alias:t,sum:{field:Vs(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ft:o,parent:i}}function Ls(e){let t=Is(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){O(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Ms(e);return t instanceof fn&&yn(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new un(qs(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Oe(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ln(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ln(n,t)}(n.endAt)),Dn(t,s,o,i,a,"F",l,c)}function Ms(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=qs(e.unaryFilter.field);return mn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=qs(e.unaryFilter.field);return mn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=qs(e.unaryFilter.field);return mn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=qs(e.unaryFilter.field);return mn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return A(61313);default:return A(60726)}}(e):void 0!==e.fieldFilter?function(e){return mn.create(qs(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return A(58110);default:return A(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fn.create(e.compositeFilter.filters.map(e=>Ms(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return A(1026)}}(e.compositeFilter.op))}(e):A(30097,{filter:e})}function Bs(e){return fs[e]}function Us(e){return gs[e]}function Ws(e){return ys[e]}function Vs(e){return{fieldPath:e.canonicalString()}}function qs(e){return se.fromServerFormat(e.fieldPath)}function Hs(e){return e instanceof mn?function(e){if("=="===e.op){if(Zt(e.value))return{unaryFilter:{field:Vs(e.field),op:"IS_NAN"}};if(Xt(e.value))return{unaryFilter:{field:Vs(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Zt(e.value))return{unaryFilter:{field:Vs(e.field),op:"IS_NOT_NAN"}};if(Xt(e.value))return{unaryFilter:{field:Vs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vs(e.field),op:Us(e.op),value:e.value}}}(e):e instanceof fn?function(e){const t=e.getFilters().map(e=>Hs(e));return 1===t.length?t[0]:{compositeFilter:{op:Ws(e.op),filters:t}}}(e):A(54877,{filter:e})}function Ks(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Js(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ys{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ve.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ve.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:bt.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Qs{constructor(e){this.gt=e}}function Gs(e){const t=Ls({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Hn(t,t.limit,"L"):t}class $s{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Nt(e.integerValue));else if("doubleValue"in e){const n=Nt(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),Pe(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),"string"==typeof n&&(n=jt(n)),t.Mt("".concat(n.seconds||"")),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(kt(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?rn(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):tn(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):A(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const n=e.fields||{};this.Ct(t,55);for(const r of Object.keys(n))this.xt(r,t),this.Dt(n[r],t)}Lt(e,t){var n,r;const s=e.fields||{};this.Ct(t,53);const i=Mt,o=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Ct(t,15),t.Ft(Nt(o)),this.xt(i,t),this.Dt(s[i],t)}qt(e,t){const n=e.values||[];this.Ct(t,50);for(const r of n)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),ie.fromName(e).path.forEach(e=>{this.Ct(t,60),this.$t(e,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}$s.Ut=new $s;class Xs{constructor(){this.Dn=new Zs}addToCollectionParentIndex(e,t){return this.Dn.add(t),Ce.resolve()}getCollectionParents(e,t){return Ce.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Ce.resolve()}deleteFieldIndex(e,t){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,t){return Ce.resolve()}getDocumentsMatchingTarget(e,t){return Ce.resolve(null)}getIndexType(e,t){return Ce.resolve(0)}getFieldIndexes(e,t){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,t){return Ce.resolve(Ne.min())}getMinOffsetFromCollectionGroup(e,t){return Ce.resolve(Ne.min())}updateCollectionGroup(e,t,n){return Ce.resolve()}updateIndexEntries(e,t){return Ce.resolve()}}class Zs{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new gt(ne.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new gt(ne.comparator)).toArray()}}new Uint8Array(0);const ei={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ti=41943040;class ni{static withCacheSize(e){return new ni(e,ni.DEFAULT_COLLECTION_PERCENTILE,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}ni.DEFAULT_COLLECTION_PERCENTILE=10,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ni.DEFAULT=new ni(ti,ni.DEFAULT_COLLECTION_PERCENTILE,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ni.DISABLED=new ni(-1,0,0);class ri{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ri(0)}static ur(){return new ri(-1)}}const si="LruGarbageCollector",ii=1048576;function oi(e,t){let[n,r]=e,[s,i]=t;const o=Q(n,s);return 0===o?Q(r,i):o}class ai{constructor(e){this.Tr=e,this.buffer=new gt(oi),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();oi(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class li{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){T(si,"Garbage collection scheduled in ".concat(e,"ms")),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ie(e)?T(si,"Ignoring IndexedDB error during garbage collection: ",e):await Te(e)}await this.Rr(3e5)})}}class ci{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ce.resolve(Ae.ue);const n=new ai(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.gr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(ei)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),ei):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,r,s,i,o,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(T("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),_()<=a.$b.DEBUG&&T("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-d,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(l-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-l)+"ms\n"+"Total Duration: ".concat(c-d,"ms")),Ce.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function di(e,t){return new ci(e,t)}class ui{constructor(){this.changes=new Zn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ce.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hi{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pi{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Fr(n.mutation,e,vt.empty(),ye.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,dr()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dr();const r=ir();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=rr();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ir();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,dr()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=tr();const i=ar(),o=ar();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Mr)?s=s.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),Fr(o.mutation,t,o.mutation.getFieldMask(),ye.now())):i.set(t.key,vt.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new hi(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=ar();let r=new pt((e,t)=>e-t),s=dr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let o=n.get(e)||vt.empty();o=s.applyToLocalView(i,o),n.set(e,o);const a=(r.get(s.batchId)||dr()).add(e);r=r.insert(s.batchId,a)})}).next(()=>{const i=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=or();l.forEach(e=>{if(!s.has(e)){const r=Or(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Ce.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ie.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Mn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Ce.resolve(ir());let o=xe,a=s;return i.next(t=>Ce.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),s.get(t)?Ce.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,a,t,dr())).next(e=>({batchId:o,changes:sr(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ie(t)).next(e=>{let t=rr();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=rr();return this.indexManager.getCollectionParents(e,s).next(o=>Ce.forEach(o,o=>{const a=function(e,t){return new Fn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(s));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,an.newInvalidDocument(r)))});let n=rr();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Fr(i.mutation,r,vt.empty(),ye.now()),Qn(t,r)&&(n=n.insert(e,r))}),n})}}class mi{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Ce.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ns(e.createTime)}}(t)),Ce.resolve()}getNamedQuery(e,t){return Ce.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(e){return{name:e.name,query:Gs(e.bundledQuery),readTime:Ns(e.readTime)}}(t)),Ce.resolve()}}class fi{constructor(){this.overlays=new pt(ie.comparator),this.kr=new Map}getOverlay(e,t){return Ce.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ir();return Ce.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.wt(e,t,r)}),Ce.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.kr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(n)),Ce.resolve()}getOverlaysForCollection(e,t,n){const r=ir(),s=t.length+1,i=new ie(t.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const e=o.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ce.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new pt((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=ir(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=ir(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Ce.resolve(o)}wt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Jr(t,n));let s=this.kr.get(t);void 0===s&&(s=dr(),this.kr.set(t,s)),this.kr.set(t,s.add(n.key))}}class gi{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return Ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ce.resolve()}}class yi{constructor(){this.qr=new gt(vi.Qr),this.$r=new gt(vi.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new vi(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new vi(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new ie(new ne([])),n=new vi(t,e),r=new vi(t,e+1),s=[];return this.$r.forEachInRange([n,r],e=>{this.Wr(e),s.push(e.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ie(new ne([])),n=new vi(t,e),r=new vi(t,e+1);let s=dr();return this.$r.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new vi(e,0),n=this.qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class vi{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ie.comparator(e.key,t.key)||Q(e.Hr,t.Hr)}static Ur(e,t){return Q(e.Hr,t.Hr)||ie.comparator(e.key,t.key)}}class xi{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new gt(vi.Qr)}checkEmpty(e){return Ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Hr(s,t,n,r);this.mutationQueue.push(i);for(const o of r)this.Yr=this.Yr.add(new vi(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ce.resolve(i)}lookupMutationBatch(e,t){return Ce.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),s=r<0?0:r;return Ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(0===this.mutationQueue.length?Re:this.er-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new vi(t,0),r=new vi(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);s.push(t)}),Ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new gt(Q);return t.forEach(e=>{const t=new vi(e,0),r=new vi(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),Ce.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;ie.isDocumentKey(s)||(s=s.child(""));const i=new vi(new ie(s),0);let o=new gt(Q);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)},i),Ce.resolve(this.ei(o))}ei(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){O(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return Ce.forEach(t.mutations,r=>{const s=new vi(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new vi(t,0),r=this.Yr.firstAfterOrEqual(n);return Ce.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class bi{constructor(e){this.ni=e,this.docs=new pt(ie.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ce.resolve(n?n.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let n=tr();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():an.newInvalidDocument(e))}),Ce.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=tr();const i=t.path,o=new ie(i.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||ke(je(o),n)<=0||(r.has(o.key)||Qn(t,o))&&(s=s.insert(o.key,o.mutableCopy()))}return Ce.resolve(s)}getAllFromCollectionGroup(e,t,n,r){A(9500)}ri(e,t){return Ce.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new wi(this)}getSize(e){return Ce.resolve(this.size)}}class wi extends ui{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)}),Ce.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class ji{constructor(e){this.persistence=e,this.ii=new Zn(e=>Rn(e),On),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.si=0,this.oi=new yi,this.targetCount=0,this._i=ri.ar()}forEachTarget(e,t){return this.ii.forEach((e,n)=>t(n)),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),Ce.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ri(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Ce.resolve()}updateTargetData(e,t){return this.hr(t),Ce.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.ii.forEach((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.ii.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Ce.waitFor(s).next(()=>r)}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return Ce.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),Ce.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Ce.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return Ce.resolve(n)}containsKey(e,t){return Ce.resolve(this.oi.containsKey(t))}}class Ni{constructor(e,t){this.ai={},this.overlays={},this.ui=new Ae(0),this.ci=!1,this.ci=!0,this.li=new gi,this.referenceDelegate=e(this),this.hi=new ji(this),this.indexManager=new Xs,this.remoteDocumentCache=function(e){return new bi(e)}(e=>this.referenceDelegate.Pi(e)),this.serializer=new Qs(t),this.Ti=new mi(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fi,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new xi(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){T("MemoryPersistence","Starting transaction:",e);const r=new ki(this.ui.next());return this.referenceDelegate.Ii(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return Ce.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class ki extends _e{constructor(e){super(),this.currentSequenceNumber=e}}class Si{constructor(e){this.persistence=e,this.Ai=new yi,this.Ri=null}static Vi(e){return new Si(e)}get mi(){if(this.Ri)return this.Ri;throw A(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),Ce.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),Ce.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Ce.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.mi,n=>{const r=ie.fromPath(n);return this.fi(e,r).next(e=>{e||t.removeEntry(r,ve.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Ce.or([()=>Ce.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class _i{constructor(e,t){this.persistence=e,this.gi=new Zn(e=>ze(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=di(this,t)}static Vi(e,t){return new _i(e,t)}Ii(){}di(e){return Ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}gr(e,t){return Ce.forEach(this.gi,(n,r)=>this.Sr(e,n,r).next(e=>e?Ce.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,r=>this.Sr(e,r,t).next(e=>{e||(n++,s.removeEntry(r,ve.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Ce.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),Ce.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),Ce.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Ce.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yt(e.data.value)),t}Sr(e,t,n){return Ce.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.gi.get(t);return Ce.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ti{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(e,t){let n=dr(),r=dr();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ti(e,t.fromCache,n,r)}}class Ci{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ei{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(0,l.nr)()?8:Ee((0,l.ZQ)())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ps(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ys(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Ci;return this.ws(e,t,n).next(r=>{if(s.result=r,this.Rs)return this.Ss(e,t,n,r.size)})}).next(()=>s.result)}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(_()<=a.$b.DEBUG&&T("QueryEngine","SDK will not create cache indexes for query:",Yn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ce.resolve()):(_()<=a.$b.DEBUG&&T("QueryEngine","Query:",Yn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.fs*r?(_()<=a.$b.DEBUG&&T("QueryEngine","The SDK decides to create cache indexes for query:",Yn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(t))):Ce.resolve())}ps(e,t){if(Ln(t))return Ce.resolve(null);let n=Un(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Hn(t,null,"F"),n=Un(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=dr(...r);return this.gs.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.bs(t,r);return this.Ds(t,i,s,n.readTime)?this.ps(e,Hn(t,null,"F")):this.vs(e,i,t,n)}))})))}ys(e,t,n,r){return Ln(t)||r.isEqual(ve.min())?Ce.resolve(null):this.gs.getDocuments(e,n).next(s=>{const i=this.bs(t,s);return this.Ds(t,i,n,r)?Ce.resolve(null):(_()<=a.$b.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Yn(t)),this.vs(e,i,t,we(r,xe)).next(e=>e))})}bs(e,t){let n=new gt($n(e));return t.forEach((t,r)=>{Qn(e,r)&&(n=n.add(r))}),n}Ds(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,t,n){return _()<=a.$b.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",Yn(t)),this.gs.getDocumentsMatchingQuery(e,t,Ne.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Ii="LocalStore",Ai=3e8;class Ri{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new pt(Q),this.Ms=new Zn(e=>Rn(e),On),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pi(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function Oi(e,t,n,r){return new Ri(e,t,n,r)}async function Pi(e,t){const n=P(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Ns(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let o=dr();for(const e of r){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Bs:e,removedBatchIds:s,addedBatchIds:i}))})})}function Fi(e){const t=P(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function Di(e,t,n){let r=dr(),s=dr();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=tr();return n.forEach((n,i)=>{const o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(ve.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):T(Ii,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)}),{Ls:r,ks:s}})}function zi(e,t){const n=P(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Re),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Li(e,t){const n=P(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.hi.getTargetData(e,t).next(s=>s?(r=s,Ce.resolve(r)):n.hi.allocateTargetId(e).next(s=>(r=new Ys(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.hi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Fs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(e.targetId,e),n.Ms.set(t,e.targetId)),e})}async function Mi(e,t,n){const r=P(e),s=r.Fs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Ie(e))throw e;T(Ii,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Fs=r.Fs.remove(t),r.Ms.delete(s.target)}function Bi(e,t,n){const r=P(e);let s=ve.min(),i=dr();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=P(e),s=r.Ms.get(n);return void 0!==s?Ce.resolve(r.Fs.get(s)):r.hi.getTargetData(t,n)}(r,e,Un(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?s:ve.min(),n?i:dr())).next(e=>(Ui(r,Gn(t),e),{documents:e,qs:i})))}function Ui(e,t,n){let r=e.xs.get(t)||ve.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.xs.set(t,r)}class Wi{constructor(){this.activeTargetIds=hr()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vi{constructor(){this.Fo=new Wi,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Wi,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qi{xo(e){}shutdown(){}}const Hi="ConnectivityMonitor";class Ki{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){T(Hi,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){T(Hi,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ji=null;function Yi(){return null===Ji?Ji=268435456+Math.round(2147483648*Math.random()):Ji++,"0x"+Ji.toString(16)}const Qi="RestConnection",Gi={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $i{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo="projects/".concat(n,"/databases/").concat(r),this.Ko=this.databaseId.database===Ot?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Wo(e,t,n,r,s){const i=Yi(),o=this.Go(e,t.toUriEncodedString());T(Qi,"Sending RPC '".concat(e,"' ").concat(i,":"),o,n);const a={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(a,r,s);const{host:c}=new URL(o),d=(0,l.zJ)(c);return this.jo(e,o,a,n,d).then(t=>(T(Qi,"Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw E(Qi,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",o,"request:",n),t})}Jo(e,t,n,r,s,i){return this.Wo(e,t,n,r,s)}zo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+k,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Go(e,t){const n=Gi[e];return"".concat(this.$o,"/v1/").concat(t,":").concat(n)}terminate(){}}class Xi{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const Zi="WebChannelConnection";class eo extends $i{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,s){const i=Yi();return new Promise((s,o)=>{const a=new u;a.setWithCredentials(!0),a.listenOnce(p.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case m.NO_ERROR:const t=a.getResponseJson();T(Zi,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case m.TIMEOUT:T(Zi,"RPC '".concat(e,"' ").concat(i," timed out")),o(new D(F.DEADLINE_EXCEEDED,"Request time out"));break;case m.HTTP_ERROR:const n=a.getStatus();if(T(Zi,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(t)>=0?t:F.UNKNOWN}(t.status);o(new D(e,t.message))}else o(new D(F.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new D(F.UNAVAILABLE,"Connection failed."));break;default:A(9055,{c_:e,streamId:i,l_:a.getLastErrorCode(),h_:a.getLastError()})}}finally{T(Zi,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);T(Zi,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)})}P_(e,t,n){const r=Yi(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=v(),o=y(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.zo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=s.join("");T(Zi,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const d=i.createWebChannel(c,a);this.T_(d);let u=!1,p=!1;const m=new Xi({Ho:t=>{p?T(Zi,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(u||(T(Zi,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),d.open(),u=!0),T(Zi,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),d.send(t))},Yo:()=>d.close()}),x=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return x(d,h.EventType.OPEN,()=>{p||(T(Zi,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),m.s_())}),x(d,h.EventType.CLOSE,()=>{p||(p=!0,T(Zi,"RPC '".concat(e,"' stream ").concat(r," transport closed")),m.__(),this.I_(d))}),x(d,h.EventType.ERROR,t=>{p||(p=!0,E(Zi,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),m.__(new D(F.UNAVAILABLE,"The operation could not be completed")))}),x(d,h.EventType.MESSAGE,t=>{var n;if(!p){const s=t.data[0];O(!!s,16349);const i=s,o=(null==i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(o){T(Zi,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Gr[e];if(void 0!==t)return Zr(t)}(t),s=o.message;void 0===n&&(n=F.INTERNAL,s="Unknown error status: "+t+" with message "+o.message),p=!0,m.__(new D(n,s)),d.close()}else T(Zi,"RPC '".concat(e,"' stream ").concat(r," received:"),s),m.a_(s)}}),x(o,g.STAT_EVENT,t=>{t.stat===f.PROXY?T(Zi,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===f.NOPROXY&&T(Zi,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{m.o_()},0),m}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function to(){return"undefined"!=typeof document?document:null}function no(e){return new vs(e,!0)}class ro{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&T("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.R_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const so="PersistentStream";class io{constructor(e,t,n,r,s,i,o,a){this.Fi=e,this.w_=n,this.S_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ro(e,t)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==e?this.F_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(C(t.toString()),C("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===F.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.b_===t&&this.W_(n,r)},t=>{e(()=>{const e=new D(F.UNKNOWN,"Fetching auth token failed: "+t.message);return this.G_(e)})})}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(e=>{n(()=>this.G_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.C_?this.j_(e):this.onNext(e))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return T(so,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(T(so,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oo extends io{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:A(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(O(void 0===t||"string"==typeof t,58123),bt.fromBase64String(t||"")):(O(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),bt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?F.UNKNOWN:Zr(e.code);return new D(t,e.message||"")}(o);n=new ds(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Cs(e,r.document.name),i=Ns(r.document.updateTime),o=r.document.createTime?Ns(r.document.createTime):ve.min(),a=new sn({mapValue:{fields:r.document.fields}}),l=an.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new ls(c,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Cs(e,r.document),i=r.readTime?Ns(r.readTime):ve.min(),o=an.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ls([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Cs(e,r.document),i=r.removedTargetIds||[];n=new ls([],i,s,null)}else{if(!("filter"in t))return A(11601,{At:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Qr(r,s),o=e.targetId;n=new cs(o,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ve.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ve.min():t.readTime?Ns(t.readTime):ve.min()}(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=As(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Pn(r)?{documents:Fs(e,r)}:{query:Ds(e,r).Vt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ws(e,t.resumeToken);const r=xs(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ve.min())>0){n.readTime=bs(e,t.snapshotVersion.toTimestamp());const r=xs(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return A(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=As(this.serializer),t.removeTarget=e,this.k_(t)}}class ao extends io{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return O(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,O(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){O(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=function(e,t){return e&&e.length>0?(O(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Ns(e.updateTime):Ns(t);return n.isEqual(ve.min())&&(n=Ns(t)),new Er(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Ns(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=As(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ps(this.serializer,e))};this.k_(t)}}class lo{}class co extends lo{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new D(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,o]=s;return this.connection.Wo(e,Ss(t,n),r,i,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new D(F.UNKNOWN,e.toString())})}Jo(e,t,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,a]=i;return this.connection.Jo(e,Ss(t,n),r,o,a,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new D(F.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class uo{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this._a?(C(t),this._a=!1):T("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const ho="RemoteStore";class po{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(e=>{n.enqueueAndForget(async()=>{jo(this)&&(T(ho,"Restarting streams for network reachability change."),await async function(e){const t=P(e);t.Ia.add(4),await fo(t),t.Aa.set("Unknown"),t.Ia.delete(4),await mo(t)}(this))})}),this.Aa=new uo(n,r)}}async function mo(e){if(jo(e))for(const t of e.da)await t(!0)}async function fo(e){for(const t of e.da)await t(!1)}function go(e,t){const n=P(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),wo(n)?bo(n):Uo(n).x_()&&vo(n,t))}function yo(e,t){const n=P(e),r=Uo(n);n.Ta.delete(t),r.x_()&&xo(n,t),0===n.Ta.size&&(r.x_()?r.B_():jo(n)&&n.Aa.set("Unknown"))}function vo(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ve.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Uo(e).H_(t)}function xo(e,t){e.Ra.$e(t),Uo(e).Y_(t)}function bo(e){e.Ra=new hs({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),Uo(e).start(),e.Aa.aa()}function wo(e){return jo(e)&&!Uo(e).M_()&&e.Ta.size>0}function jo(e){return 0===P(e).Ia.size}function No(e){e.Ra=void 0}async function ko(e){e.Aa.set("Online")}async function So(e){e.Ta.forEach((t,n)=>{vo(e,t)})}async function _o(e,t){No(e),wo(e)?(e.Aa.la(t),bo(e)):e.Aa.set("Unknown")}async function To(e,t,n){if(e.Aa.set("Online"),t instanceof ds&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ta.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ta.delete(r),e.Ra.removeTarget(r))}(e,t)}catch(n){T(ho,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Co(e,n)}else if(t instanceof ls?e.Ra.Ye(t):t instanceof cs?e.Ra.it(t):e.Ra.et(t),!n.isEqual(ve.min()))try{const t=await Fi(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Ra.Pt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ta.get(r);s&&e.Ta.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ta.get(t);if(!r)return;e.Ta.set(t,r.withResumeToken(bt.EMPTY_BYTE_STRING,r.snapshotVersion)),xo(e,t);const s=new Ys(r.target,t,n,r.sequenceNumber);vo(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){T(ho,"Failed to raise snapshot:",t),await Co(e,t)}}async function Co(e,t,n){if(!Ie(t))throw t;e.Ia.add(1),await fo(e),e.Aa.set("Offline"),n||(n=()=>Fi(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{T(ho,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await mo(e)})}function Eo(e,t){return t().catch(n=>Co(e,n,t))}async function Io(e){const t=P(e),n=Wo(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:Re;for(;Ao(t);)try{const e=await zi(t.localStore,r);if(null===e){0===t.Pa.length&&n.B_();break}r=e.batchId,Ro(t,e)}catch(e){await Co(t,e)}Oo(t)&&Po(t)}function Ao(e){return jo(e)&&e.Pa.length<10}function Ro(e,t){e.Pa.push(t);const n=Wo(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function Oo(e){return jo(e)&&!Wo(e).M_()&&e.Pa.length>0}function Po(e){Wo(e).start()}async function Fo(e){Wo(e).na()}async function Do(e){const t=Wo(e);for(const n of e.Pa)t.X_(n.mutations)}async function zo(e,t,n){const r=e.Pa.shift(),s=Kr.from(r,t,n);await Eo(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Io(e)}async function Lo(e,t){t&&Wo(e).Z_&&await async function(e,t){if(function(e){return Xr(e)&&e!==F.ABORTED}(t.code)){const n=e.Pa.shift();Wo(e).N_(),await Eo(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Io(e)}}(e,t),Oo(e)&&Po(e)}async function Mo(e,t){const n=P(e);n.asyncQueue.verifyOperationInProgress(),T(ho,"RemoteStore received new credentials");const r=jo(n);n.Ia.add(3),await fo(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await mo(n)}async function Bo(e,t){const n=P(e);t?(n.Ia.delete(2),await mo(n)):t||(n.Ia.add(2),await fo(n),n.Aa.set("Unknown"))}function Uo(e){return e.Va||(e.Va=function(e,t,n){const r=P(e);return r.ia(),new oo(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:ko.bind(null,e),e_:So.bind(null,e),n_:_o.bind(null,e),J_:To.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),wo(e)?bo(e):e.Aa.set("Unknown")):(await e.Va.stop(),No(e))})),e.Va}function Wo(e){return e.ma||(e.ma=function(e,t,n){const r=P(e);return r.ia(),new ao(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:Fo.bind(null,e),n_:Lo.bind(null,e),ea:Do.bind(null,e),ta:zo.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await Io(e)):(await e.ma.stop(),e.Pa.length>0&&(T(ho,"Stopping write stream with ".concat(e.Pa.length," pending writes")),e.Pa=[]))})),e.ma}class Vo{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new z,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,o=new Vo(e,t,i,r,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new D(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qo(e,t){if(C("AsyncQueue","".concat(t,": ").concat(e)),Ie(e))return new D(F.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ie.comparator(t.key,n.key):(e,t)=>ie.comparator(e.key,t.key),this.keyedMap=rr(),this.sortedSet=new pt(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ho))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ho;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ko{constructor(){this.fa=new pt(ie.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?0!==e.type&&3===n.type?this.fa=this.fa.insert(t,e):3===e.type&&1!==n.type?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.fa=this.fa.remove(t):1===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):A(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,n)=>{e.push(n)}),e}}class Jo{constructor(e,t,n,r,s,i,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Jo(e,t,Ho.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Yo{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Qo{constructor(){this.queries=Go(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const n=P(e),r=n.queries;n.queries=Go(),r.forEach((e,n)=>{for(const r of n.wa)r.onError(t)})}(this,new D(F.ABORTED,"Firestore shutting down"))}}function Go(){return new Zn(e=>Jn(e),Kn)}async function $o(e,t){const n=P(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Sa()&&t.ba()&&(r=2):(i=new Yo,r=t.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=qo(e,"Initialization of query '".concat(Yn(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.wa.push(t),t.va(n.onlineState),i.ya&&t.Ca(i.ya)&&ta(n)}async function Xo(e,t){const n=P(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.wa.indexOf(t);e>=0&&(i.wa.splice(e,1),0===i.wa.length?s=t.ba()?0:1:!i.Sa()&&t.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Zo(e,t){const n=P(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.wa)e.Ca(s)&&(r=!0);t.ya=s}}r&&ta(n)}function ea(e,t,n){const r=P(e),s=r.queries.get(t);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(t)}function ta(e){e.Da.forEach(e=>{e.next()})}var na,ra;(ra=na||(na={})).Fa="default",ra.Cache="cache";class sa{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Jo(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache)return!0;if(!this.ba())return!0;const n="Offline"!==t;return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=Jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==na.Cache}}class ia{constructor(e){this.key=e}}class oa{constructor(e){this.key=e}}class aa{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=dr(),this.mutatedKeys=dr(),this.Xa=$n(e),this.eu=new Ho(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new Ko,r=t?t.eu:this.eu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),d=Qn(this.query,t)?t:null,u=!!c&&this.mutatedKeys.has(c.key),h=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let p=!1;c&&d?c.data.isEqual(d.data)?u!==h&&(n.track({type:3,doc:d}),p=!0):this.iu(c,d)||(n.track({type:2,doc:d}),p=!0,(a&&this.Xa(d,a)>0||l&&this.Xa(d,l)<0)&&(o=!0)):!c&&d?(n.track({type:0,doc:d}),p=!0):c&&!d&&(n.track({type:1,doc:c}),p=!0,(a||l)&&(o=!0)),p&&(d?(i=i.add(d),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{eu:i,ru:n,Ds:o,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const i=e.ru.pa();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return A(20277,{At:e})}};return n(e)-n(t)}(e.type,t.type)||this.Xa(e.doc,t.doc)),this.su(n),r=null!=r&&r;const o=t&&!r?this.ou():[],a=0===this.Za.size&&this.current&&!r?1:0,l=a!==this.Ya;return this.Ya=a,0!==i.length||l?{snapshot:new Jo(this.query,e.eu,s,i,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Ko,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=dr(),this.eu.forEach(e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))});const t=[];return e.forEach(e=>{this.Za.has(e)||t.push(new oa(e))}),this.Za.forEach(n=>{e.has(n)||t.push(new ia(n))}),t}uu(e){this.Ha=e.qs,this.Za=dr();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Jo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const la="SyncEngine";class ca{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class da{constructor(e){this.key=e,this.lu=!1}}class ua{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.hu={},this.Pu=new Zn(e=>Jn(e),Kn),this.Tu=new Map,this.Iu=new Set,this.du=new pt(ie.comparator),this.Eu=new Map,this.Au=new yi,this.Ru={},this.Vu=new Map,this.mu=ri.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}async function ha(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Oa(e);let s;const i=r.Pu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await ma(r,t,n,!0),s}async function pa(e,t){const n=Oa(e);await ma(n,t,!0,!1)}async function ma(e,t,n,r){const s=await Li(e.localStore,Un(t)),i=s.targetId,o=e.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await fa(e,t,i,"current"===o,s.resumeToken)),e.isPrimaryClient&&n&&go(e.remoteStore,s),a}async function fa(e,t,n,r,s){e.gu=(t,n,r)=>async function(e,t,n,r){let s=t.view.nu(n);s.Ds&&(s=await Bi(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.nu(n,s)}));const i=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(s,e.isPrimaryClient,i,o);return Ta(e,t.targetId,a._u),a.snapshot}(e,t,n,r);const i=await Bi(e.localStore,t,!0),o=new aa(t,i.qs),a=o.nu(i.documents),l=as.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=o.applyChanges(a,e.isPrimaryClient,l);Ta(e,n,c._u);const d=new ca(t,n,o);return e.Pu.set(t,d),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}async function ga(e,t,n){const r=P(e),s=r.Pu.get(t),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(e=>!Kn(e,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Mi(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&yo(r.remoteStore,s.targetId),Sa(r,s.targetId)}).catch(Te)):(Sa(r,s.targetId),await Mi(r.localStore,s.targetId,!0))}async function ya(e,t){const n=P(e),r=n.Pu.get(t),s=n.Tu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yo(n.remoteStore,r.targetId))}async function va(e,t){const n=P(e);try{const e=await function(e,t){const n=P(e),r=t.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const o=[];t.targetChanges.forEach((i,a)=>{const l=s.get(a);if(!l)return;o.push(n.hi.removeMatchingKeys(e,i.removedDocuments,a).next(()=>n.hi.addMatchingKeys(e,i.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(bt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Ai||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&o.push(n.hi.updateTargetData(e,c))});let a=tr(),l=dr();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Di(e,i,t.documentUpdates).next(e=>{a=e.Ls,l=e.ks})),!r.isEqual(ve.min())){const t=n.hi.getLastRemoteSnapshotVersion(e).next(t=>n.hi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Ce.waitFor(o).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Fs=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Eu.get(t);r&&(O(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.lu=!0:e.modifiedDocuments.size>0?O(r.lu,14607):e.removedDocuments.size>0&&(O(r.lu,42227),r.lu=!1))}),await Ia(n,e,t)}catch(e){await Te(e)}}function xa(e,t,n){const r=P(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Pu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=P(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.wa)s.va(t)&&(r=!0)}),r&&ta(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ba(e,t,n){const r=P(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let e=new pt(ie.comparator);e=e.insert(i,an.newNoDocument(i,ve.min()));const n=dr().add(i),s=new os(ve.min(),new Map,new pt(Q),e,n);await va(r,s),r.du=r.du.remove(i),r.Eu.delete(t),Ea(r)}else await Mi(r.localStore,t,!1).then(()=>Sa(r,t,n)).catch(Te)}async function wa(e,t){const n=P(e),r=t.batch.batchId;try{const e=await function(e,t){const n=P(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let o=Ce.resolve();return i.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);O(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=dr();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);ka(n,r,null),Na(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ia(n,e)}catch(e){await Te(e)}}async function ja(e,t,n){const r=P(e);try{const e=await function(e,t){const n=P(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(O(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);ka(r,t,n),Na(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ia(r,e)}catch(n){await Te(n)}}function Na(e,t){(e.Vu.get(t)||[]).forEach(e=>{e.resolve()}),e.Vu.delete(t)}function ka(e,t,n){const r=P(e);let s=r.Ru[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ru[r.currentUser.toKey()]=s}}function Sa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(t=>{e.Au.containsKey(t)||_a(e,t)})}function _a(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(yo(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),Ea(e))}function Ta(e,t,n){for(const r of n)r instanceof ia?(e.Au.addReference(r.key,t),Ca(e,r)):r instanceof oa?(T(la,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||_a(e,r.key)):A(19791,{yu:r})}function Ca(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(T(la,"New document in limbo: "+n),e.Iu.add(r),Ea(e))}function Ea(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new ie(ne.fromString(t)),r=e.mu.next();e.Eu.set(r,new da(n)),e.du=e.du.insert(n,r),go(e.remoteStore,new Ys(Un(zn(n.path)),r,"TargetPurposeLimboResolution",Ae.ue))}}async function Ia(e,t,n){const r=P(e),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((e,a)=>{o.push(r.gu(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Ti.Es(a.targetId,e);i.push(t)}}))}),await Promise.all(o),r.hu.J_(s),await async function(e,t){const n=P(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ce.forEach(t,t=>Ce.forEach(t.Is,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ce.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ie(e))throw e;T(Ii,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Fs.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(e,s)}}}(r.localStore,i))}async function Aa(e,t){const n=P(e);if(!n.currentUser.isEqual(t)){T(la,"User change. New user:",t.toKey());const e=await Pi(n.localStore,t);n.currentUser=t,function(e,t){e.Vu.forEach(e=>{e.forEach(e=>{e.reject(new D(F.CANCELLED,t))})}),e.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ia(n,e.Bs)}}function Ra(e,t){const n=P(e),r=n.Eu.get(t);if(r&&r.lu)return dr().add(r.key);{let e=dr();const r=n.Tu.get(t);if(!r)return e;for(const t of r){const r=n.Pu.get(t);e=e.unionWith(r.view.tu)}return e}}function Oa(e){const t=P(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=va.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ra.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ba.bind(null,t),t.hu.J_=Zo.bind(null,t.eventManager),t.hu.pu=ea.bind(null,t.eventManager),t}function Pa(e){const t=P(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wa.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ja.bind(null,t),t}class Fa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=no(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Oi(this.persistence,new Ei,e.initialUser,this.serializer)}Du(e){return new Ni(Si.Vi,this.serializer)}bu(e){return new Vi}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fa.provider={build:()=>new Fa};class Da extends Fa{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){O(this.persistence.referenceDelegate instanceof _i,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new li(n,e.asyncQueue,t)}Du(e){const t=void 0!==this.cacheSizeBytes?ni.withCacheSize(this.cacheSizeBytes):ni.DEFAULT;return new Ni(e=>_i.Vi(e,t),this.serializer)}}class za{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>xa(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Aa.bind(null,this.syncEngine),await Bo(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Qo}createDatastore(e){const t=no(e.databaseInfo.databaseId),n=function(e){return new eo(e)}(e.databaseInfo);return function(e,t,n,r){return new co(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new po(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>xa(this.syncEngine,e,0),Ki.C()?new Ki:new qi)}createSyncEngine(e,t){return function(e,t,n,r,s,i,o){const a=new ua(e,t,n,r,s,i);return o&&(a.fu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=P(e);T(ho,"RemoteStore shutting down."),t.Ia.add(5),await fo(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}za.provider={build:()=>new za};class La{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):C("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Ma="FirestoreClient";class Ba{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=N.UNAUTHENTICATED,this.clientId=Y.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{T(Ma,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(T(Ma,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new z;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=qo(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ua(e,t){e.asyncQueue.verifyOperationInProgress(),T(Ma,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Pi(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>{E("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{T("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{E("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function Wa(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Va(e);T(Ma,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Mo(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Mo(t.remoteStore,n)),e._onlineComponents=t}async function Va(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){T(Ma,"Using user provided OfflineComponentProvider");try{await Ua(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===F.FAILED_PRECONDITION||e.code===F.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;E("Error using user provided cache. Falling back to memory cache: "+n),await Ua(e,new Fa)}}else T(Ma,"Using default OfflineComponentProvider"),await Ua(e,new Da(void 0));return e._offlineComponents}async function qa(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(T(Ma,"Using user provided OnlineComponentProvider"),await Wa(e,e._uninitializedComponentsProvider._online)):(T(Ma,"Using default OnlineComponentProvider"),await Wa(e,new za))),e._onlineComponents}function Ha(e){return qa(e).then(e=>e.syncEngine)}function Ka(e){return qa(e).then(e=>e.datastore)}async function Ja(e){const t=await qa(e),n=t.eventManager;return n.onListen=ha.bind(null,t.syncEngine),n.onUnlisten=ga.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=pa.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ya.bind(null,t.syncEngine),n}function Ya(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new z;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new La({next:a=>{i.Ou(),t.enqueueAndForget(()=>Xo(e,o));const l=a.docs.has(n);!l&&a.fromCache?s.reject(new D(F.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?s.reject(new D(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(a)},error:e=>s.reject(e)}),o=new sa(zn(n.path),i,{includeMetadataChanges:!0,ka:!0});return $o(e,o)}(await Ja(e),e.asyncQueue,t,n,r)),r.promise}function Qa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new z;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new La({next:n=>{i.Ou(),t.enqueueAndForget(()=>Xo(e,o)),n.fromCache&&"server"===r.source?s.reject(new D(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),o=new sa(n,i,{includeMetadataChanges:!0,ka:!0});return $o(e,o)}(await Ja(e),e.asyncQueue,t,n,r)),r.promise}function Ga(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const $a=new Map,Xa="firestore.googleapis.com",Za=!0;class el{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new D(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Xa,this.ssl=Za}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Za;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=ti;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ii)throw new D(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new D(F.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ga(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new D(F.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new D(F.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new D(F.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tl{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new el({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new D(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new D(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new el(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new M;switch(e.type){case"firstParty":return new V(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new D(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$a.get(e);t&&(T("ComponentProvider","Removing Datastore"),$a.delete(e),t.terminate())}(this),Promise.resolve()}}class nl{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new nl(this.firestore,e,this._query)}}class rl{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rl(this.firestore,e,this._key)}toJSON(){return{type:rl._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(me(t,rl._jsonSchema))return new rl(e,n||null,new ie(ne.fromString(t.referencePath)))}}rl._jsonSchemaVersion="firestore/documentReference/1.0",rl._jsonSchema={type:pe("string",rl._jsonSchemaVersion),referencePath:pe("string")};class sl extends nl{constructor(e,t,n){super(e,t,zn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rl(this.firestore,null,new ie(e))}withConverter(e){return new sl(this.firestore,e,this._path)}}function il(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),oe("collection","path",t),e instanceof tl){const n=ne.fromString(t,...r);return le(n),new sl(e,null,n)}{if(!(e instanceof rl||e instanceof sl))throw new D(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ne.fromString(t,...r));return le(n),new sl(e.firestore,null,n)}}function ol(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),1===arguments.length&&(t=Y.newId()),oe("doc","path",t),e instanceof tl){const n=ne.fromString(t,...r);return ae(n),new rl(e,null,new ie(n))}{if(!(e instanceof rl||e instanceof sl))throw new D(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ne.fromString(t,...r));return ae(n),new rl(e.firestore,e instanceof sl?e.converter:null,new ie(n))}}const al="AsyncQueue";class ll{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ro(this,"async_queue_retry"),this.oc=()=>{const e=to();e&&T(al,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=to();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=to();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new z;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ie(e))throw e;T(al,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,C("INTERNAL UNHANDLED ERROR: ",cl(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=Vo.createAndSchedule(this,e,t,n,e=>this.lc(e));return this.ec.push(r),r}ac(){this.tc&&A(47125,{hc:cl(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function cl(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function dl(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class ul extends tl{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ll,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ll(e),this._firestoreClient=void 0,await e}}}function hl(e,t){const n="object"==typeof e?e:(0,i.Sx)(),r="string"==typeof e?e:t||Ot,s=(0,i.j6)(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(0,l.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;e=ue(e,tl);const i=(0,l.zJ)(t),o=e._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),c="".concat(t,":").concat(n);i&&((0,l.gE)("https://".concat(c)),(0,l.P1)("Firestore",!0)),o.host!==Xa&&o.host!==c&&E("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!(0,l.bD)(d,a)&&(e._setSettings(d),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=N.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new D(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new N(i)}e._authCredentials=new B(new L(t,n))}}(s,...e)}return s}function pl(e){if(e._terminated)throw new D(F.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||ml(e),e._firestoreClient}function ml(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Rt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ga(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Ba(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class fl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"count",t=arguments.length>1?arguments[1]:void 0;this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class gl{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class yl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yl(bt.fromBase64String(e))}catch(e){throw new D(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new yl(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(me(e,yl._jsonSchema))return yl.fromBase64String(e.bytes)}}yl._jsonSchemaVersion="firestore/bytes/1.0",yl._jsonSchema={type:pe("string",yl._jsonSchemaVersion),bytes:pe("string")};class vl{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new D(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new se(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xl{constructor(e){this._methodName=e}}class bl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new D(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new D(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bl._jsonSchemaVersion}}static fromJSON(e){if(me(e,bl._jsonSchema))return new bl(e.latitude,e.longitude)}}bl._jsonSchemaVersion="firestore/geoPoint/1.0",bl._jsonSchema={type:pe("string",bl._jsonSchemaVersion),latitude:pe("number"),longitude:pe("number")};class wl{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:wl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(me(e,wl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new wl(e.vectorValues);throw new D(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wl._jsonSchemaVersion="firestore/vectorValue/1.0",wl._jsonSchema={type:pe("string",wl._jsonSchemaVersion),vectorValues:pe("object")};const jl=/^__.*__$/;class Nl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Mr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lr(e,this.data,t,this.fieldTransforms)}}class kl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Mr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Sl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw A(40011,{Ec:e})}}class _l{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new _l(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.fc(e),r}gc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Vl(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(Sl(this.Ec)&&jl.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Tl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||no(e)}Dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new _l({Ec:e,methodName:t,bc:n,path:se.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cl(e){const t=e._freezeSettings(),n=no(e._databaseId);return new Tl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function El(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Dc(i.merge||i.mergeFields?2:0,t,n,s);Ml("Data must be an object, but it was:",o,r);const a=zl(r,o);let l,c;if(i.merge)l=new vt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Bl(t,r,n);if(!o.contains(s))throw new D(F.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));ql(e,s)||e.push(s)}l=new vt(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Nl(new sn(a),l,c)}class Il extends xl{_toFieldTransform(e){if(2!==e.Ec)throw 1===e.Ec?e.wc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.wc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Il}}class Al extends xl{_toFieldTransform(e){return new Cr(e.path,new br)}isEqual(e){return e instanceof Al}}class Rl extends xl{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){const t=new Sr(e.serializer,fr(e.serializer,this.Cc));return new Cr(e.path,t)}isEqual(e){return e instanceof Rl&&this.Cc===e.Cc}}function Ol(e,t,n,r){const s=e.Dc(1,t,n);Ml("Data must be an object, but it was:",s,r);const i=[],o=sn.empty();dt(r,(e,r)=>{const a=Wl(t,e,n);r=(0,l.Ku)(r);const c=s.gc(a);if(r instanceof Il)i.push(a);else{const e=Dl(r,c);null!=e&&(i.push(a),o.set(a,e))}});const a=new vt(i);return new kl(o,a,s.fieldTransforms)}function Pl(e,t,n,r,s,i){const o=e.Dc(1,t,n),a=[Bl(t,r,n)],c=[s];if(i.length%2!=0)throw new D(F.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let l=0;l<i.length;l+=2)a.push(Bl(t,i[l])),c.push(i[l+1]);const d=[],u=sn.empty();for(let p=a.length-1;p>=0;--p)if(!ql(d,a[p])){const e=a[p];let t=c[p];t=(0,l.Ku)(t);const n=o.gc(e);if(t instanceof Il)d.push(e);else{const r=Dl(t,n);null!=r&&(d.push(e),u.set(e,r))}}const h=new vt(d);return new kl(u,h,o.fieldTransforms)}function Fl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Dl(n,e.Dc(r?4:3,t))}function Dl(e,t){if(Ll(e=(0,l.Ku)(e)))return Ml("Unsupported field value:",t,e),zl(e,t);if(e instanceof xl)return function(e,t){if(!Sl(t.Ec))throw t.wc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.wc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&4!==t.Ec)throw t.wc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Dl(s,t.yc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return fr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ye.fromDate(e);return{timestampValue:bs(t.serializer,n)}}if(e instanceof ye){const n=new ye(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:bs(t.serializer,n)}}if(e instanceof bl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof yl)return{bytesValue:ws(t.serializer,e._byteString)};if(e instanceof rl){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.wc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:ks(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof wl)return function(e,t){return{mapValue:{fields:{[Ft]:{stringValue:Lt},[Mt]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.wc("VectorValues must only contain numeric values.");return pr(t.serializer,e)})}}}}}}(e,t);throw t.wc("Unsupported field value: ".concat(de(e)))}(e,t)}function zl(e,t){const n={};return ht(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):dt(e,(e,r)=>{const s=Dl(r,t.Vc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function Ll(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ye||e instanceof bl||e instanceof yl||e instanceof rl||e instanceof xl||e instanceof wl)}function Ml(e,t,n){if(!Ll(n)||!ce(n)){const r=de(n);throw"an object"===r?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function Bl(e,t,n){if((t=(0,l.Ku)(t))instanceof vl)return t._internalPath;if("string"==typeof t)return Wl(e,t);throw Vl("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ul=new RegExp("[~\\*/\\[\\]]");function Wl(e,t,n){if(t.search(Ul)>=0)throw Vl("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new vl(...t.split("."))._internalPath}catch(r){throw Vl("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Vl(e,t,n,r,s){const i=r&&!r.isEmpty(),o=void 0!==s;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(s)),l+=")"),new D(F.INVALID_ARGUMENT,a+e+l)}function ql(e,t){return e.some(e=>e.isEqual(t))}class Hl{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new rl(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Kl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Kl extends Hl{data(){return super.data()}}function Jl(e,t){return"string"==typeof t?Wl(e,t):t instanceof vl?t._internalPath:t._delegate._internalPath}function Yl(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new D(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ql{}class Gl extends Ql{}function $l(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof Ql&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof ec).length,n=e.filter(e=>e instanceof Xl).length;if(t>1||t>0&&n>0)throw new D(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Xl extends Gl{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Xl(e,t,n)}_apply(e){const t=this._parse(e);return dc(e._query,t),new nl(e.firestore,e.converter,qn(e._query,t))}_parse(e){const t=Cl(e.firestore),n=function(e,t,n,r,s,i,o){let a;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new D(F.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){cc(o,i);const t=[];for(const n of o)t.push(lc(r,e,n));a={arrayValue:{values:t}}}else a=lc(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||cc(o,i),a=Fl(n,t,o,"in"===i||"not-in"===i);return mn.create(s,i,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Zl(e,t,n){const r=t,s=Jl("where",e);return Xl._create(s,r,n)}class ec extends Ql{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ec(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)dc(n,s),n=qn(n,s)}(e._query,t),new nl(e.firestore,e.converter,qn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class tc extends Gl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new tc(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new D(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new D(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new un(t,n)}(e._query,this._field,this._direction);return new nl(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Fn(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function nc(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Jl("orderBy",e);return tc._create(n,t)}class rc extends Gl{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new rc(e,t,n)}_apply(e){return new nl(e.firestore,e.converter,Hn(e._query,this._limit,this._limitType))}}function sc(e){return he("limit",e),rc._create("limit",e,"F")}class ic extends Gl{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ic(e,t,n)}_apply(e){const t=ac(e,this.type,this._docOrFields,this._inclusive);return new nl(e.firestore,e.converter,function(e,t){return new Fn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function oc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ic._create("startAfter",t,!1)}function ac(e,t,n,r){if(n[0]=(0,l.Ku)(n[0]),n[0]instanceof Hl)return function(e,t,n,r,s){if(!r)throw new D(F.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const i=[];for(const o of Bn(e))if(o.field.isKeyField())i.push(Qt(t,r.key));else{const e=r.data.field(o.field);if(Et(e))throw new D(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new D(F.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}i.push(e)}return new ln(i,s)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const s=Cl(e.firestore);return function(e,t,n,r,s,i){const o=e.explicitOrderBy;if(s.length>o.length)throw new D(F.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<s.length;l++){const i=s[l];if(o[l].field.isKeyField()){if("string"!=typeof i)throw new D(F.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof i));if(!Mn(e)&&-1!==i.indexOf("/"))throw new D(F.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(i,"' contains a slash."));const n=e.path.child(ne.fromString(i));if(!ie.isDocumentKey(n))throw new D(F.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const s=new ie(n);a.push(Qt(t,s))}else{const e=Fl(n,r,i);a.push(e)}}return new ln(a,i)}(e._query,e.firestore._databaseId,s,t,n,r)}}function lc(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new D(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mn(t)&&-1!==n.indexOf("/"))throw new D(F.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ne.fromString(n));if(!ie.isDocumentKey(r))throw new D(F.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Qt(e,new ie(r))}if(n instanceof rl)return Qt(e,n._key);throw new D(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(de(n),"."))}function cc(e,t){if(!Array.isArray(e)||0===e.length)throw new D(F.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function dc(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new D(F.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new D(F.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class uc{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Bt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw A(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return dt(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Mt].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Nt(e.doubleValue));return new wl(s)}convertGeoPoint(e){return new bl(Nt(e.latitude),Nt(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=It(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(At(e));default:return null}}convertTimestamp(e){const t=jt(e);return new ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ne.fromString(e);O(Js(n),9688,{name:e});const r=new Pt(n.get(1),n.get(3)),s=new ie(n.popFirst(5));return r.isEqual(t)||C("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function hc(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class pc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mc extends Hl{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Jl("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new D(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=mc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}mc._jsonSchemaVersion="firestore/documentSnapshot/1.0",mc._jsonSchema={type:pe("string",mc._jsonSchemaVersion),bundleSource:pe("string","DocumentSnapshot"),bundleName:pe("string"),bundle:pe("string")};class fc extends mc{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class gc{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new pc(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new fc(this._firestore,this._userDataWriter,n.key,n,new pc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new D(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new fc(e._firestore,e._userDataWriter,n.doc.key,n.doc,new pc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new fc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:yc(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new D(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Y.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return A(61501,{type:e})}}function vc(e){e=ue(e,rl);const t=ue(e.firestore,ul);return Ya(pl(t),e._key).then(n=>Tc(t,e,n))}gc._jsonSchemaVersion="firestore/querySnapshot/1.0",gc._jsonSchema={type:pe("string",gc._jsonSchemaVersion),bundleSource:pe("string","QuerySnapshot"),bundleName:pe("string"),bundle:pe("string")};class xc extends uc{constructor(e){super(),this.firestore=e}convertBytes(e){return new yl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rl(this.firestore,null,t)}}function bc(e){e=ue(e,nl);const t=ue(e.firestore,ul),n=pl(t),r=new xc(t);return Yl(e._query),Qa(n,e._query).then(n=>new gc(t,r,e,n))}function wc(e,t,n){e=ue(e,rl);const r=ue(e.firestore,ul),s=hc(e.converter,t,n);return _c(r,[El(Cl(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Ir.none())])}function jc(e,t,n){e=ue(e,rl);const r=ue(e.firestore,ul),s=Cl(r);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return i="string"==typeof(t=(0,l.Ku)(t))||t instanceof vl?Pl(s,"updateDoc",e._key,t,n,a):Ol(s,"updateDoc",e._key,t),_c(r,[i.toMutation(e._key,Ir.exists(!0))])}function Nc(e){return _c(ue(e.firestore,ul),[new Vr(e._key,Ir.none())])}function kc(e,t){const n=ue(e.firestore,ul),r=ol(e),s=hc(e.converter,t);return _c(n,[El(Cl(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,Ir.exists(!1))]).then(()=>r)}function Sc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,o;e=(0,l.Ku)(e);let a={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||dl(n[c])||(a=n[c++]);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(dl(n[c])){const e=n[c];n[c]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[c+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,p;if(e instanceof rl)h=ue(e.firestore,ul),p=zn(e._key.path),u={next:t=>{n[c]&&n[c](Tc(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=ue(e,nl);h=ue(t.firestore,ul),p=t._query;const r=new xc(h);u={next:e=>{n[c]&&n[c](new gc(h,r,t,e))},error:n[c+1],complete:n[c+2]},Yl(e._query)}return function(e,t,n,r){const s=new La(r),i=new sa(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>$o(await Ja(e),i)),()=>{s.Ou(),e.asyncQueue.enqueueAndForget(async()=>Xo(await Ja(e),i))}}(pl(h),p,d,u)}function _c(e,t){return function(e,t){const n=new z;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Pa(e);try{const e=await function(e,t){const n=P(e),r=ye.now(),s=t.reduce((e,t)=>e.add(t.key),dr());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=tr(),l=dr();return n.Os.getEntries(e,s).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(s=>{i=s;const o=[];for(const e of t){const t=Dr(e,i.get(e.key).overlayedDocument);null!=t&&o.push(new Mr(e.key,t,on(t.value.mapValue),Ir.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:sr(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ru[e.currentUser.toKey()];r||(r=new pt(Q)),r=r.insert(t,n),e.Ru[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ia(r,e.changes),await Io(r.remoteStore)}catch(e){const t=qo(e,"Failed to persist write");n.reject(t)}}(await Ha(e),t,n)),n.promise}(pl(e),t)}function Tc(e,t,n){const r=n.docs.get(t._key),s=new xc(e);return new mc(e,s,t._key,r,new pc(n.hasPendingWrites,n.fromCache),t.converter)}function Cc(e){return function(e,t){const n=ue(e.firestore,ul),r=pl(n),s=ut(t,(e,t)=>new Yr(t,e.aggregateType,e._internalFieldPath));return function(e,t,n){const r=new z;return e.asyncQueue.enqueueAndForget(async()=>{try{const s=await Ka(e);r.resolve(async function(e,t,n){var r;const s=P(e),{request:i,ft:o,parent:a}=zs(s.serializer,Wn(t),n);s.connection.Qo||delete i.parent;const l=(await s.Jo("RunAggregationQuery",s.serializer.databaseId,a,i,1)).filter(e=>!!e.result);O(1===l.length,64727);const c=null===(r=l[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(c).reduce((e,t)=>(e[o[t]]=c[t],e),{})}(s,t,n))}catch(e){r.reject(e)}}),r.promise}(r,e._query,s).then(t=>function(e,t,n){const r=new xc(e);return new gl(t,r,n)}(n,e,t))}(e,{count:new fl("count")})}function Ec(){return new Al("serverTimestamp")}function Ic(e){return new Rl("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){k=e}(i.MF),(0,i.om)(new o.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),o=new ul(new U(e.getProvider("auth-internal")),new H(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new D(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pt(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),(0,i.KO)(w,j,e),(0,i.KO)(w,j,"esm2017")}()},484:(e,t,n)=>{"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function s(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function i(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function o(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,o=null,a=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?o="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?a="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(a="UNSAFE_componentWillUpdate"),null!==n||null!==o||null!==a){var l=e.displayName||e.name,c="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==o?"\n  "+o:"")+(null!==a?"\n  "+a:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=s),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=i;var d=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;d.call(this,e,t,r)}}return e}n.r(t),n.d(t,{polyfill:()=>o}),r.__suppressDeprecationWarning=!0,s.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0},497:(e,t,n)=>{"use strict";var r=n(218);function s(){}function i(){}i.resetWarningCache=s,e.exports=function(){function e(e,t,n,s,i,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:s};return n.PropTypes=n,n}},517:e=>{const t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,n=e=>e.match(t)||[],r=e=>e[0].toUpperCase()+e.slice(1),s=(e,t)=>n(e).join(t).toLowerCase(),i=e=>n(e).reduce((e,t)=>"".concat(e).concat(e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()),"");e.exports={words:n,upperFirst:r,camelCase:i,pascalCase:e=>r(i(e)),snakeCase:e=>s(e,"_"),kebabCase:e=>s(e,"-"),sentenceCase:e=>r(s(e," ")),titleCase:e=>n(e).map(r).join(" ")}},529:(e,t,n)=>{"use strict";n.d(t,{cY:()=>m,FA:()=>O,g:()=>R,u:()=>a,Uj:()=>o,Fy:()=>y,tD:()=>U,bD:()=>D,hp:()=>B,T9:()=>h,Tj:()=>d,yU:()=>u,XA:()=>p,mS:()=>l,Ku:()=>q,ZQ:()=>w,sr:()=>S,zJ:()=>f,c1:()=>k,Im:()=>F,lT:()=>T,zW:()=>I,jZ:()=>j,lV:()=>_,nr:()=>C,Ov:()=>E,gE:()=>g,Am:()=>L,I9:()=>M,P1:()=>b,eX:()=>A});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,o=i?e[s+1]:0,a=s+2<e.length,l=a?e[s+2]:0,c=t>>2,d=(3&t)<<4|o>>4;let u=(15&o)<<2|l>>6,h=63&l;a||(h=64,i||(u=64)),r.push(n[c],n[d],n[u],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],o=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const l=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==o||null==a||null==l)throw new i;const c=t<<2|o>>4;if(r.push(c),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=r(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const c=()=>{try{return l().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_PROXY_URL:"https://edgeenglish.net/secure-api-proxy.php",REACT_APP_FIREBASE_API_KEY:"AIzaSyDQJynQZGn3TomGEMtZYSGQrYlvO7CApNo",REACT_APP_FIREBASE_APP_ID:"1:13831715924:web:41907bce49707865e981c1",REACT_APP_FIREBASE_AUTH_DOMAIN:"edgeenglishlab.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"13831715924",REACT_APP_FIREBASE_PROJECT_ID:"edgeenglishlab",REACT_APP_FIREBASE_STORAGE_BUCKET:"edgeenglishlab.firebasestorage.app",REACT_APP_OPENAI_API_KEY:"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"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&a(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},d=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},u=e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=c())||void 0===t?void 0:t["_".concat(e)]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function f(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function g(e){return(await fetch(e,{credentials:"include"})).ok}function y(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(i)),""].join(".")}const v={};let x=!1;function b(e,t){if("undefined"===typeof window||"undefined"===typeof document||!f(window.location.host)||v[e]===t||v[e]||x)return;function n(e){return"__firebase__banner__".concat(e)}v[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(v))v[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{x=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),d=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(d,c),t.append(d,o,l,n),document.body.appendChild(t)}s?(o.innerText="Preview backend disconnected.",d.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(d.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function w(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function j(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(w())}function N(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function k(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function S(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function _(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function T(){const e=w();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function C(){return!N()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E(){return!N()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function I(){try{return"object"===typeof indexedDB}catch(e){return!1}}function A(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class R extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,R.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,O.prototype.create)}}class O{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(P,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new R(n,i,t)}}const P=/\{\$([^}]+)}/g;function F(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function D(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(z(n)&&z(i)){if(!D(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function z(e){return null!==e&&"object"===typeof e}function L(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function M(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function B(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function U(e,t){const n=new W(e,t);return n.subscribe.bind(n)}class W{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V(){}function q(e){return e&&e._delegate?e._delegate:e}},555:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>a})},558:(e,t,n)=>{"use strict";n.d(t,{yA:()=>l,j2:()=>c,db:()=>d,IG:()=>u});var r=n(150);(0,r.KO)("firebase","11.10.0","app");var s=n(458),i=n(472),o=n(147);n(395);const a={apiKey:"AIzaSyDQJynQZGn3TomGEMtZYSGQrYlvO7CApNo",authDomain:"edgeenglishlab.firebaseapp.com",projectId:"edgeenglishlab",storageBucket:"edgeenglishlab.firebasestorage.app",messagingSenderId:"13831715924",appId:"1:13831715924:web:41907bce49707865e981c1"};let l,c,d,u;try{l=(0,r.Wp)(a),c=(0,s.xI)(l),d=(0,i.aU)(l),u=(0,o.c7)(l)}catch(h){throw console.error("\u274c Firebase \ucd08\uae30\ud654 \uc2e4\ud328:",(null===h||void 0===h?void 0:h.message)||h),h}},575:e=>{"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,s=/^\d/,i=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,a=new t(512),l=new t(512),c=new t(512);function d(e){return a.get(e)||a.set(e,u(e).map(function(e){return e.replace(o,"$2")}))}function u(e){return e.match(n)||[""]}function h(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function p(e){return!h(e)&&(function(e){return e.match(s)&&!e.match(r)}(e)||function(e){return i.test(e)}(e))}e.exports={Cache:t,split:u,normalizePath:d,setter:function(e){var t=d(e);return l.get(e)||l.set(e,function(e,n){for(var r=0,s=t.length,i=e;r<s-1;){var o=t[r];if("__proto__"===o||"constructor"===o||"prototype"===o)return e;i=i[t[r++]]}i[t[r]]=n})},getter:function(e,t){var n=d(e);return c.get(e)||c.set(e,function(e){for(var r=0,s=n.length;r<s;){if(null==e&&t)return;e=e[n[r++]]}return e})},join:function(e){return e.reduce(function(e,t){return e+(h(t)||r.test(t)?"["+t+"]":(e?".":"")+t)},"")},forEach:function(e,t,n){!function(e,t,n){var r,s,i,o,a=e.length;for(s=0;s<a;s++)(r=e[s])&&(p(r)&&(r='"'+r+'"'),i=!(o=h(r))&&/^\d+$/.test(r),t.call(n,r,o,i,s,e))}(Array.isArray(e)?e:u(e),t,n)}}},579:(e,t,n)=>{"use strict";e.exports=n(153)},619:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){a&&(a.removeAttribute?a.removeAttribute("aria-hidden"):null!=a.length?a.forEach(function(e){return e.removeAttribute("aria-hidden")}):document.querySelectorAll(a).forEach(function(e){return e.removeAttribute("aria-hidden")}));a=null},t.log=function(){0},t.assertNodeList=l,t.setElement=function(e){var t=e;if("string"===typeof t&&o.canUseDOM){var n=document.querySelectorAll(t);l(n,t),t=n}return a=t||a},t.validateElement=c,t.hide=function(e){var t=!0,n=!1,r=void 0;try{for(var s,i=c(e)[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){s.value.setAttribute("aria-hidden","true")}}catch(o){n=!0,r=o}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}},t.show=function(e){var t=!0,n=!1,r=void 0;try{for(var s,i=c(e)[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){s.value.removeAttribute("aria-hidden")}}catch(o){n=!0,r=o}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}},t.documentNotReadyOrSSRTesting=function(){a=null};var r,s=n(440),i=(r=s)&&r.__esModule?r:{default:r},o=n(821);var a=null;function l(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function c(e){var t=e||a;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,i.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}},682:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=[].slice.call(t.querySelectorAll("*"),0).reduce(function(t,n){return t.concat(n.shadowRoot?e(n.shadowRoot):[n])},[]);return n.filter(a)};var n="none",r="contents",s=/^(input|select|textarea|button|object|iframe)$/;function i(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;try{var s=window.getComputedStyle(e),i=s.getPropertyValue("display");return t?i!==r&&function(e,t){return"visible"!==t.getPropertyValue("overflow")||e.scrollWidth<=0&&e.scrollHeight<=0}(e,s):i===n}catch(o){return console.warn("Failed to inspect element style"),!1}}function o(e,t){var n=e.nodeName.toLowerCase();return(s.test(n)&&!e.disabled||"a"===n&&e.href||t)&&function(e){for(var t=e,n=e.getRootNode&&e.getRootNode();t&&t!==document.body;){if(n&&t===n&&(t=n.host.parentNode),i(t))return!1;t=t.parentNode}return!0}(e)}function a(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var n=isNaN(t);return(n||t>=0)&&o(e,!n)}e.exports=t.default},704:e=>{function t(e,t){var n=e.length,r=new Array(n),s={},i=n,o=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var s=e[n];t.has(s[0])||t.set(s[0],new Set),t.has(s[1])||t.set(s[1],new Set),t.get(s[0]).add(s[1])}return t}(t),a=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach(function(e){if(!a.has(e[0])||!a.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});i--;)s[i]||l(e[i],i,new Set);return r;function l(e,t,i){if(i.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(h){c=""}throw new Error("Cyclic dependency"+c)}if(!a.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!s[t]){s[t]=!0;var d=o.get(e)||new Set;if(t=(d=Array.from(d)).length){i.add(e);do{var u=d[--t];l(u,a.get(u),i)}while(t);i.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var s=e[n];t.add(s[0]),t.add(s[1])}return Array.from(t)}(e),e)},e.exports.array=t},730:(e,t,n)=>{"use strict";var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,n,r,s,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function x(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!u.call(m,e)||!u.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var D,z=Object.assign;function L(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var M=!1;function B(e,t){if(!e||M)return"";M=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(1!==o||1!==a)do{if(o--,0>--a||s[o]!==i[a]){var l="\n"+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{M=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function U(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case j:return"Portal";case S:return"Profiler";case k:return"StrictMode";case E:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function X(e,t){$(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ie(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(pe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ye=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,Ne=null,ke=null;function Se(e){if(e=xs(e)){if("function"!==typeof je)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),je(e.stateNode,e.type,t))}}function _e(e){Ne?ke?ke.push(e):ke=[e]:Ne=e}function Te(){if(Ne){var e=Ne,t=ke;if(ke=Ne=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ee(){}var Ie=!1;function Ae(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ce(e,t,n)}finally{Ie=!1,(null!==Ne||null!==ke)&&(Ee(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(d)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(de){Oe=!1}function Fe(e,t,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var De=!1,ze=null,Le=!1,Me=null,Be={onError:function(e){De=!0,ze=e}};function Ue(e,t,n,r,s,i,o,a,l){De=!1,ze=null,Fe.apply(Be,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(We(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var o=s.alternate;if(null===o){if(null!==(r=s.return)){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return qe(s),e;if(o===r)return qe(s),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Je=s.unstable_scheduleCallback,Ye=s.unstable_cancelCallback,Qe=s.unstable_shouldYield,Ge=s.unstable_requestPaint,$e=s.unstable_now,Xe=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~s;0!==a?r=ut(a):0!==(i&=o)&&(r=ut(i))}else 0!==(o=n&~s)?r=ut(o):0!==i&&(r=ut(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-ot(t)),r|=e[n],t&=~s;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,Nt,kt,St,_t=!1,Tt=[],Ct=null,Et=null,It=null,At=new Map,Rt=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ft(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Dt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=xs(t))&&jt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function zt(e){var t=vs(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void St(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xs(n))&&jt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Mt(e,t,n){Lt(e)&&n.delete(t)}function Bt(){_t=!1,null!==Ct&&Lt(Ct)&&(Ct=null),null!==Et&&Lt(Et)&&(Et=null),null!==It&&Lt(It)&&(It=null),At.forEach(Mt),Rt.forEach(Mt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Bt)))}function Wt(e){function t(t){return Ut(t,e)}if(0<Tt.length){Ut(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Ut(Ct,e),null!==Et&&Ut(Et,e),null!==It&&Ut(It,e),At.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)zt(n),null===n.blockedOn&&Ot.shift()}var Vt=b.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var s=xt,i=Vt.transition;Vt.transition=null;try{xt=1,Jt(e,t,n,r)}finally{xt=s,Vt.transition=i}}function Kt(e,t,n,r){var s=xt,i=Vt.transition;Vt.transition=null;try{xt=4,Jt(e,t,n,r)}finally{xt=s,Vt.transition=i}}function Jt(e,t,n,r){if(qt){var s=Qt(e,t,n,r);if(null===s)qr(e,t,r,Yt,n),Ft(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Ct=Dt(Ct,e,t,n,r,s),!0;case"dragenter":return Et=Dt(Et,e,t,n,r,s),!0;case"mouseover":return It=Dt(It,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return At.set(i,Dt(At.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Rt.set(i,Dt(Rt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Ft(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==s;){var i=xs(s);if(null!==i&&wt(i),null===(i=Qt(e,t,n,r))&&qr(e,t,r,Yt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Yt=null;function Qt(e,t,n,r){if(Yt=null,null!==(e=vs(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,s="value"in $t?$t.value:$t.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(cn),un=z({},cn,{view:0,detail:0}),hn=sn(un),pn=z({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),mn=sn(pn),fn=sn(z({},pn,{dataTransfer:0})),gn=sn(z({},un,{relatedTarget:0})),yn=sn(z({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=z({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(vn),bn=sn(z({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function Sn(){return kn}var _n=z({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(_n),Cn=sn(z({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=sn(z({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),In=sn(z({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=z({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(An),On=[9,13,27,32],Pn=d&&"CompositionEvent"in window,Fn=null;d&&"documentMode"in document&&(Fn=document.documentMode);var Dn=d&&"TextEvent"in window&&!Fn,zn=d&&(!Pn||Fn&&8<Fn&&11>=Fn),Ln=String.fromCharCode(32),Mn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Hn(e,t,n,r){_e(r),0<(t=Kr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Jn=null;function Yn(e){Lr(e,0)}function Qn(e){if(J(bs(e)))return e}function Gn(e,t){if("change"===e)return t}var $n=!1;if(d){var Xn;if(d){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Jn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Jn)){var t=[];Hn(t,Jn,e,we(e)),Ae(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Jn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Jn)}function ir(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!u.call(t,s)||!ar(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=dr(n,i);var o=dr(n,r);s&&o&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Nr={},kr={};function Sr(e){if(Nr[e])return Nr[e];if(!jr[e])return e;var t,n=jr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Nr[e]=n[t];return e}d&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);var _r=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Er=Sr("transitionend"),Ir=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ir.set(e,t),l(t,[e])}for(var Or=0;Or<Ar.length;Or++){var Pr=Ar[Or];Rr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Rr(_r,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Er,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function zr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,o,a,l,c){if(Ue.apply(this,arguments),De){if(!De)throw Error(i(198));var d=ze;De=!1,ze=null,Le||(Le=!0,Me=d)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;zr(s,a,c),i=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;zr(s,a,c),i=l}}}if(Le)throw e=Me,Le=!1,Me=null,e}function Mr(e,t){var n=t[fs];void 0===n&&(n=t[fs]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Ur]){e[Ur]=!0,o.forEach(function(t){"selectionchange"!==t&&(Dr.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Gt(t)){case 1:var s=Ht;break;case 4:s=Kt;break;default:s=Jt}n=s.bind(null,t,n,e),s=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;o=o.return}for(;null!==a;){if(null===(o=vs(a)))return;if(5===(l=o.tag)||6===l){r=i=o;continue e}a=a.parentNode}}r=r.return}Ae(function(){var r=i,s=we(n),o=[];e:{var a=Ir.get(e);if(void 0!==a){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case _r:case Tr:case Cr:l=yn;break;case Er:l=In;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==a?a+"Capture":null:a;d=[];for(var p,m=r;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Re(m,h))&&d.push(Hr(m,f,p)))),u)break;m=m.return}0<d.length&&(a=new l(a,c,null,n,s),o.push({event:a,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[ms])&&(l||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(u=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=mn,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=Cn,f="onPointerLeave",h="onPointerEnter",m="pointer"),u=null==l?a:bs(l),p=null==c?a:bs(c),(a=new d(f,m+"leave",l,n,s)).target=u,a.relatedTarget=p,f=null,vs(s)===r&&((d=new d(h,m+"enter",c,n,s)).target=p,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,m=0,p=d=l;p;p=Jr(p))m++;for(p=0,f=h;f;f=Jr(f))p++;for(;0<m-p;)d=Jr(d),m--;for(;0<p-m;)h=Jr(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Jr(d),h=Jr(h)}d=null}else d=null;null!==l&&Yr(o,a,l,d,!1),null!==c&&null!==u&&Yr(o,u,c,d,!0)}if("select"===(l=(a=r?bs(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Gn;else if(qn(a))if($n)g=or;else{g=sr;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(o,g,n,s):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bs(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(o,n,s);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":br(o,n,s)}var v;if(Pn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Wn?Bn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(zn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Wn&&(v=en()):(Xt="value"in($t=s)?$t.value:$t.textContent,Wn=!0)),0<(y=Kr(r,x)).length&&(x=new bn(x,e,null,n,s),o.push({event:x,listeners:y}),v?x.data=v:null!==(v=Un(n))&&(x.data=v))),(v=Dn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Mn=!0,Ln);case"textInput":return(e=t.data)===Ln&&Mn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Pn&&Bn(e,t)?(e=en(),Zt=Xt=$t=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(s=new bn("onBeforeInput","beforeinput",null,n,s),o.push({event:s,listeners:r}),s.data=v))}Lr(o,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Re(e,n))&&r.unshift(Hr(e,i,s)),null!=(i=Re(e,t))&&r.push(Hr(e,i,s))),e=e.return}return r}function Jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,s){for(var i=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,s?null!=(l=Re(n,i))&&o.unshift(Hr(n,l,a)):s||null!=(l=Re(n,i))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Gr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,os="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(as)}:rs;function as(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Wt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),hs="__reactFiber$"+us,ps="__reactProps$"+us,ms="__reactContainer$"+us,fs="__reactEvents$"+us,gs="__reactListeners$"+us,ys="__reactHandles$"+us;function vs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ds(e);null!==e;){if(n=e[hs])return n;e=ds(e)}return t}n=(e=n).parentNode}return null}function xs(e){return!(e=e[hs]||e[ms])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[ps]||null}var js=[],Ns=-1;function ks(e){return{current:e}}function Ss(e){0>Ns||(e.current=js[Ns],js[Ns]=null,Ns--)}function _s(e,t){Ns++,js[Ns]=e.current,e.current=t}var Ts={},Cs=ks(Ts),Es=ks(!1),Is=Ts;function As(e,t){var n=e.type.contextTypes;if(!n)return Ts;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Rs(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Os(){Ss(Es),Ss(Cs)}function Ps(e,t,n){if(Cs.current!==Ts)throw Error(i(168));_s(Cs,t),_s(Es,n)}function Fs(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,V(e)||"Unknown",s));return z({},n,r)}function Ds(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ts,Is=Cs.current,_s(Cs,e),_s(Es,Es.current),!0}function zs(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Fs(e,t,Is),r.__reactInternalMemoizedMergedChildContext=e,Ss(Es),Ss(Cs),_s(Cs,e)):Ss(Es),_s(Es,n)}var Ls=null,Ms=!1,Bs=!1;function Us(e){null===Ls?Ls=[e]:Ls.push(e)}function Ws(){if(!Bs&&null!==Ls){Bs=!0;var e=0,t=xt;try{var n=Ls;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ls=null,Ms=!1}catch(s){throw null!==Ls&&(Ls=Ls.slice(e+1)),Je(Ze,Ws),s}finally{xt=t,Bs=!1}}return null}var Vs=[],qs=0,Hs=null,Ks=0,Js=[],Ys=0,Qs=null,Gs=1,$s="";function Xs(e,t){Vs[qs++]=Ks,Vs[qs++]=Hs,Hs=e,Ks=t}function Zs(e,t,n){Js[Ys++]=Gs,Js[Ys++]=$s,Js[Ys++]=Qs,Qs=e;var r=Gs;e=$s;var s=32-ot(r)-1;r&=~(1<<s),n+=1;var i=32-ot(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Gs=1<<32-ot(t)+s|n<<s|r,$s=i+e}else Gs=1<<i|n<<s|r,$s=e}function ei(e){null!==e.return&&(Xs(e,1),Zs(e,1,0))}function ti(e){for(;e===Hs;)Hs=Vs[--qs],Vs[qs]=null,Ks=Vs[--qs],Vs[qs]=null;for(;e===Qs;)Qs=Js[--Ys],Js[Ys]=null,$s=Js[--Ys],Js[Ys]=null,Gs=Js[--Ys],Js[Ys]=null}var ni=null,ri=null,si=!1,ii=null;function oi(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ai(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qs?{id:Gs,overflow:$s}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!ai(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&ai(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function ui(e){if(e!==ni)return!1;if(!si)return di(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)oi(e,t),t=cs(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=cs(e.nextSibling)}function pi(){ri=ni=null,si=!1}function mi(e){null===ii?ii=[e]:ii.push(e)}var fi=b.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=s.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function xi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===N?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&vi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,r,i){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case j:return(t=Lc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||F(t))return(t=Fc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function p(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case j:return n.key===s?d(e,t,n,r):null;case R:return p(e,t,(s=n._init)(n._payload),r)}if(te(n)||F(n))return null!==s?null:u(e,t,n,r,null);yi(e,n)}return null}function m(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case j:return d(t,e=e.get(null===r.key?n:r.key)||null,r,s);case R:return m(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||F(r))return u(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function f(s,i,a,l){for(var c=null,d=null,u=i,f=i=0,g=null;null!==u&&f<a.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var y=p(s,u,a[f],l);if(null===y){null===u&&(u=g);break}e&&u&&null===y.alternate&&t(s,u),i=o(y,i,f),null===d?c=y:d.sibling=y,d=y,u=g}if(f===a.length)return n(s,u),si&&Xs(s,f),c;if(null===u){for(;f<a.length;f++)null!==(u=h(s,a[f],l))&&(i=o(u,i,f),null===d?c=u:d.sibling=u,d=u);return si&&Xs(s,f),c}for(u=r(s,u);f<a.length;f++)null!==(g=m(u,s,f,a[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),i=o(g,i,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(s,e)}),si&&Xs(s,f),c}function g(s,a,l,c){var d=F(l);if("function"!==typeof d)throw Error(i(150));if(null==(l=d.call(l)))throw Error(i(151));for(var u=d=null,f=a,g=a=0,y=null,v=l.next();null!==f&&!v.done;g++,v=l.next()){f.index>g?(y=f,f=null):y=f.sibling;var x=p(s,f,v.value,c);if(null===x){null===f&&(f=y);break}e&&f&&null===x.alternate&&t(s,f),a=o(x,a,g),null===u?d=x:u.sibling=x,u=x,f=y}if(v.done)return n(s,f),si&&Xs(s,g),d;if(null===f){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(a=o(v,a,g),null===u?d=v:u.sibling=v,u=v);return si&&Xs(s,g),d}for(f=r(s,f);!v.done;g++,v=l.next())null!==(v=m(f,s,g,v.value,c))&&(e&&null!==v.alternate&&f.delete(null===v.key?g:v.key),a=o(v,a,g),null===u?d=v:u.sibling=v,u=v);return e&&f.forEach(function(e){return t(s,e)}),si&&Xs(s,g),d}return function e(r,i,o,l){if("object"===typeof o&&null!==o&&o.type===N&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,d=i;null!==d;){if(d.key===c){if((c=o.type)===N){if(7===d.tag){n(r,d.sibling),(i=s(d,o.props.children)).return=r,r=i;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&vi(c)===d.type){n(r,d.sibling),(i=s(d,o.props)).ref=gi(r,d,o),i.return=r,r=i;break e}n(r,d);break}t(r,d),d=d.sibling}o.type===N?((i=Fc(o.props.children,r.mode,l,o.key)).return=r,r=i):((l=Pc(o.type,o.key,o.props,null,r.mode,l)).ref=gi(r,i,o),l.return=r,r=l)}return a(r);case j:e:{for(d=o.key;null!==i;){if(i.key===d){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=s(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Lc(o,r.mode,l)).return=r,r=i}return a(r);case R:return e(r,i,(d=o._init)(o._payload),l)}if(te(o))return f(r,i,o,l);if(F(o))return g(r,i,o,l);yi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,o)).return=r,r=i):(n(r,i),(i=zc(o,r.mode,l)).return=r,r=i),a(r)):n(r,i)}}var bi=xi(!0),wi=xi(!1),ji=ks(null),Ni=null,ki=null,Si=null;function _i(){Si=ki=Ni=null}function Ti(e){var t=ji.current;Ss(ji),e._currentValue=t}function Ci(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t){Ni=e,Si=ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xa=!0),e.firstContext=null)}function Ii(e){var t=e._currentValue;if(Si!==e)if(e={context:e,memoizedValue:t,next:null},null===ki){if(null===Ni)throw Error(i(308));ki=e,Ni.dependencies={lanes:0,firstContext:e}}else ki=ki.next=e;return t}var Ai=null;function Ri(e){null===Ai?Ai=[e]:Ai.push(e)}function Oi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Ri(t)):(n.next=s.next,s.next=n),t.interleaved=n,Pi(e,r)}function Pi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Fi=!1;function Di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Li(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Pi(e,n)}return null===(s=r.interleaved)?(t.next=t,Ri(r)):(t.next=s.next,s.next=t),r.interleaved=t,Pi(e,n)}function Bi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ui(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wi(e,t,n,r){var s=e.updateQueue;Fi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var d=e.alternate;null!==d&&((a=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===a?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(null!==i){var u=s.baseState;for(o=0,d=c=l=null,a=i;;){var h=a.lane,p=a.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,f=a;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){u=m.call(p,u,h);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,u,h):m)||void 0===h)break e;u=z({},u,h);break e;case 2:Fi=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,o|=h;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(h=a).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{o|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Dl|=o,e.lanes=o,e.memoizedState=u}}function Vi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var qi={},Hi=ks(qi),Ki=ks(qi),Ji=ks(qi);function Yi(e){if(e===qi)throw Error(i(174));return e}function Qi(e,t){switch(_s(Ji,t),_s(Ki,e),_s(Hi,qi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ss(Hi),_s(Hi,t)}function Gi(){Ss(Hi),Ss(Ki),Ss(Ji)}function $i(e){Yi(Ji.current);var t=Yi(Hi.current),n=le(t,e.type);t!==n&&(_s(Ki,e),_s(Hi,n))}function Xi(e){Ki.current===e&&(Ss(Hi),Ss(Ki))}var Zi=ks(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,so=b.ReactCurrentBatchConfig,io=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,po=0;function mo(){throw Error(i(321))}function fo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,s,o){if(io=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,s),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(i(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,s)}while(uo)}if(ro.current=Xo,t=null!==ao&&null!==ao.next,io=0,lo=ao=oo=null,co=!1,t)throw Error(i(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function xo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function wo(e){var t=xo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ao,s=r.baseQueue,o=n.pending;if(null!==o){if(null!==s){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(null!==s){o=s.next,r=r.baseState;var l=a=null,c=null,d=o;do{var u=d.lane;if((io&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,oo.lanes|=u,Dl|=u}d=d.next}while(null!==d&&d!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(xa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{o=s.lane,oo.lanes|=o,Dl|=o,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function jo(e){var t=xo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(null!==s){n.pending=null;var a=s=s.next;do{o=e(o,a.action),a=a.next}while(a!==s);ar(o,t.memoizedState)||(xa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(){}function ko(e,t){var n=oo,r=xo(),s=t(),o=!ar(r.memoizedState,s);if(o&&(r.memoizedState=s,xa=!0),r=r.queue,Do(To.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Ao(9,_o.bind(null,n,r,s,t),void 0,null),null===El)throw Error(i(349));0!==(30&io)||So(n,t,s)}return s}function So(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _o(e,t,n,r){t.value=n,t.getSnapshot=r,Co(t)&&Eo(e)}function To(e,t,n){return n(function(){Co(t)&&Eo(e)})}function Co(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Eo(e){var t=Pi(e,1);null!==t&&nc(t,e,1,-1)}function Io(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,oo,e),[t.memoizedState,e]}function Ao(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return xo().memoizedState}function Oo(e,t,n,r){var s=vo();oo.flags|=e,s.memoizedState=Ao(1|t,n,void 0,void 0===r?null:r)}function Po(e,t,n,r){var s=xo();r=void 0===r?null:r;var i=void 0;if(null!==ao){var o=ao.memoizedState;if(i=o.destroy,null!==r&&fo(r,o.deps))return void(s.memoizedState=Ao(t,n,i,r))}oo.flags|=e,s.memoizedState=Ao(1|t,n,i,r)}function Fo(e,t){return Oo(8390656,8,e,t)}function Do(e,t){return Po(2048,8,e,t)}function zo(e,t){return Po(4,2,e,t)}function Lo(e,t){return Po(4,4,e,t)}function Mo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4,4,Mo.bind(null,t,e),n)}function Uo(){}function Wo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Vo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qo(e,t,n){return 0===(21&io)?(e.baseState&&(e.baseState=!1,xa=!0),e.memoizedState=n):(ar(n,t)||(n=ft(),oo.lanes|=n,Dl|=n,e.baseState=!0),t)}function Ho(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{xt=n,so.transition=r}}function Ko(){return xo().memoizedState}function Jo(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e))Go(t,n);else if(null!==(n=Oi(e,t,n,r))){nc(n,e,r,ec()),$o(n,t,r)}}function Yo(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Go(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(s.next=s,Ri(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Oi(e,t,s,r))&&(nc(n,e,r,s=ec()),$o(n,t,r))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Go(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $o(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xo={readContext:Ii,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},Zo={readContext:Ii,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:Fo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4194308,4,Mo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Jo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Io,useDebugValue:Uo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Io(!1),t=e[0];return e=Ho.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,s=vo();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===El)throw Error(i(349));0!==(30&io)||So(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Fo(To.bind(null,r,o,e),[e]),r.flags|=2048,Ao(9,_o.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=El.identifierPrefix;if(si){var n=$s;t=":"+t+"R"+(n=(Gs&~(1<<32-ot(Gs)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ii,useCallback:Wo,useContext:Ii,useEffect:Do,useImperativeHandle:Bo,useInsertionEffect:zo,useLayoutEffect:Lo,useMemo:Vo,useReducer:wo,useRef:Ro,useState:function(){return wo(bo)},useDebugValue:Uo,useDeferredValue:function(e){return qo(xo(),ao.memoizedState,e)},useTransition:function(){return[wo(bo)[0],xo().memoizedState]},useMutableSource:No,useSyncExternalStore:ko,useId:Ko,unstable_isNewReconciler:!1},ta={readContext:Ii,useCallback:Wo,useContext:Ii,useEffect:Do,useImperativeHandle:Bo,useInsertionEffect:zo,useLayoutEffect:Lo,useMemo:Vo,useReducer:jo,useRef:Ro,useState:function(){return jo(bo)},useDebugValue:Uo,useDeferredValue:function(e){var t=xo();return null===ao?t.memoizedState=e:qo(t,ao.memoizedState,e)},useTransition:function(){return[jo(bo)[0],xo().memoizedState]},useMutableSource:No,useSyncExternalStore:ko,useId:Ko,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=z({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:z({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var sa={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Li(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Mi(e,i,s))&&(nc(t,e,s,r),Bi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Li(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Mi(e,i,s))&&(nc(t,e,s,r),Bi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=Li(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Mi(e,s,r))&&(nc(t,e,r,n),Bi(t,e,r))}};function ia(e,t,n,r,s,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function oa(e,t,n){var r=!1,s=Ts,i=t.contextType;return"object"===typeof i&&null!==i?i=Ii(i):(s=Rs(t)?Is:Cs.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?As(e,s):Ts),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sa.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Di(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ii(i):(i=Rs(t)?Is:Cs.current,s.context=As(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ra(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&sa.enqueueReplaceState(s,s.state,null),Wi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function da(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ua(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ha="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Li(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Hl=r),ua(0,t)},n}function ma(e,t,n){(n=Li(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ua(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ua(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fa(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Li(-1,1)).tag=2,Mi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var va=b.ReactCurrentOwner,xa=!1;function ba(e,t,n,r){t.child=null===e?wi(t,null,n,r):bi(t,e.child,n,r)}function wa(e,t,n,r,s){n=n.render;var i=t.ref;return Ei(t,s),r=go(e,t,n,r,i,s),n=yo(),null===e||xa?(si&&n&&ei(t),t.flags|=1,ba(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qa(e,t,s))}function ja(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Rc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Na(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return qa(e,t,s)}return t.flags|=1,(e=Oc(i,r)).ref=t.ref,e.return=t,t.child=e}function Na(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(xa=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,qa(e,t,s);0!==(131072&e.flags)&&(xa=!0)}}return _a(e,t,n,r,s)}function ka(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_s(Ol,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_s(Ol,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,_s(Ol,Rl),Rl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,_s(Ol,Rl),Rl|=r;return ba(e,t,s,n),t.child}function Sa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _a(e,t,n,r,s){var i=Rs(n)?Is:Cs.current;return i=As(t,i),Ei(t,s),n=go(e,t,n,r,i,s),r=yo(),null===e||xa?(si&&r&&ei(t),t.flags|=1,ba(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qa(e,t,s))}function Ta(e,t,n,r,s){if(Rs(n)){var i=!0;Ds(t)}else i=!1;if(Ei(t,s),null===t.stateNode)Va(e,t),oa(t,n,r),la(t,n,r,s),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ii(c):c=As(t,c=Rs(n)?Is:Cs.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate;u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Fi=!1;var h=t.memoizedState;o.state=h,Wi(t,r,o,s),l=t.memoizedState,a!==r||h!==l||Es.current||Fi?("function"===typeof d&&(ra(t,n,d,r),l=t.memoizedState),(a=Fi||ia(t,n,a,r,h,l,c))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,zi(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,u=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ii(l):l=As(t,l=Rs(n)?Is:Cs.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==u||h!==l)&&aa(t,o,r,l),Fi=!1,h=t.memoizedState,o.state=h,Wi(t,r,o,s);var m=t.memoizedState;a!==u||h!==m||Es.current||Fi?("function"===typeof p&&(ra(t,n,p,r),m=t.memoizedState),(c=Fi||ia(t,n,c,r,h,m,l)||!1)?(d||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,m,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ca(e,t,n,r,i,s)}function Ca(e,t,n,r,s,i){Sa(e,t);var o=0!==(128&t.flags);if(!r&&!o)return s&&zs(t,n,!1),qa(e,t,i);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bi(t,e.child,null,i),t.child=bi(t,null,a,i)):ba(e,t,a,i),t.memoizedState=r.state,s&&zs(t,n,!0),t.child}function Ea(e){var t=e.stateNode;t.pendingContext?Ps(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ps(0,t.context,!1),Qi(e,t.containerInfo)}function Ia(e,t,n,r,s){return pi(),mi(s),t.flags|=256,ba(e,t,n,r),t.child}var Aa,Ra,Oa,Pa,Fa={dehydrated:null,treeContext:null,retryLane:0};function Da(e){return{baseLanes:e,cachePool:null,transitions:null}}function za(e,t,n){var r,s=t.pendingProps,o=Zi.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),_s(Zi,1&o),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,a?(s=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Dc(l,s,0,null),e=Fc(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Da(n),t.memoizedState=Fa,e):La(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,s,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ma(e,t,a,r=da(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=Dc({mode:"visible",children:r.children},s,0,null),(o=Fc(o,s,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bi(t,e.child,null,a),t.child.memoizedState=Da(a),t.memoizedState=Fa,o);if(0===(1&t.mode))return Ma(e,t,a,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Ma(e,t,a,r=da(o=Error(i(419)),r,void 0))}if(l=0!==(a&e.childLanes),xa||l){if(null!==(r=El)){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|a))?0:s)&&s!==o.retryLane&&(o.retryLane=s,Pi(e,s),nc(r,e,s,-1))}return fc(),Ma(e,t,a,r=da(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Js[Ys++]=Gs,Js[Ys++]=$s,Js[Ys++]=Qs,Gs=e.id,$s=e.overflow,Qs=t),t=La(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,o,n);if(a){a=s.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==o?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Fc(a,l,n,null)).flags|=2,a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=null===(l=e.child.memoizedState)?Da(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Fa,s}return e=(a=e.child).sibling,s=Oc(a,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function La(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ma(e,t,n,r){return null!==r&&mi(r),bi(t,e.child,null,n),(e=La(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ci(e.return,t,n)}function Ua(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Wa(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=Zi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_s(Zi,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ua(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===eo(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ua(t,!0,n,null,i);break;case"together":Ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Va(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ja(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Rs(t.type)&&Os(),Ka(t),null;case 3:return r=t.stateNode,Gi(),Ss(Es),Ss(Cs),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ui(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(oc(ii),ii=null))),Ra(e,t),Ka(t),null;case 5:Xi(t);var s=Yi(Ji.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ka(t),null}if(e=Yi(Hi.current),ui(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hs]=t,r[ps]=o,e=0!==(1&t.mode),n){case"dialog":Mr("cancel",r),Mr("close",r);break;case"iframe":case"object":case"embed":Mr("load",r);break;case"video":case"audio":for(s=0;s<Fr.length;s++)Mr(Fr[s],r);break;case"source":Mr("error",r);break;case"img":case"image":case"link":Mr("error",r),Mr("load",r);break;case"details":Mr("toggle",r);break;case"input":G(r,o),Mr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Mr("invalid",r);break;case"textarea":se(r,o),Mr("invalid",r)}for(var l in ve(n,o),s=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),s=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Mr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[ps]=r,Aa(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":Mr("cancel",e),Mr("close",e),s=r;break;case"iframe":case"object":case"embed":Mr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Fr.length;s++)Mr(Fr[s],e);s=r;break;case"source":Mr("error",e),s=r;break;case"img":case"image":case"link":Mr("error",e),Mr("load",e),s=r;break;case"details":Mr("toggle",e),s=r;break;case"input":G(e,r),s=Q(e,r),Mr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=z({},r,{value:void 0}),Mr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Mr("invalid",e)}for(o in ve(n,s),c=s)if(c.hasOwnProperty(o)){var d=c[o];"style"===o?ge(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===o?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=d&&"onScroll"===o&&Mr("scroll",e):null!=d&&x(e,o,d,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Pa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Yi(Ji.current),Yi(Hi.current),ui(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(o=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Ka(t),null;case 13:if(Ss(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),pi(),t.flags|=98560,o=!1;else if(o=ui(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[hs]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==ii&&(oc(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Pl&&(Pl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return Gi(),Ra(e,t),null===e&&Wr(t.stateNode.containerInfo),Ka(t),null;case 10:return Ti(t.type._context),Ka(t),null;case 19:if(Ss(Zi),null===(o=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _s(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Wl&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!si)return Ka(t),null}else 2*$e()-o.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=Zi.current,_s(Zi,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ya(e,t){switch(ti(t),t.tag){case 1:return Rs(t.type)&&Os(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Gi(),Ss(Es),Ss(Cs),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xi(t),null;case 13:if(Ss(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ss(Zi),null;case 4:return Gi(),null;case 10:return Ti(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Oa=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Yi(Hi.current);var i,o=null;switch(n){case"input":s=Q(e,s),r=Q(e,r),o=[];break;case"select":s=z({},s,{value:void 0}),r=z({},r,{value:void 0}),o=[];break;case"textarea":s=re(e,s),r=re(e,r),o=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(d in ve(n,r),n=null,s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var l=s[d];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(a.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=s?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(a.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Mr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}},Pa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Ga=!1,$a="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){kc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&el(t,n,i)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[ps],delete t[fs],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(a){}switch(n.tag){case 5:Ga||Za(n,t);case 6:var r=dl,s=ul;dl=null,hl(e,t,n),ul=s,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Wt(e)):ls(dl,n.stateNode));break;case 4:r=dl,s=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=s;break;case 0:case 11:case 14:case 15:if(!Ga&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&el(n,t,o),s=s.next}while(s!==r)}hl(e,t,n);break;case 1:if(!Ga&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){kc(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ga=(r=Ga)||null!==n.memoizedState,hl(e,t,n),Ga=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $a),t.forEach(function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(i(160));pl(o,a,s),dl=null,ul=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(d){kc(s,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){kc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:fl(t,e),yl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(fl(t,e),yl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(s,o),xe(l,a);var d=xe(l,o);for(a=0;a<c.length;a+=2){var u=c[a],h=c[a+1];"style"===u?ge(s,h):"dangerouslySetInnerHTML"===u?ue(s,h):"children"===u?he(s,h):x(s,u,h,d)}switch(l){case"input":X(s,o);break;case"textarea":ie(s,o);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var m=o.value;null!=m?ne(s,!!o.multiple,m,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(s,!!o.multiple,o.defaultValue,!0):ne(s,!!o.multiple,o.multiple?[]:"",!1))}s[ps]=o}catch(g){kc(e,e.return,g)}}break;case 6:if(fl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(g){kc(e,e.return,g)}}break;case 3:if(fl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:fl(t,e),yl(e);break;case 13:fl(t,e),yl(e),8192&(s=e.child).flags&&(o=null!==s.memoizedState,s.stateNode.isHidden=o,!o||null!==s.alternate&&null!==s.alternate.memoizedState||(Ul=$e())),4&r&&ml(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Ga=(d=Ga)||u,fl(t,e),Ga=d):fl(t,e),yl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Xa=e,u=e.child;null!==u;){for(h=Xa=u;null!==Xa;){switch(m=(p=Xa).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Za(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){r=p,n=p.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:Za(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==m?(m.return=p,Xa=m):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{s=h.stateNode,d?"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",a))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),cl(e,al(e),s);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(i(161))}}catch(a){kc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xa=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var s=Xa,i=s.child;if(22===s.tag&&r){var o=null!==s.memoizedState||Qa;if(!o){var a=s.alternate,l=null!==a&&null!==a.memoizedState||Ga;a=Qa;var c=Ga;if(Qa=o,(Ga=l)&&!c)for(Xa=s;null!==Xa;)l=(o=Xa).child,22===o.tag&&null!==o.memoizedState?jl(s):null!==l?(l.return=o,Xa=l):jl(s);for(;null!==i;)Xa=i,xl(i,t,n),i=i.sibling;Xa=s,Qa=a,Ga=c}bl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Xa=i):bl(e)}}function bl(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ga||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ga)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Vi(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vi(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(i(163))}Ga||512&t.flags&&sl(t)}catch(p){kc(t,t.return,p)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function wl(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function jl(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){kc(t,s,l)}}var i=t.return;try{sl(t)}catch(l){kc(t,i,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){kc(t,o,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Nl,kl=Math.ceil,Sl=b.ReactCurrentDispatcher,_l=b.ReactCurrentOwner,Tl=b.ReactCurrentBatchConfig,Cl=0,El=null,Il=null,Al=0,Rl=0,Ol=ks(0),Pl=0,Fl=null,Dl=0,zl=0,Ll=0,Ml=null,Bl=null,Ul=0,Wl=1/0,Vl=null,ql=!1,Hl=null,Kl=null,Jl=!1,Yl=null,Ql=0,Gl=0,$l=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Cl)?$e():-1!==Xl?Xl:Xl=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Al?Al&-Al:null!==fi.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function nc(e,t,n,r){if(50<Gl)throw Gl=0,$l=null,Error(i(185));yt(e,n,r),0!==(2&Cl)&&e===El||(e===El&&(0===(2&Cl)&&(zl|=n),4===Pl&&ac(e,Al)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Wl=$e()+500,Ms&&Ws()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),a=1<<o,l=s[o];-1===l?0!==(a&n)&&0===(a&r)||(s[o]=pt(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}(e,t);var r=ht(e,e===El?Al:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ms=!0,Us(e)}(lc.bind(null,e)):Us(lc.bind(null,e)),os(function(){0===(6&Cl)&&Ws()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ec(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Xl=-1,Zl=0,0!==(6&Cl))throw Error(i(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var r=ht(e,e===El?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var s=Cl;Cl|=2;var o=mc();for(El===e&&Al===t||(Vl=null,Wl=$e()+500,hc(e,t));;)try{vc();break}catch(l){pc(e,l)}_i(),Sl.current=o,Cl=s,null!==Il?t=0:(El=null,Al=0,t=Pl)}if(0!==t){if(2===t&&(0!==(s=mt(e))&&(r=s,t=ic(e,s))),1===t)throw n=Fl,hc(e,0),ac(e,r),rc(e,$e()),n;if(6===t)ac(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ar(i(),s))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gc(e,r))&&(0!==(o=mt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Fl,hc(e,0),ac(e,r),rc(e,$e()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,Bl,Vl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Ul+500-$e())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(wc.bind(null,e,Bl,Vl),t);break}wc(e,Bl,Vl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>s&&(s=a),r&=~o}if(r=s,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=rs(wc.bind(null,e,Bl,Vl),r);break}wc(e,Bl,Vl);break;default:throw Error(i(329))}}}return rc(e,$e()),e.callbackNode===n?sc.bind(null,e):null}function ic(e,t){var n=Ml;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&oc(t)),e}function oc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function ac(e,t){for(t&=~Ll,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(i(327));jc();var t=ht(e,0);if(0===(1&t))return rc(e,$e()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Fl,hc(e,0),ac(e,t),rc(e,$e()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bl,Vl),rc(e,$e()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Wl=$e()+500,Ms&&Ws())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&Cl)&&jc();var t=Cl;Cl|=1;var n=Tl.transition,r=xt;try{if(Tl.transition=null,xt=1,e)return e()}finally{xt=r,Tl.transition=n,0===(6&(Cl=t))&&Ws()}}function uc(){Rl=Ol.current,Ss(Ol)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Os();break;case 3:Gi(),Ss(Es),Ss(Cs),no();break;case 5:Xi(r);break;case 4:Gi();break;case 13:case 19:Ss(Zi);break;case 10:Ti(r.type._context);break;case 22:case 23:uc()}n=n.return}if(El=e,Il=e=Oc(e.current,null),Al=Rl=t,Pl=0,Fl=null,Ll=zl=Dl=0,Bl=Ml=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(r=(n=Ai[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=s,r.next=o}n.pending=r}Ai=null}return e}function pc(e,t){for(;;){var n=Il;try{if(_i(),ro.current=Xo,co){for(var r=oo.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}co=!1}if(io=0,lo=ao=oo=null,uo=!1,ho=0,_l.current=null,null===n||null===n.return){Pl=1,Fl=t,Il=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=ga(a);if(null!==m){m.flags&=-257,ya(m,a,l,0,t),1&m.mode&&fa(o,d,t),c=d;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fa(o,d,t),fc();break e}c=Error(i(426))}else if(si&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),mi(ca(c,l));break e}}o=c=ca(c,l),4!==Pl&&(Pl=2),null===Ml?Ml=[o]:Ml.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ui(o,pa(0,c,t));break e;case 1:l=c;var v=o.type,x=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Kl||!Kl.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t,Ui(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function mc(){var e=Sl.current;return Sl.current=Xo,null===e?Xo:e}function fc(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===El||0===(268435455&Dl)&&0===(268435455&zl)||ac(El,Al)}function gc(e,t){var n=Cl;Cl|=2;var r=mc();for(El===e&&Al===t||(Vl=null,hc(e,t));;)try{yc();break}catch(s){pc(e,s)}if(_i(),Cl=n,Sl.current=r,null!==Il)throw Error(i(261));return El=null,Al=0,Pl}function yc(){for(;null!==Il;)xc(Il)}function vc(){for(;null!==Il&&!Qe();)xc(Il)}function xc(e){var t=Nl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Il=t,_l.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ja(n,t,Rl)))return void(Il=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Pl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Pl&&(Pl=5)}function wc(e,t,n){var r=xt,s=Tl.transition;try{Tl.transition=null,xt=1,function(e,t,n,r){do{jc()}while(null!==Yl);if(0!==(6&Cl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ot(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,o),e===El&&(Il=El=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Ec(tt,function(){return jc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var a=xt;xt=1;var l=Cl;Cl|=4,_l.current=null,function(e,t){if(es=qt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var a=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=a+s),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++d===s&&(l=a),p===o&&++u===r&&(c=a),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},qt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,y=f.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}f=tl,tl=!1}(e,n),gl(n,e),mr(ts),qt=!!es,ts=es=null,e.current=n,vl(n,e,s),Ge(),Cl=l,xt=a,Tl.transition=o}else e.current=n;if(Jl&&(Jl=!1,Yl=e,Ql=s),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ql)throw ql=!1,e=Hl,Hl=null,e;0!==(1&Ql)&&0!==e.tag&&jc(),o=e.pendingLanes,0!==(1&o)?e===$l?Gl++:(Gl=0,$l=e):Gl=0,Ws()}(e,t,n,r)}finally{Tl.transition=s,xt=r}return null}function jc(){if(null!==Yl){var e=bt(Ql),t=Tl.transition,n=xt;try{if(Tl.transition=null,xt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Ql=0,0!==(6&Cl))throw Error(i(331));var s=Cl;for(Cl|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!==(16&Xa.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Xa=d;null!==Xa;){var u=Xa;switch(u.tag){case 0:case 11:case 15:nl(8,u,o)}var h=u.child;if(null!==h)h.return=u,Xa=h;else for(;null!==Xa;){var p=(u=Xa).sibling,m=u.return;if(il(u),u===d){Xa=null;break}if(null!==p){p.return=m,Xa=p;break}Xa=m}}}var f=o.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Xa=v;break e}Xa=o.return}}var x=e.current;for(Xa=x;null!==Xa;){var b=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Xa=b;else e:for(a=x;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(j){kc(l,l.return,j)}if(l===a){Xa=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xa=w;break e}Xa=l.return}}if(Cl=s,Ws(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(j){}r=!0}return r}finally{xt=n,Tl.transition=t}}return!1}function Nc(e,t,n){e=Mi(e,t=pa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Mi(t,e=ma(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Al&n)===n&&(4===Pl||3===Pl&&(130023424&Al)===Al&&500>$e()-Ul?hc(e,0):Ll|=n),rc(e,t)}function _c(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Pi(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_c(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),_c(e,n)}function Ec(e,t){return Je(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Ic(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,s,o){var a=2;if(r=e,"function"===typeof e)Rc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case N:return Fc(n.children,s,o,t);case k:a=8,s|=8;break;case S:return(e=Ac(12,n,t,2|s)).elementType=S,e.lanes=o,e;case E:return(e=Ac(13,n,t,s)).elementType=E,e.lanes=o,e;case I:return(e=Ac(19,n,t,s)).elementType=I,e.lanes=o,e;case O:return Dc(n,s,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:a=10;break e;case T:a=9;break e;case C:a=11;break e;case A:a=14;break e;case R:a=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ac(a,n,t,s)).elementType=e,t.type=r,t.lanes=o,t}function Fc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Lc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Mc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,s,i,o,a,l){return e=new Mc(e,t,n,a,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ac(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Di(i),e}function Uc(e){if(!e)return Ts;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Rs(n))return Fs(e,n,t)}return t}function Wc(e,t,n,r,s,i,o,a,l){return(e=Bc(n,r,!0,e,0,i,0,a,l)).context=Uc(null),n=e.current,(i=Li(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,Mi(n,i,s),e.current.lanes=s,yt(e,s,r),rc(e,r),e}function Vc(e,t,n,r){var s=t.current,i=ec(),o=tc(s);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Li(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Mi(s,t,o))&&(nc(e,s,o,i),Bi(e,s,o)),o}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Es.current)xa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xa=!1,function(e,t,n){switch(t.tag){case 3:Ea(t),pi();break;case 5:$i(t);break;case 1:Rs(t.type)&&Ds(t);break;case 4:Qi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;_s(ji,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_s(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?za(e,t,n):(_s(Zi,1&Zi.current),null!==(e=qa(e,t,n))?e.sibling:null);_s(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wa(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),_s(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,ka(e,t,n)}return qa(e,t,n)}(e,t,n);xa=0!==(131072&e.flags)}else xa=!1,si&&0!==(1048576&t.flags)&&Zs(t,Ks,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Va(e,t),e=t.pendingProps;var s=As(t,Cs.current);Ei(t,n),s=go(null,t,r,e,s,n);var o=yo();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rs(r)?(o=!0,Ds(t)):o=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Di(t),s.updater=sa,t.stateNode=s,s._reactInternals=t,la(t,r,e,n),t=Ca(null,t,r,!0,o,n)):(t.tag=0,si&&o&&ei(t),ba(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Va(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=na(r,e),s){case 0:t=_a(null,t,r,e,n);break e;case 1:t=Ta(null,t,r,e,n);break e;case 11:t=wa(null,t,r,e,n);break e;case 14:t=ja(null,t,r,na(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,_a(e,t,r,s=t.elementType===r?s:na(r,s),n);case 1:return r=t.type,s=t.pendingProps,Ta(e,t,r,s=t.elementType===r?s:na(r,s),n);case 3:e:{if(Ea(t),null===e)throw Error(i(387));r=t.pendingProps,s=(o=t.memoizedState).element,zi(e,t),Wi(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ia(e,t,r,n,s=ca(Error(i(423)),t));break e}if(r!==s){t=Ia(e,t,r,n,s=ca(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===s){t=qa(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return $i(t),null===e&&ci(t),r=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,a=s.children,ns(r,s)?a=null:null!==o&&ns(r,o)&&(t.flags|=32),Sa(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&ci(t),null;case 13:return za(e,t,n);case 4:return Qi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bi(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,wa(e,t,r,s=t.elementType===r?s:na(r,s),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,_s(ji,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===s.children&&!Es.current){t=qa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Li(-1,n&-n)).tag=2;var d=o.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ci(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(i(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ci(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ei(t,n),r=r(s=Ii(s)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return s=na(r=t.type,t.pendingProps),ja(e,t,r,s=na(r.type,s),n);case 15:return Na(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:na(r,s),Va(e,t),t.tag=1,Rs(r)?(e=!0,Ds(t)):e=!1,Ei(t,n),oa(t,r,s),la(t,r,s,n),Ca(null,t,r,!0,e,n);case 19:return Wa(e,t,n);case 22:return ka(e,t,n)}throw Error(i(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof s){var a=s;s=function(){var e=qc(o);a.call(e)}}Vc(t,o,e,s)}else o=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=qc(o);i.call(e)}}var o=Wc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[ms]=o.current,Wr(8===e.nodeType?e.parentNode:e),dc(),o}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var a=r;r=function(){var e=qc(l);a.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[ms]=l.current,Wr(8===e.nodeType?e.parentNode:e),dc(function(){Vc(t,l,n,r)}),l}(n,t,e,s,r);return qc(o)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Vc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Vc(null,e,null,null)}),t[ms]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&zt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,$e()),0===(6&Cl)&&(Wl=$e()+500,Ws()))}break;case 13:dc(function(){var t=Pi(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},jt=function(e){if(13===e.tag){var t=Pi(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),n=Pi(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},kt=function(){return xt},St=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},je=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));J(r),X(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ee=dc;var ed={usingClientEntryPoint:!1,Events:[xs,bs,ws,_e,Te,cc]},td={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{st=rd.inject(nd),it=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(i(299));var n=!1,r="",s=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,s),e[ms]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,o="",a=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,s,0,o,a),e[ms]=t.current,Wr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Qc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(i(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},763:(e,t,n)=>{"use strict";e.exports=n(983)},765:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyOpenClassName=t.portalClassName=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(43),o=m(i),a=m(n(950)),l=m(n(173)),c=m(n(439)),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(619)),u=n(821),h=m(u),p=n(484);function m(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var g=t.portalClassName="ReactModalPortal",y=t.bodyOpenClassName="ReactModal__Body--open",v=u.canUseDOM&&void 0!==a.default.createPortal,x=function(e){return document.createElement(e)},b=function(){return v?a.default.createPortal:a.default.unstable_renderSubtreeIntoContainer};function w(e){return e()}var j=function(e){function t(){var e,n,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,l=Array(i),d=0;d<i;d++)l[d]=arguments[d];return n=s=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),s.removePortal=function(){!v&&a.default.unmountComponentAtNode(s.node);var e=w(s.props.parentSelector);e&&e.contains(s.node)?e.removeChild(s.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},s.portalRef=function(e){s.portal=e},s.renderPortal=function(e){var n=b()(s,o.default.createElement(c.default,r({defaultStyles:t.defaultStyles},e)),s.node);s.portalRef(n)},f(s,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentDidMount",value:function(){u.canUseDOM&&(v||(this.node=x("div")),this.node.className=this.props.portalClassName,w(this.props.parentSelector).appendChild(this.node),!v&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:w(e.parentSelector),nextParent:w(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,t,n){if(u.canUseDOM){var r=this.props,s=r.isOpen,i=r.portalClassName;e.portalClassName!==i&&(this.node.className=i);var o=n.prevParent,a=n.nextParent;a!==o&&(o.removeChild(this.node),a.appendChild(this.node)),(e.isOpen||s)&&!v&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(u.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return u.canUseDOM&&v?(!this.node&&v&&(this.node=x("div")),b()(o.default.createElement(c.default,r({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){d.setElement(e)}}]),t}(i.Component);j.propTypes={isOpen:l.default.bool.isRequired,style:l.default.shape({content:l.default.object,overlay:l.default.object}),portalClassName:l.default.string,bodyOpenClassName:l.default.string,htmlOpenClassName:l.default.string,className:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),overlayClassName:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),appElement:l.default.oneOfType([l.default.instanceOf(h.default),l.default.instanceOf(u.SafeHTMLCollection),l.default.instanceOf(u.SafeNodeList),l.default.arrayOf(l.default.instanceOf(h.default))]),onAfterOpen:l.default.func,onRequestClose:l.default.func,closeTimeoutMS:l.default.number,ariaHideApp:l.default.bool,shouldFocusAfterRender:l.default.bool,shouldCloseOnOverlayClick:l.default.bool,shouldReturnFocusAfterClose:l.default.bool,preventScroll:l.default.bool,parentSelector:l.default.func,aria:l.default.object,data:l.default.object,role:l.default.string,contentLabel:l.default.string,shouldCloseOnEsc:l.default.bool,overlayRef:l.default.func,contentRef:l.default.func,id:l.default.string,overlayElement:l.default.func,contentElement:l.default.func},j.defaultProps={isOpen:!1,portalClassName:g,bodyOpenClassName:y,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return o.default.createElement("div",e,t)},contentElement:function(e,t){return o.default.createElement("div",e,t)}},j.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,p.polyfill)(j),t.default=j},774:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){o=[]},t.log=function(){0},t.handleBlur=c,t.handleFocus=d,t.markForFocusLater=function(){o.push(document.activeElement)},t.returnFocus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;try{return void(0!==o.length&&(t=o.pop()).focus({preventScroll:e}))}catch(n){console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}},t.popWithoutFocus=function(){o.length>0&&o.pop()},t.setupScopedFocus=function(e){a=e,window.addEventListener?(window.addEventListener("blur",c,!1),document.addEventListener("focus",d,!0)):(window.attachEvent("onBlur",c),document.attachEvent("onFocus",d))},t.teardownScopedFocus=function(){a=null,window.addEventListener?(window.removeEventListener("blur",c),document.removeEventListener("focus",d)):(window.detachEvent("onBlur",c),document.detachEvent("onFocus",d))};var r,s=n(682),i=(r=s)&&r.__esModule?r:{default:r};var o=[],a=null,l=!1;function c(){l=!0}function d(){if(l){if(l=!1,!a)return;setTimeout(function(){a.contains(document.activeElement)||((0,i.default)(a)[0]||a).focus()},0)}}},812:(e,t,n)=>{"use strict";n.d(t,{h1:()=>a,uA:()=>s});var r=n(529);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const i="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===i?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},821:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=t.SafeNodeList=t.SafeHTMLCollection=void 0;var r,s=n(396);var i=((r=s)&&r.__esModule?r:{default:r}).default,o=i.canUseDOM?window.HTMLElement:{};t.SafeHTMLCollection=i.canUseDOM?window.HTMLCollection:{},t.SafeNodeList=i.canUseDOM?window.NodeList:{},t.canUseDOM=i.canUseDOM;t.default=o},841:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){var e=document.getElementsByTagName("html")[0];for(var t in n)s(e,n[t]);var i=document.body;for(var o in r)s(i,r[o]);n={},r={}},t.log=function(){0};var n={},r={};function s(e,t){e.classList.remove(t)}t.add=function(e,t){return s=e.classList,i="html"==e.nodeName.toLowerCase()?n:r,void t.split(" ").forEach(function(e){!function(e,t){e[t]||(e[t]=0),e[t]+=1}(i,e),s.add(e)});var s,i},t.remove=function(e,t){return s=e.classList,i="html"==e.nodeName.toLowerCase()?n:r,void t.split(" ").forEach(function(e){!function(e,t){e[t]&&(e[t]-=1)}(i,e),0===i[e]&&s.remove(e)});var s,i}},853:(e,t,n)=>{"use strict";e.exports=n(234)},933:(e,t,n)=>{"use strict";n.d(t,{g9:()=>o,searchUsers:()=>i});var r=n(558),s=n(472);const i=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const{searchTerm:t,searchType:n="all",role:i,isActive:o,limit:a=20,lastDoc:l}=e;let c=(0,s.query)((0,s.collection)(r.db,"users"),(0,s.orderBy)("createdAt","desc"),(0,s.limit)(a));t&&t.trim()&&("name"===n?c=(0,s.query)(c,(0,s.where)("name",">=",t),(0,s.where)("name","<=",t+"\uf8ff")):"nickname"===n?c=(0,s.query)(c,(0,s.where)("nickname",">=",t),(0,s.where)("nickname","<=",t+"\uf8ff")):"phoneNumber"===n&&(c=(0,s.query)(c,(0,s.where)("phoneNumber","==",t)))),i&&(c=(0,s.query)(c,(0,s.where)("role","==",i))),void 0!==o&&(c=(0,s.query)(c,(0,s.where)("isActive","==",o))),l&&(c=(0,s.query)(c,(0,s.startAfter)(l)));const d=await(0,s.getDocs)(c),u=[];d.forEach(e=>{const t=e.data();u.push({uid:e.id,name:t.name||"",nickname:t.nickname||"",email:t.email||"",phoneNumber:t.phoneNumber||void 0,role:t.role||"user",createdAt:t.createdAt||"",isActive:!1!==t.isActive,points:t.points||0,totalPaidPoints:t.totalPaidPoints||0,usedPoints:t.usedPoints||0})});let h=u;if(t&&"all"===n){const e=t.toLowerCase();h=u.filter(t=>t.name.toLowerCase().includes(e)||t.nickname.toLowerCase().includes(e)||t.phoneNumber&&t.phoneNumber.includes(e)||t.email.toLowerCase().includes(e))}const p=d.docs[d.docs.length-1];return{users:h,lastDoc:p||null,hasMore:d.docs.length===a}}catch(t){throw console.error("\ud68c\uc6d0 \uac80\uc0c9 \uc624\ub958:",t),t}},o=async(e,t)=>{try{const n=(0,s.doc)(r.db,"users",e);await(0,s.updateDoc)(n,{isActive:t,updatedAt:(new Date).toISOString()})}catch(n){throw console.error("\ud68c\uc6d0 \uc0c1\ud0dc \ubcc0\uacbd \uc624\ub958:",n),n}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},959:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(){console.log("portalOpenInstances ----------"),console.log(r.openInstances.length),r.openInstances.forEach(function(e){return console.log(e)}),console.log("end portalOpenInstances ----------")},t.resetState=function(){r=new n};var n=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.register=function(e){-1===t.openInstances.indexOf(e)&&(t.openInstances.push(e),t.emit("register"))},this.deregister=function(e){var n=t.openInstances.indexOf(e);-1!==n&&(t.openInstances.splice(n,1),t.emit("deregister"))},this.subscribe=function(e){t.subscribers.push(e)},this.emit=function(e){t.subscribers.forEach(function(n){return n(e,t.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},r=new n;t.default=r},963:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(765),i=(r=s)&&r.__esModule?r:{default:r};t.default=i.default,e.exports=t.default},983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,s=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,f=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,x=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case d:case u:case i:case a:case o:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case f:case l:return e;default:return t}}case s:return t}}}function j(e){return w(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=i,t.Lazy=g,t.Memo=f,t.Portal=s,t.Profiler=a,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return j(e)||w(e)===d},t.isConcurrentMode=j,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===f},t.isPortal=function(e){return w(e)===s},t.isProfiler=function(e){return w(e)===a},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===u||e===a||e===o||e===p||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===f||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===v||e.$$typeof===x||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&s&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(i,o),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e,t=n(555),r=n(43),s=n.t(r,2),i=n(391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const a="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(t,n,r,s){void 0===s&&(s={});let{window:i=document.defaultView,v5Compat:c=!1}=s,p=i.history,m=e.Pop,f=null,g=y();function y(){return(p.state||{idx:null}).idx}function v(){m=e.Pop;let t=y(),n=null==t?null:t-g;g=t,f&&f({action:m,location:b.location,delta:n})}function x(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,p.replaceState(o({},p.state,{idx:g}),""));let b={get action(){return m},get location(){return t(i,p)},listen(e){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(a,v),f=e,()=>{i.removeEventListener(a,v),f=null}},createHref:e=>n(i,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){m=e.Push;let s=u(b.location,t,n);r&&r(s,t),g=y()+1;let o=d(s,g),a=b.createHref(s);try{p.pushState(o,"",a)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;i.location.assign(a)}c&&f&&f({action:m,location:b.location,delta:1})},replace:function(t,n){m=e.Replace;let s=u(b.location,t,n);r&&r(s,t),g=y();let i=d(s,g),o=b.createHref(s);p.replaceState(i,"",o),c&&f&&f({action:m,location:b.location,delta:0})},go:e=>p.go(e)};return b}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,n){return void 0===n&&(n="/"),y(e,t,n,!1)}function y(e,t,n,r){let s=A(("string"===typeof t?p(t):t).pathname||"/",n);if(null==s)return null;let i=v(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let a=0;null==o&&a<i.length;++a){let e=I(s);o=C(i[a],e,r)}return o}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};o.relativePath.startsWith("/")&&(l(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=D([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),v(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:T(a,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of x(e.path))s(e,t,r);else s(e,t)}),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let o=x(r.join("/")),a=[];return a.push(...o.map(e=>""===e?i:[i,e].join("/"))),s&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const b=/^:[\w-]+$/,w=3,j=2,N=1,k=10,S=-2,_=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(_)&&(r+=S),t&&(r+=j),n.filter(e=>!_(e)).reduce((e,t)=>e+(b.test(t)?w:""===t?N:k),r)}function C(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===i?t:t.slice(i.length)||"/",d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:D([i,d.pathname]),pathnameBase:z(D([i,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(i=D([i,d.pathnameBase]))}return o}function E(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=a[n]||"";o=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:o,pattern:e}}function I(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function P(e,t){let n=O(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function F(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=p(e):(s=o({},e),l(!s.pathname||!s.pathname.includes("?"),R("?","pathname","search",s)),l(!s.pathname||!s.pathname.includes("#"),R("#","pathname","hash",s)),l(!s.search||!s.search.includes("#"),R("#","search","hash",s)));let i,a=""===e||""===s.pathname,c=a?"/":s.pathname;if(null==c)i=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?p(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:L(r),hash:M(s)}}(s,i),u=c&&"/"!==c&&c.endsWith("/"),h=(a||"."===c)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!h||(d.pathname+="/"),d}const D=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),L=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",M=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const U=["post","put","patch","delete"],W=(new Set(U),["get",...U]);new Set(W),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}const q=r.createContext(null);const H=r.createContext(null);const K=r.createContext(null);const J=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=r.createContext(null);function G(){return null!=r.useContext(J)}function $(){return G()||l(!1),r.useContext(J).location}function X(e){r.useContext(K).static||r.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=ce(ae.UseNavigateStable),t=ue(le.UseNavigateStable),n=r.useRef(!1);X(()=>{n.current=!0});let s=r.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,V({fromRouteId:t},s)))},[e,t]);return s}():function(){G()||l(!1);let e=r.useContext(q),{basename:t,future:n,navigator:s}=r.useContext(K),{matches:i}=r.useContext(Y),{pathname:o}=$(),a=JSON.stringify(P(i,n.v7_relativeSplatPath)),c=r.useRef(!1);return X(()=>{c.current=!0}),r.useCallback(function(n,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof n)return void s.go(n);let i=F(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:D([t,i.pathname])),(r.replace?s.replace:s.push)(i,r.state,r)},[t,s,a,o,e])}()}function ee(e,t){let{relative:n}=void 0===t?{}:t,{future:s}=r.useContext(K),{matches:i}=r.useContext(Y),{pathname:o}=$(),a=JSON.stringify(P(i,s.v7_relativeSplatPath));return r.useMemo(()=>F(e,JSON.parse(a),o,"path"===n),[e,a,o,n])}function te(t,n,s,i){G()||l(!1);let{navigator:o}=r.useContext(K),{matches:a}=r.useContext(Y),c=a[a.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,m=$();if(n){var f;let e="string"===typeof n?p(n):n;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||l(!1),h=e}else h=m;let y=h.pathname||"/",v=y;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=g(t,{pathname:v});let b=oe(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:D([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:D([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,s,i);return n&&b?r.createElement(J.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:e.Pop}},b):b}function ne(){let e=function(){var e;let t=r.useContext(Q),n=de(le.UseRouteError),s=ue(le.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[s]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:i},n):null,null)}const re=r.createElement(ne,null);class se extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:t,match:n,children:s}=e,i=r.useContext(q);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Y.Provider,{value:t},s)}function oe(e,t,n,s){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===s&&(s=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=s)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,c=null==(i=n)?void 0:i.errors;if(null!=c){let e=a.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||l(!1),a=a.slice(0,Math.min(a.length,e+1))}let d=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){d=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight((e,s,i)=>{let o,l=!1,h=null,p=null;var m;n&&(o=c&&s.route.id?c[s.route.id]:void 0,h=s.route.errorElement||re,d&&(u<0&&0===i?(m="route-fallback",!1||he[m]||(he[m]=!0),l=!0,p=null):u===i&&(l=!0,p=s.route.hydrateFallbackElement||null)));let f=t.concat(a.slice(0,i+1)),g=()=>{let t;return t=o?h:l?p:s.route.Component?r.createElement(s.route.Component,null):s.route.element?s.route.element:e,r.createElement(ie,{match:s,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===i)?r.createElement(se,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let t=r.useContext(q);return t||l(!1),t}function de(e){let t=r.useContext(H);return t||l(!1),t}function ue(e){let t=function(){let e=r.useContext(Y);return e||l(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||l(!1),n.route.id}const he={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function me(e){let{to:t,replace:n,state:s,relative:i}=e;G()||l(!1);let{future:o,static:a}=r.useContext(K),{matches:c}=r.useContext(Y),{pathname:d}=$(),u=Z(),h=F(t,P(c,o.v7_relativeSplatPath),d,"path"===i),p=JSON.stringify(h);return r.useEffect(()=>u(JSON.parse(p),{replace:n,state:s,relative:i}),[u,p,i,n,s]),null}function fe(e){l(!1)}function ge(t){let{basename:n="/",children:s=null,location:i,navigationType:o=e.Pop,navigator:a,static:c=!1,future:d}=t;G()&&l(!1);let u=n.replace(/^\/*/,"/"),h=r.useMemo(()=>({basename:u,navigator:a,static:c,future:V({v7_relativeSplatPath:!1},d)}),[u,d,a,c]);"string"===typeof i&&(i=p(i));let{pathname:m="/",search:f="",hash:g="",state:y=null,key:v="default"}=i,x=r.useMemo(()=>{let e=A(m,u);return null==e?null:{location:{pathname:e,search:f,hash:g,state:y,key:v},navigationType:o}},[u,m,f,g,y,v,o]);return null==x?null:r.createElement(K.Provider,{value:h},r.createElement(J.Provider,{children:s,value:x}))}function ye(e){let{children:t,location:n}=e;return te(ve(t),n)}new Promise(()=>{});r.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,(e,s)=>{if(!r.isValidElement(e))return;let i=[...t,s];if(e.type===r.Fragment)return void n.push.apply(n,ve(e.props.children,i));e.type!==fe&&l(!1),e.props.index&&e.props.children&&l(!1);let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ve(e.props.children,i)),n.push(o)}),n}var xe=n(963),be=n.n(xe),we=n(458),je=n(558),Ne=n(472);const ke=async e=>{try{const t=await(0,Ne.x7)((0,Ne.doc)(je.db,"users",e));if(t.exists()){const n=t.data();return localStorage.setItem("userData_".concat(e),JSON.stringify(n)),n}return null}catch(t){if(console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uac00\uc838\uc624\uae30 \uc624\ub958:",t),t instanceof Error&&t.message.includes("unavailable")){const t=localStorage.getItem("userData_".concat(e));if(t)try{return JSON.parse(t)}catch(n){console.error("\uce90\uc2dc\ub41c \ub370\uc774\ud130 \ud30c\uc2f1 \uc624\ub958:",n)}}throw t}};var Se=n(579);console.log("=== \ud83d\udd10 AuthContext \ub85c\ub529 \uc2dc\uc791 ==="),console.log("\ud83d\udcc1 Firebase auth \uac1d\uccb4:",je.j2?"\u2705 \uc788\uc74c":"\u274c \uc5c6\uc74c"),console.log("\ud83d\udcc1 Firebase db \uac1d\uccb4:",je.db?"\u2705 \uc788\uc74c":"\u274c \uc5c6\uc74c");const _e=(0,r.createContext)(null),Te=()=>{const e=(0,r.useContext)(_e);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Ce=e=>{let{children:n}=e;const[s,i]=(0,r.useState)(null),[o,a]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0),d=async()=>{if(s)try{const e=await ke(s.uid),n=(0,t.A)({uid:s.uid},e);a(n)}catch(e){if(console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc0c8\ub85c\uace0\uce68 \uc624\ub958:",e),e instanceof Error&&e.message.includes("unavailable")){const e={uid:s.uid,name:"\uc0ac\uc6a9\uc790",nickname:"\uc0ac\uc6a9\uc790",email:s.email||"",role:"user"};a(e)}}else a(null)};(0,r.useEffect)(()=>{console.log("=== \ud83d\udd10 AuthProvider useEffect \uc2dc\uc791 ==="),console.log("\ud83d\udcc1 Firebase auth \uac1d\uccb4 \uc0c1\ud0dc:",je.j2?"\u2705 \uc815\uc0c1":"\u274c \uc624\ub958");const e=(0,we.hg)(je.j2,async e=>{console.log("=== \ud83d\udd04 \uc778\uc99d \uc0c1\ud0dc \ubcc0\uacbd \uac10\uc9c0 ==="),console.log("\ud83d\udcc1 \uc0ac\uc6a9\uc790 \uc0c1\ud0dc:",e?"\u2705 \ub85c\uadf8\uc778\ub428":"\u274c \ub85c\uadf8\uc544\uc6c3\ub428"),e&&(console.log("\ud83d\udcc1 \uc0ac\uc6a9\uc790 UID:",e.uid),console.log("\ud83d\udcc1 \uc0ac\uc6a9\uc790 \uc774\uba54\uc77c:",e.email));try{if(i(e),e)try{const n=await ke(e.uid);a((0,t.A)({uid:e.uid},n||{name:"\uc0ac\uc6a9\uc790",nickname:"\uc0ac\uc6a9\uc790",email:e.email||"",role:"user"}));const r=(0,Ne.doc)(je.db,"users",e.uid);(0,Ne.aQ)(r,n=>{n.exists()&&a((0,t.A)({uid:e.uid},n.data()))},e=>{console.warn("\uc0ac\uc6a9\uc790 \ubb38\uc11c \uad6c\ub3c5 \uc624\ub958:",e)})}catch(n){console.error("\u274c \uc0ac\uc6a9\uc790 \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:",n),console.error("\u274c \uc5d0\ub7ec \uc0c1\uc138:",(null===n||void 0===n?void 0:n.message)||"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958"),console.error("\u274c \uc5d0\ub7ec \uc2a4\ud0dd:",(null===n||void 0===n?void 0:n.stack)||"\uc2a4\ud0dd \uc815\ubcf4 \uc5c6\uc74c"),a({uid:e.uid,name:"\uc0ac\uc6a9\uc790",nickname:"\uc0ac\uc6a9\uc790",email:e.email||"",role:"user"})}else console.log("\ud83d\udcc1 \uc0ac\uc6a9\uc790\uac00 \uc5c6\uc74c - userData\ub97c null\ub85c \uc124\uc815"),a(null)}catch(n){console.error("\u274c \uc778\uc99d \uc0c1\ud0dc \ubcc0\uacbd \ucc98\ub9ac \uc624\ub958:",n),console.error("\u274c \uc5d0\ub7ec \uc0c1\uc138:",(null===n||void 0===n?void 0:n.message)||"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958"),console.error("\u274c \uc5d0\ub7ec \uc2a4\ud0dd:",(null===n||void 0===n?void 0:n.stack)||"\uc2a4\ud0dd \uc815\ubcf4 \uc5c6\uc74c"),a(null)}finally{console.log("\ud83d\udcc1 \ub85c\ub529 \uc644\ub8cc - loading\uc744 false\ub85c \uc124\uc815"),c(!1)}});return()=>e()},[]);const u={currentUser:s,user:s,userData:o,loading:l,signup:async(e,t,n)=>{await(async(e,t,n)=>{try{const r=await(0,we.eJ)(je.j2,e,t);return await(0,Ne.BN)((0,Ne.doc)(je.db,"users",r.user.uid),{name:n.name,nickname:n.nickname,email:e,phoneNumber:n.phoneNumber||"",role:n.role||"user",isActive:!0,points:1e4,totalPaidPoints:0,usedPoints:0,createdAt:(new Date).toISOString()}),r}catch(r){throw console.error("\ud68c\uc6d0\uac00\uc785 \uc624\ub958:",r),r}})(e,t,n)},login:async(e,t)=>{await(async(e,t)=>{try{return await(0,we.x9)(je.j2,e,t)}catch(n){throw console.error("\ub85c\uadf8\uc778 \uc624\ub958:",n),n}})(e,t)},logout:()=>(0,we.CI)(je.j2),updateUserProfile:async e=>{if(!s)throw new Error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4");await(async(e,t)=>{try{await(0,Ne.BN)((0,Ne.doc)(je.db,"users",e),t,{merge:!0})}catch(n){throw console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958:",n),n}})(s.uid,e),await d()},refreshUserData:d};return(0,Se.jsx)(_e.Provider,{value:u,children:l?(0,Se.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px"},children:"\ub85c\ub529 \uc911..."}):n})};n(401);const Ee=e=>{let{children:t}=e;const{currentUser:n}=Te();return n?(0,Se.jsx)(Se.Fragment,{children:t}):(0,Se.jsx)(me,{to:"/login"})};var Ie=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===Ae}(e)}(e)};var Ae="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Re(e,t){return!1!==t.clone&&t.isMergeableObject(e)?Pe((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function Oe(e,t,n){return e.concat(t).map(function(e){return Re(e,n)})}function Pe(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||Oe,n.isMergeableObject=n.isMergeableObject||Ie;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach(function(t){r[t]=Re(e[t],n)}),Object.keys(t).forEach(function(s){n.isMergeableObject(t[s])&&e[s]?r[s]=Pe(e[s],t[s],n):r[s]=Re(t[s],n)}),r}(e,t,n):Re(t,n)}Pe.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,n){return Pe(e,n,t)},{})};const Fe=Pe;const De="object"==typeof global&&global&&global.Object===Object&&global;var ze="object"==typeof self&&self&&self.Object===Object&&self;const Le=De||ze||Function("return this")();const Me=Le.Symbol;var Be=Object.prototype,Ue=Be.hasOwnProperty,We=Be.toString,Ve=Me?Me.toStringTag:void 0;const qe=function(e){var t=Ue.call(e,Ve),n=e[Ve];try{e[Ve]=void 0;var r=!0}catch(i){}var s=We.call(e);return r&&(t?e[Ve]=n:delete e[Ve]),s};var He=Object.prototype.toString;const Ke=function(e){return He.call(e)};var Je=Me?Me.toStringTag:void 0;const Ye=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Je&&Je in Object(e)?qe(e):Ke(e)};const Qe=function(e,t){return function(n){return e(t(n))}};const Ge=Qe(Object.getPrototypeOf,Object);const $e=function(e){return null!=e&&"object"==typeof e};var Xe=Function.prototype,Ze=Object.prototype,et=Xe.toString,tt=Ze.hasOwnProperty,nt=et.call(Object);const rt=function(e){if(!$e(e)||"[object Object]"!=Ye(e))return!1;var t=Ge(e);if(null===t)return!0;var n=tt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&et.call(n)==nt};const st=function(){this.__data__=[],this.size=0};const it=function(e,t){return e===t||e!==e&&t!==t};const ot=function(e,t){for(var n=e.length;n--;)if(it(e[n][0],t))return n;return-1};var at=Array.prototype.splice;const lt=function(e){var t=this.__data__,n=ot(t,e);return!(n<0)&&(n==t.length-1?t.pop():at.call(t,n,1),--this.size,!0)};const ct=function(e){var t=this.__data__,n=ot(t,e);return n<0?void 0:t[n][1]};const dt=function(e){return ot(this.__data__,e)>-1};const ut=function(e,t){var n=this.__data__,r=ot(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function ht(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ht.prototype.clear=st,ht.prototype.delete=lt,ht.prototype.get=ct,ht.prototype.has=dt,ht.prototype.set=ut;const pt=ht;const mt=function(){this.__data__=new pt,this.size=0};const ft=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const gt=function(e){return this.__data__.get(e)};const yt=function(e){return this.__data__.has(e)};const vt=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const xt=function(e){if(!vt(e))return!1;var t=Ye(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const bt=Le["__core-js_shared__"];var wt=function(){var e=/[^.]+$/.exec(bt&&bt.keys&&bt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();const jt=function(e){return!!wt&&wt in e};var Nt=Function.prototype.toString;const kt=function(e){if(null!=e){try{return Nt.call(e)}catch(t){}try{return e+""}catch(t){}}return""};var St=/^\[object .+?Constructor\]$/,_t=Function.prototype,Tt=Object.prototype,Ct=_t.toString,Et=Tt.hasOwnProperty,It=RegExp("^"+Ct.call(Et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const At=function(e){return!(!vt(e)||jt(e))&&(xt(e)?It:St).test(kt(e))};const Rt=function(e,t){return null==e?void 0:e[t]};const Ot=function(e,t){var n=Rt(e,t);return At(n)?n:void 0};const Pt=Ot(Le,"Map");const Ft=Ot(Object,"create");const Dt=function(){this.__data__=Ft?Ft(null):{},this.size=0};const zt=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var Lt=Object.prototype.hasOwnProperty;const Mt=function(e){var t=this.__data__;if(Ft){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Lt.call(t,e)?t[e]:void 0};var Bt=Object.prototype.hasOwnProperty;const Ut=function(e){var t=this.__data__;return Ft?void 0!==t[e]:Bt.call(t,e)};const Wt=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ft&&void 0===t?"__lodash_hash_undefined__":t,this};function Vt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Vt.prototype.clear=Dt,Vt.prototype.delete=zt,Vt.prototype.get=Mt,Vt.prototype.has=Ut,Vt.prototype.set=Wt;const qt=Vt;const Ht=function(){this.size=0,this.__data__={hash:new qt,map:new(Pt||pt),string:new qt}};const Kt=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const Jt=function(e,t){var n=e.__data__;return Kt(t)?n["string"==typeof t?"string":"hash"]:n.map};const Yt=function(e){var t=Jt(this,e).delete(e);return this.size-=t?1:0,t};const Qt=function(e){return Jt(this,e).get(e)};const Gt=function(e){return Jt(this,e).has(e)};const $t=function(e,t){var n=Jt(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Xt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Xt.prototype.clear=Ht,Xt.prototype.delete=Yt,Xt.prototype.get=Qt,Xt.prototype.has=Gt,Xt.prototype.set=$t;const Zt=Xt;const en=function(e,t){var n=this.__data__;if(n instanceof pt){var r=n.__data__;if(!Pt||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Zt(r)}return n.set(e,t),this.size=n.size,this};function tn(e){var t=this.__data__=new pt(e);this.size=t.size}tn.prototype.clear=mt,tn.prototype.delete=ft,tn.prototype.get=gt,tn.prototype.has=yt,tn.prototype.set=en;const nn=tn;const rn=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};const sn=function(){try{var e=Ot(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();const on=function(e,t,n){"__proto__"==t&&sn?sn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var an=Object.prototype.hasOwnProperty;const ln=function(e,t,n){var r=e[t];an.call(e,t)&&it(r,n)&&(void 0!==n||t in e)||on(e,t,n)};const cn=function(e,t,n,r){var s=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],l=r?r(n[a],e[a],a,n,e):void 0;void 0===l&&(l=e[a]),s?on(n,a,l):ln(n,a,l)}return n};const dn=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};const un=function(e){return $e(e)&&"[object Arguments]"==Ye(e)};var hn=Object.prototype,pn=hn.hasOwnProperty,mn=hn.propertyIsEnumerable;const fn=un(function(){return arguments}())?un:function(e){return $e(e)&&pn.call(e,"callee")&&!mn.call(e,"callee")};const gn=Array.isArray;const yn=function(){return!1};var vn="object"==typeof exports&&exports&&!exports.nodeType&&exports,xn=vn&&"object"==typeof module&&module&&!module.nodeType&&module,bn=xn&&xn.exports===vn?Le.Buffer:void 0;const wn=(bn?bn.isBuffer:void 0)||yn;var jn=/^(?:0|[1-9]\d*)$/;const Nn=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&jn.test(e))&&e>-1&&e%1==0&&e<t};const kn=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var Sn={};Sn["[object Float32Array]"]=Sn["[object Float64Array]"]=Sn["[object Int8Array]"]=Sn["[object Int16Array]"]=Sn["[object Int32Array]"]=Sn["[object Uint8Array]"]=Sn["[object Uint8ClampedArray]"]=Sn["[object Uint16Array]"]=Sn["[object Uint32Array]"]=!0,Sn["[object Arguments]"]=Sn["[object Array]"]=Sn["[object ArrayBuffer]"]=Sn["[object Boolean]"]=Sn["[object DataView]"]=Sn["[object Date]"]=Sn["[object Error]"]=Sn["[object Function]"]=Sn["[object Map]"]=Sn["[object Number]"]=Sn["[object Object]"]=Sn["[object RegExp]"]=Sn["[object Set]"]=Sn["[object String]"]=Sn["[object WeakMap]"]=!1;const _n=function(e){return $e(e)&&kn(e.length)&&!!Sn[Ye(e)]};const Tn=function(e){return function(t){return e(t)}};var Cn="object"==typeof exports&&exports&&!exports.nodeType&&exports,En=Cn&&"object"==typeof module&&module&&!module.nodeType&&module,In=En&&En.exports===Cn&&De.process;const An=function(){try{var e=En&&En.require&&En.require("util").types;return e||In&&In.binding&&In.binding("util")}catch(t){}}();var Rn=An&&An.isTypedArray;const On=Rn?Tn(Rn):_n;var Pn=Object.prototype.hasOwnProperty;const Fn=function(e,t){var n=gn(e),r=!n&&fn(e),s=!n&&!r&&wn(e),i=!n&&!r&&!s&&On(e),o=n||r||s||i,a=o?dn(e.length,String):[],l=a.length;for(var c in e)!t&&!Pn.call(e,c)||o&&("length"==c||s&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Nn(c,l))||a.push(c);return a};var Dn=Object.prototype;const zn=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Dn)};const Ln=Qe(Object.keys,Object);var Mn=Object.prototype.hasOwnProperty;const Bn=function(e){if(!zn(e))return Ln(e);var t=[];for(var n in Object(e))Mn.call(e,n)&&"constructor"!=n&&t.push(n);return t};const Un=function(e){return null!=e&&kn(e.length)&&!xt(e)};const Wn=function(e){return Un(e)?Fn(e):Bn(e)};const Vn=function(e,t){return e&&cn(t,Wn(t),e)};const qn=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var Hn=Object.prototype.hasOwnProperty;const Kn=function(e){if(!vt(e))return qn(e);var t=zn(e),n=[];for(var r in e)("constructor"!=r||!t&&Hn.call(e,r))&&n.push(r);return n};const Jn=function(e){return Un(e)?Fn(e,!0):Kn(e)};const Yn=function(e,t){return e&&cn(t,Jn(t),e)};var Qn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Gn=Qn&&"object"==typeof module&&module&&!module.nodeType&&module,$n=Gn&&Gn.exports===Qn?Le.Buffer:void 0,Xn=$n?$n.allocUnsafe:void 0;const Zn=function(e,t){if(t)return e.slice();var n=e.length,r=Xn?Xn(n):new e.constructor(n);return e.copy(r),r};const er=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};const tr=function(e,t){for(var n=-1,r=null==e?0:e.length,s=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[s++]=o)}return i};const nr=function(){return[]};var rr=Object.prototype.propertyIsEnumerable,sr=Object.getOwnPropertySymbols,ir=sr?function(e){return null==e?[]:(e=Object(e),tr(sr(e),function(t){return rr.call(e,t)}))}:nr;const or=ir;const ar=function(e,t){return cn(e,or(e),t)};const lr=function(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e};var cr=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)lr(t,or(e)),e=Ge(e);return t}:nr;const dr=cr;const ur=function(e,t){return cn(e,dr(e),t)};const hr=function(e,t,n){var r=t(e);return gn(e)?r:lr(r,n(e))};const pr=function(e){return hr(e,Wn,or)};const mr=function(e){return hr(e,Jn,dr)};const fr=Ot(Le,"DataView");const gr=Ot(Le,"Promise");const yr=Ot(Le,"Set");const vr=Ot(Le,"WeakMap");var xr="[object Map]",br="[object Promise]",wr="[object Set]",jr="[object WeakMap]",Nr="[object DataView]",kr=kt(fr),Sr=kt(Pt),_r=kt(gr),Tr=kt(yr),Cr=kt(vr),Er=Ye;(fr&&Er(new fr(new ArrayBuffer(1)))!=Nr||Pt&&Er(new Pt)!=xr||gr&&Er(gr.resolve())!=br||yr&&Er(new yr)!=wr||vr&&Er(new vr)!=jr)&&(Er=function(e){var t=Ye(e),n="[object Object]"==t?e.constructor:void 0,r=n?kt(n):"";if(r)switch(r){case kr:return Nr;case Sr:return xr;case _r:return br;case Tr:return wr;case Cr:return jr}return t});const Ir=Er;var Ar=Object.prototype.hasOwnProperty;const Rr=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ar.call(e,"index")&&(n.index=e.index,n.input=e.input),n};const Or=Le.Uint8Array;const Pr=function(e){var t=new e.constructor(e.byteLength);return new Or(t).set(new Or(e)),t};const Fr=function(e,t){var n=t?Pr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)};var Dr=/\w*$/;const zr=function(e){var t=new e.constructor(e.source,Dr.exec(e));return t.lastIndex=e.lastIndex,t};var Lr=Me?Me.prototype:void 0,Mr=Lr?Lr.valueOf:void 0;const Br=function(e){return Mr?Object(Mr.call(e)):{}};const Ur=function(e,t){var n=t?Pr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};const Wr=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Pr(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return Fr(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ur(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return zr(e);case"[object Symbol]":return Br(e)}};var Vr=Object.create,qr=function(){function e(){}return function(t){if(!vt(t))return{};if(Vr)return Vr(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const Hr=qr;const Kr=function(e){return"function"!=typeof e.constructor||zn(e)?{}:Hr(Ge(e))};const Jr=function(e){return $e(e)&&"[object Map]"==Ir(e)};var Yr=An&&An.isMap;const Qr=Yr?Tn(Yr):Jr;const Gr=function(e){return $e(e)&&"[object Set]"==Ir(e)};var $r=An&&An.isSet;const Xr=$r?Tn($r):Gr;var Zr="[object Arguments]",es="[object Function]",ts="[object Object]",ns={};ns[Zr]=ns["[object Array]"]=ns["[object ArrayBuffer]"]=ns["[object DataView]"]=ns["[object Boolean]"]=ns["[object Date]"]=ns["[object Float32Array]"]=ns["[object Float64Array]"]=ns["[object Int8Array]"]=ns["[object Int16Array]"]=ns["[object Int32Array]"]=ns["[object Map]"]=ns["[object Number]"]=ns[ts]=ns["[object RegExp]"]=ns["[object Set]"]=ns["[object String]"]=ns["[object Symbol]"]=ns["[object Uint8Array]"]=ns["[object Uint8ClampedArray]"]=ns["[object Uint16Array]"]=ns["[object Uint32Array]"]=!0,ns["[object Error]"]=ns[es]=ns["[object WeakMap]"]=!1;const rs=function e(t,n,r,s,i,o){var a,l=1&n,c=2&n,d=4&n;if(r&&(a=i?r(t,s,i,o):r(t)),void 0!==a)return a;if(!vt(t))return t;var u=gn(t);if(u){if(a=Rr(t),!l)return er(t,a)}else{var h=Ir(t),p=h==es||"[object GeneratorFunction]"==h;if(wn(t))return Zn(t,l);if(h==ts||h==Zr||p&&!i){if(a=c||p?{}:Kr(t),!l)return c?ur(t,Yn(a,t)):ar(t,Vn(a,t))}else{if(!ns[h])return i?t:{};a=Wr(t,h,l)}}o||(o=new nn);var m=o.get(t);if(m)return m;o.set(t,a),Xr(t)?t.forEach(function(s){a.add(e(s,n,r,s,t,o))}):Qr(t)&&t.forEach(function(s,i){a.set(i,e(s,n,r,i,t,o))});var f=u?void 0:(d?c?mr:pr:c?Jn:Wn)(t);return rn(f||t,function(s,i){f&&(s=t[i=s]),ln(a,i,e(s,n,r,i,t,o))}),a};const ss=function(e){return rs(e,5)};var is=n(366),os=n.n(is);const as=function(e,t){};const ls=function(e){return rs(e,4)};const cs=function(e,t){for(var n=-1,r=null==e?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s};const ds=function(e){return"symbol"==typeof e||$e(e)&&"[object Symbol]"==Ye(e)};function us(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=e.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new(us.Cache||Zt),n}us.Cache=Zt;const hs=us;var ps=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ms=/\\(\\)?/g,fs=function(e){var t=hs(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ps,function(e,n,r,s){t.push(r?s.replace(ms,"$1"):n||e)}),t});const gs=fs;const ys=function(e){if("string"==typeof e||ds(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};var vs=Me?Me.prototype:void 0,xs=vs?vs.toString:void 0;const bs=function e(t){if("string"==typeof t)return t;if(gn(t))return cs(t,e)+"";if(ds(t))return xs?xs.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};const ws=function(e){return null==e?"":bs(e)};const js=function(e){return gn(e)?cs(e,ys):ds(e)?[e]:er(gs(ws(e)))};n(219);function Ns(){return Ns=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ns.apply(this,arguments)}function ks(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Ss(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}function _s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ts=(0,r.createContext)(void 0);Ts.displayName="FormikContext";Ts.Provider,Ts.Consumer;function Cs(){var e=(0,r.useContext)(Ts);return e||as(!1),e}var Es=function(e){return Array.isArray(e)&&0===e.length},Is=function(e){return"function"===typeof e},As=function(e){return null!==e&&"object"===typeof e},Rs=function(e){return String(Math.floor(Number(e)))===e},Os=function(e){return"[object String]"===Object.prototype.toString.call(e)},Ps=function(e){return 0===r.Children.count(e)},Fs=function(e){return As(e)&&Is(e.then)};function Ds(e,t,n,r){void 0===r&&(r=0);for(var s=js(t);e&&r<s.length;)e=e[s[r++]];return r===s.length||e?void 0===e?n:e:n}function zs(e,t,n){for(var r=ls(e),s=r,i=0,o=js(t);i<o.length-1;i++){var a=o[i],l=Ds(e,o.slice(0,i+1));if(l&&(As(l)||Array.isArray(l)))s=s[a]=ls(l);else{var c=o[i+1];s=s[a]=Rs(c)&&Number(c)>=0?[]:{}}}return(0===i?e:s)[o[i]]===n?e:(void 0===n?delete s[o[i]]:s[o[i]]=n,0===i&&void 0===n&&delete r[o[i]],r)}function Ls(e,t,n,r){void 0===n&&(n=new WeakMap),void 0===r&&(r={});for(var s=0,i=Object.keys(e);s<i.length;s++){var o=i[s],a=e[o];As(a)?n.get(a)||(n.set(a,!0),r[o]=Array.isArray(a)?[]:{},Ls(a,t,n,r[o])):r[o]=t}return r}var Ms={},Bs={};function Us(e){var t=e.validateOnChange,n=void 0===t||t,s=e.validateOnBlur,i=void 0===s||s,o=e.validateOnMount,a=void 0!==o&&o,l=e.isInitialValid,c=e.enableReinitialize,d=void 0!==c&&c,u=e.onSubmit,h=Ss(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),p=Ns({validateOnChange:n,validateOnBlur:i,validateOnMount:a,onSubmit:u},h),m=(0,r.useRef)(p.initialValues),f=(0,r.useRef)(p.initialErrors||Ms),g=(0,r.useRef)(p.initialTouched||Bs),y=(0,r.useRef)(p.initialStatus),v=(0,r.useRef)(!1),x=(0,r.useRef)({});(0,r.useEffect)(function(){return v.current=!0,function(){v.current=!1}},[]);var b=(0,r.useState)(0)[1],w=(0,r.useRef)({values:ss(p.initialValues),errors:ss(p.initialErrors)||Ms,touched:ss(p.initialTouched)||Bs,status:ss(p.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),j=w.current,N=(0,r.useCallback)(function(e){var t=w.current;w.current=function(e,t){switch(t.type){case"SET_VALUES":return Ns({},e,{values:t.payload});case"SET_TOUCHED":return Ns({},e,{touched:t.payload});case"SET_ERRORS":return os()(e.errors,t.payload)?e:Ns({},e,{errors:t.payload});case"SET_STATUS":return Ns({},e,{status:t.payload});case"SET_ISSUBMITTING":return Ns({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return Ns({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return Ns({},e,{values:zs(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return Ns({},e,{touched:zs(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return Ns({},e,{errors:zs(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return Ns({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return Ns({},e,{touched:Ls(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return Ns({},e,{isSubmitting:!1});default:return e}}(t,e),t!==w.current&&b(function(e){return e+1})},[]),k=(0,r.useCallback)(function(e,t){return new Promise(function(n,r){var s=p.validate(e,t);null==s?n(Ms):Fs(s)?s.then(function(e){n(e||Ms)},function(e){r(e)}):n(s)})},[p.validate]),S=(0,r.useCallback)(function(e,t){var n=p.validationSchema,r=Is(n)?n(t):n,s=t&&r.validateAt?r.validateAt(t,e):function(e,t,n,r){void 0===n&&(n=!1);var s=Ws(e);return t[n?"validateSync":"validate"](s,{abortEarly:!1,context:r||s})}(e,r);return new Promise(function(e,t){s.then(function(){e(Ms)},function(n){"ValidationError"===n.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return zs(t,e.path,e.message);var n=e.inner,r=Array.isArray(n),s=0;for(n=r?n:n[Symbol.iterator]();;){var i;if(r){if(s>=n.length)break;i=n[s++]}else{if((s=n.next()).done)break;i=s.value}var o=i;Ds(t,o.path)||(t=zs(t,o.path,o.message))}}return t}(n)):t(n)})})},[p.validationSchema]),_=(0,r.useCallback)(function(e,t){return new Promise(function(n){return n(x.current[e].validate(t))})},[]),T=(0,r.useCallback)(function(e){var t=Object.keys(x.current).filter(function(e){return Is(x.current[e].validate)}),n=t.length>0?t.map(function(t){return _(t,Ds(e,t))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then(function(e){return e.reduce(function(e,n,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(e=zs(e,t[r],n)),e},{})})},[_]),C=(0,r.useCallback)(function(e){return Promise.all([T(e),p.validationSchema?S(e):{},p.validate?k(e):{}]).then(function(e){var t=e[0],n=e[1],r=e[2];return Fe.all([t,n,r],{arrayMerge:Vs})})},[p.validate,p.validationSchema,T,k,S]),E=Hs(function(e){return void 0===e&&(e=j.values),N({type:"SET_ISVALIDATING",payload:!0}),C(e).then(function(e){return v.current&&(N({type:"SET_ISVALIDATING",payload:!1}),N({type:"SET_ERRORS",payload:e})),e})});(0,r.useEffect)(function(){a&&!0===v.current&&os()(m.current,p.initialValues)&&E(m.current)},[a,E]);var I=(0,r.useCallback)(function(e){var t=e&&e.values?e.values:m.current,n=e&&e.errors?e.errors:f.current?f.current:p.initialErrors||{},r=e&&e.touched?e.touched:g.current?g.current:p.initialTouched||{},s=e&&e.status?e.status:y.current?y.current:p.initialStatus;m.current=t,f.current=n,g.current=r,y.current=s;var i=function(){N({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:n,touched:r,status:s,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"===typeof e.submitCount?e.submitCount:0}})};if(p.onReset){var o=p.onReset(j.values,Q);Fs(o)?o.then(i):i()}else i()},[p.initialErrors,p.initialStatus,p.initialTouched,p.onReset]);(0,r.useEffect)(function(){!0!==v.current||os()(m.current,p.initialValues)||d&&(m.current=p.initialValues,I(),a&&E(m.current))},[d,p.initialValues,I,a,E]),(0,r.useEffect)(function(){d&&!0===v.current&&!os()(f.current,p.initialErrors)&&(f.current=p.initialErrors||Ms,N({type:"SET_ERRORS",payload:p.initialErrors||Ms}))},[d,p.initialErrors]),(0,r.useEffect)(function(){d&&!0===v.current&&!os()(g.current,p.initialTouched)&&(g.current=p.initialTouched||Bs,N({type:"SET_TOUCHED",payload:p.initialTouched||Bs}))},[d,p.initialTouched]),(0,r.useEffect)(function(){d&&!0===v.current&&!os()(y.current,p.initialStatus)&&(y.current=p.initialStatus,N({type:"SET_STATUS",payload:p.initialStatus}))},[d,p.initialStatus,p.initialTouched]);var A=Hs(function(e){if(x.current[e]&&Is(x.current[e].validate)){var t=Ds(j.values,e),n=x.current[e].validate(t);return Fs(n)?(N({type:"SET_ISVALIDATING",payload:!0}),n.then(function(e){return e}).then(function(t){N({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),N({type:"SET_ISVALIDATING",payload:!1})})):(N({type:"SET_FIELD_ERROR",payload:{field:e,value:n}}),Promise.resolve(n))}return p.validationSchema?(N({type:"SET_ISVALIDATING",payload:!0}),S(j.values,e).then(function(e){return e}).then(function(t){N({type:"SET_FIELD_ERROR",payload:{field:e,value:Ds(t,e)}}),N({type:"SET_ISVALIDATING",payload:!1})})):Promise.resolve()}),R=(0,r.useCallback)(function(e,t){var n=t.validate;x.current[e]={validate:n}},[]),O=(0,r.useCallback)(function(e){delete x.current[e]},[]),P=Hs(function(e,t){return N({type:"SET_TOUCHED",payload:e}),(void 0===t?i:t)?E(j.values):Promise.resolve()}),F=(0,r.useCallback)(function(e){N({type:"SET_ERRORS",payload:e})},[]),D=Hs(function(e,t){var r=Is(e)?e(j.values):e;return N({type:"SET_VALUES",payload:r}),(void 0===t?n:t)?E(r):Promise.resolve()}),z=(0,r.useCallback)(function(e,t){N({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})},[]),L=Hs(function(e,t,r){return N({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===r?n:r)?E(zs(j.values,e,t)):Promise.resolve()}),M=(0,r.useCallback)(function(e,t){var n,r=t,s=e;if(!Os(e)){e.persist&&e.persist();var i=e.target?e.target:e.currentTarget,o=i.type,a=i.name,l=i.id,c=i.value,d=i.checked,u=(i.outerHTML,i.options),h=i.multiple;r=t||(a||l),s=/number|range/.test(o)?(n=parseFloat(c),isNaN(n)?"":n):/checkbox/.test(o)?function(e,t,n){if("boolean"===typeof e)return Boolean(t);var r=[],s=!1,i=-1;if(Array.isArray(e))r=e,s=(i=e.indexOf(n))>=0;else if(!n||"true"==n||"false"==n)return Boolean(t);if(t&&n&&!s)return r.concat(n);if(!s)return r;return r.slice(0,i).concat(r.slice(i+1))}(Ds(j.values,r),d,c):u&&h?function(e){return Array.from(e).filter(function(e){return e.selected}).map(function(e){return e.value})}(u):c}r&&L(r,s)},[L,j.values]),B=Hs(function(e){if(Os(e))return function(t){return M(t,e)};M(e)}),U=Hs(function(e,t,n){return void 0===t&&(t=!0),N({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===n?i:n)?E(j.values):Promise.resolve()}),W=(0,r.useCallback)(function(e,t){e.persist&&e.persist();var n=e.target,r=n.name,s=n.id,i=(n.outerHTML,t||(r||s));U(i,!0)},[U]),V=Hs(function(e){if(Os(e))return function(t){return W(t,e)};W(e)}),q=(0,r.useCallback)(function(e){Is(e)?N({type:"SET_FORMIK_STATE",payload:e}):N({type:"SET_FORMIK_STATE",payload:function(){return e}})},[]),H=(0,r.useCallback)(function(e){N({type:"SET_STATUS",payload:e})},[]),K=(0,r.useCallback)(function(e){N({type:"SET_ISSUBMITTING",payload:e})},[]),J=Hs(function(){return N({type:"SUBMIT_ATTEMPT"}),E().then(function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var n;try{if(void 0===(n=G()))return}catch(r){throw r}return Promise.resolve(n).then(function(e){return v.current&&N({type:"SUBMIT_SUCCESS"}),e}).catch(function(e){if(v.current)throw N({type:"SUBMIT_FAILURE"}),e})}if(v.current&&(N({type:"SUBMIT_FAILURE"}),t))throw e})}),Y=Hs(function(e){e&&e.preventDefault&&Is(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&Is(e.stopPropagation)&&e.stopPropagation(),J().catch(function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)})}),Q={resetForm:I,validateForm:E,validateField:A,setErrors:F,setFieldError:z,setFieldTouched:U,setFieldValue:L,setStatus:H,setSubmitting:K,setTouched:P,setValues:D,setFormikState:q,submitForm:J},G=Hs(function(){return u(j.values,Q)}),$=Hs(function(e){e&&e.preventDefault&&Is(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&Is(e.stopPropagation)&&e.stopPropagation(),I()}),X=(0,r.useCallback)(function(e){return{value:Ds(j.values,e),error:Ds(j.errors,e),touched:!!Ds(j.touched,e),initialValue:Ds(m.current,e),initialTouched:!!Ds(g.current,e),initialError:Ds(f.current,e)}},[j.errors,j.touched,j.values]),Z=(0,r.useCallback)(function(e){return{setValue:function(t,n){return L(e,t,n)},setTouched:function(t,n){return U(e,t,n)},setError:function(t){return z(e,t)}}},[L,U,z]),ee=(0,r.useCallback)(function(e){var t=As(e),n=t?e.name:e,r=Ds(j.values,n),s={name:n,value:r,onChange:B,onBlur:V};if(t){var i=e.type,o=e.value,a=e.as,l=e.multiple;"checkbox"===i?void 0===o?s.checked=!!r:(s.checked=!(!Array.isArray(r)||!~r.indexOf(o)),s.value=o):"radio"===i?(s.checked=r===o,s.value=o):"select"===a&&l&&(s.value=s.value||[],s.multiple=!0)}return s},[V,B,j.values]),te=(0,r.useMemo)(function(){return!os()(m.current,j.values)},[m.current,j.values]),ne=(0,r.useMemo)(function(){return"undefined"!==typeof l?te?j.errors&&0===Object.keys(j.errors).length:!1!==l&&Is(l)?l(p):l:j.errors&&0===Object.keys(j.errors).length},[l,te,j.errors,p]);return Ns({},j,{initialValues:m.current,initialErrors:f.current,initialTouched:g.current,initialStatus:y.current,handleBlur:V,handleChange:B,handleReset:$,handleSubmit:Y,resetForm:I,setErrors:F,setFormikState:q,setFieldTouched:U,setFieldValue:L,setFieldError:z,setStatus:H,setSubmitting:K,setTouched:P,setValues:D,submitForm:J,validateForm:E,validateField:A,isValid:ne,dirty:te,unregisterField:O,registerField:R,getFieldProps:ee,getFieldMeta:X,getFieldHelpers:Z,validateOnBlur:i,validateOnChange:n,validateOnMount:a})}function Ws(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);!0===Array.isArray(e[r])?t[r]=e[r].map(function(e){return!0===Array.isArray(e)||rt(e)?Ws(e):""!==e?e:void 0}):rt(e[r])?t[r]=Ws(e[r]):t[r]=""!==e[r]?e[r]:void 0}return t}function Vs(e,t,n){var r=e.slice();return t.forEach(function(t,s){if("undefined"===typeof r[s]){var i=!1!==n.clone&&n.isMergeableObject(t);r[s]=i?Fe(Array.isArray(t)?[]:{},t,n):t}else n.isMergeableObject(t)?r[s]=Fe(e[s],t,n):-1===e.indexOf(t)&&r.push(t)}),r}var qs="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;function Hs(e){var t=(0,r.useRef)(e);return qs(function(){t.current=e}),(0,r.useCallback)(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current.apply(void 0,n)},[])}(0,r.forwardRef)(function(e,t){var n=e.action,s=Ss(e,["action"]),i=null!=n?n:"#",o=Cs(),a=o.handleReset,l=o.handleSubmit;return(0,r.createElement)("form",Ns({onSubmit:l,ref:t,onReset:a,action:i},s))}).displayName="Form";var Ks=function(e,t,n){var r=Js(e);return r.splice(t,0,n),r},Js=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map(function(e){return parseInt(e)}).reduce(function(e,t){return t>e?t:e},0);return Array.from(Ns({},e,{length:t+1}))}return[]},Ys=function(e,t){var n="function"===typeof e?e:t;return function(e){if(Array.isArray(e)||As(e)){var t=Js(e);return n(t)}return e}},Qs=function(e){function t(t){var n;return(n=e.call(this,t)||this).updateArrayField=function(e,t,r){var s=n.props,i=s.name;(0,s.formik.setFormikState)(function(n){var s=Ys(r,e),o=Ys(t,e),a=zs(n.values,i,e(Ds(n.values,i))),l=r?s(Ds(n.errors,i)):void 0,c=t?o(Ds(n.touched,i)):void 0;return Es(l)&&(l=void 0),Es(c)&&(c=void 0),Ns({},n,{values:a,errors:r?zs(n.errors,i,l):n.errors,touched:t?zs(n.touched,i,c):n.touched})})},n.push=function(e){return n.updateArrayField(function(t){return[].concat(Js(t),[ss(e)])},!1,!1)},n.handlePush=function(e){return function(){return n.push(e)}},n.swap=function(e,t){return n.updateArrayField(function(n){return function(e,t,n){var r=Js(e),s=r[t];return r[t]=r[n],r[n]=s,r}(n,e,t)},!0,!0)},n.handleSwap=function(e,t){return function(){return n.swap(e,t)}},n.move=function(e,t){return n.updateArrayField(function(n){return function(e,t,n){var r=Js(e),s=r[t];return r.splice(t,1),r.splice(n,0,s),r}(n,e,t)},!0,!0)},n.handleMove=function(e,t){return function(){return n.move(e,t)}},n.insert=function(e,t){return n.updateArrayField(function(n){return Ks(n,e,t)},function(t){return Ks(t,e,null)},function(t){return Ks(t,e,null)})},n.handleInsert=function(e,t){return function(){return n.insert(e,t)}},n.replace=function(e,t){return n.updateArrayField(function(n){return function(e,t,n){var r=Js(e);return r[t]=n,r}(n,e,t)},!1,!1)},n.handleReplace=function(e,t){return function(){return n.replace(e,t)}},n.unshift=function(e){var t=-1;return n.updateArrayField(function(n){var r=n?[e].concat(n):[e];return t=r.length,r},function(e){return e?[null].concat(e):[null]},function(e){return e?[null].concat(e):[null]}),t},n.handleUnshift=function(e){return function(){return n.unshift(e)}},n.handleRemove=function(e){return function(){return n.remove(e)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(_s(n)),n.pop=n.pop.bind(_s(n)),n}ks(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){this.props.validateOnChange&&this.props.formik.validateOnChange&&!os()(Ds(e.formik.values,e.name),Ds(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},n.remove=function(e){var t;return this.updateArrayField(function(n){var r=n?Js(n):[];return t||(t=r[e]),Is(r.splice)&&r.splice(e,1),Is(r.every)&&r.every(function(e){return void 0===e})?[]:r},!0,!0),t},n.pop=function(){var e;return this.updateArrayField(function(t){var n=t.slice();return e||(e=n&&n.pop&&n.pop()),n},!0,!0),e},n.render=function(){var e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},t=this.props,n=t.component,s=t.render,i=t.children,o=t.name,a=Ns({},e,{form:Ss(t.formik,["validate","validationSchema"]),name:o});return n?(0,r.createElement)(n,a):s?s(a):i?"function"===typeof i?i(a):Ps(i)?null:r.Children.only(i):null},t}(r.Component);Qs.defaultProps={validateOnChange:!0};var Gs=n(575),$s=n(517),Xs=n(704),Zs=n.n(Xs);const ei=Object.prototype.toString,ti=Error.prototype.toString,ni=RegExp.prototype.toString,ri="undefined"!==typeof Symbol?Symbol.prototype.toString:()=>"",si=/^Symbol\((.*)\)(.*)$/;function ii(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||!0===e||!1===e)return""+e;const n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?'"'.concat(e,'"'):e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return ri.call(e).replace(si,"Symbol($1)");const r=ei.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+ti.call(e)+"]":"RegExp"===r?ni.call(e):null}function oi(e,t){let n=ii(e,t);return null!==n?n:JSON.stringify(e,function(e,n){let r=ii(this[e],t);return null!==r?r:n},2)}function ai(e){return null==e?[]:[].concat(e)}let li,ci,di,ui=/\$\{\s*(\w+)\s*\}/g;li=Symbol.toStringTag;class hi{constructor(e,t,n,r){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[li]="Error",this.name="ValidationError",this.value=t,this.path=n,this.type=r,this.errors=[],this.inner=[],ai(e).forEach(e=>{if(pi.isError(e)){this.errors.push(...e.errors);const t=e.inner.length?e.inner:[e];this.inner.push(...t)}else this.errors.push(e)}),this.message=this.errors.length>1?"".concat(this.errors.length," errors occurred"):this.errors[0]}}ci=Symbol.hasInstance,di=Symbol.toStringTag;class pi extends Error{static formatError(e,t){const n=t.label||t.path||"this";return t=Object.assign({},t,{path:n,originalPath:t.path}),"string"===typeof e?e.replace(ui,(e,n)=>oi(t[n])):"function"===typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,n,r,s){const i=new hi(e,t,n,r);if(s)return i;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[di]="Error",this.name=i.name,this.message=i.message,this.type=i.type,this.value=i.value,this.path=i.path,this.errors=i.errors,this.inner=i.inner,Error.captureStackTrace&&Error.captureStackTrace(this,pi)}static[ci](e){return hi[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let mi={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:e=>{let{path:t,type:n,value:r,originalValue:s}=e;const i=null!=s&&s!==r?" (cast from the value `".concat(oi(s,!0),"`)."):".";return"mixed"!==n?"".concat(t," must be a `").concat(n,"` type, ")+"but the final value was: `".concat(oi(r,!0),"`")+i:"".concat(t," must match the configured type. ")+"The validated value was: `".concat(oi(r,!0),"`")+i}},fi={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},gi={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},yi={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},vi={isValue:"${path} field must be ${value}"},xi={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},bi={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},wi={notType:e=>{const{path:t,value:n,spec:r}=e,s=r.types.length;if(Array.isArray(n)){if(n.length<s)return"".concat(t," tuple value has too few items, expected a length of ").concat(s," but got ").concat(n.length," for value: `").concat(oi(n,!0),"`");if(n.length>s)return"".concat(t," tuple value has too many items, expected a length of ").concat(s," but got ").concat(n.length," for value: `").concat(oi(n,!0),"`")}return pi.formatError(mi.notType,e)}};Object.assign(Object.create(null),{mixed:mi,string:fi,number:gi,date:yi,object:xi,array:bi,boolean:vi,tuple:wi});const ji=e=>e&&e.__isYupSchema__;class Ni{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:r,otherwise:s}=t,i="function"===typeof n?n:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.every(e=>e===n)};return new Ni(e,(e,t)=>{var n;let o=i(...e)?r:s;return null!=(n=null==o?void 0:o(t))?n:t})}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let n=this.refs.map(e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context)),r=this.fn(n,e,t);if(void 0===r||r===e)return e;if(!ji(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}const ki="$",Si=".";class _i{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===ki,this.isValue=this.key[0]===Si,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?ki:this.isValue?Si:"";this.path=this.key.slice(n.length),this.getter=this.path&&(0,Gs.getter)(this.path,!0),this.map=t.map}getValue(e,t,n){let r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return"Ref(".concat(this.key,")")}static isRef(e){return e&&e.__isYupRef}}_i.prototype.__isYupRef=!0;const Ti=e=>null==e;function Ci(e){function t(t,n,r){let{value:s,path:i="",options:o,originalValue:a,schema:l}=t;const{name:c,test:d,params:u,message:h,skipAbsent:p}=e;let{parent:m,context:f,abortEarly:g=l.spec.abortEarly,disableStackTrace:y=l.spec.disableStackTrace}=o;function v(e){return _i.isRef(e)?e.getValue(s,m,f):e}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.assign({value:s,originalValue:a,label:l.spec.label,path:e.path||i,spec:l.spec,disableStackTrace:e.disableStackTrace||y},u,e.params);for(const r of Object.keys(t))t[r]=v(t[r]);const n=new pi(pi.formatError(e.message||h,t),s,t.path,e.type||c,t.disableStackTrace);return n.params=t,n}const b=g?n:r;let w={path:i,parent:m,type:c,from:o.from,createError:x,resolve:v,options:o,originalValue:a,schema:l};const j=e=>{pi.isError(e)?b(e):e?r(null):b(x())},N=e=>{pi.isError(e)?b(e):n(e)};if(p&&Ti(s))return j(!0);let k;try{var S;if(k=d.call(w,s,w),"function"===typeof(null==(S=k)?void 0:S.then)){if(o.sync)throw new Error('Validation test of type: "'.concat(w.type,'" returned a Promise during a synchronous validate. ')+"This test will finish after the validate call has returned");return Promise.resolve(k).then(j,N)}}catch(_){return void N(_)}j(k)}return t.OPTIONS=e,t}function Ei(e,t,n){let r,s,i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return t?((0,Gs.forEach)(t,(a,l,c)=>{let d=l?a.slice(1,a.length-1):a,u="tuple"===(e=e.resolve({context:o,parent:r,value:n})).type,h=c?parseInt(d,10):0;if(e.innerType||u){if(u&&!c)throw new Error('Yup.reach cannot implicitly index into a tuple type. the path part "'.concat(i,'" must contain an index to the tuple element, e.g. "').concat(i,'[0]"'));if(n&&h>=n.length)throw new Error("Yup.reach cannot resolve an array item at index: ".concat(a,", in the path: ").concat(t,". ")+"because there is no value at that index. ");r=n,n=n&&n[h],e=u?e.spec.types[h]:e.innerType}if(!c){if(!e.fields||!e.fields[d])throw new Error("The schema does not contain the path: ".concat(t,". ")+"(failed at: ".concat(i,' which is a type: "').concat(e.type,'")'));r=n,n=n&&n[d],e=e.fields[d]}s=d,i=l?"["+a+"]":"."+a}),{schema:e,parent:r,parentPath:s}):{parent:r,parentPath:t,schema:e}}class Ii extends Set{describe(){const e=[];for(const t of this.values())e.push(_i.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const n of this.values())t.push(e(n));return t}clone(){return new Ii(this.values())}merge(e,t){const n=this.clone();return e.forEach(e=>n.add(e)),t.forEach(e=>n.delete(e)),n}}function Ai(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(ji(e)||!e||"object"!==typeof e)return e;if(n.has(e))return n.get(e);if(e instanceof Date)t=new Date(e.getTime()),n.set(e,t);else if(e instanceof RegExp)t=new RegExp(e),n.set(e,t);else if(Array.isArray(e)){t=new Array(e.length),n.set(e,t);for(let r=0;r<e.length;r++)t[r]=Ai(e[r],n)}else if(e instanceof Map){t=new Map,n.set(e,t);for(const[r,s]of e.entries())t.set(r,Ai(s,n))}else if(e instanceof Set){t=new Set,n.set(e,t);for(const r of e)t.add(Ai(r,n))}else{if(!(e instanceof Object))throw Error("Unable to clone ".concat(e));t={},n.set(e,t);for(const[r,s]of Object.entries(e))t[r]=Ai(s,n)}return t}class Ri{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new Ii,this._blacklist=new Ii,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(mi.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},null==e?void 0:e.spec),this.withMutation(e=>{e.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=Ai(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(){if(0===arguments.length)return this.spec.meta;let e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},arguments.length<=0?void 0:arguments[0]),e}withMutation(e){let t=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=t,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError("You cannot `concat()` schema's of different types: ".concat(this.type," and ").concat(e.type));let t=this,n=e.clone();const r=Object.assign({},t.spec,n.spec);return n.spec=r,n.internalTests=Object.assign({},t.internalTests,n.internalTests),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation(t=>{e.tests.forEach(e=>{t.test(e.OPTIONS)})}),n.transforms=[...t.transforms,...n.transforms],n}isType(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let n=t.conditions;t=t.clone(),t.conditions=[],t=n.reduce((t,n)=>n.resolve(t,e),t),t=t.resolve(e)}return t}resolveOptions(e){var t,n,r,s;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(n=e.abortEarly)?n:this.spec.abortEarly,recursive:null!=(r=e.recursive)?r:this.spec.recursive,disableStackTrace:null!=(s=e.disableStackTrace)?s:this.spec.disableStackTrace})}cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.resolve(Object.assign({value:e},t)),r="ignore-optionality"===t.assert,s=n._cast(e,t);if(!1!==t.assert&&!n.isType(s)){if(r&&Ti(s))return s;let i=oi(e),o=oi(s);throw new TypeError("The value of ".concat(t.path||"field"," could not be cast to a value ")+'that satisfies the schema type: "'.concat(n.type,'". \n\n')+"attempted value: ".concat(i," \n")+(o!==i?"result of cast: ".concat(o):""))}return s}_cast(e,t){let n=void 0===e?e:this.transforms.reduce((t,n)=>n.call(this,t,e,this),e);return void 0===n&&(n=this.getDefault(t)),n}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,{path:s,originalValue:i=e,strict:o=this.spec.strict}=t,a=e;o||(a=this._cast(a,Object.assign({assert:!1},t)));let l=[];for(let c of Object.values(this.internalTests))c&&l.push(c);this.runTests({path:s,value:a,originalValue:i,options:t,tests:l},n,e=>{if(e.length)return r(e,a);this.runTests({path:s,value:a,originalValue:i,options:t,tests:this.tests},n,r)})}runTests(e,t,n){let r=!1,{tests:s,value:i,originalValue:o,path:a,options:l}=e,c=e=>{r||(r=!0,t(e,i))},d=e=>{r||(r=!0,n(e,i))},u=s.length,h=[];if(!u)return d([]);let p={value:i,originalValue:o,path:a,options:l,schema:this};for(let m=0;m<s.length;m++){(0,s[m])(p,c,function(e){e&&(Array.isArray(e)?h.push(...e):h.push(e)),--u<=0&&d(h)})}}asNestedTest(e){let{key:t,index:n,parent:r,parentPath:s,originalParent:i,options:o}=e;const a=null!=t?t:n;if(null==a)throw TypeError("Must include `key` or `index` for nested validations");const l="number"===typeof a;let c=r[a];const d=Object.assign({},o,{strict:!0,parent:r,value:c,originalValue:i[a],key:void 0,[l?"index":"key"]:a,path:l||a.includes(".")?"".concat(s||"","[").concat(l?a:'"'.concat(a,'"'),"]"):(s?"".concat(s,"."):"")+t});return(e,t,n)=>this.resolve(d)._validate(c,d,t,n)}validate(e,t){var n;let r=this.resolve(Object.assign({},t,{value:e})),s=null!=(n=null==t?void 0:t.disableStackTrace)?n:r.spec.disableStackTrace;return new Promise((n,i)=>r._validate(e,t,(e,t)=>{pi.isError(e)&&(e.value=t),i(e)},(e,t)=>{e.length?i(new pi(e,t,void 0,void 0,s)):n(t)}))}validateSync(e,t){var n;let r,s=this.resolve(Object.assign({},t,{value:e})),i=null!=(n=null==t?void 0:t.disableStackTrace)?n:s.spec.disableStackTrace;return s._validate(e,Object.assign({},t,{sync:!0}),(e,t)=>{throw pi.isError(e)&&(e.value=t),e},(t,n)=>{if(t.length)throw new pi(t,e,void 0,void 0,i);r=n}),r}isValid(e,t){return this.validate(e,t).then(()=>!0,e=>{if(pi.isError(e))return!1;throw e})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(n){if(pi.isError(n))return!1;throw n}}_getDefault(e){let t=this.spec.default;return null==t?t:"function"===typeof t?t.call(this,e):Ai(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){if(0===arguments.length)return this._getDefault();return this.clone({default:e})}strict(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.clone({strict:e})}nullability(e,t){const n=this.clone({nullable:e});return n.internalTests.nullable=Ci({message:t,name:"nullable",test(e){return null!==e||this.schema.spec.nullable}}),n}optionality(e,t){const n=this.clone({optional:e});return n.internalTests.optionality=Ci({message:t,name:"optionality",test(e){return void 0!==e||this.schema.spec.optional}}),n}optional(){return this.optionality(!0)}defined(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi.defined;return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi.notNull;return this.nullability(!1,e)}required(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mi.required;return this.clone().withMutation(t=>t.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let t=this.clone();return t.transforms.push(e),t}test(){let e;if(e=1===arguments.length?"function"===typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]},void 0===e.message&&(e.message=mi.default),"function"!==typeof e.test)throw new TypeError("`test` is a required parameters");let t=this.clone(),n=Ci(e),r=e.exclusive||e.name&&!0===t.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(t.exclusiveTests[e.name]=!!e.exclusive),t.tests=t.tests.filter(t=>{if(t.OPTIONS.name===e.name){if(r)return!1;if(t.OPTIONS.test===n.OPTIONS.test)return!1}return!0}),t.tests.push(n),t}when(e,t){Array.isArray(e)||"string"===typeof e||(t=e,e=".");let n=this.clone(),r=ai(e).map(e=>new _i(e));return r.forEach(e=>{e.isSibling&&n.deps.push(e.key)}),n.conditions.push("function"===typeof t?new Ni(r,t):Ni.fromOptions(r,t)),n}typeError(e){let t=this.clone();return t.internalTests.typeError=Ci({message:e,name:"typeError",skipAbsent:!0,test(e){return!!this.schema._typeCheck(e)||this.createError({params:{type:this.schema.type}})}}),t}oneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mi.oneOf,n=this.clone();return e.forEach(e=>{n._whitelist.add(e),n._blacklist.delete(e)}),n.internalTests.whiteList=Ci({message:t,name:"oneOf",skipAbsent:!0,test(e){let t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}notOneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mi.notOneOf,n=this.clone();return e.forEach(e=>{n._blacklist.add(e),n._whitelist.delete(e)}),n.internalTests.blacklist=Ci({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}strip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:n,meta:r,optional:s,nullable:i}=t.spec;return{meta:r,label:n,optional:s,nullable:i,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map(e=>({name:e.OPTIONS.name,params:e.OPTIONS.params})).filter((e,t,n)=>n.findIndex(t=>t.name===e.name)===t)}}}Ri.prototype.__isYupSchema__=!0;for(const n of["validate","validateSync"])Ri.prototype["".concat(n,"At")]=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{parent:s,parentPath:i,schema:o}=Ei(this,e,t,r.context);return o[n](s&&s[i],Object.assign({},r,{parent:s,path:e}))};for(const n of["equals","is"])Ri.prototype[n]=Ri.prototype.oneOf;for(const n of["not","nope"])Ri.prototype[n]=Ri.prototype.notOneOf;const Oi=()=>!0;class Pi extends Ri{constructor(e){super("function"===typeof e?{type:"mixed",check:e}:Object.assign({type:"mixed",check:Oi},e))}}Pi.prototype;class Fi extends Ri{constructor(){super({type:"boolean",check:e=>(e instanceof Boolean&&(e=e.valueOf()),"boolean"===typeof e)}),this.withMutation(()=>{this.transform((e,t,n)=>{if(n.spec.coerce&&!n.isType(e)){if(/^(true|1)$/i.test(String(e)))return!0;if(/^(false|0)$/i.test(String(e)))return!1}return e})})}isTrue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vi.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"true"},test:e=>Ti(e)||!0===e})}isFalse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vi.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"false"},test:e=>Ti(e)||!1===e})}default(e){return super.default(e)}defined(e){return super.defined(e)}optional(){return super.optional()}required(e){return super.required(e)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(e){return super.nonNullable(e)}strip(e){return super.strip(e)}}Fi.prototype;const Di=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function zi(e){var t,n;const r=Di.exec(e);return r?{year:Li(r[1]),month:Li(r[2],1)-1,day:Li(r[3],1),hour:Li(r[4]),minute:Li(r[5]),second:Li(r[6]),millisecond:r[7]?Li(r[7].substring(0,3)):0,precision:null!=(t=null==(n=r[7])?void 0:n.length)?t:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:Li(r[10]),minuteOffset:Li(r[11])}:null}function Li(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number(e)||t}let Mi=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Bi=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Ui=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Wi=new RegExp("".concat("^\\d{4}-\\d{2}-\\d{2}","T").concat("\\d{2}:\\d{2}:\\d{2}","(\\.\\d+)?").concat("(([+-]\\d{2}(:?\\d{2})?)|Z)","$")),Vi=e=>Ti(e)||e===e.trim(),qi={}.toString();function Hi(){return new Ki}class Ki extends Ri{constructor(){super({type:"string",check:e=>(e instanceof String&&(e=e.valueOf()),"string"===typeof e)}),this.withMutation(()=>{this.transform((e,t,n)=>{if(!n.spec.coerce||n.isType(e))return e;if(Array.isArray(e))return e;const r=null!=e&&e.toString?e.toString():e;return r===qi?e:r})})}required(e){return super.required(e).withMutation(t=>t.test({message:e||mi.required,name:"required",skipAbsent:!0,test:e=>!!e.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(e=>"required"!==e.OPTIONS.name),e))}length(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fi.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fi.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fi.max;return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}matches(e,t){let n,r,s=!1;return t&&("object"===typeof t?({excludeEmptyString:s=!1,message:n,name:r}=t):n=t),this.test({name:r||"matches",message:n||fi.matches,params:{regex:e},skipAbsent:!0,test:t=>""===t&&s||-1!==t.search(e)})}email(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi.email;return this.matches(Mi,{name:"email",message:e,excludeEmptyString:!0})}url(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi.url;return this.matches(Bi,{name:"url",message:e,excludeEmptyString:!0})}uuid(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi.uuid;return this.matches(Ui,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t,n,r="";return e&&("object"===typeof e?({message:r="",allowOffset:t=!1,precision:n}=e):r=e),this.matches(Wi,{name:"datetime",message:r||fi.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||fi.datetime_offset,params:{allowOffset:t},skipAbsent:!0,test:e=>{if(!e||t)return!0;const n=zi(e);return!!n&&!!n.z}}).test({name:"datetime_precision",message:r||fi.datetime_precision,params:{precision:n},skipAbsent:!0,test:e=>{if(!e||void 0==n)return!0;const t=zi(e);return!!t&&t.precision===n}})}ensure(){return this.default("").transform(e=>null===e?"":e)}trim(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi.trim;return this.transform(e=>null!=e?e.trim():e).test({message:e,name:"trim",test:Vi})}lowercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi.lowercase;return this.transform(e=>Ti(e)?e:e.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>Ti(e)||e===e.toLowerCase()})}uppercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi.uppercase;return this.transform(e=>Ti(e)?e:e.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>Ti(e)||e===e.toUpperCase()})}}Hi.prototype=Ki.prototype;class Ji extends Ri{constructor(){super({type:"number",check:e=>(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&!(e=>e!=+e)(e))}),this.withMutation(()=>{this.transform((e,t,n)=>{if(!n.spec.coerce)return e;let r=e;if("string"===typeof r){if(r=r.replace(/\s/g,""),""===r)return NaN;r=+r}return n.isType(r)||null===r?r:parseFloat(r)})})}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gi.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t>=this.resolve(e)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gi.max;return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(t){return t<=this.resolve(e)}})}lessThan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gi.lessThan;return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(t){return t<this.resolve(e)}})}moreThan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gi.moreThan;return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(t){return t>this.resolve(e)}})}positive(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gi.positive;return this.moreThan(0,e)}negative(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gi.negative;return this.lessThan(0,e)}integer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gi.integer;return this.test({name:"integer",message:e,skipAbsent:!0,test:e=>Number.isInteger(e)})}truncate(){return this.transform(e=>Ti(e)?e:0|e)}round(e){var t;let n=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform(t=>Ti(t)?t:Math[e](t))}}Ji.prototype;let Yi=new Date("");function Qi(){return new Gi}class Gi extends Ri{constructor(){super({type:"date",check(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}}),this.withMutation(()=>{this.transform((e,t,n)=>!n.spec.coerce||n.isType(e)||null===e?e:(e=function(e){const t=zi(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(void 0===t.z&&void 0===t.plusMinus)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let n=0;return"Z"!==t.z&&void 0!==t.plusMinus&&(n=60*t.hourOffset+t.minuteOffset,"+"===t.plusMinus&&(n=0-n)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+n,t.second,t.millisecond)}(e),isNaN(e)?Gi.INVALID_DATE:new Date(e)))})}prepareParam(e,t){let n;if(_i.isRef(e))n=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError("`".concat(t,"` must be a Date or a value that can be `cast()` to a Date"));n=r}return n}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yi.min,n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(e){return e>=this.resolve(n)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yi.max,n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(e){return e<=this.resolve(n)}})}}function $i(e,t){let n=1/0;return e.some((e,r)=>{var s;if(null!=(s=t.path)&&s.includes(e))return n=r,!0}),n}function Xi(e){return(t,n)=>$i(e,t)-$i(e,n)}Gi.INVALID_DATE=Yi,Qi.prototype=Gi.prototype,Qi.INVALID_DATE=Yi;const Zi=(e,t,n)=>{if("string"!==typeof e)return e;let r=e;try{r=JSON.parse(e)}catch(s){}return n.isType(r)?r:e};function eo(e){if("fields"in e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=eo(r);return e.setFields(t)}if("array"===e.type){const t=e.optional();return t.innerType&&(t.innerType=eo(t.innerType)),t}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map(eo)}):"optional"in e?e.optional():e}let to=e=>"[object Object]"===Object.prototype.toString.call(e);function no(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter(e=>-1===n.indexOf(e))}const ro=Xi([]);function so(e){return new io(e)}class io extends Ri{constructor(e){super({type:"object",check:e=>to(e)||"function"===typeof e}),this.fields=Object.create(null),this._sortErrors=ro,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;let r=super._cast(e,t);if(void 0===r)return this.getDefault(t);if(!this._typeCheck(r))return r;let s=this.fields,i=null!=(n=t.stripUnknown)?n:this.spec.noUnknown,o=[].concat(this._nodes,Object.keys(r).filter(e=>!this._nodes.includes(e))),a={},l=Object.assign({},t,{parent:a,__validating:t.__validating||!1}),c=!1;for(const d of o){let e=s[d],n=d in r;if(e){let n,s=r[d];l.path=(t.path?"".concat(t.path,"."):"")+d,e=e.resolve({value:s,context:t.context,parent:a});let i=e instanceof Ri?e.spec:void 0,o=null==i?void 0:i.strict;if(null!=i&&i.strip){c=c||d in r;continue}n=t.__validating&&o?r[d]:e.cast(r[d],l),void 0!==n&&(a[d]=n)}else n&&!i&&(a[d]=r[d]);n===d in a&&a[d]===r[d]||(c=!0)}return c?a:r}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,{from:s=[],originalValue:i=e,recursive:o=this.spec.recursive}=t;t.from=[{schema:this,value:i},...s],t.__validating=!0,t.originalValue=i,super._validate(e,t,n,(e,s)=>{if(!o||!to(s))return void r(e,s);i=i||s;let a=[];for(let n of this._nodes){let e=this.fields[n];e&&!_i.isRef(e)&&a.push(e.asNestedTest({options:t,key:n,parent:s,parentPath:t.path,originalParent:i}))}this.runTests({tests:a,value:s,originalValue:i,options:t},n,t=>{r(t.sort(this._sortErrors).concat(e),s)})})}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),n=t.fields;for(let[r,s]of Object.entries(this.fields)){const e=n[r];n[r]=void 0===e?s:e}return t.withMutation(t=>t.setFields(n,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach(n=>{var r;const s=this.fields[n];let i=e;null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[n]})),t[n]=s&&"getDefault"in s?s.getDefault(i):void 0}),t}setFields(e,t){let n=this.clone();return n.fields=e,n._nodes=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=new Set,s=new Set(t.map(e=>{let[t,n]=e;return"".concat(t,"-").concat(n)}));function i(e,t){let i=(0,Gs.split)(e)[0];r.add(i),s.has("".concat(t,"-").concat(i))||n.push([t,i])}for(const o of Object.keys(e)){let t=e[o];r.add(o),_i.isRef(t)&&t.isSibling?i(t.path,o):ji(t)&&"deps"in t&&t.deps.forEach(e=>i(e,o))}return Zs().array(Array.from(r),n).reverse()}(e,t),n._sortErrors=Xi(Object.keys(e)),t&&(n._excludedEdges=t),n}shape(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.clone().withMutation(n=>{let r=n._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),r=[...n._excludedEdges,...t]),n.setFields(Object.assign(n.fields,e),r)})}partial(){const e={};for(const[t,n]of Object.entries(this.fields))e[t]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(e)}deepPartial(){return eo(this)}pick(e){const t={};for(const n of e)this.fields[n]&&(t[n]=this.fields[n]);return this.setFields(t,this._excludedEdges.filter(t=>{let[n,r]=t;return e.includes(n)&&e.includes(r)}))}omit(e){const t=[];for(const n of Object.keys(this.fields))e.includes(n)||t.push(n);return this.pick(t)}from(e,t,n){let r=(0,Gs.getter)(e,!0);return this.transform(s=>{if(!s)return s;let i=s;return((e,t)=>{const n=[...(0,Gs.normalizePath)(t)];if(1===n.length)return n[0]in e;let r=n.pop(),s=(0,Gs.getter)((0,Gs.join)(n),!0)(e);return!(!s||!(r in s))})(s,e)&&(i=Object.assign({},s),n||delete i[e],i[t]=r(s)),i})}json(){return this.transform(Zi)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||xi.exact,test(e){if(null==e)return!0;const t=no(this.schema,e);return 0===t.length||this.createError({params:{properties:t.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xi.noUnknown;"boolean"!==typeof e&&(t=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const n=no(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xi.noUnknown;return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>{if(!t)return t;const n={};for(const r of Object.keys(t))n[e(r)]=t[r];return n})}camelCase(){return this.transformKeys($s.camelCase)}snakeCase(){return this.transformKeys($s.snakeCase)}constantCase(){return this.transformKeys(e=>(0,$s.snakeCase)(e).toUpperCase())}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);n.fields={};for(const[s,i]of Object.entries(t.fields)){var r;let t=e;null!=(r=t)&&r.value&&(t=Object.assign({},t,{parent:t.value,value:t.value[s]})),n.fields[s]=i.describe(t)}return n}}so.prototype=io.prototype;class oo extends Ri{constructor(e){super({type:"array",spec:{types:e},check:e=>Array.isArray(e)}),this.innerType=void 0,this.innerType=e}_cast(e,t){const n=super._cast(e,t);if(!this._typeCheck(n)||!this.innerType)return n;let r=!1;const s=n.map((e,n)=>{const s=this.innerType.cast(e,Object.assign({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return s!==e&&(r=!0),s});return r?s:n}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;var s;let i=this.innerType,o=null!=(s=t.recursive)?s:this.spec.recursive;null!=t.originalValue&&t.originalValue,super._validate(e,t,n,(s,a)=>{var l;if(!o||!i||!this._typeCheck(a))return void r(s,a);let c=new Array(a.length);for(let n=0;n<a.length;n++){var d;c[n]=i.asNestedTest({options:t,index:n,parent:a,parentPath:t.path,originalParent:null!=(d=t.originalValue)?d:e})}this.runTests({value:a,tests:c,originalValue:null!=(l=t.originalValue)?l:e,options:t},n,e=>r(e.concat(s),a))})}clone(e){const t=super.clone(e);return t.innerType=this.innerType,t}json(){return this.transform(Zi)}concat(e){let t=super.concat(e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}of(e){let t=this.clone();if(!ji(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+oi(e));return t.innerType=e,t.spec=Object.assign({},t.spec,{types:e}),t}length(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e,t){return t=t||bi.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e,t){return t=t||bi.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}ensure(){return this.default(()=>[]).transform((e,t)=>this._typeCheck(e)?e:null==t?[]:[].concat(t))}compact(e){let t=e?(t,n,r)=>!e(t,n,r):e=>!!e;return this.transform(e=>null!=e?e.filter(t):e)}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);if(t.innerType){var r;let s=e;null!=(r=s)&&r.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[0]})),n.innerType=t.innerType.describe(s)}return n}}oo.prototype;class ao extends Ri{constructor(e){super({type:"tuple",spec:{types:e},check(e){const t=this.spec.types;return Array.isArray(e)&&e.length===t.length}}),this.withMutation(()=>{this.typeError(wi.notType)})}_cast(e,t){const{types:n}=this.spec,r=super._cast(e,t);if(!this._typeCheck(r))return r;let s=!1;const i=n.map((e,n)=>{const i=e.cast(r[n],Object.assign({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return i!==r[n]&&(s=!0),i});return s?i:r}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,s=this.spec.types;super._validate(e,t,n,(i,o)=>{var a;if(!this._typeCheck(o))return void r(i,o);let l=[];for(let[n,r]of s.entries()){var c;l[n]=r.asNestedTest({options:t,index:n,parent:o,parentPath:t.path,originalParent:null!=(c=t.originalValue)?c:e})}this.runTests({value:o,tests:l,originalValue:null!=(a=t.originalValue)?a:e,options:t},n,e=>r(e.concat(i),o))})}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);return n.innerType=t.spec.types.map((t,n)=>{var r;let s=e;return null!=(r=s)&&r.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[n]})),t.describe(s)}),n}}ao.prototype;(0,n(395).Uz)();const lo=async e=>{try{console.log("=== \ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc9c4\ub2e8 \uc2dc\uc791 ==="),console.log("\ub300\uc0c1 \uc774\uba54\uc77c:",e);if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw new Error("\uc62c\ubc14\ub978 \uc774\uba54\uc77c \uc8fc\uc18c\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");console.log("\uc774\uba54\uc77c \uae30\ubc18 \ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \ucc98\ub9ac"),console.log("\uc774\uba54\uc77c \ub4f1\ub85d \uc0c1\ud0dc \ud655\uc778 \uc911...");const t=await(async e=>{try{return(await(0,we.Wm)(je.j2,e)).length>0}catch(t){return console.error("\uc774\uba54\uc77c \uc874\uc7ac \ud655\uc778 \uc624\ub958:",t),!1}})(e);if(console.log("\uc774\uba54\uc77c \ub4f1\ub85d \uc0c1\ud0dc:",t?"\ub4f1\ub85d\ub428":"\ub4f1\ub85d\ub418\uc9c0 \uc54a\uc74c"),!t)throw new Error("\ub4f1\ub85d\ub418\uc9c0 \uc54a\uc740 \uc774\uba54\uc77c \uc8fc\uc18c\uc785\ub2c8\ub2e4.");return console.log("\ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc774\uba54\uc77c \ubc1c\uc1a1 \uc911..."),await(0,we.sendPasswordResetEmail)(je.j2,e),console.log("\ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc774\uba54\uc77c \ubc1c\uc1a1 \uc644\ub8cc"),console.log("=== \ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc9c4\ub2e8 \uc644\ub8cc ==="),{success:!0,message:"\ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc774\uba54\uc77c\uc774 \ubc1c\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",diagnostics:{emailExists:!0,emailFormat:!0,emailSent:!0}}}catch(t){return console.error("\ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc9c4\ub2e8 \uc624\ub958:",t),{success:!1,message:t.message||"\uc774\uba54\uc77c \ubc1c\uc1a1\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",diagnostics:{emailExists:!1,emailFormat:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),emailSent:!1}}}},co=()=>{const{login:e}=Te(),n=Z(),[s,i]=(0,r.useState)(""),[o,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),m=Us({initialValues:{email:"",password:""},validationSchema:so({email:Hi().email("\uc62c\ubc14\ub978 \uc774\uba54\uc77c \uc8fc\uc18c\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694").required("\uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694"),password:Hi().required("\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694")}),onSubmit:async t=>{try{i(""),await e(t.email,t.password),n("/")}catch(r){i("\uc774\uba54\uc77c \ub610\ub294 \ube44\ubc00\ubc88\ud638\uac00 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4")}}}),f=()=>{a(!1)};return(0,Se.jsxs)("div",{className:"login-container",children:[(0,Se.jsx)("h2",{children:"\ub85c\uadf8\uc778"}),s&&(0,Se.jsx)("div",{className:"error-message",children:s}),(0,Se.jsxs)("form",{onSubmit:m.handleSubmit,children:[(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"email",children:"\uc774\uba54\uc77c"}),(0,Se.jsx)("input",(0,t.A)((0,t.A)({id:"email",type:"email"},m.getFieldProps("email")),{},{placeholder:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694",autoComplete:"email"})),(0,Se.jsx)("small",{style:{color:"#666",fontSize:"0.85rem"},children:"\ud83d\udca1 \uac00\uc785 \uc2dc \ub4f1\ub85d\ud55c \uc774\uba54\uc77c \uc8fc\uc18c\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694"}),m.touched.email&&m.errors.email&&(0,Se.jsx)("div",{className:"error-message",children:m.errors.email})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"password",children:"\ube44\ubc00\ubc88\ud638"}),(0,Se.jsx)("input",(0,t.A)((0,t.A)({id:"password",type:"password"},m.getFieldProps("password")),{},{autoComplete:"current-password"})),m.touched.password&&m.errors.password&&(0,Se.jsx)("div",{className:"error-message",children:m.errors.password})]}),(0,Se.jsx)("button",{type:"submit",className:"submit-button",children:"\ub85c\uadf8\uc778"})]}),(0,Se.jsx)("div",{className:"password-reset-link",children:(0,Se.jsx)("button",{type:"button",onClick:()=>{a(!0)},className:"link-button",children:"\ube44\ubc00\ubc88\ud638\ub97c \uc78a\uc73c\uc168\ub098\uc694?"})}),o&&(0,Se.jsx)("div",{className:"modal-overlay",onClick:f,children:(0,Se.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Se.jsxs)("div",{className:"modal-header",children:[(0,Se.jsx)("h3",{children:"\ube44\ubc00\ubc88\ud638 \ucc3e\uae30"}),(0,Se.jsx)("button",{className:"modal-close",onClick:f,children:"\xd7"})]}),(0,Se.jsxs)("div",{className:"modal-body",children:[(0,Se.jsx)("p",{children:"\uac00\uc785 \uc2dc \ub4f1\ub85d\ud55c \uc774\uba54\uc77c \uc8fc\uc18c\ub97c \uc785\ub825\ud558\uc2dc\uba74 \ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \ub9c1\ud06c\ub97c \ubc1c\uc1a1\ud574\ub4dc\ub9bd\ub2c8\ub2e4."}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\uc774\uba54\uc77c"}),(0,Se.jsx)("input",{type:"email",value:l,onChange:e=>c(e.target.value),placeholder:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694",disabled:h,required:!0})]}),d&&(0,Se.jsx)("div",{className:"message ".concat(d.includes("\ubc1c\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4")?"success":"error"),style:{whiteSpace:"pre-line",lineHeight:"1.5",padding:"10px",borderRadius:"4px",margin:"10px 0"},children:d}),(0,Se.jsxs)("div",{className:"modal-actions",children:[(0,Se.jsx)("button",{onClick:async()=>{if(!l.trim())return void u("\uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l))try{p(!0),u(""),(()=>{const e={apiKey:"AIzaSyDQJynQZGn3TomGEMtZYSGQrYlvO7CApNo",authDomain:"edgeenglishlab.firebaseapp.com",projectId:"edgeenglishlab",storageBucket:"edgeenglishlab.firebasestorage.app",messagingSenderId:"13831715924",appId:"1:13831715924:web:41907bce49707865e981c1"};console.log("=== Firebase \uc124\uc815 \ud655\uc778 ==="),console.log("Auth Domain:",e.authDomain),console.log("Project ID:",e.projectId),console.log("Storage Bucket:",e.storageBucket),console.log("Messaging Sender ID:",e.messagingSenderId),console.log("App ID:",e.appId)})();const e=await lo(l);if(e.success)u("\ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc774\uba54\uc77c\uc774 \ubc1c\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\n\ud83d\udce7 \uc774\uba54\uc77c\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694 (\uc2a4\ud338 \ud3f4\ub354\ub3c4 \ud655\uc778\ud574\ubcf4\uc138\uc694)\n\u23f0 \uc774\uba54\uc77c\uc774 \ub3c4\ucc29\ud558\uc9c0 \uc54a\uc73c\uba74 \uba87 \ubd84 \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694\n\ud83d\udd04 \uc774\uba54\uc77c\uc774 \uacc4\uc18d \ub3c4\ucc29\ud558\uc9c0 \uc54a\uc73c\uba74 \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud574\uc8fc\uc138\uc694"),c("");else{const t=e.diagnostics;u("\u274c ".concat(e.message,"\n\n\uc9c4\ub2e8 \uc815\ubcf4:\n- \uc774\uba54\uc77c \ud615\uc2dd: ").concat(null!==t&&void 0!==t&&t.emailFormat?"\uc62c\ubc14\ub984":"\uc798\ubabb\ub428","\n- \uc774\uba54\uc77c \ub4f1\ub85d: ").concat(null!==t&&void 0!==t&&t.emailExists?"\ub4f1\ub85d\ub428":"\ub4f1\ub85d\ub418\uc9c0 \uc54a\uc74c","\n- \uc774\uba54\uc77c \ubc1c\uc1a1: ").concat(null!==t&&void 0!==t&&t.emailSent?"\uc131\uacf5":"\uc2e4\ud328"))}}catch(s){console.error("\ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc624\ub958:",s),u("\u274c ".concat(s.message||"\ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc774\uba54\uc77c \ubc1c\uc1a1\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.","\n\n\ube0c\ub77c\uc6b0\uc800 \ucf58\uc194\uc744 \ud655\uc778\ud558\uc5ec \uc790\uc138\ud55c \uc624\ub958 \uc815\ubcf4\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694."))}finally{p(!1)}else u("\uc62c\ubc14\ub978 \uc774\uba54\uc77c \uc8fc\uc18c\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},className:"btn-primary",disabled:h,children:h?"\ubc1c\uc1a1 \uc911...":"\uc7ac\uc124\uc815 \uc774\uba54\uc77c \ubc1c\uc1a1"}),(0,Se.jsx)("button",{onClick:f,className:"btn-secondary",disabled:h,children:"\ucde8\uc18c"})]})]})]})})]})},uo=r.memo((0,r.forwardRef)((e,t)=>{let{value:n,onChange:s,onBlur:i,placeholder:o="'-' \uc5c6\uc774 \uc785\ub825\ud574\uc8fc\uc138\uc694",disabled:a=!1,error:l,touched:c=!1,required:d=!1,id:u,name:h,className:p=""}=e;const m=(0,r.useRef)(""),f=(0,r.useCallback)(e=>{try{const t=e.target.value.replace(/[^0-9]/g,"");if(t.length<=11){if(t===m.current)return;m.current=t,s(t)}}catch(t){console.warn("\uc804\ud654\ubc88\ud638 \uc785\ub825 \ucc98\ub9ac \uc911 \uc624\ub958:",t)}},[s]),g=(0,r.useMemo)(()=>["phone-number-input",c&&l?"error":"",a?"disabled":"",p].filter(Boolean).join(" "),[c,l,a,p]),y=(0,r.useMemo)(()=>{if("string"!==typeof n)return"";return n.replace(/[^0-9]/g,"").slice(0,11)},[n]);return(0,r.useEffect)(()=>{m.current=y},[]),(0,Se.jsxs)("div",{className:"phone-input-container",children:[(0,Se.jsx)("input",{ref:t,id:u,name:h,type:"tel",value:y,onChange:f,onBlur:i,placeholder:o,disabled:a,required:d,className:g,autoComplete:"tel",inputMode:"numeric",pattern:"[0-9]*",maxLength:11,"aria-describedby":l?"".concat(u,"-error"):void 0,"data-testid":"phone-number-input"}),c&&l&&(0,Se.jsx)("div",{id:"".concat(u,"-error"),className:"error-message",role:"alert",children:l})]})}));uo.displayName="PhoneNumberInput";const ho=uo,po=()=>{const{signup:e}=Te(),n=Z(),[s,i]=(0,r.useState)(""),[o,a]=(0,r.useState)(!1);var l,c;const d=Us({initialValues:{name:"",nickname:"",email:"",phoneNumber:"",password:"",confirmPassword:""},validationSchema:so({name:Hi().required("\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694"),nickname:Hi().required("\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694").min(2,"\ub2c9\ub124\uc784\uc740 \ucd5c\uc18c 2\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4"),email:Hi().email("\uc62c\ubc14\ub978 \uc774\uba54\uc77c \ud615\uc2dd\uc774 \uc544\ub2d9\ub2c8\ub2e4").required("\uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694"),phoneNumber:Hi().nullable().matches(/^[0-9]{10,11}$/,"\uc62c\ubc14\ub978 \uc804\ud654\ubc88\ud638 \ud615\uc2dd\uc774 \uc544\ub2d9\ub2c8\ub2e4"),password:Hi().required("\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694").min(8,"\ube44\ubc00\ubc88\ud638\ub294 \ucd5c\uc18c 8\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4").matches(/[a-zA-Z]/,"\ube44\ubc00\ubc88\ud638\ub294 \uc601\ubb38\uc790\ub97c \ud3ec\ud568\ud574\uc57c \ud569\ub2c8\ub2e4").matches(/[0-9]/,"\ube44\ubc00\ubc88\ud638\ub294 \uc22b\uc790\ub97c \ud3ec\ud568\ud574\uc57c \ud569\ub2c8\ub2e4").matches(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/,"\ube44\ubc00\ubc88\ud638\ub294 \ud2b9\uc218\ubb38\uc790\ub97c \ud3ec\ud568\ud574\uc57c \ud569\ub2c8\ub2e4"),confirmPassword:Hi().oneOf([(l="password",new _i(l,c))],"\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4").required("\ube44\ubc00\ubc88\ud638 \ud655\uc778\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694")}),onSubmit:async t=>{if(o)try{i(""),await e(t.email,t.password,{name:t.name,nickname:t.nickname,phoneNumber:t.phoneNumber}),n("/")}catch(r){if(console.error("\ud68c\uc6d0\uac00\uc785 \uc5d0\ub7ec:",r),r instanceof Error){let e=r.message;r.message.includes("auth/email-already-in-use")?e="\uc774\ubbf8 \uac00\uc785\ub41c \uc774\uba54\uc77c\uc785\ub2c8\ub2e4.":r.message.includes("auth/weak-password")?e="\ube44\ubc00\ubc88\ud638\uac00 \ub108\ubb34 \uc57d\ud569\ub2c8\ub2e4.":r.message.includes("auth/invalid-email")&&(e="\uc62c\ubc14\ub974\uc9c0 \uc54a\uc740 \uc774\uba54\uc77c \ud615\uc2dd\uc785\ub2c8\ub2e4."),i("\ud68c\uc6d0\uac00\uc785 \uc624\ub958: ".concat(e))}else i("\ud68c\uc6d0\uac00\uc785 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4")}else i("\uac1c\uc778\uc815\ubcf4 \uc218\uc9d1 \ubc0f \uc774\uc6a9\uc5d0 \ub3d9\uc758\ud574\uc8fc\uc138\uc694")}});return(0,Se.jsxs)("div",{className:"signup-container",children:[(0,Se.jsx)("h2",{children:"\ud68c\uc6d0\uac00\uc785"}),s&&(0,Se.jsx)("div",{className:"error-message",children:s}),(0,Se.jsxs)("form",{onSubmit:d.handleSubmit,children:[(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"name",children:"\uc774\ub984"}),(0,Se.jsx)("input",(0,t.A)({id:"name",type:"text"},d.getFieldProps("name"))),d.touched.name&&d.errors.name&&(0,Se.jsx)("div",{className:"error-message",children:d.errors.name})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"nickname",children:"\ub2c9\ub124\uc784"}),(0,Se.jsx)("input",(0,t.A)({id:"nickname",type:"text"},d.getFieldProps("nickname"))),d.touched.nickname&&d.errors.nickname&&(0,Se.jsx)("div",{className:"error-message",children:d.errors.nickname})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"email",children:"\uc774\uba54\uc77c (\ub85c\uadf8\uc778 ID\ub85c \uc0ac\uc6a9)"}),(0,Se.jsx)("input",(0,t.A)((0,t.A)({id:"email",type:"email"},d.getFieldProps("email")),{},{placeholder:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694"})),d.touched.email&&d.errors.email&&(0,Se.jsx)("div",{className:"error-message",children:d.errors.email})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"phoneNumber",children:"\uc804\ud654\ubc88\ud638 (\uc120\ud0dd\uc0ac\ud56d)"}),(0,Se.jsx)(ho,{id:"phoneNumber",name:"phoneNumber",value:d.values.phoneNumber,onChange:e=>{d.setFieldValue("phoneNumber",e)},onBlur:()=>d.handleBlur("phoneNumber"),error:d.errors.phoneNumber,touched:d.touched.phoneNumber,required:!1})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"password",children:"\ube44\ubc00\ubc88\ud638"}),(0,Se.jsx)("input",(0,t.A)((0,t.A)({id:"password",type:"password"},d.getFieldProps("password")),{},{placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694"})),(0,Se.jsx)("div",{className:"password-requirement-text",children:"*\ube44\ubc00\ubc88\ud638\ub294 8\uc790 \uc774\uc0c1\uc774\uba70, \ud2b9\uc218\ubb38\uc790, \ubb38\uc790, \uc22b\uc790\ub97c \ud3ec\ud568\ud574\uc57c \ud569\ub2c8\ub2e4."}),d.touched.password&&d.errors.password&&(0,Se.jsx)("div",{className:"error-message",children:d.errors.password})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"confirmPassword",children:"\ube44\ubc00\ubc88\ud638 \ud655\uc778"}),(0,Se.jsx)("input",(0,t.A)((0,t.A)({id:"confirmPassword",type:"password"},d.getFieldProps("confirmPassword")),{},{placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \ub2e4\uc2dc \uc785\ub825\ud558\uc138\uc694"})),d.touched.confirmPassword&&d.errors.confirmPassword&&(0,Se.jsx)("div",{className:"error-message",children:d.errors.confirmPassword})]}),(0,Se.jsxs)("div",{className:"form-group checkbox",children:[(0,Se.jsx)("input",{type:"checkbox",id:"agreeToTerms",checked:o,onChange:e=>{a(e.target.checked)}}),(0,Se.jsx)("label",{htmlFor:"agreeToTerms",children:"\uac1c\uc778\uc815\ubcf4 \uc218\uc9d1 \ubc0f \uc774\uc6a9\uc5d0 \ub3d9\uc758\ud569\ub2c8\ub2e4"})]}),(0,Se.jsxs)("div",{className:"terms-content",children:[(0,Se.jsx)("h4",{children:"\uac1c\uc778\uc815\ubcf4 \uc218\uc9d1 \ubc0f \uc774\uc6a9 \ub3d9\uc758"}),(0,Se.jsxs)("p",{children:["1. \uc218\uc9d1\ud558\ub294 \uac1c\uc778\uc815\ubcf4 \ud56d\ubaa9: \uc774\ub984, \ub2c9\ub124\uc784, \uc774\uba54\uc77c, \uc804\ud654\ubc88\ud638",(0,Se.jsx)("br",{}),"2. \uc218\uc9d1 \ubc0f \uc774\uc6a9\ubaa9\uc801: \uc11c\ube44\uc2a4 \uc81c\uacf5 \ubc0f \ud68c\uc6d0\uad00\ub9ac",(0,Se.jsx)("br",{}),"3. \ubcf4\uc720 \ubc0f \uc774\uc6a9\uae30\uac04: \ud68c\uc6d0 \ud0c8\ud1f4 \uc2dc\uae4c\uc9c0",(0,Se.jsx)("br",{}),"4. \ub3d9\uc758\ub97c \uac70\ubd80\ud560 \uad8c\ub9ac\uac00 \uc788\uc73c\uba70, \ub3d9\uc758 \uac70\ubd80 \uc2dc \uc11c\ube44\uc2a4 \uc774\uc6a9\uc774 \uc81c\ud55c\ub429\ub2c8\ub2e4."]})]}),(0,Se.jsx)("button",{type:"submit",className:"submit-button",children:"\ud68c\uc6d0\uac00\uc785"})]})]})},mo=e=>{let{setCurrentQuiz:t}=e;const[n,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1),a=Z();return(0,Se.jsxs)("div",{className:"homepage",children:[(0,Se.jsx)("section",{className:"hero-section",children:(0,Se.jsxs)("div",{className:"hero-content",children:[(0,Se.jsx)("h1",{className:"hero-title",children:"\uc601\uc5b4 \uad50\uc721 \uc804\ubb38\uac00\ub97c \uc704\ud55c AI \uc601\uc5b4 \ubb38\uc81c \uc0dd\uc131 \ud50c\ub7ab\ud3fc"}),(0,Se.jsx)("p",{className:"hero-description",children:"\ud559\uc6d0\uacfc \uac15\uc0ac\ub2d8\ub4e4\uc758 \uc218\uc5c5 \uc900\ube44 \uc2dc\uac04\uc744 \ub300\ud3ed \ub2e8\ucd95\ud558\uace0, \uad50\uc721 \ud488\uc9c8\uc744 \ud55c \ub2e8\uacc4 \ub192\uc5ec\uc8fc\ub294 \uc804\ubb38\uc801\uc778 AI \uc194\ub8e8\uc158\uc785\ub2c8\ub2e4."}),(0,Se.jsx)("p",{className:"hero-description",children:"\ubcf5\uc7a1\ud55c \ubb38\uc81c \uc81c\uc791 \uacfc\uc815\uc744 \uac04\uc18c\ud654\ud558\uc5ec \uad50\uc721\uc5d0\ub9cc \uc9d1\uc911\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Se.jsxs)("div",{className:"hero-stats",children:[(0,Se.jsxs)("div",{className:"stat-item",children:[(0,Se.jsx)("div",{className:"stat-number",children:"GPT-5"}),(0,Se.jsx)("div",{className:"stat-label",children:"AI \uc5d4\uc9c4 \uae30\ubc18"})]}),(0,Se.jsxs)("div",{className:"stat-item",children:[(0,Se.jsx)("div",{className:"stat-number",children:"14\uac00\uc9c0"}),(0,Se.jsx)("div",{className:"stat-label",children:"\ubb38\uc81c \uc720\ud615"})]}),(0,Se.jsxs)("div",{className:"stat-item",children:[(0,Se.jsx)("div",{className:"stat-number",children:"50%"}),(0,Se.jsx)("div",{className:"stat-label",children:"\uc2dc\uac04 \uc808\uc57d"})]}),(0,Se.jsxs)("div",{className:"stat-item",children:[(0,Se.jsx)("div",{className:"stat-number",children:"\uc989\uc2dc"}),(0,Se.jsx)("div",{className:"stat-label",children:"\ubb38\uc81c\uc9c0 \uc0dd\uc131"})]})]})]})}),(0,Se.jsx)("section",{className:"cta-section",children:(0,Se.jsxs)("div",{className:"cta-content",children:[(0,Se.jsx)("h3",{children:"\uc601\uc5b4 \ud559\uc2b5 \uc9c0\ub3c4\ub97c \uc704\ud55c \uc0c8\ub85c\uc6b4 \ud234\uc744 \uacbd\ud5d8\ud574\ubcf4\uc138\uc694"}),(0,Se.jsx)("p",{children:"AI \ubaa8\ub378\ub9c1\uc744 \ud1b5\ud574 \ud2b9\ud654\ub41c \uc601\uc5b4 \ubb38\uc81c \uc0dd\uc131\uc73c\ub85c \uc900\ube44 \uc2dc\uac04\uc744 \ub2e8\ucd95\ud558\uace0 \uc9d1\uc911\ub825 \uc788\ub294 \ud559\uc2b5\uc744 \uc720\ub3c4\ud569\ub2c8\ub2e4"}),(0,Se.jsx)("div",{className:"cta-buttons",children:(0,Se.jsx)("button",{className:"cta-primary",onClick:()=>a("/sample-problems"),children:"\uc0d8\ud50c \ubb38\uc81c \ub2e4\uc6b4\ub85c\ub4dc"})})]})}),(0,Se.jsx)("section",{className:"how-to-work-section",children:(0,Se.jsxs)("div",{className:"how-to-work-content",children:[(0,Se.jsxs)("h3",{className:"how-to-work-title",children:[(0,Se.jsx)("span",{className:"title-highlight",children:"\ubb38\uc81c \uc0dd\uc131"})," \ud504\ub85c\uc138\uc2a4"]}),(0,Se.jsx)("p",{className:"how-to-work-description",children:"\uac04\ub2e8\ud55c 3\ub2e8\uacc4\ub85c \uc804\ubb38\uc801\uc778 \uc601\uc5b4 \ubb38\uc81c\ub97c \uc0dd\uc131\ud558\uc138\uc694"}),(0,Se.jsx)("div",{className:"how-to-work-image-container",children:(0,Se.jsxs)("div",{className:"image-wrapper",children:[(0,Se.jsx)("img",{src:"/howtowork.png",alt:"\ubb38\uc81c \uc0dd\uc131 \ud504\ub85c\uc138\uc2a4",className:"how-to-work-image"}),(0,Se.jsx)("div",{className:"image-glow"})]})})]})}),(0,Se.jsxs)("section",{className:"services-section",children:[(0,Se.jsxs)("div",{className:"services-header",children:[(0,Se.jsx)("h3",{children:"\uc804\ubb38 \uad50\uc721 \uc11c\ube44\uc2a4"}),(0,Se.jsx)("p",{children:"\uccb4\uacc4\uc801\uc774\uace0 \ud6a8\uacfc\uc801\uc778 \uc601\uc5b4 \uad50\uc721\uc744 \uc704\ud55c AI \uae30\ubc18 \ubb38\uc81c \uc0dd\uc131 \ub3c4\uad6c"})]}),(0,Se.jsx)("div",{className:"services-grid",children:[{id:"sentence-order-test",title:"\ubb38\ub2e8 \uc21c\uc11c \ub9de\ucd94\uae30 \ubb38\uc81c",description:"AI\uac00 \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc758\ubbf8 \ub2e8\uc704\ub85c \ubd84\uc11d\ud558\uc5ec 4\ub2e8\ub77d\uc73c\ub85c \ubd84\ud560\ud558\uace0 \uc11e\uc740 \ub4a4, \uc6d0\ub798\uc758 \ubcf8\ubb38 \uc21c\uc11c\ub97c \ub9de\ucd94\ub294 \ubb38\uc81c\ub97c \uc790\ub3d9 \uc0dd\uc131\ud569\ub2c8\ub2e4. \ub3c5\ud574\ub825 \ud5a5\uc0c1\uacfc \ub17c\ub9ac\uc801 \uc0ac\uace0\ub825 \uac1c\ubc1c\uc5d0 \ud6a8\uacfc\uc801\uc785\ub2c8\ub2e4.",icon:"\ud83d\udcdd",features:["OpenAI GPT-4 \uae30\ubc18 \uc758\ubbf8 \ubd84\uc11d","\uad50\uc721\uacfc\uc815 \ud45c\uc900 \uc900\uc218","A4 \uc778\uc1c4 \ucd5c\uc801\ud654","\uc989\uc2dc \ubb38\uc81c\uc9c0 \uc0dd\uc131"],path:"/work_01_article-order"},{id:"reading-comprehension",title:"\ub3c5\ud574 \ubb38\uc81c \uc885\ud569 \uc0dd\uc131",description:"\uc6d0 \ubcf8\ubb38\uc758 \ub0b4\uc6a9\uc744 \uccb4\uacc4\uc801\uc73c\ub85c \ubd84\uc11d\ud558\uc5ec \ubcf8\ubb38\uc758 \uc8fc\uc694 \ub2e8\uc5b4\ub97c \uac19\uc740 \uc758\ubbf8\uc758 \ub2e4\ub978 \ub2e8\uc5b4\ub85c \uad50\uccb4\ud55c \ub4a4, \ubcf8\ubb38\uc744 \ud574\uc11d\ud558\ub294 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4. \ub3c5\ud574\ub825 \ud5a5\uc0c1\uacfc \ubb38\ud574\ub825 \ud5a5\uc0c1\uc5d0 \ud6a8\uacfc\uc801\uc785\ub2c8\ub2e4.",icon:"\ud83d\udd0d",features:["\uc885\ud569\uc801 \ub3c5\ud574 \ub2a5\ub825 \ud3c9\uac00","\uc785\uc2dc \uc720\ud615 \ubb38\uc81c","\uc0c1\uc138\ud55c \ud574\uc124 \uc81c\uacf5","\ub09c\uc774\ub3c4\ubcc4 \ucd9c\uc81c"],path:"/work_02_reading-comprehension"},{id:"vocabulary-word",title:"\ube48\uce78(\ub2e8\uc5b4) \ucd94\ub860 \ubb38\uc81c",description:"\uc8fc\uc5b4\uc9c4 \uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uc911\uc694\ud55c \ub2e8\uc5b4\ub97c \uc120\uc815\ud558\uc5ec \ube48\uce78\uc73c\ub85c \uc81c\uc2dc\ud558\uace0, \uadf8 \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ub2e8\uc5b4\ub97c \uac1d\uad00\uc2dd\uc73c\ub85c \uace0\ub974\ub294 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4. \uc2e4\uc81c \uc2dc\ud5d8\uc5d0 \uac00\uae4c\uc6b4 \ucd94\ub860\ud615 \ubb38\uc81c\ub85c \uc0ac\uace0\ub825\uacfc \ub3c5\ud574\ub825\uc744 \ud568\uaed8 \ud0a4\uc6b8 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",icon:"\ud83d\udcda",features:["\uc911\uc694 \uad6c \uc790\ub3d9 \uc120\ubcc4","\uac1d\uad00\uc2dd \ube48\uce78 \ucd94\ub860","\uc2e4\uc81c \uc2dc\ud5d8 \uc2a4\ud0c0\uc77c","\uc790\ub3d9 \uc815\ub2f5 \uc0dd\uc131"],path:"/work_03_vocabulary-word"},{id:"blank-phrase-inference",title:"\ube48\uce78(\uad6c) \ucd94\ub860 \ubb38\uc81c",description:"\uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uc8fc\uc81c\uc640 \uac00\uc7a5 \ubc00\uc811\ud55c \uad6c(phrase)\ub97c \ube48\uce78\uc73c\ub85c \ubc14\uafb8\uace0, \uac1d\uad00\uc2dd 5\uc9c0\uc120\ub2e4 \ubb38\uc81c\ub97c \uc790\ub3d9 \uc0dd\uc131\ud569\ub2c8\ub2e4. \uc0ac\uace0\ub825\uacfc \ub3c5\ud574\ub825\uc744 \ud568\uaed8 \ud0a4\uc6b8 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",icon:"\ud83e\udde9",features:["\uc911\uc694 \uad6c(phrase) \uc790\ub3d9 \uc120\ubcc4","\uac1d\uad00\uc2dd \ube48\uce78 \ucd94\ub860","\uc2e4\uc81c \uc2dc\ud5d8 \uc2a4\ud0c0\uc77c","\uc790\ub3d9 \uc815\ub2f5 \uc0dd\uc131"],path:"/work_04_blank-phrase-inference"},{id:"blank-sentence-inference",title:"\ube48\uce78(\ubb38\uc7a5) \ucd94\ub860 \ubb38\uc81c",description:"\uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uc8fc\uc81c\uc640 \uac00\uc7a5 \ubc00\uc811\ud55c \ubb38\uc7a5(sentence)\uc744 \ube48\uce78\uc73c\ub85c \ubc14\uafb8\uace0, \uac1d\uad00\uc2dd 5\uc9c0\uc120\ub2e4 \ubb38\uc81c\ub97c \uc790\ub3d9 \uc0dd\uc131\ud569\ub2c8\ub2e4. \uc2e4\uc81c \uc2dc\ud5d8\uc5d0 \uac00\uae4c\uc6b4 \ucd94\ub860\ud615 \ubb38\uc81c\ub85c \uc0ac\uace0\ub825\uacfc \ub3c5\ud574\ub825\uc744 \ud568\uaed8 \ud0a4\uc6b8 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",icon:"\u2712\ufe0f",features:["\uc911\uc694 \ubb38\uc7a5(sentence) \uc790\ub3d9 \uc120\ubcc4","\uac1d\uad00\uc2dd \ube48\uce78 \ucd94\ub860","\uc2e4\uc81c \uc2dc\ud5d8 \uc2a4\ud0c0\uc77c","\uc790\ub3d9 \uc815\ub2f5 \uc0dd\uc131"],path:"/work_05_blank-sentence-inference"},{id:"sentence-position",title:"\uc8fc\uc694 \ubb38\uc7a5 \uc704\uce58 \ucc3e\uae30 \ubb38\uc81c",description:"\uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uac00\uc7a5 \uc911\uc694\ud55c \uc8fc\uc81c \ubb38\uc7a5\uc744 \ucc3e\uc544 \ubcf8\ubb38\uc5d0\uc11c \uc81c\uac70\ud558\uace0, \uc8fc\uc5b4\uc9c4 \uc720\uc694 \ubb38\uc7a5\uc774 \ub4e4\uc5b4\uac00\uc57c \ud560 \uc704\uce58\ub97c \ucc3e\ub294 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4. \ubb38\ud574\ub825\uc744 \ubc14\ud0d5\uc73c\ub85c \uc0ac\uace0\uc758 \ud3ed\uc744 \ud5a5\uc0c1\uc2dc\ud0b5\ub2c8\ub2e4.",icon:"\ud83d\udd32",features:["\uc8fc\uc81c \ubb38\uc7a5 \uc790\ub3d9 \ucd94\ucd9c","\ubb38\uc7a5 \uc704\uce58 \ucc3e\uae30","\uc6d0\ubb38\uc790(\u2460~\u2464) \uc790\ub3d9 \uc0bd\uc785","\uc815\ub2f5 \uc704\uce58 \uc790\ub3d9 \ud45c\uc2dc"],path:"/work_06_sentence-position"},{id:"main-idea-inference",title:"\uc8fc\uc81c \ucd94\ub860 \ubb38\uc81c",description:"\uc8fc\uc5b4\uc9c4 \ubcf8\ubb38\uc758 \ub0b4\uc6a9\uc744 \ud30c\uc545\ud558\uc5ec, \ubcf8\ubb38\uc758 \uc8fc\uc81c\ub97c AI\uac00 \ucd94\ub860\ud574 5\uc9c0\uc120\ub2e4 \uac1d\uad00\uc2dd \ubb38\uc81c\ub85c \ucd9c\uc81c\ud569\ub2c8\ub2e4. \ubb38\ud574\ub825\uc744 \ubc14\ud0d5\uc73c\ub85c \uc0ac\uace0\uc758 \ud3ed\uc744 \ud5a5\uc0c1\uc2dc\ud0b5\ub2c8\ub2e4.",icon:"\ud83e\udde0",features:["\uc8fc\uc81c \uc790\ub3d9 \ucd94\ub860","\uac1d\uad00\uc2dd \ubb38\uc81c \uc0dd\uc131","\uc815\ub2f5/\ud574\uc124 \uc778\uc1c4","AI \uae30\ubc18 \ubcf8\ubb38 \ubd84\uc11d"],path:"/work_07_main-idea-inference"},{id:"title-inference",title:"\uc81c\ubaa9 \ucd94\ub860 \ubb38\uc81c",description:"\uc8fc\uc5b4\uc9c4 \ubcf8\ubb38\uc758 \uc8fc\uc81c\uc758\uc2dd\uc5d0 \ub9de\ub294 \uc81c\ubaa9\uc744 AI\uac00 \ucd94\ub860\ud574 5\uc9c0\uc120\ub2e4 \uac1d\uad00\uc2dd \ubb38\uc81c\ub85c \ucd9c\uc81c\ud569\ub2c8\ub2e4. \ubb38\ud574\ub825\uc744 \ubc14\ud0d5\uc73c\ub85c \uc0ac\uace0\uc758 \ud3ed\uc744 \ud5a5\uc0c1\uc2dc\ud0b5\ub2c8\ub2e4.",icon:"\ud83c\udff7\ufe0f",features:["\uc81c\ubaa9 \uc790\ub3d9 \ucd94\ub860","\uac1d\uad00\uc2dd \ubb38\uc81c \uc0dd\uc131","\uc815\ub2f5/\ud574\uc124 \uc778\uc1c4","AI \uae30\ubc18 \ubcf8\ubb38 \ubd84\uc11d"],path:"/work_08_title-inference"},{id:"grammar-error",title:"\uc5b4\ubc95 \ubcc0\ud615 \ubb38\uc81c",description:"\uc8fc\uc5b4\uc9c4 \ubcf8\ubb38\uc5d0\uc11c AI\uac00 \uc758\ubbf8\uc788\ub294 \ub2e8\uc5b4\ub97c \uc120\uc815\ud558\uc5ec \ubb38\ubc95\uc5d0 \uc5b4\uae0b\ub098\ub3c4\ub85d \ubcc0\ud615 \uc2dc\ud0a8 \ud6c4, \uc798\ubabb\ub41c \ubb38\ubc95\uc774 \uc801\uc6a9\ub41c \ub2e8\uc5b4\ub97c \ucc3e\ub294 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4. \ubb38\ud574\ub825\uc744 \ubc14\ud0d5\uc73c\ub85c \ub192\uc740 \ubb38\ubc95\uc801 \uc0ac\uace0\ub97c \ud544\uc694\ub85c \ud569\ub2c8\ub2e4.",icon:"\ud83d\udcdd",features:["\uc5b4\ubc95 \ubcc0\ud615 \uc790\ub3d9","\uac1d\uad00\uc2dd \ubb38\uc81c \uc0dd\uc131","\uc815\ub2f5/\ud574\uc124 \uc778\uc1c4","AI \uae30\ubc18 \ubcf8\ubb38 \ubd84\uc11d"],path:"/work_09_grammar-error"},{id:"multi-grammar-error",title:"\ub2e4\uc911 \uc5b4\ubc95 \uc624\ub958 \ucc3e\uae30 \ubb38\uc81c",description:"\uc8fc\uc5b4\uc9c4 \ubcf8\ubb38\uc5d0\uc11c AI \uc5b4\ubc95(\ubb38\ubc95)\uc744 \ubcc0\ud615\uc2dc\ud0a8 \ub2e4\uc218\uc758 \ub2e8\uc5b4\ub97c \ucc3e\ub294 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4. \ube60\ub978 \ub3c5\ud574\ub825\uacfc \ub192\uc740 \ubb38\ubc95\uc801 \uc0ac\uace0\ub97c \ubc14\ud0d5\uc73c\ub85c \uc0ac\uace0\uc758 \ud3ed\uc744 \ud5a5\uc0c1\uc2dc\ud0b5\ub2c8\ub2e4.",icon:"\ud83e\uddee",features:["\ubcf5\uc218\uc758 \uc5b4\ubc95\uc5d0 \uc624\ub958 \ucc3e\uae30","\uac1d\uad00\uc2dd \uc815\ub2f5 \uc120\ud0dd","\uc815\ub2f5/\ud574\uc124 \uc778\uc1c4","AI \uae30\ubc18 \ubcf8\ubb38 \ubd84\uc11d"],path:"/work_10_multi-grammar-error"},{id:"sentence-translation",title:"\ubcf8\ubb38 \ubb38\uc7a5\ubcc4 \ud574\uc11d",description:"\uc8fc\uc5b4\uc9c4 \ubcf8\ubb38\uc744 \ubb38\uc7a5\ubcc4\ub85c \ubd84\ud560\ud558\uc5ec \ub3c5\ud574 \uc5f0\uc2b5\uc744 \ud560 \uc218 \uc788\ub294 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4. \uae30\ubcf8\uc801\uc778 \uc601\uc5b4 \ub3c5\ud574\ub825\uc744 \ud5a5\uc0c1\uc2dc\ud0a4\ub294\ub370 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4.",path:"/work_11_sentence-translation",icon:"\ud83d\udcdd",features:["\ubb38\uc7a5\ubcc4 \ud574\uc11d \uc791\uc131","AI \uae30\ubc18 \ubcf8\ubb38 \ubd84\uc11d","\uc815\ub2f5/\ud574\uc124 \uc778\uc1c4","\ub2e4\uc591\ud55c \uc785\ub825 \ubc29\uc2dd"]},{id:"word-study",title:"\ub2e8\uc5b4 \ud559\uc2b5 \ubb38\uc81c",description:"\ud559\uc2b5\uc5d0 \ud544\uc694\ud55c \uc601\uc5b4\ub2e8\uc5b4-\ud55c\uae00\ub73b\uc744 \uc785\ub825\ud558\uba74, \uc601\uc5b4\ub2e8\uc5b4\ub97c \uc81c\uc2dc\ud558\uace0 \ud55c\uae00\ub73b\uc744 \ub9de\ucd94\uac70\ub098, \ud55c\uae00\ub73b\uc5d0 \ub530\ub77c \uc601\uc5b4\ub2e8\uc5b4\ub97c \ub9de\ucd94\ub294 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4. \uc5b4\ud718\ub825\uc744 \ud5a5\uc0c1\ud0a4\ud0a4\uace0, \uc2dc\ud5d8 \ub300\ube44\uc5d0 \ud070 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4.",path:"/work_12_word-study",icon:"\ud83d\udcda",features:["\uc601\uc5b4\ub2e8\uc5b4-\ud55c\uae00\ub73b \uc815\ub9ac","\uc601\uc5b4\ub2e8\uc5b4-(___) \ub73b \ub9de\ucd94\uae30","\ud55c\uae00\ub73b-(___) \uc601\uc5b4\ub2e8\uc5b4 \ub9de\ucd94\uae30","\uc815\ub2f5/\ud574\uc124 \uc778\uc1c4"]}].map(e=>(0,Se.jsxs)("div",{className:"service-card",onClick:()=>{t&&t(null),a(e.path)},children:[(0,Se.jsx)("div",{className:"service-icon",children:e.icon}),(0,Se.jsx)("h2",{className:"service-title",children:e.title}),(0,Se.jsx)("p",{className:"service-description",children:e.description}),(0,Se.jsx)("ul",{className:"service-features",children:e.features.map((e,t)=>(0,Se.jsx)("li",{children:e},t))}),(0,Se.jsx)("button",{className:"service-button",children:"\ubb38\uc81c \uc0dd\uc131\ud558\uae30 \u2192"})]},e.id))})]}),(0,Se.jsxs)("section",{className:"features-section",children:[(0,Se.jsx)("div",{className:"features-header",children:(0,Se.jsx)("h3",{children:"Edge English Lab\uc744 \uc120\ud0dd\ud558\ub294 \uc774\uc720"})}),(0,Se.jsxs)("div",{className:"features-grid",children:[(0,Se.jsxs)("div",{className:"feature-item",children:[(0,Se.jsx)("div",{className:"feature-icon",children:"\ud83c\udf93"}),(0,Se.jsx)("h4",{children:"\uad50\uc721 \uc804\ubb38\uc131"}),(0,Se.jsx)("p",{children:"\uad50\uc721\uacfc\uc815 \ud45c\uc900\uc744 \uc900\uc218\ud558\uba70, \uc2e4\uc81c \uc218\uc5c5\uacfc \uc2dc\ud5d8\uc5d0 \ubc14\ub85c \ud65c\uc6a9 \uac00\ub2a5\ud55c \uace0\ud488\uc9c8 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"feature-item",children:[(0,Se.jsx)("div",{className:"feature-icon",children:"\u23f0"}),(0,Se.jsx)("h4",{children:"\ud6a8\uc728\uc131 \uadf9\ub300\ud654"}),(0,Se.jsx)("p",{children:"\ubb38\uc81c \uc81c\uc791\uc5d0 \uc18c\uc694\ub418\ub294 \uc2dc\uac04\uc744 90% \ub2e8\ucd95\ud558\uc5ec \uac15\uc0ac\ub2d8\ub4e4\uc774 \uad50\uc721\uc5d0\ub9cc \uc9d1\uc911\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"feature-item",children:[(0,Se.jsx)("div",{className:"feature-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("h4",{children:"\uc989\uc2dc \ud65c\uc6a9"}),(0,Se.jsx)("p",{children:"A4 \uc6a9\uc9c0\uc5d0 \ucd5c\uc801\ud654\ub41c \ub808\uc774\uc544\uc6c3\uc73c\ub85c \uc0dd\uc131 \uc989\uc2dc \uc778\uc1c4\ud558\uc5ec \uc218\uc5c5\uc5d0 \ubc14\ub85c \ud65c\uc6a9 \uac00\ub2a5\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"feature-item",children:[(0,Se.jsx)("div",{className:"feature-icon",children:"\ud83d\udd27"}),(0,Se.jsx)("h4",{children:"\ub9de\ucda4\ud615 \uc124\uc815"}),(0,Se.jsx)("p",{children:"\ub09c\uc774\ub3c4\uc640 \ubb38\uc81c \uc720\ud615\uc744 \uc138\ubc00\ud558\uac8c \uc870\uc815\ud558\uc5ec \ud559\uc2b5\uc790 \uc218\uc900\uc5d0 \ub9de\ub294 \ucd5c\uc801\uc758 \ubb38\uc81c\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"feature-item",children:[(0,Se.jsx)("div",{className:"feature-icon",children:"\ud83d\udca1"}),(0,Se.jsx)("h4",{children:"\uc9c0\ub2a5\uc801 \ubd84\uc11d"}),(0,Se.jsx)("p",{children:"AI\uac00 \ud14d\uc2a4\ud2b8\uc758 \uc758\ubbf8\uc640 \uad6c\uc870\ub97c \uc815\ud655\ud788 \ubd84\uc11d\ud558\uc5ec \uad50\uc721\uc801 \uac00\uce58\uac00 \ub192\uc740 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"feature-item",children:[(0,Se.jsx)("div",{className:"feature-icon",children:"\ud83c\udfc6"}),(0,Se.jsx)("h4",{children:"\uac80\uc99d\ub41c \ud488\uc9c8"}),(0,Se.jsx)("p",{children:"\uad50\uc721 \ud604\uc7a5\uc5d0\uc11c \uac80\uc99d\ub41c \ubb38\uc81c \ud328\ud134\uacfc \ud615\uc2dd\uc744 \uae30\ubc18\uc73c\ub85c \uc2e0\ub8b0\ud560 \uc218 \uc788\ub294 \ud3c9\uac00 \ub3c4\uad6c\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4."})]})]})]}),(0,Se.jsxs)("footer",{className:"App-footer",children:[(0,Se.jsx)("div",{className:"footer-content",children:(0,Se.jsxs)("div",{className:"footer-section",children:[(0,Se.jsx)("h3",{children:"Edge English Lab"}),(0,Se.jsx)("p",{children:"AI \uae30\ubc18 \uc601\uc5b4 \uad50\uc721 \uc194\ub8e8\uc158\uc758 \uc120\ub450\uc8fc\uc790\uad50\uc721\uc758 \ubbf8\ub798\ub97c \ub9cc\ub4e4\uc5b4\uac11\ub2c8\ub2e4."})]})}),(0,Se.jsxs)("div",{className:"footer-bottom",children:[(0,Se.jsxs)("p",{children:["\uace0\uac1d\uc13c\ud130 : jcombizone@naver.com",(0,Se.jsx)("a",{href:"mailto:jcombizone@naver.com",className:"footer-link",children:"[\uc774\uba54\uc77c \ubb38\uc758]"})," |",(0,Se.jsx)("button",{onClick:()=>s(!0),className:"footer-link-btn",children:"\uc774\uc6a9\uc57d\uad00"})," |",(0,Se.jsx)("button",{onClick:()=>o(!0),className:"footer-link-btn",children:"\uac1c\uc778\uc815\ubcf4\ucc98\ub9ac\ubc29\uce68"})]}),(0,Se.jsx)("p",{children:"\uc8fc\uc18c : \uc778\ucc9c\uad11\uc5ed\uc2dc \uc5f0\uc218\uad6c \uc5f0\uad6c\ub2e8\uc9c0\ub85c55\ubc88\uae38 16, 602\ud638"}),(0,Se.jsx)("p",{children:"\uc0ac\uc5c5\uc790\ub4f1\ub85d\ubc88\ud638 : 751-87-03106 | \ud1b5\uc2e0\ud310\ub9e4\uc5c5 : 2025-\uc778\ucc9c\uc5f0\uc218\uad6c-1970\ud638 | \uc8fc\uc2dd\ud68c\uc0ac \uc81c\uc774\ucee4\uba38\uc2a4"}),(0,Se.jsx)("p",{children:"Copyright \xa9 Jcommerce, All rights reserved"})]})]}),n&&(0,Se.jsx)("div",{className:"modal-overlay",onClick:()=>s(!1),children:(0,Se.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Se.jsxs)("div",{className:"modal-header",children:[(0,Se.jsx)("h2",{children:"\uc601\uc5b4 \ubb38\uc81c \uc0dd\uc131 \ud50c\ub7ab\ud3fc \uc774\uc6a9\uc57d\uad00"}),(0,Se.jsx)("button",{className:"modal-close",onClick:()=>s(!1),children:"\xd7"})]}),(0,Se.jsxs)("div",{className:"modal-body",children:[(0,Se.jsxs)("p",{children:[(0,Se.jsx)("strong",{children:"\uc2dc\ud589\uc77c\uc790:"})," 2025\ub144 08\uc6d4 01\uc77c"]}),(0,Se.jsx)("h3",{children:"\uc81c1\uc870 (\ubaa9\uc801)"}),(0,Se.jsx)("p",{children:'\uc774 \uc57d\uad00\uc740 \ud68c\uc6d0\uc774 \uc601\uc5b4 \ubb38\uc81c \uc0dd\uc131 \uc6f9\uc0ac\uc774\ud2b8(\uc774\ud558 "\ud50c\ub7ab\ud3fc")\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uc11c\ube44\uc2a4(\ubb38\uc81c \uc0dd\uc131 \ubc0f \ub2e4\uc6b4\ub85c\ub4dc \ud3ec\ud568)\ub97c \uc774\uc6a9\ud568\uc5d0 \uc788\uc5b4 \ud68c\uc0ac\uc640 \ud68c\uc6d0 \uac04\uc758 \uad8c\ub9ac\xb7\uc758\ubb34 \ubc0f \ucc45\uc784\uc0ac\ud56d, \uae30\ud0c0 \ud544\uc694\ud55c \uc0ac\ud56d\uc744 \uaddc\uc815\ud568\uc744 \ubaa9\uc801\uc73c\ub85c \ud569\ub2c8\ub2e4.'}),(0,Se.jsx)("h3",{children:"\uc81c2\uc870 (\uc815\uc758)"}),(0,Se.jsx)("p",{children:"\uc774 \uc57d\uad00\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \uc6a9\uc5b4\uc758 \uc815\uc758\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4."}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:'\u2460 "\ud68c\uc6d0"\uc774\ub780 \ud50c\ub7ab\ud3fc\uc5d0 \uac00\uc785\ud558\uc5ec \uc774 \uc57d\uad00\uc5d0 \ub530\ub77c \ud68c\uc0ac\uac00 \uc81c\uacf5\ud558\ub294 \uc11c\ube44\uc2a4\ub97c \uc774\uc6a9\ud558\ub294 \uc790\ub97c \ub9d0\ud569\ub2c8\ub2e4.'}),(0,Se.jsx)("li",{children:'\u2461 "\ud3ec\uc778\ud2b8"\ub780 \ud68c\uc0ac\uac00 \uc81c\uacf5\ud558\ub294 \uc11c\ube44\uc2a4\ub97c \uc720\ub8cc\ub85c \uc774\uc6a9\ud558\uae30 \uc704\ud574 \ud68c\uc6d0\uc774 \uad6c\ub9e4\ud558\uac70\ub098 \uc9c0\uae09\ubc1b\uc740 \uac00\uc0c1\uc758 \uacb0\uc81c \uc218\ub2e8\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4.'}),(0,Se.jsx)("li",{children:'\u2462 "\ubb38\uc81c \uc0dd\uc131 \uc11c\ube44\uc2a4"\ub780 \ud68c\uc6d0\uc774 \uc81c\uacf5\ud55c \ud14d\uc2a4\ud2b8\ub97c \uae30\ubc18\uc73c\ub85c \ud68c\uc0ac\uac00 AI \ub4f1\uc744 \ud1b5\ud574 \uc601\uc5b4 \ubb38\uc81c\ub97c \uc790\ub3d9 \uc0dd\uc131\ud558\uace0 PDF \ud30c\uc77c\ub85c \uc81c\uacf5\ud558\ub294 \uc11c\ube44\uc2a4\ub97c \uc758\ubbf8\ud569\ub2c8\ub2e4.'})]}),(0,Se.jsx)("h3",{children:"\uc81c3\uc870 (\uc57d\uad00\uc758 \ud6a8\ub825 \ubc0f \ubcc0\uacbd)"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:"\u2460 \ubcf8 \uc57d\uad00\uc740 \uc11c\ube44\uc2a4 \ud654\uba74\uc5d0 \uac8c\uc2dc\ud558\uac70\ub098 \uae30\ud0c0\uc758 \ubc29\ubc95\uc73c\ub85c \uacf5\uc9c0\ud568\uc73c\ub85c\uc368 \ud6a8\ub825\uc744 \ubc1c\uc0dd\ud569\ub2c8\ub2e4."}),(0,Se.jsx)("li",{children:"\u2461 \ud68c\uc0ac\ub294 \uad00\ub828 \ubc95\ub839\uc744 \uc704\ubc30\ud558\uc9c0 \uc54a\ub294 \ubc94\uc704\uc5d0\uc11c \uc774 \uc57d\uad00\uc744 \ubcc0\uacbd\ud560 \uc218 \uc788\uc73c\uba70, \ubcc0\uacbd \uc2dc \uc0ac\uc804 \uace0\uc9c0\ud569\ub2c8\ub2e4."})]}),(0,Se.jsx)("h3",{children:"\uc81c4\uc870 (\uc11c\ube44\uc2a4 \uc774\uc6a9)"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:"\u2460 \ud68c\uc6d0\uc740 \ud3ec\uc778\ud2b8\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubb38\uc81c \uc0dd\uc131 \uc11c\ube44\uc2a4\ub97c \uc774\uc6a9\ud560 \uc218 \uc788\uc73c\uba70, \uc0dd\uc131\ub41c \ubb38\uc81c\ub294 PDF \ud615\ud0dc\ub85c \ub2e4\uc6b4\ub85c\ub4dc\ub429\ub2c8\ub2e4."}),(0,Se.jsx)("li",{children:"\u2461 \ubb38\uc81c \uc0dd\uc131\uc5d0 \ud544\uc694\ud55c \ud14d\uc2a4\ud2b8 \ucf58\ud150\uce20\ub294 \ud68c\uc6d0\uc774 \uc790\ubc1c\uc801\uc73c\ub85c \uc81c\uacf5\ud558\uba70, \uc81c\uacf5\ub41c \ucf58\ud150\uce20\uc758 \uc800\uc791\uad8c\uacfc \uad00\ub828\ub41c \ubaa8\ub4e0 \ucc45\uc784\uc740 \ud68c\uc6d0\uc5d0\uac8c \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("h3",{children:"\uc81c5\uc870 (\ud3ec\uc778\ud2b8 \uacb0\uc81c \ubc0f \ud658\ubd88)"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:"\u2460 \ud3ec\uc778\ud2b8\ub294 \ud68c\uc0ac\uac00 \uc9c0\uc815\ud55c \uacb0\uc81c\uc218\ub2e8(\uc2e0\uc6a9\uce74\ub4dc, \uacc4\uc88c\uc774\uccb4 \ub4f1)\uc744 \ud1b5\ud574 \uad6c\ub9e4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Se.jsx)("li",{children:"\u2461 \uc0ac\uc6a9\ub41c \ud3ec\uc778\ud2b8\ub294 \ud658\ubd88\ub418\uc9c0 \uc54a\uc73c\uba70, \ubbf8\uc0ac\uc6a9 \ud3ec\uc778\ud2b8\ub294 \uad6c\ub9e4\uc77c\ub85c\ubd80\ud130 5\ub144\uac04 \uc720\ud6a8\ud569\ub2c8\ub2e4."}),(0,Se.jsx)("li",{children:"\u2462 \ud68c\uc6d0\uc740 \ucda9\uc804\ud55c \ud3ec\uc778\ud2b8\uc5d0 \ub300\ud574 \uc794\uc5ec \uae08\uc561\uc774 \uc788\ub294 \uacbd\uc6b0, \uc804\uc790\uc0c1\uac70\ub798\ubc95 \ub4f1 \uad00\ub828 \ubc95\ub839\uc5d0 \ub530\ub77c \ud658\ubd88\uc744 \uc694\uccad\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("h3",{children:"\uc81c6\uc870 (\ud3ec\uc778\ud2b8 \uc720\ud6a8\uae30\uac04 \ubc0f \uc18c\uba78\uc815\ucc45)"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:"\u2460 \uc720\uc0c1\uc73c\ub85c \ucda9\uc804\ud55c \ud3ec\uc778\ud2b8\uc758 \uc720\ud6a8\uae30\uac04\uc740 5\ub144\uc774\uba70, \uae30\uac04\uc774 \uacbd\uacfc\ud558\uba74 \uc790\ub3d9 \uc18c\uba78\ub429\ub2c8\ub2e4."}),(0,Se.jsx)("li",{children:"\u2461 \ud68c\uc0ac\uac00 \uc774\ubca4\ud2b8 \ub4f1\uc744 \ud1b5\ud574 \ubb34\uc0c1 \uc9c0\uae09\ud55c \ud3ec\uc778\ud2b8\ub294 \ubcc4\ub3c4 \uace0\uc9c0\ub41c \uc720\ud6a8\uae30\uac04 \ub0b4 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc744 \uacbd\uc6b0 \uc18c\uba78\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("h3",{children:"\uc81c7\uc870 (\uc9c0\uc801\uc7ac\uc0b0\uad8c \ubc0f \ucf58\ud150\uce20 \ucc45\uc784)"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:"\u2460 \ud68c\uc6d0\uc774 \uc81c\uacf5\ud55c \ud14d\uc2a4\ud2b8 \ubc0f \uc0dd\uc131\ub41c \ubb38\uc81c\uc758 \uc800\uc791\uad8c\uacfc \ucc45\uc784\uc740 \ud68c\uc6d0 \ubcf8\uc778\uc5d0\uac8c \uc788\uc73c\uba70, \ud68c\uc0ac\ub294 \ud574\ub2f9 \ucf58\ud150\uce20\uc758 \ubc95\uc801 \ucc45\uc784\uc744 \uc9c0\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),(0,Se.jsx)("li",{children:"\u2461 \ud68c\uc0ac\ub294 \ubb38\uc81c\uac00 \uc0dd\uc131\ub41c PDF \uacb0\uacfc\ubb3c\uc5d0 \ub300\ud574 \ubcf5\uc0ac, \ubc30\ud3ec, \uc720\ud1b5 \ub4f1\uc758 \ud589\uc704\ub97c \ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("h3",{children:"\uc81c8\uc870 (\uba74\ucc45)"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:"\u2460 \ud68c\uc6d0\uc774 \uc81c\uacf5\ud55c \ucf58\ud150\uce20\uc758 \uc624\ub958, \ubd80\uc815\ud655\uc131, \uc800\uc791\uad8c \uc704\ubc18 \ub4f1\uc73c\ub85c \ubc1c\uc0dd\ud55c \ubb38\uc81c\uc5d0 \ub300\ud574 \ud68c\uc0ac\ub294 \uc77c\uccb4 \ucc45\uc784\uc744 \uc9c0\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),(0,Se.jsx)("li",{children:"\u2461 \ubb38\uc81c \uc0dd\uc131 \uacb0\uacfc\ub294 \uc790\ub3d9\ud654\ub41c \uc54c\uace0\ub9ac\uc998\uc744 \uae30\ubc18\uc73c\ub85c \ud558\uba70, \ubaa8\ub4e0 \uad50\uc721\uc801\xb7\ud559\uc220\uc801 \uc815\ud655\uc131\uc744 \ubcf4\uc7a5\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("h3",{children:"\uc81c9\uc870 (\uc774\uc6a9\uc81c\ud55c \ubc0f \uacc4\uc57d \ud574\uc9c0)"}),(0,Se.jsx)("ul",{children:(0,Se.jsx)("li",{children:"\u2460 \ud68c\uc0ac\ub294 \ud68c\uc6d0\uc774 \ubcf8 \uc57d\uad00 \ub610\ub294 \uad00\uacc4 \ubc95\ub839\uc744 \uc704\ubc18\ud55c \uacbd\uc6b0 \uc11c\ube44\uc2a4 \uc774\uc6a9\uc744 \uc81c\ud55c\ud558\uac70\ub098 \ud0c8\ud1f4 \ucc98\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})}),(0,Se.jsx)("h3",{children:"\uc81c10\uc870 (\ubd84\uc7c1 \ud574\uacb0)"}),(0,Se.jsx)("ul",{children:(0,Se.jsx)("li",{children:"\u2460 \ud68c\uc0ac\uc640 \ud68c\uc6d0 \uac04\uc758 \ubd84\uc7c1\uc740 \uc0c1\ud638 \ud611\uc758\ub97c \ud1b5\ud574 \ud574\uacb0\ud558\uba70, \ud611\uc758\uac00 \uc5b4\ub824\uc6b8 \uacbd\uc6b0 \ud68c\uc0ac \ubcf8\uc0ac \uc18c\uc7ac\uc9c0 \uad00\ud560 \ubc95\uc6d0\uc5d0 \uc81c\uc18c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})}),(0,Se.jsx)("p",{children:(0,Se.jsx)("strong",{children:"[\ubd80\uce59]"})}),(0,Se.jsx)("p",{children:"\uc774 \uc57d\uad00\uc740 2025\ub144 08\uc6d4 01\uc77c\ubd80\ud130 \uc2dc\ud589\ud569\ub2c8\ub2e4."})]})]})}),i&&(0,Se.jsx)("div",{className:"modal-overlay",onClick:()=>o(!1),children:(0,Se.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Se.jsxs)("div",{className:"modal-header",children:[(0,Se.jsx)("h2",{children:"\uac1c\uc778\uc815\ubcf4\ucc98\ub9ac\ubc29\uce68"}),(0,Se.jsx)("button",{className:"modal-close",onClick:()=>o(!1),children:"\xd7"})]}),(0,Se.jsxs)("div",{className:"modal-body",children:[(0,Se.jsxs)("p",{children:[(0,Se.jsx)("strong",{children:"\uc2dc\ud589\uc77c\uc790:"})," 2025\ub144 08\uc6d4 01\uc77c"]}),(0,Se.jsx)("h3",{children:"\uc81c1\uc870 (\uc218\uc9d1\ud558\ub294 \uac1c\uc778\uc815\ubcf4 \ud56d\ubaa9)"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:"\u2460 \ud68c\uc6d0 \uac00\uc785 \uc2dc: \uc774\ub984, \uc774\uba54\uc77c, \ube44\ubc00\ubc88\ud638"}),(0,Se.jsx)("li",{children:"\u2461 \ud3ec\uc778\ud2b8 \uacb0\uc81c \uc2dc: \uacb0\uc81c\uc218\ub2e8 \uc815\ubcf4(\uce74\ub4dc\uc0ac, \uacb0\uc81c \uc2b9\uc778\uc815\ubcf4 \ub4f1)"}),(0,Se.jsx)("li",{children:"\u2462 \uc11c\ube44\uc2a4 \uc774\uc6a9 \uc2dc: IP \uc8fc\uc18c, \ube0c\ub77c\uc6b0\uc800 \uc815\ubcf4, \uc774\uc6a9 \uae30\ub85d, \uc811\uc18d \ub85c\uadf8, \ucfe0\ud0a4"}),(0,Se.jsx)("li",{children:"\u2463 \uace0\uac1d \ubb38\uc758 \uc2dc: \uc774\uba54\uc77c \uc8fc\uc18c, \ubb38\uc758 \ub0b4\uc6a9"})]}),(0,Se.jsx)("h3",{children:"\uc81c2\uc870 (\uac1c\uc778\uc815\ubcf4\uc758 \uc218\uc9d1 \ubc0f \uc774\uc6a9 \ubaa9\uc801)"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:"\u2460 \ud68c\uc6d0 \uc2dd\ubcc4 \ubc0f \uc778\uc99d"}),(0,Se.jsx)("li",{children:"\u2461 \ubb38\uc81c \uc0dd\uc131 \uc11c\ube44\uc2a4 \uc81c\uacf5 \ubc0f \uc774\ub825 \uad00\ub9ac"}),(0,Se.jsx)("li",{children:"\u2462 \uacb0\uc81c \ucc98\ub9ac \ubc0f \ud3ec\uc778\ud2b8 \uad00\ub9ac"}),(0,Se.jsx)("li",{children:"\u2463 \uace0\uac1d \ubb38\uc758 \uc751\ub300 \ubc0f \ubbfc\uc6d0 \ucc98\ub9ac"}),(0,Se.jsx)("li",{children:"\u2464 \uc11c\ube44\uc2a4 \ud488\uc9c8 \ud5a5\uc0c1 \ubc0f \ud1b5\uacc4 \ubd84\uc11d"}),(0,Se.jsx)("li",{children:"\u2465 \ubc95\uc801 \uc758\ubb34 \uc774\ud589"})]}),(0,Se.jsx)("h3",{children:"\uc81c3\uc870 (\uac1c\uc778\uc815\ubcf4\uc758 \ubcf4\uc720 \ubc0f \uc774\uc6a9\uae30\uac04)"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:"\u2460 \ud68c\uc6d0 \ud0c8\ud1f4 \uc2dc \uc9c0\uccb4 \uc5c6\uc774 \ud30c\uae30"}),(0,Se.jsx)("li",{children:"\u2461 \ub2e8, \ub2e4\uc74c \uc815\ubcf4\ub294 \uad00\ub828 \ubc95\ub839\uc5d0 \ub530\ub77c \uc77c\uc815 \uae30\uac04 \ubcf4\uad00"})]}),(0,Se.jsx)("div",{style:{margin:"1rem 0",padding:"1rem",border:"1px solid #ddd",borderRadius:"8px"},children:(0,Se.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{style:{borderBottom:"2px solid #ddd"},children:[(0,Se.jsx)("th",{style:{padding:"0.5rem",textAlign:"left",borderRight:"1px solid #ddd"},children:"\ubcf4\uc874 \ud56d\ubaa9"}),(0,Se.jsx)("th",{style:{padding:"0.5rem",textAlign:"left",borderRight:"1px solid #ddd"},children:"\ubcf4\uc874 \uc774\uc720"}),(0,Se.jsx)("th",{style:{padding:"0.5rem",textAlign:"left"},children:"\ubcf4\uc874 \uae30\uac04"})]})}),(0,Se.jsxs)("tbody",{children:[(0,Se.jsxs)("tr",{style:{borderBottom:"1px solid #ddd"},children:[(0,Se.jsx)("td",{style:{padding:"0.5rem",borderRight:"1px solid #ddd"},children:"\uacc4\uc57d \ub610\ub294 \uccad\uc57d\ucca0\ud68c \uae30\ub85d"}),(0,Se.jsx)("td",{style:{padding:"0.5rem",borderRight:"1px solid #ddd"},children:"\uc804\uc790\uc0c1\uac70\ub798\ubc95"}),(0,Se.jsx)("td",{style:{padding:"0.5rem"},children:"5\ub144"})]}),(0,Se.jsxs)("tr",{style:{borderBottom:"1px solid #ddd"},children:[(0,Se.jsx)("td",{style:{padding:"0.5rem",borderRight:"1px solid #ddd"},children:"\uacb0\uc81c \ubc0f \uc11c\ube44\uc2a4 \uc774\uc6a9 \ub0b4\uc5ed"}),(0,Se.jsx)("td",{style:{padding:"0.5rem",borderRight:"1px solid #ddd"},children:"\uc804\uc790\uc0c1\uac70\ub798\ubc95"}),(0,Se.jsx)("td",{style:{padding:"0.5rem"},children:"5\ub144"})]}),(0,Se.jsxs)("tr",{style:{borderBottom:"1px solid #ddd"},children:[(0,Se.jsx)("td",{style:{padding:"0.5rem",borderRight:"1px solid #ddd"},children:"\uc18c\ube44\uc790 \ubd88\ub9cc \ubc0f \ubd84\uc7c1\ucc98\ub9ac"}),(0,Se.jsx)("td",{style:{padding:"0.5rem",borderRight:"1px solid #ddd"},children:"\uc804\uc790\uc0c1\uac70\ub798\ubc95"}),(0,Se.jsx)("td",{style:{padding:"0.5rem"},children:"3\ub144"})]}),(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{style:{padding:"0.5rem",borderRight:"1px solid #ddd"},children:"\uc811\uc18d \uae30\ub85d(IP \ub4f1)"}),(0,Se.jsx)("td",{style:{padding:"0.5rem",borderRight:"1px solid #ddd"},children:"\ud1b5\uc2e0\ube44\ubc00\ubcf4\ud638\ubc95"}),(0,Se.jsx)("td",{style:{padding:"0.5rem"},children:"3\uac1c\uc6d4"})]})]})]})}),(0,Se.jsx)("h3",{children:"\uc81c4\uc870 (\uac1c\uc778\uc815\ubcf4 \uc81c3\uc790 \uc81c\uacf5)"}),(0,Se.jsx)("p",{children:"\ud68c\uc0ac\ub294 \ud68c\uc6d0\uc758 \uac1c\uc778\uc815\ubcf4\ub97c \uc6d0\uce59\uc801\uc73c\ub85c \uc678\ubd80\uc5d0 \uc81c\uacf5\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub2e8, \ub2e4\uc74c\uc758 \uacbd\uc6b0 \uc608\uc678\ub85c \ud569\ub2c8\ub2e4:"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:"\u2460 \ubc95\ub839\uc5d0 \uc758\uac70\ud558\uac70\ub098 \uc218\uc0ac\uae30\uad00 \uc694\uccad \uc2dc"}),(0,Se.jsx)("li",{children:"\u2461 \ud68c\uc6d0\uc758 \uc0ac\uc804 \ub3d9\uc758\ub97c \ubc1b\uc740 \uacbd\uc6b0"})]}),(0,Se.jsx)("h3",{children:"\uc81c5\uc870 (\uac1c\uc778\uc815\ubcf4 \ucc98\ub9ac \uc704\ud0c1)"}),(0,Se.jsx)("p",{children:"\ud68c\uc0ac\ub294 \uc6d0\ud65c\ud55c \uc11c\ube44\uc2a4 \uc81c\uacf5\uc744 \uc704\ud574 \ub2e4\uc74c\uacfc \uac19\uc774 \uac1c\uc778\uc815\ubcf4 \ucc98\ub9ac\ub97c \uc704\ud0c1\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Se.jsx)("div",{style:{margin:"1rem 0",padding:"1rem",border:"1px solid #ddd",borderRadius:"8px"},children:(0,Se.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{style:{borderBottom:"2px solid #ddd"},children:[(0,Se.jsx)("th",{style:{padding:"0.5rem",textAlign:"left",borderRight:"1px solid #ddd"},children:"\uc218\ud0c1\uc790"}),(0,Se.jsx)("th",{style:{padding:"0.5rem",textAlign:"left"},children:"\uc704\ud0c1 \ub0b4\uc6a9"})]})}),(0,Se.jsxs)("tbody",{children:[(0,Se.jsxs)("tr",{style:{borderBottom:"1px solid #ddd"},children:[(0,Se.jsx)("td",{style:{padding:"0.5rem",borderRight:"1px solid #ddd"},children:"\uacb0\uc81c\ub300\ud589\uc0ac (KG\uc774\ub2c8\uc2dc\uc2a4 \ub4f1)"}),(0,Se.jsx)("td",{style:{padding:"0.5rem"},children:"\ud3ec\uc778\ud2b8 \uacb0\uc81c \ucc98\ub9ac"})]}),(0,Se.jsxs)("tr",{style:{borderBottom:"1px solid #ddd"},children:[(0,Se.jsx)("td",{style:{padding:"0.5rem",borderRight:"1px solid #ddd"},children:"Firebase, Dothome \ub4f1"}),(0,Se.jsx)("td",{style:{padding:"0.5rem"},children:"\uc11c\ubc84 \uc6b4\uc601 \ubc0f \ub370\uc774\ud130 \uc800\uc7a5"})]}),(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{style:{padding:"0.5rem",borderRight:"1px solid #ddd"},children:"\uc774\uba54\uc77c \ubc1c\uc1a1 \uc11c\ube44\uc2a4 \uc81c\uacf5\uc790"}),(0,Se.jsx)("td",{style:{padding:"0.5rem"},children:"\uc54c\ub9bc\uba54\uc77c, \uc778\uc99d\uba54\uc77c \ubc1c\uc1a1"})]})]})]})}),(0,Se.jsx)("h3",{children:"\uc81c6\uc870 (\uac1c\uc778\uc815\ubcf4\uc758 \ud30c\uae30 \uc808\ucc28 \ubc0f \ubc29\ubc95)"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:"\u2460 \ubcf4\uc874 \uae30\uac04 \uacbd\uacfc \ub610\ub294 \ubaa9\uc801 \ub2ec\uc131 \uc2dc \uc989\uc2dc \ud30c\uae30"}),(0,Se.jsx)("li",{children:"\u2461 \uc804\uc790\uc801 \ud30c\uc77c: \ubcf5\uad6c \ubd88\uac00\ub2a5\ud55c \ubc29\uc2dd\uc73c\ub85c \uc0ad\uc81c"}),(0,Se.jsx)("li",{children:"\u2462 \uc885\uc774 \ubb38\uc11c: \ubd84\uc1c4 \ub610\ub294 \uc18c\uac01"})]}),(0,Se.jsx)("h3",{children:"\uc81c7\uc870 (\uc774\uc6a9\uc790\uc758 \uad8c\ub9ac\uc640 \ud589\uc0ac \ubc29\ubc95)"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:"\u2460 \uc5b8\uc81c\ub4e0\uc9c0 \ubcf8\uc778\uc758 \uac1c\uc778\uc815\ubcf4 \uc5f4\ub78c, \uc815\uc815, \uc0ad\uc81c \uc694\uccad \uac00\ub2a5"}),(0,Se.jsx)("li",{children:"\u2461 \ud68c\uc6d0 \ud0c8\ud1f4 \uc2dc \uac1c\uc778\uc815\ubcf4\ub294 \uc9c0\uccb4 \uc5c6\uc774 \ud30c\uae30"}),(0,Se.jsx)("li",{children:"\u2462 \uc774\uba54\uc77c \ub610\ub294 \uace0\uac1d\uc13c\ud130\ub97c \ud1b5\ud574 \uc694\uccad \uac00\ub2a5"})]}),(0,Se.jsx)("h3",{children:"\uc81c8\uc870 (\uac1c\uc778\uc815\ubcf4 \uc790\ub3d9 \uc218\uc9d1 \uc7a5\uce58\uc758 \uc124\uce58 \ubc0f \uac70\ubd80)"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:"\u2460 \ud68c\uc0ac\ub294 \ucfe0\ud0a4 \ub4f1 \uc790\ub3d9 \uc218\uc9d1 \uc7a5\uce58\ub97c \uc6b4\uc601\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Se.jsx)("li",{children:"\u2461 \uc774\uc6a9\uc790\ub294 \ube0c\ub77c\uc6b0\uc800 \uc124\uc815\uc744 \ud1b5\ud574 \ucfe0\ud0a4 \uc800\uc7a5\uc744 \uac70\ubd80\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("h3",{children:"\uc81c9\uc870 (\uac1c\uc778\uc815\ubcf4 \ubcf4\ud638\ucc45\uc784\uc790)"}),(0,Se.jsx)("p",{children:"\ud68c\uc0ac\ub294 \uac1c\uc778\uc815\ubcf4 \ucc98\ub9ac\uc5d0 \ub300\ud55c \ucc45\uc784\uc744 \uc9c0\ub294 \ucc45\uc784\uc790\ub97c \uc9c0\uc815\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Se.jsxs)("p",{children:["- \uc131\uba85: \ubbfc\uacbd\ud638",(0,Se.jsx)("br",{}),"- \uc774\uba54\uc77c: jcombizone@gmail.com",(0,Se.jsx)("br",{}),"- \ubb38\uc758 \ubc29\ubc95: \uc774\uba54\uc77c \ub610\ub294 \uace0\uac1d\uc13c\ud130"]}),(0,Se.jsx)("h3",{children:"\uc81c10\uc870 (\uace0\uc9c0\uc758 \uc758\ubb34)"}),(0,Se.jsx)("p",{children:"\uc774 \uac1c\uc778\uc815\ubcf4\ucc98\ub9ac\ubc29\uce68\uc740 \uad00\ub828 \ubc95\ub839\uc774\ub098 \ub0b4\ubd80 \uc815\ucc45\uc5d0 \ub530\ub77c \ubcc0\uacbd\ub420 \uc218 \uc788\uc73c\uba70, \ubcc0\uacbd \uc2dc \ud50c\ub7ab\ud3fc \ub0b4 \uacf5\uc9c0\uc0ac\ud56d\uc744 \ud1b5\ud574 \uc0ac\uc804 \uace0\uc9c0\ud569\ub2c8\ub2e4."}),(0,Se.jsx)("p",{children:(0,Se.jsx)("strong",{children:"[\ubd80\uce59]"})}),(0,Se.jsx)("p",{children:"\ubcf8 \ubc29\uce68\uc740 2025\ub144 08\uc6d4 01\uc77c\ubd80\ud130 \uc2dc\ud589\ub429\ub2c8\ub2e4."})]})]})})]})},fo=()=>(0,Se.jsx)("div",{className:"print-header-work01",children:(0,Se.jsx)("div",{className:"print-header-text-work01",children:"EdgeEnglishLab | AI \uc601\uc5b4 \ubb38\uc81c \uc0dd\uc131 \ud50c\ub7ab\ud3fc"})}),go=e=>{let{isOpen:t,onClose:n}=e;return(0,Se.jsx)(be(),{isOpen:t,onRequestClose:n,className:"screenshot-help-modal",overlayClassName:"screenshot-help-overlay",ariaHideApp:!1,children:(0,Se.jsxs)("div",{className:"screenshot-help-container",children:[(0,Se.jsxs)("div",{className:"screenshot-help-header",children:[(0,Se.jsx)("h2",{children:"\ud83d\udcf8 \ud654\uba74 \ucea1\ucc98\ud558\ub294 \ubc29\ubc95"}),(0,Se.jsx)("button",{className:"screenshot-help-close-btn",onClick:n,"aria-label":"\ub2eb\uae30",children:"\xd7"})]}),(0,Se.jsxs)("div",{className:"screenshot-help-content",children:[(0,Se.jsxs)("div",{className:"help-section",children:[(0,Se.jsx)("h3",{children:"\ud83c\udfaf \uac00\uc7a5 \uc26c\uc6b4 \ubc29\ubc95: \ud0a4\ubcf4\ub4dc \ub2e8\ucd95\ud0a4"}),(0,Se.jsxs)("div",{className:"method-card",children:[(0,Se.jsxs)("div",{className:"method-title",children:[(0,Se.jsx)("span",{className:"keyboard-key",children:"PrtScn"})," \ud0a4 (\uc804\uccb4 \ud654\uba74 \ucea1\ucc98)"]}),(0,Se.jsxs)("p",{children:["\ud0a4\ubcf4\ub4dc\uc5d0\uc11c ",(0,Se.jsx)("strong",{children:"PrtScn"})," \ud0a4\ub97c \ucc3e\uc544\uc11c \ud55c \ubc88 \ub204\ub974\uc138\uc694!"]}),(0,Se.jsxs)("ul",{children:[(0,Se.jsxs)("li",{children:["\ud83d\udca1 ",(0,Se.jsx)("strong",{children:"PrtScn"}),"\uc740 \ubcf4\ud1b5 \ud0a4\ubcf4\ub4dc \uc624\ub978\ucabd \uc704\ucabd\uc5d0 \uc788\uc5b4\uc694"]}),(0,Se.jsx)("li",{children:"\ud83d\udca1 \ud654\uba74\uc774 \uae5c\ube61\uc774\uba74 \ucea1\ucc98\uac00 \uc644\ub8cc\ub41c \uac70\uc608\uc694"}),(0,Se.jsx)("li",{children:"\ud83d\udca1 \ucea1\ucc98\ub41c \uc774\ubbf8\uc9c0\ub294 \uc790\ub3d9\uc73c\ub85c \ubcf5\uc0ac\ub418\uc5b4 \uc788\uc5b4\uc694"})]})]}),(0,Se.jsxs)("div",{className:"method-card",children:[(0,Se.jsxs)("div",{className:"method-title",children:[(0,Se.jsx)("span",{className:"keyboard-key",children:"Win"})," + ",(0,Se.jsx)("span",{className:"keyboard-key",children:"Shift"})," + ",(0,Se.jsx)("span",{className:"keyboard-key",children:"S"})," (\ubd80\ubd84 \ucea1\ucc98)"]}),(0,Se.jsx)("p",{children:"\uc138 \uac1c\uc758 \ud0a4\ub97c \ub3d9\uc2dc\uc5d0 \ub204\ub974\uba74 \uc6d0\ud558\ub294 \ubd80\ubd84\ub9cc \ucea1\ucc98\ud560 \uc218 \uc788\uc5b4\uc694!"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsxs)("li",{children:["\ud83d\udca1 ",(0,Se.jsx)("strong",{children:"Win"})," \ud0a4 + ",(0,Se.jsx)("strong",{children:"Shift"})," \ud0a4 + ",(0,Se.jsx)("strong",{children:"S"})," \ud0a4\ub97c \ub3d9\uc2dc\uc5d0 \ub204\ub974\uc138\uc694"]}),(0,Se.jsx)("li",{children:"\ud83d\udca1 \ud654\uba74\uc774 \uc5b4\ub450\uc6cc\uc9c0\uba74 \ub9c8\uc6b0\uc2a4\ub85c \uc6d0\ud558\ub294 \ubd80\ubd84\uc744 \ub4dc\ub798\uadf8\ud558\uc138\uc694"}),(0,Se.jsx)("li",{children:"\ud83d\udca1 \ub354 \uc815\ud655\ud558\uac8c \ucea1\ucc98\ud560 \uc218 \uc788\uc5b4\uc694"})]})]})]}),(0,Se.jsxs)("div",{className:"help-section",children:[(0,Se.jsx)("h3",{children:"\ud83d\udda5\ufe0f \uc708\ub3c4\uc6b0 \ucea1\ucc98 \ub3c4\uad6c \uc0ac\uc6a9\ud558\uae30"}),(0,Se.jsxs)("div",{className:"method-card",children:[(0,Se.jsx)("div",{className:"method-title",children:"\uc708\ub3c4\uc6b0 \ucea1\ucc98 \ub3c4\uad6c \uc2e4\ud589\ud558\uae30"}),(0,Se.jsxs)("ol",{children:[(0,Se.jsxs)("li",{children:["\ud0a4\ubcf4\ub4dc\uc5d0\uc11c ",(0,Se.jsx)("strong",{children:"Win"})," \ud0a4\ub97c \ub204\ub974\uc138\uc694"]}),(0,Se.jsx)("li",{children:'"\ucea1\ucc98" \ub610\ub294 "snipping"\uc744 \uc785\ub825\ud558\uc138\uc694'}),(0,Se.jsx)("li",{children:'"\ucea1\ucc98 \ub3c4\uad6c" \ub610\ub294 "Snipping Tool"\uc744 \ud074\ub9ad\ud558\uc138\uc694'}),(0,Se.jsx)("li",{children:'"\uc0c8\ub85c \ub9cc\ub4e4\uae30" \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694'}),(0,Se.jsx)("li",{children:"\ub9c8\uc6b0\uc2a4\ub85c \uc6d0\ud558\ub294 \ubd80\ubd84\uc744 \ub4dc\ub798\uadf8\ud574\uc11c \ucea1\ucc98\ud558\uc138\uc694"}),(0,Se.jsx)("li",{children:"\ucea1\ucc98\ub41c \uc774\ubbf8\uc9c0\ub97c \ubcf5\uc0ac\ud558\uc138\uc694 (Ctrl+C)"})]})]})]}),(0,Se.jsxs)("div",{className:"help-section",children:[(0,Se.jsx)("h3",{children:"\ud83d\udcf1 \uc2a4\ub9c8\ud2b8\ud3f0\uc73c\ub85c \ucea1\ucc98\ud558\uae30"}),(0,Se.jsxs)("div",{className:"method-card",children:[(0,Se.jsx)("div",{className:"method-title",children:"\uc544\uc774\ud3f0 (iPhone)"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsxs)("li",{children:["\ud83d\udca1 ",(0,Se.jsx)("strong",{children:"\uc804\uc6d0 \ubc84\ud2bc"})," + ",(0,Se.jsx)("strong",{children:"\ubcfc\ub968 \uc5c5 \ubc84\ud2bc"}),"\uc744 \ub3d9\uc2dc\uc5d0 \ub204\ub974\uc138\uc694"]}),(0,Se.jsx)("li",{children:"\ud83d\udca1 \ud654\uba74\uc774 \uae5c\ube61\uc774\uba74 \ucea1\ucc98 \uc644\ub8cc!"}),(0,Se.jsx)("li",{children:"\ud83d\udca1 \uc0ac\uc9c4 \uc571\uc5d0\uc11c \ucea1\ucc98\ub41c \uc774\ubbf8\uc9c0\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc5b4\uc694"})]})]}),(0,Se.jsxs)("div",{className:"method-card",children:[(0,Se.jsx)("div",{className:"method-title",children:"\uc548\ub4dc\ub85c\uc774\ub4dc (Android)"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsxs)("li",{children:["\ud83d\udca1 ",(0,Se.jsx)("strong",{children:"\uc804\uc6d0 \ubc84\ud2bc"})," + ",(0,Se.jsx)("strong",{children:"\ubcfc\ub968 \ub2e4\uc6b4 \ubc84\ud2bc"}),"\uc744 \ub3d9\uc2dc\uc5d0 \ub204\ub974\uc138\uc694"]}),(0,Se.jsx)("li",{children:"\ud83d\udca1 \ub610\ub294 \uc190\ubc14\ub2e5\uc73c\ub85c \ud654\uba74\uc744 \uac00\ub85c\ub85c \uc2a4\uc640\uc774\ud504\ud558\uc138\uc694"}),(0,Se.jsx)("li",{children:"\ud83d\udca1 \uac24\ub7ec\ub9ac \uc571\uc5d0\uc11c \ucea1\ucc98\ub41c \uc774\ubbf8\uc9c0\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc5b4\uc694"})]})]})]}),(0,Se.jsxs)("div",{className:"help-section",children:[(0,Se.jsx)("h3",{children:"\ud83d\udd04 \ucea1\ucc98\ud55c \uc774\ubbf8\uc9c0 \ubd99\uc5ec\ub123\uae30"}),(0,Se.jsxs)("div",{className:"method-card",children:[(0,Se.jsx)("div",{className:"method-title",children:"\uc774\ubbf8\uc9c0\ub97c \ubb38\uc81c\uc5d0 \ubd99\uc5ec\ub123\ub294 \ubc29\ubc95"}),(0,Se.jsxs)("ol",{children:[(0,Se.jsx)("li",{children:"\uc704\uc758 \ubc29\ubc95 \uc911 \ud558\ub098\ub85c \ud654\uba74\uc744 \ucea1\ucc98\ud558\uc138\uc694"}),(0,Se.jsx)("li",{children:"\ucea1\ucc98\ub41c \uc774\ubbf8\uc9c0\uac00 \uc790\ub3d9\uc73c\ub85c \ubcf5\uc0ac\ub429\ub2c8\ub2e4"}),(0,Se.jsxs)("li",{children:["\ubb38\uc81c \ud654\uba74\uc5d0\uc11c ",(0,Se.jsx)("strong",{children:'"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30"'})," \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694"]}),(0,Se.jsxs)("li",{children:["\ub610\ub294 \ud0a4\ubcf4\ub4dc\uc5d0\uc11c ",(0,Se.jsx)("strong",{children:"Ctrl + V"}),"\ub97c \ub204\ub974\uc138\uc694"]}),(0,Se.jsx)("li",{children:"\ucea1\ucc98\ud55c \uc774\ubbf8\uc9c0\uac00 \ubb38\uc81c\uc5d0 \ubd99\uc5ec\ub123\uc5b4\uc9d1\ub2c8\ub2e4!"})]})]})]}),(0,Se.jsxs)("div",{className:"help-section",children:[(0,Se.jsx)("h3",{children:"\ud83d\udca1 \ud301\uacfc \uc8fc\uc758\uc0ac\ud56d"}),(0,Se.jsx)("div",{className:"tips-card",children:(0,Se.jsxs)("ul",{children:[(0,Se.jsxs)("li",{children:["\ud83c\udfaf ",(0,Se.jsx)("strong",{children:"\ubb38\uc81c\uac00 \uc798 \ubcf4\uc774\ub3c4\ub85d"})," \ucea1\ucc98\ud558\uc138\uc694"]}),(0,Se.jsxs)("li",{children:["\ud83c\udfaf ",(0,Se.jsx)("strong",{children:"\ud14d\uc2a4\ud2b8\uac00 \uc120\uba85\ud558\uac8c"})," \ubcf4\uc774\ub3c4\ub85d \ud558\uc138\uc694"]}),(0,Se.jsxs)("li",{children:["\ud83c\udfaf ",(0,Se.jsx)("strong",{children:"\ubd88\ud544\uc694\ud55c \ubd80\ubd84\uc740 \uc81c\uc678"}),"\ud558\uace0 \ubb38\uc81c\ub9cc \ucea1\ucc98\ud558\uc138\uc694"]}),(0,Se.jsxs)("li",{children:["\ud83c\udfaf ",(0,Se.jsx)("strong",{children:"\ubc1d\uae30\uac00 \ucda9\ubd84\ud55c"})," \uacf3\uc5d0\uc11c \ucea1\ucc98\ud558\uc138\uc694"]}),(0,Se.jsxs)("li",{children:["\ud83c\udfaf \ucea1\ucc98\uac00 \uc548 \ub418\uba74 ",(0,Se.jsx)("strong",{children:"\ub2e4\uc2dc \ud55c \ubc88 \uc2dc\ub3c4"}),"\ud574\ubcf4\uc138\uc694"]})]})})]})]}),(0,Se.jsx)("div",{className:"screenshot-help-footer",children:(0,Se.jsx)("button",{className:"screenshot-help-ok-btn",onClick:n,children:"\uc774\ud574\ud588\uc5b4\uc694! \ud83d\udc4d"})})]})})},yo=e=>{let{isOpen:t,onClose:n,onConfirm:s,workTypeName:i,pointsToDeduct:o,userCurrentPoints:a,remainingPoints:l}=e;const[c,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t||d(!1)},[t]);const u=e=>e.toLocaleString(),h=()=>{d(!0),setTimeout(()=>{n()},200)};return t?(0,Se.jsx)("div",{className:"point-deduction-modal-overlay ".concat(c?"closing":""),onClick:h,children:(0,Se.jsxs)("div",{className:"point-deduction-modal-content",onClick:e=>e.stopPropagation(),children:[(0,Se.jsxs)("div",{className:"modal-header",children:[(0,Se.jsx)("h3",{children:"\u26a0\ufe0f \ud3ec\uc778\ud2b8 \ucc28\uac10 \ud655\uc778"}),(0,Se.jsx)("button",{className:"modal-close",onClick:h,children:"\xd7"})]}),(0,Se.jsxs)("div",{className:"modal-body",children:[(0,Se.jsxs)("div",{className:"point-info",children:[(0,Se.jsxs)("div",{className:"info-line info-title",children:["\ubb38\uc81c \uc720\ud615: ",i]}),(0,Se.jsxs)("div",{className:"info-line info-detail",children:[(0,Se.jsx)("span",{className:"info-label",children:"\ucc28\uac10\ub420 \ud3ec\uc778\ud2b8:"}),(0,Se.jsxs)("span",{className:"info-value points-to-deduct",children:["-",u(o),"P"]})]}),(0,Se.jsxs)("div",{className:"info-line info-detail",children:[(0,Se.jsx)("span",{className:"info-label",children:"\ud604\uc7ac \ubcf4\uc720 \ud3ec\uc778\ud2b8:"}),(0,Se.jsxs)("span",{className:"info-value current-points",children:[u(a),"P"]})]}),(0,Se.jsxs)("div",{className:"info-line info-detail",children:[(0,Se.jsx)("span",{className:"info-label",children:"\ucc28\uac10 \ud6c4 \uc794\uc5ec \ud3ec\uc778\ud2b8:"}),(0,Se.jsxs)("span",{className:"info-value remaining-points",children:[u(l),"P"]})]})]}),(0,Se.jsxs)("div",{className:"warning-message",children:[(0,Se.jsx)("p",{children:"\u26a0\ufe0f \ubb38\uc81c \uc0dd\uc131 \uc2dc \uc704\uc758 \ud3ec\uc778\ud2b8\uac00 \ucc28\uac10\ub429\ub2c8\ub2e4."}),(0,Se.jsx)("p",{children:"\ubb38\uc81c \uc0dd\uc131\uc5d0 \uc2e4\ud328\ud560 \uacbd\uc6b0 \ucc28\uac10\ub41c \ud3ec\uc778\ud2b8\ub294 \uc790\ub3d9\uc73c\ub85c \ud658\ubd88\ub429\ub2c8\ub2e4."})]})]}),(0,Se.jsxs)("div",{className:"modal-actions",children:[(0,Se.jsx)("button",{onClick:h,className:"btn-secondary",children:"\ucde8\uc18c"}),(0,Se.jsx)("button",{onClick:s,className:"btn-primary",children:"\ubb38\uc81c \uc0dd\uc131 \uc9c4\ud589"})]})]})}):null};var vo=n(322);const xo=1123,bo=19,wo=38,jo=30,No=11,ko=30,So=11,_o=30,To=11;function Co(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:38,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.7;const s=.55*n,i=Math.floor(680/s);return Math.ceil(e.length/i)*n*r+t}const Eo=()=>{const{userData:e,loading:t}=Te(),[n,s]=(0,r.useState)("text"),[i,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[p,m]=(0,r.useState)(""),[f,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),[x,b]=(0,r.useState)(null),[w,j]=(0,r.useState)("none"),N=(0,r.useRef)(null),[k,S]=(0,r.useState)(!1),[_,T]=(0,r.useState)(!1),[C,E]=(0,r.useState)(!1),[I,A]=(0,r.useState)(0),[R,O]=(0,r.useState)(0),[P,F]=(0,r.useState)([]),[D,z]=(0,r.useState)({needsSecondPage:!1,needsThirdPage:!1,page1Content:"",page2Content:"",page3Content:""});(0,r.useEffect)(()=>{t||(async()=>{try{var n;const r=await(0,vo.getWorkTypePoints)();F(r);const s=(null===(n=r.find(e=>"3"===e.id))||void 0===n?void 0:n.points)||0;if(A(s),!t&&e&&e.uid){const t=await(0,vo.MC)(e.uid);O(t)}}catch(r){console.error("\ud3ec\uc778\ud2b8 \ucd08\uae30\ud654 \uc624\ub958:",r)}})()},[null===e||void 0===e?void 0:e.uid,t]),(0,r.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,r.useEffect)(()=>{u&&window.scrollTo(0,0)},[u]);(0,r.useEffect)(()=>{u&&p&&(()=>{if(!u||!p)return;const e=xo-bo-wo,t=jo+No+Co(u.blankedText,38,16,1.7),n=_o+To;let r=0;u.options.forEach(e=>{r+=Co("".concat(e," (\uc815\ub2f5)"),11,16,1.3)});const s=n+r,i=ko+So+Co(p,38,16,1.7),o=e-76;console.log("\ud83d\udccf \uc720\ud615#03 \ub3d9\uc801 \ud398\uc774\uc9c0 \ubd84\ud560 \uacc4\uc0b0:",{availableHeight:e.toFixed(2)+"px",sectionAHeight:t.toFixed(2)+"px",sectionBHeight:s.toFixed(2)+"px",sectionCHeight:i.toFixed(2)+"px",totalHeight:(t+s+i).toFixed(2)+"px",effectiveAvailableHeight:o.toFixed(2)+"px",quizTextLength:u.blankedText.length,translationTextLength:p.length}),z(t+s+i<=o?{needsSecondPage:!1,needsThirdPage:!1,page1Content:"A+B+C",page2Content:"",page3Content:""}:t+s<=o?i<=o?{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A+B",page2Content:"C",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!0,page1Content:"A+B",page2Content:"C-part1",page3Content:"C-part2"}:t<=o&&s+i<=o?{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A",page2Content:"B+C",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!0,page1Content:"A",page2Content:"B",page3Content:"C"})})()},[u,p]);const L=e=>{s(e),o(""),l(null),d(null),h(null),b(null)};async function M(e){const t=await(n=e,new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)}));var n;const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"\uc601\uc5b4\ubb38\uc81c\ub85c \uc0ac\uc6a9\ub418\ub294 \ubcf8\ubb38\uc774\uc57c.\n\uc774 \uc774\ubbf8\uc9c0\uc758 \ub0b4\uc6a9\uc744 \uc218\uc791\uc5c5\uc73c\ub85c \uc815\ud655\ud788 \uc77d\uace0, \uc601\uc5b4 \ubcf8\ubb38\ub9cc \ucd94\ub824\ub0b4\uc11c \ubcf4\uc5ec\uc918.\n\uae00\uc790\ub294 \uc778\uc1c4\uae00\uc528\uccb4 \uc774\uc678\uc5d0 \uc190\uae00\uc528\ub098 \uc6d0, \ubc11\uc904 \ub4f1 \ud45c\uc2dc\ub418\uc5b4\uc788\ub294 \uac83\uc740 \ubb34\uc2dc\ud574. \n\ubcf8\ubb38\uc911\uc5d0 \uc6d0\ubb38\uc790 1, 2, 3... \ub4f1\uc73c\ub85c \ud45c\uc2dc\ub41c\uac74 \uc81c\uac70\ud574\uc918. \n\uc6d0\ubb38\uc790 \uc81c\uac70\ud6c4 \uc904\uc744 \ubc14\uafb8\uac70\ub098 \ubb38\ub2e8\uc744 \ubc14\uafb8\uc9c0\ub9d0\uace0, \uc804\uccb4\uac00 \ud55c \ubb38\ub2e8\uc73c\ub85c \uad6c\uc131\ud574\uc918. \n\uc601\uc5b4 \ubcf8\ubb38\ub9cc, \uc544\ubb34\ub7f0 \uc124\uba85\uc774\ub098 \uc548\ub0b4\ubb38 \uc5c6\uc774, \ud55c \ubb38\ub2e8\uc73c\ub85c\ub9cc \ucd9c\ub825\ud574\uc918."},{type:"image_url",image_url:{url:t}}]}],max_tokens:2048})});return(await r.json()).choices[0].message.content.trim()}const B=[],U=/\(([^)]+)\)/g;let W;for(;null!==(W=U.exec(i));)B.push(W[1].trim());const V=async()=>{if(null===e||void 0===e||!e.uid)return;let t="";g(!0),h(null),b(null);let r=0;try{const s=P.find(e=>"3"===e.id);if(!s)throw new Error("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const o=await(0,vo.ev)(e.uid,"3",s.name,e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790");if(!o.success)throw new Error(o.error||"\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");if(r=o.deductedPoints,O(o.remainingPoints),"text"===n){if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}else if("image"===n&&a)t=await M(a);else{if("capture"!==n)throw new Error("\uc774\ubbf8\uc9c0\ub97c \ucca8\ubd80\ud574\uc8fc\uc138\uc694.");if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}if(!t.trim())throw new Error("\ucd94\ucd9c\ub41c \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const l=await async function(e){const t="\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uae00\uc758 \uc8fc\uc81c\uc640 \uac00\uc7a5 \ubc00\uc811\ud55c, \uc758\ubbf8 \uc788\ub294 \ub2e8\uc5b4(\uba85\uc0ac, \ud0a4\uc6cc\ub4dc \ub4f1) 1\uac1c\ub97c \uc120\uc815\ud574.\n\n1. \ubc18\ub4dc\uc2dc \ubcf8\ubb38\uc5d0 \uc2e4\uc81c\ub85c \ub4f1\uc7a5\ud55c \ub2e8\uc5b4(\ucca0\uc790, \ud615\ud0dc, \ub300\uc18c\ubb38\uc790\uae4c\uc9c0 \ub3d9\uc77c)\ub97c \uc815\ub2f5\uc73c\ub85c \uc120\uc815\ud574\uc57c \ud574. \ubcc0\ud615, \ub300\uccb4, \ub3d9\uc758\uc5b4, \uc5b4\ud615 \ubcc0\ud654 \uc5c6\uc774 \ubcf8\ubb38\uc5d0 \uc788\ub358 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud574\uc57c \ud574.\n\n2. \ubb38\uc81c\uc758 \ubcf8\ubb38(\ube48\uce78 \ud3ec\ud568)\uc740 \ubc18\ub4dc\uc2dc \uc0ac\uc6a9\uc790\uac00 \uc785\ub825\ud55c \uc804\uccb4 \ubcf8\ubb38\uacfc \uc644\uc804\ud788 \ub3d9\uc77c\ud574\uc57c \ud558\uba70, \uc77c\ubd80 \ubb38\uc7a5\ub9cc \ucd94\ucd9c\ud558\uac70\ub098, \ubb38\uc7a5 \uc21c\uc11c\ub97c \ubc14\uafb8\uac70\ub098, \ubcf8\ubb38\uc744 \uc694\uc57d/\ubcc0\ud615\ud574\uc11c\ub294 \uc548 \ub3fc. \uc624\uc9c1 \uc815\ub2f5 \ub2e8\uc5b4\ub9cc ()\ub85c \uce58\ud658\ud574.\n\n3. \uc785\ub825\ub41c \ubcf8\ubb38\uc5d0 \uc774\ubbf8 ()\ub85c \ubb36\uc778 \ub2e8\uc5b4\ub098 \uad6c\uac00 \uc788\ub2e4\uba74, \uadf8 \ubd80\ubd84\uc740 \uc808\ub300 \ube48\uce78 \ucc98\ub9ac \ub300\uc0c1\uc73c\ub85c \uc0bc\uc9c0 \ub9c8\uc138\uc694. \ubc18\ub4dc\uc2dc \uad04\ud638 \ubc16\uc5d0 \uc788\ub294 \ub2e8\uc5b4\ub9cc \ube48\uce78 \ud6c4\ubcf4\ub85c \uc120\uc815\ud558\uc138\uc694.\n\n4. \uc544\ub798 \ub2e8\uc5b4/\uad6c\ub294 \uc808\ub300 \ube48\uce78 \ucc98\ub9ac\ud558\uc9c0 \ub9c8\uc138\uc694: ".concat(B.length>0?B.join(", "):"\uc5c6\uc74c",'\n\n5. \uc815\ub2f5(\ud575\uc2ec\ub2e8\uc5b4) + \uc624\ub2f5(\ube44\uc2b7\ud55c \ud488\uc0ac\uc758 \ub2e8\uc5b4 4\uac1c, \uc758\ubbf8\ub294 \ub2e4\ub984) \ucd1d 5\uac1c\ub97c \uc0dd\uc131\ud574.\n\n6. \uc815\ub2f5\uc758 \uc704\uce58\ub294 1~5\ubc88 \uc911 \ub79c\ub364.\n\n7. JSON \ud615\uc2dd\uc73c\ub85c \uc751\ub2f5\ud558\uc138\uc694:\n\n{\n  "options": ["\uc120\ud0dd\uc9c01", "\uc120\ud0dd\uc9c02", "\uc120\ud0dd\uc9c03", "\uc120\ud0dd\uc9c04", "\uc120\ud0dd\uc9c05"],\n  "answerIndex": 0\n}\n\n\uc785\ub825\ub41c \uc601\uc5b4 \ubcf8\ubb38:\n').concat(e),n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:t}],max_tokens:1200,temperature:.7})}),r=await n.json();console.log("AI \uc751\ub2f5 \uc804\uccb4:",r),console.log("AI \uc751\ub2f5 \ub0b4\uc6a9:",r.choices[0].message.content);const s=r.choices[0].message.content.match(/\{[\s\S]*\}/);if(!s)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let i;console.log("\ucd94\ucd9c\ub41c JSON:",s[0]);try{i=JSON.parse(s[0]),console.log("\ud30c\uc2f1\ub41c \uacb0\uacfc:",i)}catch(l){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!e.includes(i.options[i.answerIndex]))throw new Error("\uc815\ub2f5 \ub2e8\uc5b4\uac00 \ubcf8\ubb38\uc5d0 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. AI \uc751\ub2f5 \uc624\ub958\uc785\ub2c8\ub2e4.");const o=i.options[i.answerIndex],a=function(e,t){let n=!1;const r=e.split(/([()])/);let s=!1;for(let o=0;o<r.length;o++)if("("!==r[o])if(")"!==r[o]){if(!s&&!n){const e=new RegExp("\\b".concat(t,"\\b"));e.test(r[o])&&(r[o]=r[o].replace(e,"(__________)"),n=!0)}}else s=!1;else s=!0;let i="";s=!1;for(let o=0;o<r.length;o++)"("!==r[o]?")"!==r[o]?i+=r[o]:(s=!1,i+=")"):(s=!0,i+="(");return i}(e,o);if(i.blankedText=a,i.blankedText.replace(/\( *_{6,}\)/,o).trim()!==e.trim())throw new Error("\ube48\uce78 \ubcf8\ubb38\uc774 \uc6d0\ubcf8 \ubcf8\ubb38\uacfc \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. AI \uc751\ub2f5 \uc624\ub958\uc785\ub2c8\ub2e4.");if(console.log("\ucd5c\uc885 \uac80\uc99d \uc804 \uacb0\uacfc:",{blankedText:i.blankedText,options:i.options,answerIndex:i.answerIndex}),!i.blankedText||!i.options||"number"!==typeof i.answerIndex)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");return console.log("AI \uc751\ub2f5 \uac80\uc99d \uc644\ub8cc, \ubc18\ud658\ud560 \uacb0\uacfc:",i),i}(t);console.log("\uc0dd\uc131\ub41c \ud034\uc988 \ub370\uc774\ud130:",l),h(l);const c=await async function(e){const t="\ub2e4\uc74c \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\ub85c \ubc88\uc5ed\ud574\uc8fc\uc138\uc694. \ubc88\uc5ed\ub9cc \ucd9c\ub825\ud558\uace0 \ub2e4\ub978 \uc124\uba85\uc740 \ud558\uc9c0 \ub9c8\uc138\uc694.\n\n\uc601\uc5b4 \ubcf8\ubb38:\n".concat(e),n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:t}],max_tokens:1e3,temperature:.3})});return(await n.json()).choices[0].message.content.trim()}(t);console.log("\ubc88\uc5ed\ub41c \ud14d\uc2a4\ud2b8:",c),m(c)}catch(s){if(console.error("\uc5b4\ud718 \ubb38\uc81c \uc0dd\uc131 \uc624\ub958:",s),r>0&&null!==e&&void 0!==e&&e.uid)try{await(0,vo.Lw)(e.uid,r,"\uc5b4\ud718 \ubb38\uc81c \uc0dd\uc131",e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790","\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\ub85c \uc778\ud55c \ud3ec\uc778\ud2b8 \ud658\ubd88"),O(e=>e+r)}catch(o){console.error("\ud3ec\uc778\ud2b8 \ud658\ubd88 \uc624\ub958:",o)}alert(s.message||"\ubb38\uc81c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}},q=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        /* \uc720\ud615#03 \uc778\uc1c4\uc6a9 \uac04\uaca9 \uac15\uc81c \uc801\uc6a9 */\n        .only-print .problem-options {\n          margin-top: 1rem !important;\n          margin-bottom: 1rem !important;\n        }\n        .only-print .quiz-content .problem-options {\n          margin-top: 1rem !important;\n          margin-bottom: 1rem !important;\n        }\n        .only-print .a4-page-template .quiz-content .problem-options {\n          margin-top: 1rem !important;\n          margin-bottom: 1rem !important;\n        }\n      }\n    ",document.head.appendChild(e),j("no-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),j("none")},1e4)},500)},H=()=>{console.log("\uc778\uc1c4(\uc815\ub2f5) \ubc84\ud2bc \ud074\ub9ad\ub428"),console.log("\ud604\uc7ac printMode:",w);const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        /* \uc720\ud615#03 \uc778\uc1c4\uc6a9 \uac04\uaca9 \uac15\uc81c \uc801\uc6a9 */\n        .only-print .problem-options {\n          margin-top: 0.5rem !important;\n          margin-bottom: 1rem !important;\n        }\n        .only-print .quiz-content .problem-options {\n          margin-top: 0.5rem !important;\n          margin-bottom: 1rem !important;\n        }\n        .only-print .a4-page-template .quiz-content .problem-options {\n          margin-top: 0.5rem !important;\n          margin-bottom: 1rem !important;\n        }\n      }\n    ",document.head.appendChild(e),j("with-answer"),console.log("printMode\ub97c with-answer\ub85c \uc124\uc815"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),j("none")},1e4)},500)},K=()=>{h(null),b(null),o(""),l(null),d(null),m(""),S(!1)};if(u){u.options[u.answerIndex];const e=u.blankedText;return(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("div",{className:"quiz-display no-print",children:[(0,Se.jsxs)("div",{className:"quiz-header",children:[(0,Se.jsx)("h2",{className:"no-print",children:"#03.\ube48\uce78(\ub2e8\uc5b4) \ucd94\ub860 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"quiz-header-buttons no-print",children:[(0,Se.jsx)("button",{onClick:K,className:"reset-button",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\uc0c8 \ubb38\uc81c \ub9cc\ub4e4\uae30"}),(0,Se.jsxs)("button",{onClick:q,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsx)("span",{children:"\uc778\uc1c4 (\ubb38\uc81c)"})]}),(0,Se.jsxs)("button",{onClick:H,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 6px rgba(240, 147, 251, 0.25)"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsxs)("span",{children:["\uc778\uc1c4 (",(0,Se.jsx)("span",{style:{color:"#FFD600"},children:"\uc815\ub2f5"}),")"]})]})]})]}),(0,Se.jsxs)("div",{className:"quiz-section",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1.18rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ub2e8\uc5b4\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#03"})]}),(0,Se.jsx)("div",{style:{fontSize:"1.08rem",lineHeight:1.7,margin:"1.2rem 0",background:"#FFF3CD",borderRadius:"8px",padding:"1.2rem",fontFamily:"inherit"},children:e}),(0,Se.jsx)("div",{className:"problem-options",style:{margin:"1.2rem 0"},children:u.options.map((e,t)=>(0,Se.jsxs)("label",{style:{display:"block",fontSize:"1.08rem",margin:"0.4rem 0",cursor:"pointer",fontWeight:x===t?700:400,color:x===t?"#6a5acd":"#222",fontFamily:"inherit"},children:[(0,Se.jsx)("input",{type:"radio",name:"blank-quiz",checked:x===t,onChange:()=>b(t),style:{marginRight:"0.7rem"}}),"\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,null!==x&&u.answerIndex===t&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]},t))}),null!==x&&(0,Se.jsxs)("div",{className:"problem-answer no-print",style:{marginTop:"1.2rem",color:"#1976d2",fontWeight:700},children:["\uc815\ub2f5: ","\u2460\u2461\u2462\u2463\u2464"[u.answerIndex]||u.answerIndex+1," ",u.options[u.answerIndex]]})]})]}),"no-answer"===w&&(0,Se.jsx)("div",{className:"only-print",children:(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ub2e8\uc5b4\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",marginBottom:"0.3rem !important",fontSize:"1rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:e}),(0,Se.jsx)("div",{className:"problem-options",style:{marginTop:"0 !important",marginBottom:"1rem"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e]},t))})]})})]})}),"with-answer"===w&&u&&(0,Se.jsxs)("div",{className:"only-print print-answer-mode",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(D.page1Content.includes("A")||"A"===D.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ub2e8\uc5b4\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#03"})]}),(0,Se.jsx)("div",{className:"print-passage-container",style:{marginTop:"0.9rem",marginBottom:"1.5rem",fontSize:"1rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:e})]}),(D.page1Content.includes("B")||"B"===D.page1Content)&&(0,Se.jsx)("div",{className:"problem-options",style:{marginTop:"0",marginBottom:"1rem"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,u.answerIndex===t&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]},t))}),(D.page1Content.includes("C")||"C"===D.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction-copy",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",border:"2px solid #333",marginTop:"1.2rem",marginBottom:"1.2rem",display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",boxSizing:"border-box",marginLeft:"0",marginRight:"0"},children:(0,Se.jsx)("span",{children:"\ubcf8\ubb38 \ud574\uc11d"})}),(0,Se.jsx)("div",{className:"translation-container",style:{fontSize:"1rem",lineHeight:"1.7",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",marginBottom:"1.2rem"},children:p})]})]})})]}),D.needsSecondPage&&(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(D.page2Content.includes("B")||"B"===D.page2Content)&&(0,Se.jsx)("div",{className:"problem-options",style:{marginTop:"0",marginBottom:"1rem"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,u.answerIndex===t&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]},t))}),(D.page2Content.includes("C")||"C"===D.page2Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction-copy",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",border:"2px solid #333",marginTop:"1.2rem",marginBottom:"1.2rem",display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",boxSizing:"border-box",marginLeft:"0",marginRight:"0"},children:(0,Se.jsx)("span",{children:"\ubcf8\ubb38 \ud574\uc11d"})}),(0,Se.jsx)("div",{className:"translation-container",style:{fontSize:"1rem",lineHeight:"1.7",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",marginBottom:"1.2rem"},children:"C-part1"===D.page2Content?p.substring(0,Math.floor(p.length/2)):p})]})]})})]}),D.needsThirdPage&&(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsx)("div",{className:"quiz-content",children:(D.page3Content.includes("C")||"C"===D.page3Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction-copy",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",border:"2px solid #333",marginTop:"1.2rem",marginBottom:"1.2rem",display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",boxSizing:"border-box",marginLeft:"0",marginRight:"0"},children:(0,Se.jsx)("span",{children:"\ubcf8\ubb38 \ud574\uc11d"})}),(0,Se.jsx)("div",{className:"translation-container",style:{fontSize:"1rem",lineHeight:"1.7",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",marginBottom:"1.2rem"},children:"C-part2"===D.page3Content?p.substring(Math.floor(p.length/2)):p})]})})})]})]})]})}return(0,Se.jsxs)("div",{className:"quiz-generator",onPaste:async e=>{if("capture"!==n)return;const t=e.clipboardData.items;for(let n=0;n<t.length;n++)if(-1!==t[n].type.indexOf("image")){const s=t[n].getAsFile();if(s){l(s),d(URL.createObjectURL(s)),v(!0);try{const e=await M(s);o(e),setTimeout(()=>{N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{v(!1)}}return void e.preventDefault()}e.preventDefault()},children:[(0,Se.jsxs)("div",{className:"generator-header",children:[(0,Se.jsx)("h2",{children:"[\uc720\ud615#03] \ube48\uce78(\ub2e8\uc5b4) \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131"}),(0,Se.jsx)("p",{children:"\uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uac00\uc7a5 \uc911\uc694\ud55c \ub2e8\uc5b4\ub97c \ube48\uce78\uc73c\ub85c \ubc14\uafb8\uace0, \uac1d\uad00\uc2dd 5\uc9c0\uc120\ub2e4 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"input-type-section",children:[(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"capture"===n,onChange:()=>L("capture")}),(0,Se.jsx)("span",{children:"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30"}),(0,Se.jsx)("button",{type:"button",className:"screenshot-help-btn",onClick:e=>{e.preventDefault(),T(!0)},title:"\ud654\uba74 \ucea1\ucc98 \ubc29\ubc95 \ubcf4\uae30",children:"?"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"image"===n,onChange:()=>L("image")}),(0,Se.jsx)("span",{children:"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \ud30c\uc77c \ucca8\ubd80"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"text"===n,onChange:()=>L("text")}),(0,Se.jsx)("span",{children:"\u270d\ufe0f \uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30"})]})]}),"capture"===n&&(0,Se.jsxs)("div",{className:"input-guide".concat(k?" paste-focused":""),tabIndex:0,onClick:()=>S(!0),onFocus:()=>S(!0),onBlur:()=>S(!1),children:[(0,Se.jsx)("div",{className:"drop-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("div",{className:"drop-text",children:"\uc5ec\uae30\uc5d0 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc73c\uc138\uc694"}),(0,Se.jsxs)("div",{className:"drop-desc",children:["\ud074\ub9ad \ub610\ub294 Tab \ud6c4 ",(0,Se.jsx)("b",{children:"Ctrl+V"}),"\ub85c \ucea1\ucc98 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),c&&(0,Se.jsx)("div",{className:"preview-row",children:(0,Se.jsx)("img",{src:c,alt:"\ucea1\ucc98 \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"})}),f&&(0,Se.jsx)("div",{style:{color:"#6a5acd",fontWeight:600,marginTop:"0.7rem"},children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),"image"===n&&(0,Se.jsx)("div",{className:"input-guide",children:(0,Se.jsxs)("div",{className:"file-upload-row",children:[(0,Se.jsxs)("label",{htmlFor:"blank-quiz-image",className:"file-upload-btn",children:["\ud30c\uc77c \uc120\ud0dd",(0,Se.jsx)("input",{id:"blank-quiz-image",type:"file",accept:"image/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){l(n),d(URL.createObjectURL(n)),v(!0);try{const e=await M(n);o(e),setTimeout(()=>{N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{v(!1)}}},style:{display:"none"}})]}),(0,Se.jsx)("span",{className:"file-upload-status",children:a?a.name:"\uc120\ud0dd\ub41c \ud30c\uc77c \uc5c6\uc74c"}),c&&(0,Se.jsx)("img",{src:c,alt:"\uc5c5\ub85c\ub4dc \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"}),f&&(0,Se.jsx)("div",{className:"loading-text",children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]})}),(0,Se.jsxs)("div",{className:"input-section",children:[(0,Se.jsxs)("div",{className:"input-label-row",children:[(0,Se.jsx)("label",{htmlFor:"blank-quiz-text",className:"input-label",children:"\uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30:"}),i.length<100&&(0,Se.jsx)("span",{className:"warning",children:"\u26a0\ufe0f \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 \ub354 \uc88b\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("textarea",{id:"blank-quiz-text",ref:N,value:i,onChange:e=>{o(e.target.value),N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},placeholder:"\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc9c1\uc811 \ubd99\uc5ec\ub123\uc5b4 \uc8fc\uc138\uc694. \ucd5c\uc18c 100\uc790 \uc774\uc0c1 \uad8c\uc7a5\ud569\ub2c8\ub2e4.",className:"text-input",rows:8,style:{overflow:"hidden",resize:"none"},disabled:"image"===n&&!i}),(0,Se.jsx)("div",{className:"text-info",children:(0,Se.jsxs)("span",{children:["\uae00\uc790 \uc218: ",i.length,"\uc790"]})})]}),(0,Se.jsx)("button",{onClick:async()=>{if(console.log("\ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778:",{userData:e,uid:null===e||void 0===e?void 0:e.uid,loading:t}),t)return void alert("\ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if(!e||!e.uid)return console.error("\ub85c\uadf8\uc778 \uc0c1\ud0dc \uc624\ub958:",{userData:e,loading:t}),void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.");const n=P.find(e=>"3"===e.id);if(!n)return void alert("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=n.points;R<r?alert("\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. \ud604\uc7ac ".concat(R.toLocaleString(),"P, \ud544\uc694 ").concat(r.toLocaleString(),"P")):(A(r),E(!0))},disabled:f||!i.trim(),className:"generate-button",children:"\uc5b4\ud718(\ube48\uce78) \ubb38\uc81c \uc0dd\uc131\ud558\uae30"}),(f||y)&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("span",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:y?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":"\ud83d\udccb \ubb38\uc81c \uc0dd\uc131 \uc911..."})]})}),(0,Se.jsx)(yo,{isOpen:C,onClose:()=>E(!1),onConfirm:()=>{E(!1),V()},workTypeName:"\uc5b4\ud718(\ube48\uce78) \ubb38\uc81c \uc0dd\uc131",pointsToDeduct:I,userCurrentPoints:R,remainingPoints:R-I}),(0,Se.jsx)(go,{isOpen:_,onClose:()=>T(!1)})]})},Io=()=>{const{userData:e,loading:t}=Te(),[n,s]=(0,r.useState)("text"),[i,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)("none"),x=(0,r.useRef)(null),[b,w]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[k,S]=((0,r.useRef)(null),(0,r.useState)(!1)),[_,T]=(0,r.useState)(!1),[C,E]=(0,r.useState)(!1),[I,A]=(0,r.useState)(!1),[R,O]=(0,r.useState)(!1),[P,F]=(0,r.useState)(!1),[D,z]=(0,r.useState)(0),[L,M]=(0,r.useState)(0),[B,U]=(0,r.useState)([]),W=()=>{if(!u||!u.replacements||0===u.replacements.length)return(0,Se.jsx)("div",{style:{textAlign:"center",color:"#666",fontStyle:"italic"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."});const e=u.replacements.length,t=Math.ceil(e/2);return(0,Se.jsxs)("table",{className:"replacements-table",children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"\uc6d0\ub798 \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uc6d0\ub798 \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4"})]})}),(0,Se.jsx)("tbody",{children:Array.from({length:t},(e,t)=>{const n=u.replacements[2*t],r=u.replacements[2*t+1];return(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{children:n&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"original-word",children:n.original}),(0,Se.jsxs)("span",{className:"original-meaning",children:[" (",n.originalMeaning,")"]})]})}),(0,Se.jsx)("td",{children:n&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"replacement-word",children:n.replacement}),(0,Se.jsxs)("span",{className:"replacement-meaning",children:[" (",n.replacementMeaning,")"]})]})}),(0,Se.jsx)("td",{children:r&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"original-word",children:r.original}),(0,Se.jsxs)("span",{className:"original-meaning",children:[" (",r.originalMeaning,")"]})]})}),(0,Se.jsx)("td",{children:r&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"replacement-word",children:r.replacement}),(0,Se.jsxs)("span",{className:"replacement-meaning",children:[" (",r.replacementMeaning,")"]})]})})]},t)})})]})};(0,r.useEffect)(()=>{u&&(console.log("\ud83c\udfaf \ud034\uc988 \ub370\uc774\ud130 \uac10\uc9c0, \ud398\uc774\uc9c0 \ubd84\ud560 \uacc4\uc0b0 \uc2dc\uc791"),(async()=>{if(u){console.log("\ud83d\udd04 \ud398\uc774\uc9c0 \ubd84\ud560 \uacc4\uc0b0\uc744 \uc2dc\uc791\ud569\ub2c8\ub2e4..."),A(!0);try{const e=1.5,t=37.8*(21-2*e),n=37.8*(29.7-2*e-1.5);console.log("\ud83d\udccf A4 \ud398\uc774\uc9c0 \ud06c\uae30: ".concat(t,"px \xd7 ").concat(n,"px"));const r=document.createElement("div");r.style.cssText="\n        position: absolute;\n        top: -9999px;\n        left: -9999px;\n        width: ".concat(t,"px;\n        height: auto;\n        padding: 0;\n        margin: 0;\n        box-sizing: border-box;\n        font-family: 'Noto Sans KR', Arial, sans-serif;\n        font-size: 16px;\n        line-height: 1.7;\n        background: white;\n        visibility: hidden;\n        pointer-events: none;\n      "),document.body.appendChild(r);const s=document.createElement("div");s.style.cssText="\n        width: 100%;\n        padding: 0;\n        margin: 0;\n        box-sizing: border-box;\n      ";const i=document.createElement("div");i.style.cssText="\n        font-weight: 800;\n        font-size: 16px;\n        background: #222;\n        color: #fff;\n        padding: 11px 8px;\n        border-radius: 8px;\n        margin-bottom: 19px;\n        width: 100%;\n        box-sizing: border-box;\n      ",i.textContent="\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694";const o=document.createElement("div");o.style.cssText="\n        font-size: 14px;\n        padding: 16px;\n        background: #fff3cd;\n        border-radius: 8px;\n        font-family: inherit;\n        color: #222;\n        line-height: 1.7;\n        box-sizing: border-box;\n        word-wrap: break-word;\n        margin: 0;\n      ",o.textContent=u.modifiedText,s.appendChild(i),s.appendChild(o),r.appendChild(s),await new Promise(e=>setTimeout(e,100));const a=s.scrollHeight;console.log("\ud83d\udccf 1\ud398\uc774\uc9c0 \ub192\uc774 \uc0c1\uc138 \ubd84\uc11d:"),console.log("- \ubb38\uc81c\uc81c\ubaa9 \ub192\uc774: ".concat(i.scrollHeight,"px")),console.log("- \uc601\uc5b4\ubcf8\ubb38 \ub192\uc774: ".concat(o.scrollHeight,"px")),console.log("- 1\ud398\uc774\uc9c0 \ucd1d \ub192\uc774: ".concat(a,"px"));const l=document.createElement("div");l.style.cssText="\n        width: 100%;\n        padding: 0;\n        margin: 0;\n        box-sizing: border-box;\n      ";const c=document.createElement("div");c.style.cssText="\n        font-weight: 800;\n        font-size: 16px;\n        background: #222;\n        color: #fff;\n        padding: 11px 8px;\n        border-radius: 8px;\n        margin-bottom: 8px;\n        margin-top: 16px;\n        width: 100%;\n        box-sizing: border-box;\n      ",c.textContent="\uad50\uccb4\ub41c \ub2e8\uc5b4\ub4e4";const d=document.createElement("div");d.style.cssText="\n        font-size: 13px;\n        padding: 16px;\n        background: #f8f9fa;\n        border-radius: 8px;\n        font-family: inherit;\n        color: #222;\n        line-height: 1.7;\n        box-sizing: border-box;\n      ";let h='<table style="width: 100%; border-collapse: collapse; background: white; border: 1px solid #ddd;">';if(h+="<thead><tr>",h+='<th style="background: #f5f5f5; color: #333; font-weight: 600; padding: 6px 12px; text-align: center; font-size: 13px; border: 1px solid #ddd;">\uc6d0\ub798 \ub2e8\uc5b4</th>',h+='<th style="background: #f5f5f5; color: #333; font-weight: 600; padding: 6px 12px; text-align: center; font-size: 13px; border: 1px solid #ddd;">\uad50\uccb4\ub41c \ub2e8\uc5b4</th>',h+='<th style="background: #f5f5f5; color: #333; font-weight: 600; padding: 6px 12px; text-align: center; font-size: 13px; border: 1px solid #ddd;">\uc6d0\ub798 \ub2e8\uc5b4</th>',h+='<th style="background: #f5f5f5; color: #333; font-weight: 600; padding: 6px 12px; text-align: center; font-size: 13px; border: 1px solid #ddd;">\uad50\uccb4\ub41c \ub2e8\uc5b4</th>',h+="</tr></thead><tbody>",u.replacements&&u.replacements.length>0){const e=Math.ceil(u.replacements.length/2);for(let t=0;t<e;t++){const e=u.replacements[2*t],n=u.replacements[2*t+1];h+="<tr>",h+=e?'<td style="padding: 6px 12px; border: 1px solid #ddd; text-align: left; vertical-align: middle; font-size: 13px;">\n              <span style="font-weight: 600; color: #d97706;">'.concat(e.original,'</span>\n              <span style="color: #666; font-style: italic;"> (').concat(e.originalMeaning,')</span>\n            </td>\n            <td style="padding: 6px 12px; border: 1px solid #ddd; text-align: left; vertical-align: middle; font-size: 13px;">\n              <span style="font-weight: 600; color: #1976d2;">').concat(e.replacement,'</span>\n              <span style="color: #1976d2; font-style: italic;"> (').concat(e.replacementMeaning,")</span>\n            </td>"):'<td style="padding: 6px 12px; border: 1px solid #ddd;"></td><td style="padding: 6px 12px; border: 1px solid #ddd;"></td>',h+=n?'<td style="padding: 6px 12px; border: 1px solid #ddd; text-align: left; vertical-align: middle; font-size: 13px;">\n              <span style="font-weight: 600; color: #d97706;">'.concat(n.original,'</span>\n              <span style="color: #666; font-style: italic;"> (').concat(n.originalMeaning,')</span>\n            </td>\n            <td style="padding: 6px 12px; border: 1px solid #ddd; text-align: left; vertical-align: middle; font-size: 13px;">\n              <span style="font-weight: 600; color: #1976d2;">').concat(n.replacement,'</span>\n              <span style="color: #1976d2; font-style: italic;"> (').concat(n.replacementMeaning,")</span>\n            </td>"):'<td style="padding: 6px 12px; border: 1px solid #ddd;"></td><td style="padding: 6px 12px; border: 1px solid #ddd;"></td>',h+="</tr>"}}h+="</tbody></table>",d.innerHTML=h,l.appendChild(c),l.appendChild(d),r.appendChild(l),await new Promise(e=>setTimeout(e,100));const p=l.scrollHeight,m=document.createElement("div");m.style.cssText="\n        font-size: 16px;\n        padding: 16px;\n        background: #F1F8E9;\n        border-radius: 8px;\n        font-family: inherit;\n        color: #222;\n        line-height: 1.7;\n        box-sizing: border-box;\n        word-wrap: break-word;\n        width: 100%;\n        max-width: 100%;\n        overflow-wrap: break-word;\n        white-space: normal;\n        margin: 0;\n      ",m.textContent=u.translation||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911...",r.appendChild(m),await new Promise(e=>setTimeout(e,100));const f=m.scrollHeight;document.body.removeChild(r);let g=!1,y=!1;const v=a,x=p,b=f,w=n;console.log("\ud83d\udccf \uce21\uc815\ub41c \ub192\uc774:"),console.log("- A (\ubb38\uc81c+\ubcf8\ubb38): ".concat(v,"px")),console.log("- B (\uad50\uccb4\ub41c\ub2e8\uc5b4\ub4e4): ".concat(x,"px")),console.log("- C (\ud55c\uae00\ud574\uc11d): ".concat(b,"px")),console.log("- \uc0ac\uc6a9 \uac00\ub2a5 \uacf5\uac04: ".concat(w,"px"));const j=v+x+b;console.log("\ud83d\udd0d \ud398\uc774\uc9c0 \ubd84\ud560 \ub85c\uc9c1 \ubd84\uc11d:"),console.log("- A + B + C = ".concat(v," + ").concat(x," + ").concat(b," = ").concat(j,"px")),console.log("- A + B = ".concat(v," + ").concat(x," = ").concat(v+x,"px")),console.log("- B + C = ".concat(x," + ").concat(b," = ").concat(x+b,"px")),j<=w?(g=!1,y=!1,O(!0),console.log("\u2705 1\ud398\uc774\uc9c0: A+B+C \ubaa8\ub450 1\ud398\uc774\uc9c0\uc5d0 \ub4e4\uc5b4\uac11\ub2c8\ub2e4")):v+x<=w?(g=!0,y=!1,O(!0),console.log("\u2705 2\ud398\uc774\uc9c0: 1\ud398\uc774\uc9c0(A+B), 2\ud398\uc774\uc9c0(C)")):v<=w&&x+b<=w?(g=!0,y=!1,O(!1),console.log("\u2705 2\ud398\uc774\uc9c0: 1\ud398\uc774\uc9c0(A), 2\ud398\uc774\uc9c0(B+C)")):(g=!0,y=!0,O(!1),console.log("\u2705 3\ud398\uc774\uc9c0: 1\ud398\uc774\uc9c0(A), 2\ud398\uc774\uc9c0(B), 3\ud398\uc774\uc9c0(C)")),T(g),E(y),console.log("=== \ucd5c\uc885 \ud398\uc774\uc9c0 \ubd84\ud560 \uacb0\uacfc ==="),console.log("2\ud398\uc774\uc9c0 \ud544\uc694: ".concat(g)),console.log("3\ud398\uc774\uc9c0 \ud544\uc694: ".concat(y)),console.log("\u2705 \uc0c1\ud0dc \uc124\uc815 \uc644\ub8cc")}catch(e){console.error("\ud398\uc774\uc9c0 \ub808\uc774\uc544\uc6c3 \uacc4\uc0b0 \uc624\ub958:",e),T(!1),E(!1)}finally{A(!1)}}else console.log("\u274c \ud034\uc988 \ub370\uc774\ud130\uac00 \uc5c6\uc5b4\uc11c \ud398\uc774\uc9c0 \ubd84\ud560 \uacc4\uc0b0\uc744 \uac74\ub108\ub701\ub2c8\ub2e4.")})())},[u]),(0,r.useEffect)(()=>{t||(async()=>{try{const n=await(0,vo.getWorkTypePoints)();if(U(n),!t&&e&&e.uid){const t=await(0,vo.MC)(e.uid);M(t)}}catch(n){console.error("\ud3ec\uc778\ud2b8 \ucd08\uae30\ud654 \uc624\ub958:",n)}})()},[null===e||void 0===e?void 0:e.uid,t]),(0,r.useEffect)(()=>{window.scrollTo(0,0)},[u]);const V=e=>{s(e),o(""),l(null),d(null),h(null)};async function q(e){const t=await(n=e,new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)}));var n;const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"\uc601\uc5b4\ubb38\uc81c\ub85c \uc0ac\uc6a9\ub418\ub294 \ubcf8\ubb38\uc774\uc57c.\n\uc774 \uc774\ubbf8\uc9c0\uc758 \ub0b4\uc6a9\uc744 \uc218\uc791\uc5c5\uc73c\ub85c \uc815\ud655\ud788 \uc77d\uace0, \uc601\uc5b4 \ubcf8\ubb38\ub9cc \ucd94\ub824\ub0b4\uc11c \ubcf4\uc5ec\uc918.\n\uae00\uc790\ub294 \uc778\uc1c4\uae00\uc528\uccb4 \uc774\uc678\uc5d0 \uc190\uae00\uc528\ub098 \uc6d0, \ubc11\uc904 \ub4f1 \ud45c\uc2dc\ub418\uc5b4\uc788\ub294 \uac83\uc740 \ubb34\uc2dc\ud574. \n\ubcf8\ubb38\uc911\uc5d0 \uc6d0\ubb38\uc790 1, 2, 3... \ub4f1\uc73c\ub85c \ud45c\uc2dc\ub41c\uac74 \uc81c\uac70\ud574\uc918. \n\uc6d0\ubb38\uc790 \uc81c\uac70\ud6c4 \uc904\uc744 \ubc14\uafb8\uac70\ub098 \ubb38\ub2e8\uc744 \ubc14\uafb8\uc9c0\ub9d0\uace0, \uc804\uccb4\uac00 \ud55c \ubb38\ub2e8\uc73c\ub85c \uad6c\uc131\ud574\uc918. \n\uc601\uc5b4 \ubcf8\ubb38\ub9cc, \uc544\ubb34\ub7f0 \uc124\uba85\uc774\ub098 \uc548\ub0b4\ubb38 \uc5c6\uc774, \ud55c \ubb38\ub2e8\uc73c\ub85c\ub9cc \ucd9c\ub825\ud574\uc918."},{type:"image_url",image_url:{url:t}}]}],max_tokens:2048})});return(await r.json()).choices[0].message.content.trim()}async function H(e){const t="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";try{const n=await async function(e,t){try{console.log("Step 1: \ubb38\uc7a5 \ubd84\ub9ac \uc911...");const n=await async function(e,t){const n="You will receive an English passage. Split it into individual sentences.\nUse the following rules:\n- End of sentence is marked by '.', '?', or '!' followed by a space or newline.\n- Keep sentence punctuation.\n- Do not merge or break sentences.\n\nIMPORTANT: Return ONLY valid JSON. No explanations, no markdown, no code blocks.\n\nPassage:\n".concat(e,'\n\nRequired JSON format:\n{\n  "sentences": ["Sentence 1.", "Sentence 2?", "Sentence 3!"]\n}'),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:n}],max_tokens:1e3,temperature:0})});if(!r.ok)throw new Error("API \uc694\uccad \uc2e4\ud328: ".concat(r.status));const s=await r.json();if(!s.choices||!s.choices[0]||!s.choices[0].message)throw new Error("AI\ub85c\ubd80\ud130 \uc62c\ubc14\ub978 \uc751\ub2f5\uc744 \ubc1b\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");const i=s.choices[0].message.content,o=i.match(/\{[\s\S]*\}/);if(!o)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");try{let e=o[0].replace(/```json/g,"").replace(/```/g,"").replace(/\n/g," ").trim();const t=JSON.parse(e);if(!t.sentences||!Array.isArray(t.sentences))throw console.error("AI \uc751\ub2f5 \uad6c\uc870:",t),new Error("AI \uc751\ub2f5\uc5d0 sentences \ubc30\uc5f4\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");return t.sentences}catch(a){throw console.error("\uc6d0\ubcf8 JSON:",o[0]),console.error("\uc815\ub9ac\ub41c JSON:",o[0].replace(/```json/g,"").replace(/```/g,"").replace(/\n/g," ").trim()),new Error("JSON \ud30c\uc2f1 \uc2e4\ud328: ".concat(a))}}(e,t);console.log("\ubd84\ub9ac\ub41c \ubb38\uc7a5 \uc218: ".concat(n.length)),console.log("Step 2: \ubb38\uc7a5\ubcc4 \ub2e8\uc5b4 \uc120\ud0dd \uc911...");const r=[],s=new Set;for(let e=0;e<n.length;e++){const i=Array.from(s),o=await K(n[e],e,t,i);if(s.has(o.original.toLowerCase())){console.warn('\uc911\ubcf5 \ub2e8\uc5b4 \uac10\uc9c0: "'.concat(o.original,'" (\ubb38\uc7a5 ').concat(e+1,")"));const a=await K(n[e],e,t,i);s.has(a.original.toLowerCase())&&console.warn('\uc7ac\uc2dc\ub3c4 \ud6c4\uc5d0\ub3c4 \uc911\ubcf5: "'.concat(a.original,'" (\ubb38\uc7a5 ').concat(e+1,")")),r.push(a),s.add(a.original.toLowerCase()),console.log("\ubb38\uc7a5 ".concat(e+1,': "').concat(a.original,'" \uc120\ud0dd (\uc7ac\uc2dc\ub3c4)'))}else r.push(o),s.add(o.original.toLowerCase()),console.log("\ubb38\uc7a5 ".concat(e+1,': "').concat(o.original,'" \uc120\ud0dd'))}console.log("Step 3: \uc720\uc758\uc5b4 \ucd94\ucc9c \uc911...");const i=[];for(const e of r){const n=await J(e.original,t);i.push(n),console.log('"'.concat(n.original,'" \u2192 "').concat(n.replacement,'"'))}console.log("Step 4: \ubcf8\ubb38 \uce58\ud658 \uc911...");const o=function(e,t,n){let r=e,s=0;for(let i=0;i<t.length;i++){const e=t[i],o=n[i];if(!o)continue;const a=r.indexOf(e,s);if(-1===a){console.warn("\ubb38\uc7a5 ".concat(i+1,'\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc74c: "').concat(e.substring(0,50),'..."'));continue}const l=a+e.length,c=r.substring(a,l),d=o.original.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),u=new RegExp("\\b".concat(d,"\\b"),"gi"),h=c,p=c.replace(u,o.replacement);h!==p?(console.log("\ubb38\uc7a5 ".concat(i+1,' \uad50\uccb4 \uc131\uacf5: "').concat(o.original,'" \u2192 "').concat(o.replacement,'"')),r=r.substring(0,a)+p+r.substring(l)):console.warn("\ubb38\uc7a5 ".concat(i+1,' \uad50\uccb4 \uc2e4\ud328: "').concat(o.original,'"\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c')),s=a+p.length}return r}(e,n,i);if(console.log("Step 5: \uac80\uc99d \uc911..."),!function(e,t,n){let r=0,s=n.length;for(const o of n)t.toLowerCase().includes(o.replacement.toLowerCase())?r++:console.warn('\ub2e8\uc5b4 "'.concat(o.original,'"\uc774 "').concat(o.replacement,'"\ub85c \uad50\uccb4\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.'));const i=r/s;return console.log("\uad50\uccb4 \uc131\uacf5\ub960: ".concat(r,"/").concat(s," (").concat((100*i).toFixed(1),"%)")),i>=.8}(0,o,i))throw new Error("\uac80\uc99d \uc2e4\ud328: \uc77c\ubd80 \ub2e8\uc5b4\uac00 \uc81c\ub300\ub85c \uad50\uccb4\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");console.log("Step 6: \ubcf8\ubb38 \ubc88\uc5ed \uc911...");const a=await async function(e,t){const n='Translate the following English text to Korean. \nProvide a natural, accurate Korean translation that maintains the original meaning and context.\n\nIMPORTANT: Return ONLY the Korean translation. No explanations, no markdown, no code blocks.\n\nEnglish text: "'.concat(e,'"\n\nKorean translation:'),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:n}],max_tokens:1e3,temperature:.3})});if(!r.ok)throw new Error("API \uc694\uccad \uc2e4\ud328: ".concat(r.status));const s=await r.json();if(!s.choices||!s.choices[0]||!s.choices[0].message)throw new Error("AI\ub85c\ubd80\ud130 \uc62c\ubc14\ub978 \uc751\ub2f5\uc744 \ubc1b\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");const i=s.choices[0].message.content.trim();if(!i||i.length<10)throw new Error("\ubc88\uc5ed \uacb0\uacfc\uac00 \ub108\ubb34 \uc9e7\uac70\ub098 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4.");return i}(e,t);return console.log("\ubc88\uc5ed \uc644\ub8cc:",a.substring(0,50)+"..."),{title:"\ub3c5\ud574 \ubb38\uc81c",originalText:e,modifiedText:o,replacements:i,translation:a}}catch(n){if("TypeError"===n.name&&n.message.includes("fetch"))throw new Error("\uc778\ud130\ub137 \uc5f0\uacb0\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694. \ub124\ud2b8\uc6cc\ud06c \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.");throw n}}(e,t);return n}catch(n){throw console.error("Step-by-Step \ucc98\ub9ac \uc2e4\ud328:",n),n}}async function K(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const s=r.length>0?"\n\nALREADY USED WORDS (do not select these): ".concat(r.join(", ")):"",i="You are selecting one important word from sentence #".concat(t+1,' below.\n\nRULES:\n1. Only ONE word should be selected. Never more than one.\n2. Select a word that is NOT already used in previous sentences.\n3. Choose a meaningful word that would be good for vocabulary learning.\n\nIMPORTANT: Return ONLY valid JSON. No explanations, no markdown, no code blocks.\n\nSentence: "').concat(e,'"').concat(s,'\n\nRequired JSON format:\n{\n  "index": ').concat(t,',\n  "original": "selectedWord"\n}'),o=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:i}],max_tokens:100,temperature:0})});if(!o.ok)throw new Error("API \uc694\uccad \uc2e4\ud328: ".concat(o.status));const a=await o.json();if(!a.choices||!a.choices[0]||!a.choices[0].message)throw new Error("AI\ub85c\ubd80\ud130 \uc62c\ubc14\ub978 \uc751\ub2f5\uc744 \ubc1b\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");const l=a.choices[0].message.content.match(/\{[\s\S]*\}/);if(!l)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");try{let e=l[0].replace(/```json/g,"").replace(/```/g,"").replace(/\n/g," ").trim();const t=JSON.parse(e);if(!t.original||"string"!==typeof t.original)throw console.error("AI \uc751\ub2f5 \uad6c\uc870:",t),new Error("AI \uc751\ub2f5\uc5d0 original \ud544\ub4dc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");return t}catch(c){throw console.error("\uc6d0\ubcf8 JSON:",l[0]),console.error("\uc815\ub9ac\ub41c JSON:",l[0].replace(/```json/g,"").replace(/```/g,"").replace(/\n/g," ").trim()),new Error("JSON \ud30c\uc2f1 \uc2e4\ud328: ".concat(c))}}async function J(e,t){const n='Provide one appropriate synonym for the word "'.concat(e,'" used in a reading comprehension context.\n\nIMPORTANT: Return ONLY valid JSON. No explanations, no markdown, no code blocks.\n\nRequired JSON format:\n{\n  "original": "').concat(e,'",\n  "replacement": "synonym_word",\n  "originalMeaning": "\ud55c\uad6d\uc5b4 \ub73b",\n  "replacementMeaning": "\ud55c\uad6d\uc5b4 \ub73b"\n}'),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:n}],max_tokens:200,temperature:0})});if(!r.ok)throw new Error("API \uc694\uccad \uc2e4\ud328: ".concat(r.status));const s=await r.json();if(!s.choices||!s.choices[0]||!s.choices[0].message)throw new Error("AI\ub85c\ubd80\ud130 \uc62c\ubc14\ub978 \uc751\ub2f5\uc744 \ubc1b\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");const i=s.choices[0].message.content.match(/\{[\s\S]*\}/);if(!i)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");try{let e=i[0].replace(/```json/g,"").replace(/```/g,"").replace(/\n/g," ").trim();const t=JSON.parse(e);if(!t.original||!t.replacement||!t.originalMeaning||!t.replacementMeaning)throw console.error("AI \uc751\ub2f5 \uad6c\uc870:",t),new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");return t}catch(o){throw console.error("\uc6d0\ubcf8 JSON:",i[0]),console.error("\uc815\ub9ac\ub41c JSON:",i[0].replace(/```json/g,"").replace(/```/g,"").replace(/\n/g," ").trim()),new Error("JSON \ud30c\uc2f1 \uc2e4\ud328: ".concat(o))}}const Y=async()=>{if(null===e||void 0===e||!e.uid)return;let t="";m(!0);let r=0;try{const o=B.find(e=>"2"===e.id);if(!o)throw new Error("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const l=await(0,vo.ev)(e.uid,"2",o.name,e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790");if(!l.success)throw new Error(l.error||"\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");if(r=l.deductedPoints,M(l.remainingPoints),"text"===n){if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}else if("image"===n&&a)try{t=await q(a)}catch(s){throw new Error("\uc774\ubbf8\uc9c0 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc2e4\ud328: ".concat(s.message||"\uc774\ubbf8\uc9c0\uc5d0\uc11c \ud14d\uc2a4\ud2b8\ub97c \ucd94\ucd9c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))}else{if("capture"!==n)throw new Error("\uc774\ubbf8\uc9c0\ub97c \ucca8\ubd80\ud574\uc8fc\uc138\uc694.");if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}if(!t.trim())throw new Error("\ucd94\ucd9c\ub41c \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\ub978 \uc774\ubbf8\uc9c0\ub97c \uc2dc\ub3c4\ud558\uac70\ub098 \ud14d\uc2a4\ud2b8\ub97c \uc9c1\uc811 \uc785\ub825\ud574\uc8fc\uc138\uc694.");const c=await H(t);h(c)}catch(o){if(r>0&&null!==e&&void 0!==e&&e.uid)try{await(0,vo.Lw)(e.uid,r,"\ub3c5\ud574 \ubb38\uc81c \uc0dd\uc131",e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790","\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\ub85c \uc778\ud55c \ud3ec\uc778\ud2b8 \ud658\ubd88"),M(e=>e+r)}catch(l){console.error("\ud3ec\uc778\ud2b8 \ud658\ubd88 \uc624\ub958:",l)}let t="\uc54c \uc218 \uc5c6\ub294 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.";o.message?t=o.message:"string"===typeof o&&(t=o),alert("\u274c \ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\n\n".concat(t,"\n\n\ucc28\uac10\ub41c \ud3ec\uc778\ud2b8\ub294 \ud658\ubd88\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}finally{m(!1)}},Q=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),v("no-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),v("none")},1e3)},100)},G=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),v("with-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),v("none")},1e3)},100)},$=()=>{h(null),o(""),l(null),d(null),w(!1)},X=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||0===t.length)return e;const r=e.split(/(?<=[.!?])\s+/).filter(e=>e.trim().length>0);let s=[],i=0,o=0;const a=new Set;for(let l=0;l<r.length;l++){const c=r[l],d=e.indexOf(c,o);if(-1===d){s.push(c),l<r.length-1&&s.push(" ");continue}const u=d+c.length;let h=null;for(const e of t){const t=n?e.original:e.replacement;if(!t)continue;const r="".concat(e.original,"-").concat(e.replacement);if(!a.has(r)&&c.toLowerCase().includes(t.toLowerCase())){const n=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");if(new RegExp("\\b".concat(n,"\\b"),"i").test(c)){h=e,a.add(r);break}}}if(!h){s.push(c),l<r.length-1&&s.push(" "),o=u;continue}const p=n?h.original:h.replacement;if(!p){s.push(c),l<r.length-1&&s.push(" "),o=u;continue}const m=p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),f=new RegExp("\\b".concat(m,"\\b"),"i").exec(c);f?(f.index>0&&s.push(c.substring(0,f.index)),s.push((0,Se.jsx)("span",{style:{textDecoration:"underline",fontWeight:"bold",color:"#2d5aa0"},children:f[0]},i++)),f.index+f[0].length<c.length&&s.push(c.substring(f.index+f[0].length))):s.push(c),l<r.length-1&&s.push(" "),o=u}return s.length>0?s:e},Z=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||0===t.length)return e;const r=e.split(/(?<=[.!?])\s+/).filter(e=>e.trim().length>0);let s=[],i=0;const o=new Set;for(let a=0;a<r.length;a++){const l=r[a],c=e.indexOf(l,i);if(-1===c){s.push(l);continue}const d=c+l.length;let u=null;for(const e of t){const t=n?e.original:e.replacement;if(!t)continue;const r="".concat(e.original,"-").concat(e.replacement);if(!o.has(r)&&l.toLowerCase().includes(t.toLowerCase())){const n=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");if(new RegExp("\\b".concat(n,"\\b"),"i").test(l)){u=e,o.add(r);break}}}if(!u){s.push(l),i=d;continue}const h=n?u.original:u.replacement;if(!h){s.push(l),i=d;continue}const p=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),m=new RegExp("\\b".concat(p,"\\b"),"i"),f=l.replace(m,"<u><strong>$&</strong></u>");s.push(f),i=d}return s.join(" ")};return u?(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("div",{className:"quiz-display no-print",children:[(0,Se.jsxs)("div",{className:"quiz-header",children:[(0,Se.jsx)("h2",{className:"no-print",children:"#02. \ub3c5\ud574 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"quiz-header-buttons no-print",children:[(0,Se.jsx)("button",{onClick:$,className:"reset-button",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\uc0c8 \ubb38\uc81c \ub9cc\ub4e4\uae30"}),(0,Se.jsxs)("button",{onClick:Q,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsx)("span",{children:"\uc778\uc1c4 (\ubb38\uc81c)"})]}),(0,Se.jsxs)("button",{onClick:G,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 6px rgba(240, 147, 251, 0.25)"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsxs)("span",{children:["\uc778\uc1c4 (",(0,Se.jsx)("span",{style:{color:"#FFD600"},children:"\uc815\ub2f5"}),")"]})]})]})]}),(0,Se.jsx)("div",{className:"problem-title work-02-problem-title",style:{fontWeight:"800 !important",fontSize:"1rem !important",background:"#222 !important",color:"#fff !important",padding:"0.2rem 0.4rem !important",borderRadius:"3px !important",marginBottom:"0.3rem !important",display:"block !important",width:"100% !important"},children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694"}),(0,Se.jsx)("h3",{children:"\uc6d0\ubcf8 \ubcf8\ubb38:"}),(0,Se.jsx)("div",{className:"text-content no-print",style:{padding:"1.2rem",marginBottom:"1.5rem",borderRadius:"8px",border:"2px solid #ddd"},children:X(u.originalText,u.replacements,!0)}),(0,Se.jsx)("h3",{children:"\ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694."}),(0,Se.jsx)("div",{className:"text-content no-print",style:{background:"#fff3cd",padding:"1.2rem",borderRadius:"8px",marginBottom:"1.5rem"},children:X(u.modifiedText,u.replacements,!1)}),(0,Se.jsx)("h3",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\ub4e4:"}),u.replacements&&u.replacements.length>0?(0,Se.jsxs)("table",{className:"replacements-table no-print",children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"\uc6d0\ub798 \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uc6d0\ub798 \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4"})]})}),(0,Se.jsx)("tbody",{children:Array.from({length:Math.ceil(u.replacements.length/2)},(e,t)=>(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{children:u.replacements[2*t]&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"original-word",children:u.replacements[2*t].original}),(0,Se.jsxs)("span",{className:"original-meaning",children:[" (",u.replacements[2*t].originalMeaning,")"]})]})}),(0,Se.jsx)("td",{children:u.replacements[2*t]&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"replacement-word",children:u.replacements[2*t].replacement}),(0,Se.jsxs)("span",{className:"replacement-meaning",children:[" (",u.replacements[2*t].replacementMeaning,")"]})]})}),(0,Se.jsx)("td",{children:u.replacements[2*t+1]&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"original-word",children:u.replacements[2*t+1].original}),(0,Se.jsxs)("span",{className:"original-meaning",children:[" (",u.replacements[2*t+1].originalMeaning,")"]})]})}),(0,Se.jsx)("td",{children:u.replacements[2*t+1]&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"replacement-word",children:u.replacements[2*t+1].replacement}),(0,Se.jsxs)("span",{className:"replacement-meaning",children:[" (",u.replacements[2*t+1].replacementMeaning,")"]})]})})]},t))})]}):(0,Se.jsx)("div",{className:"no-print",style:{textAlign:"center",color:"#666",fontStyle:"italic"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Se.jsxs)("div",{className:"translation-section no-print",children:[(0,Se.jsx)("h3",{children:"\ubcf8\ubb38 \ud574\uc11d:"}),(0,Se.jsx)("div",{className:"translation-content problem-passage translation",style:{background:"#f1f8e9",padding:"1.2rem",borderRadius:"8px",fontSize:"1rem",transform:"scale(0.9)",transformOrigin:"top left",width:"111.11%"},children:u.translation})]})]}),"no-answer"===y&&(0,Se.jsx)("div",{className:"only-print",children:(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694"}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.63rem",marginBottom:"0.8rem",fontSize:"0.9rem",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},dangerouslySetInnerHTML:{__html:Z(u.modifiedText,u.replacements,!1)}})]})})]})}),"with-answer"===y&&u&&(0,Se.jsx)("div",{className:"only-print print-answer-mode",children:_?C?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694"}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.63rem",marginBottom:"0.8rem",fontSize:"0.9rem",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},dangerouslySetInnerHTML:{__html:Z(u.modifiedText,u.replacements,!1)}})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\ub4e4"}),u.replacements&&u.replacements.length>0?(0,Se.jsx)("div",{children:W()}):(0,Se.jsx)("div",{style:{textAlign:"center",color:"#666",fontStyle:"italic"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%",marginTop:"1.5rem"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{marginTop:"0.63rem",fontSize:"1rem !important",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:u.translation||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."})]})})]})]}):_?R?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694"}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.63rem",marginBottom:"0.8rem",fontSize:"0.9rem",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},dangerouslySetInnerHTML:{__html:Z(u.modifiedText,u.replacements,!1)}}),(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%",marginTop:"1.5rem"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\ub4e4"}),u.replacements&&u.replacements.length>0?(0,Se.jsx)("div",{children:W()}):(0,Se.jsx)("div",{style:{textAlign:"center",color:"#666",fontStyle:"italic"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%",marginTop:"1.5rem"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{marginTop:"0.63rem",fontSize:"1rem !important",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:u.translation||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."})]})})]})]}):(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694"}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.63rem",marginBottom:"0.8rem",fontSize:"0.9rem",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},dangerouslySetInnerHTML:{__html:Z(u.modifiedText,u.replacements,!1)}})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\ub4e4"}),u.replacements&&u.replacements.length>0?(0,Se.jsx)("div",{children:W()}):(0,Se.jsx)("div",{style:{textAlign:"center",color:"#666",fontStyle:"italic"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%",marginTop:"1.5rem"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{marginTop:"0.63rem",fontSize:"1rem !important",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:u.translation||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."})]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694"}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.63rem",marginBottom:"0.8rem",fontSize:"0.9rem",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},dangerouslySetInnerHTML:{__html:Z(u.modifiedText,u.replacements,!1)}}),(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0rem",display:"block",width:"100%",marginTop:"1.5rem"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\ub4e4"}),u.replacements&&u.replacements.length>0?(0,Se.jsx)("div",{style:{marginTop:"0rem"},children:W()}):(0,Se.jsx)("div",{style:{textAlign:"center",color:"#666",fontStyle:"italic"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%",marginTop:"1.5rem"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{marginTop:"0.63rem",fontSize:"1rem !important",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:u.translation||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."})]})})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694"}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.63rem",marginBottom:"0.8rem",fontSize:"0.9rem",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},dangerouslySetInnerHTML:{__html:Z(u.modifiedText,u.replacements,!1)}}),(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0rem",display:"block",width:"100%",marginTop:"1.5rem"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\ub4e4"}),u.replacements&&u.replacements.length>0?(0,Se.jsx)("div",{style:{marginTop:"0rem"},children:W()}):(0,Se.jsx)("div",{style:{textAlign:"center",color:"#666",fontStyle:"italic"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%",marginTop:"1.5rem"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{marginTop:"0.63rem",fontSize:"1rem !important",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:u.translation||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."})]})})]})})]}):(0,Se.jsxs)("div",{className:"quiz-generator",onPaste:async e=>{if("capture"!==n)return;const t=e.clipboardData.items;for(let n=0;n<t.length;n++)if(-1!==t[n].type.indexOf("image")){const s=t[n].getAsFile();if(s){l(s),d(URL.createObjectURL(s)),g(!0);try{const e=await q(s);o(e),setTimeout(()=>{x.current&&(x.current.style.height="auto",x.current.style.height=x.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}return void e.preventDefault()}e.preventDefault()},children:[(0,Se.jsxs)("div",{className:"generator-header",children:[(0,Se.jsx)("h2",{children:"[\uc720\ud615#02] \ub3c5\ud574 \ubb38\uc81c \uc0dd\uc131"}),(0,Se.jsx)("p",{children:"\uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \ubb38\ub9e5\uc0c1 \uc758\ubbf8\uac00 \uc788\ub294 \ub2e8\uc5b4\ub97c \uc120\uc815\ud558\uc5ec, \uc120\uc815\ub41c \ub2e8\uc5b4\uc640 \uac19\uc740 \uc758\ubbf8\ub97c \uac00\uc9c4 \ub2e8\uc5b4\ub85c \uad50\uccb4\ub41c \ubcf8\ubb38\uc744 \ub3c5\ud574\ud558\ub294 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"input-type-section",children:[(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"capture"===n,onChange:()=>V("capture")}),(0,Se.jsx)("span",{children:"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30"}),(0,Se.jsx)("button",{type:"button",className:"screenshot-help-btn",onClick:e=>{e.preventDefault(),S(!0)},title:"\ud654\uba74 \ucea1\ucc98 \ubc29\ubc95 \ubcf4\uae30",children:"?"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"image"===n,onChange:()=>V("image")}),(0,Se.jsx)("span",{children:"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \ud30c\uc77c \ucca8\ubd80"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"text"===n,onChange:()=>V("text")}),(0,Se.jsx)("span",{children:"\u270d\ufe0f \uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30"})]})]}),"capture"===n&&(0,Se.jsxs)("div",{className:"input-guide".concat(b?" paste-focused":""),tabIndex:0,onClick:()=>w(!0),onFocus:()=>w(!0),onBlur:()=>w(!1),children:[(0,Se.jsx)("div",{className:"drop-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("div",{className:"drop-text",children:"\uc5ec\uae30\uc5d0 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc73c\uc138\uc694"}),(0,Se.jsxs)("div",{className:"drop-desc",children:["\ud074\ub9ad \ub610\ub294 Tab \ud6c4 ",(0,Se.jsx)("b",{children:"Ctrl+V"}),"\ub85c \ucea1\ucc98 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),c&&(0,Se.jsx)("div",{className:"preview-row",children:(0,Se.jsx)("img",{src:c,alt:"\ucea1\ucc98 \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"})}),p&&(0,Se.jsx)("div",{style:{color:"#6a5acd",fontWeight:600,marginTop:"0.7rem"},children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),"image"===n&&(0,Se.jsx)("div",{className:"input-guide",children:(0,Se.jsxs)("div",{className:"file-upload-row",children:[(0,Se.jsxs)("label",{htmlFor:"reading-image",className:"file-upload-btn",children:["\ud30c\uc77c \uc120\ud0dd",(0,Se.jsx)("input",{id:"reading-image",type:"file",accept:"image/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){l(n),d(URL.createObjectURL(n)),m(!0);try{const e=await q(n);o(e),setTimeout(()=>{x.current&&(x.current.style.height="auto",x.current.style.height=x.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{m(!1)}}},style:{display:"none"}})]}),(0,Se.jsx)("span",{className:"file-upload-status",children:a?a.name:"\uc120\ud0dd\ub41c \ud30c\uc77c \uc5c6\uc74c"}),c&&(0,Se.jsx)("img",{src:c,alt:"\uc5c5\ub85c\ub4dc \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"}),p&&(0,Se.jsx)("div",{className:"loading-text",children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]})}),(0,Se.jsxs)("div",{className:"input-section",children:[(0,Se.jsxs)("div",{className:"input-label-row",children:[(0,Se.jsx)("label",{htmlFor:"reading-text",className:"input-label",children:"\uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30:"}),i.length<100&&(0,Se.jsx)("span",{className:"warning",children:"\u26a0\ufe0f \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 \ub354 \uc88b\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("textarea",{id:"reading-text",ref:x,value:i,onChange:e=>{o(e.target.value),x.current&&(x.current.style.height="auto",x.current.style.height=x.current.scrollHeight+"px")},placeholder:"\ub3c5\ud574 \ubb38\uc81c\ub97c \ub9cc\ub4e4\uace0 \uc2f6\uc740 \uc601\uc5b4 \ubcf8\ubb38\uc744 \ubd99\uc5ec\ub123\uc5b4 \uc8fc\uc138\uc694. AI\uac00 \uc911\uc694\ud55c \ub2e8\uc5b4/\uc219\uc5b4\ub97c \uc120\uc815\ud558\uc5ec \uc720\uc758\uc5b4\ub85c \uad50\uccb4\ud55c \ub3c5\ud574 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.",className:"text-input",rows:8,style:{overflow:"hidden",resize:"none"},disabled:"image"===n&&!i}),(0,Se.jsx)("div",{className:"text-info",children:(0,Se.jsxs)("span",{children:["\uae00\uc790 \uc218: ",i.length,"\uc790"]})})]}),(0,Se.jsx)("button",{onClick:async()=>{if(t)return void alert("\ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if(!e||!e.uid)return void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.");const n=B.find(e=>"2"===e.id);if(!n)return void alert("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=n.points;L<r?alert("\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. \ud604\uc7ac ".concat(L.toLocaleString(),"P, \ud544\uc694 ").concat(r.toLocaleString(),"P")):(z(r),F(!0))},disabled:p||!i.trim(),className:"generate-button",children:"\ub3c5\ud574 \ubb38\uc81c \uc0dd\uc131"}),(p||f)&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("span",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:f?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":"\ud83d\udccb \ub3c5\ud574 \ubb38\uc81c \uc0dd\uc131 \uc911..."})]})}),(0,Se.jsx)(go,{isOpen:k,onClose:()=>S(!1)}),(0,Se.jsx)(yo,{isOpen:P,onClose:()=>F(!1),onConfirm:async()=>{null!==e&&void 0!==e&&e.uid?(F(!1),await Y()):alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")},workTypeName:"\uc720\ud615#02 \ub3c5\ud574 \ubb38\uc81c \uc0dd\uc131",pointsToDeduct:D,userCurrentPoints:L,remainingPoints:L-D})]})};async function Ao(e,t){const n="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";if(e.length<100)return{success:!1,error:"\uc785\ub825\ub41c \ud14d\uc2a4\ud2b8\uac00 \ub108\ubb34 \uc9e7\uc2b5\ub2c8\ub2e4. \uc758\ubbf8\uc788\ub294 \ub2e8\ub77d \ubd84\ud560\uc744 \uc704\ud574 \ucd5c\uc18c 100\uc790 \uc774\uc0c1\uc758 \ud14d\uc2a4\ud2b8\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.\n\ud604\uc7ac \uae00\uc790 \uc218: ".concat(e.length,"\uc790")};try{console.log("\ud83e\udd16 AI \uae30\ubc18 \ub2e8\ub77d \ubd84\ud560 \ubc0f \uc11e\uae30 \uc2dc\uc791...");const t=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({model:"gpt-4",messages:[{role:"system",content:"\ub2f9\uc2e0\uc740 \uc601\uc5b4 \ud14d\uc2a4\ud2b8 \ubd84\uc11d \ubc0f \ubb38\uc81c \uc0dd\uc131 \uc804\ubb38\uac00\uc785\ub2c8\ub2e4. \uc8fc\uc5b4\uc9c4 \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc758\ubbf8\uc640 \uc8fc\uc81c\uc5d0 \ub530\ub77c \uc815\ud655\ud788 4\uac1c\uc758 \ub2e8\ub77d\uc73c\ub85c \ub098\ub204\uace0, \uc774\ub97c \uc801\uc808\ud788 \uc11e\uc5b4\uc11c \ubb38\uc81c\ub97c \ub9cc\ub4e4 \uc218 \uc788\ub3c4\ub85d \ud574\uc57c \ud569\ub2c8\ub2e4.\n\n\ud83d\udea8 \uc808\ub300 \uae08\uc9c0 \uc0ac\ud56d (\ub9e4\uc6b0 \uc911\uc694):\n1. \uc6d0\ubcf8 \ubb38\uc7a5\uc758 \uc21c\uc11c\ub97c \uc808\ub300 \ubc14\uafb8\uc9c0 \ub9c8\uc138\uc694\n2. \ud558\ub098\uc758 \ubb38\uc7a5\uc744 \ub5bc\uc5b4\ub0b4\uc11c \ub2e4\ub978 \ub2e8\ub77d\uc5d0 \ubd99\uc774\uc9c0 \ub9c8\uc138\uc694  \n3. \ubb38\uc7a5\uc774\ub098 \ub2e8\uc5b4\ub97c \uc218\uc815, \uc0ad\uc81c, \ucd94\uac00\ud558\uc9c0 \ub9c8\uc138\uc694\n4. \ubaa8\ub4e0 \ubb38\uc7a5\uc740 \uc6d0\ubcf8\uc5d0 \ub098\ud0c0\ub09c \uc21c\uc11c \uadf8\ub300\ub85c \uc720\uc9c0\ud574\uc57c \ud569\ub2c8\ub2e4\n5. \uc6d0\ubcf8 \ud14d\uc2a4\ud2b8\uc758 \ub0b4\uc6a9\uc744 \ubcc0\uacbd\ud558\uc9c0 \ub9c8\uc138\uc694\n\n\ud83d\udccb \ub2e8\ub77d \ubd84\ud560 \uc6d0\uce59:\n1. \ud14d\uc2a4\ud2b8\ub97c \ucc98\uc74c\ubd80\ud130 \ub05d\uae4c\uc9c0 \uc21c\uc11c\ub300\ub85c \uc77d\uc73c\uba74\uc11c \uc758\ubbf8 \ub2e8\uc704\ub97c \ud30c\uc545\ud558\uc138\uc694\n2. \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \uc758\ubbf8 \uc804\ud658\uc810\uc5d0\uc11c\ub9cc \ub2e8\ub77d\uc744 \ub098\ub204\uc138\uc694\n3. \uac01 \ub2e8\ub77d\uc740 \uc5f0\uc18d\ub41c \ubb38\uc7a5\ub4e4\ub85c\ub9cc \uad6c\uc131\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4\n4. \ubc18\ub4dc\uc2dc \uc815\ud655\ud788 4\uac1c\uc758 \ub2e8\ub77d\uc73c\ub85c \ub098\ub204\uc138\uc694\n5. \uac01 \ub2e8\ub77d\uc774 \ud558\ub098\uc758 \uc644\uc804\ud55c \uc758\ubbf8 \ub2e8\uc704\ub97c \ud615\uc131\ud558\ub3c4\ub85d \ud558\uc138\uc694\n6. \ub2e8\ub77d \ub0b4 \ubb38\uc7a5\ub4e4\uc758 \uc21c\uc11c\ub294 \uc6d0\ubcf8\uacfc \ub3d9\uc77c\ud574\uc57c \ud569\ub2c8\ub2e4\n7. \ub2e8\ub77d \uac04\uc758 \uc758\ubbf8\uc801 \uc5f0\uacb0\uc131\uc744 \uace0\ub824\ud558\uc138\uc694\n\n\ud83d\udd0d \uc758\ubbf8 \ub2e8\uc704 \ud30c\uc545 \ubc29\ubc95:\n- \uc8fc\uc81c\ub098 \uad00\uc810\uc758 \ubcc0\ud654\n- \uc2dc\uac04\uc801 \uc21c\uc11c\uc758 \ubcc0\ud654\n- \ub17c\ub9ac\uc801 \ud750\ub984\uc758 \uc804\ud658\n- \uc608\uc2dc\ub098 \uc124\uba85\uc758 \uc2dc\uc791/\ub05d\n- \uacb0\ub860\uc774\ub098 \uc694\uc57d\uc758 \uc2dc\uc791\n\n\ud83c\udfb2 \uc11e\uae30 \uc6d0\uce59 (\ub9e4\uc6b0 \uc911\uc694):\n1. 4\uac1c \ub2e8\ub77d\uc744 \uc644\uc804\ud788 \ub4a4\uc11e\uc5b4\uc57c \ud569\ub2c8\ub2e4\n2. \ucd5c\uc18c 3\uac1c \ub2e8\ub77d\uc774 \uc6d0\ub798 \uc704\uce58\uc5d0 \uc788\uc73c\uba74 \uc548\ub429\ub2c8\ub2e4\n3. \uc11e\uc778 \uacb0\uacfc\uac00 \ub108\ubb34 \uc27d\uac8c \ub9de\ucd9c \uc218 \uc5c6\uc5b4\uc57c \ud569\ub2c8\ub2e4\n4. \uc11e\uc778 \uc21c\uc11c\ub294 \ub9e4\ubc88 \ub2e4\ub974\uac8c \uc0dd\uc131\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4\n5. \uc11e\uc778 \uc21c\uc11c\ub294 \ubc18\ub4dc\uc2dc [\uc22b\uc790, \uc22b\uc790, \uc22b\uc790, \uc22b\uc790] \ud615\ud0dc\ub85c \ucd9c\ub825\ud574\uc57c \ud569\ub2c8\ub2e4\n\n\ud83d\udcdd \ucd9c\ub825 \ud615\uc2dd (\uc815\ud655\ud788 \ub530\ub77c\uc8fc\uc138\uc694):\n**\uc6d0\ubcf8 \ub2e8\ub77d 1:**\n[\uccab \ubc88\uc9f8 \uc758\ubbf8 \ub2e8\uc704\uc758 \uc5f0\uc18d\ub41c \ubb38\uc7a5\ub4e4 - \uc6d0\ubcf8 \uc21c\uc11c \uc720\uc9c0]\n\n**\uc6d0\ubcf8 \ub2e8\ub77d 2:**  \n[\ub450 \ubc88\uc9f8 \uc758\ubbf8 \ub2e8\uc704\uc758 \uc5f0\uc18d\ub41c \ubb38\uc7a5\ub4e4 - \uc6d0\ubcf8 \uc21c\uc11c \uc720\uc9c0]\n\n**\uc6d0\ubcf8 \ub2e8\ub77d 3:**\n[\uc138 \ubc88\uc9f8 \uc758\ubbf8 \ub2e8\uc704\uc758 \uc5f0\uc18d\ub41c \ubb38\uc7a5\ub4e4 - \uc6d0\ubcf8 \uc21c\uc11c \uc720\uc9c0]\n\n**\uc6d0\ubcf8 \ub2e8\ub77d 4:**\n[\ub124 \ubc88\uc9f8 \uc758\ubbf8 \ub2e8\uc704\uc758 \uc5f0\uc18d\ub41c \ubb38\uc7a5\ub4e4 - \uc6d0\ubcf8 \uc21c\uc11c \uc720\uc9c0]\n\n**\uc11e\uc778 \uc21c\uc11c:**\n[3, 1, 4, 2]\n\n\u26a0\ufe0f \uc8fc\uc758: \ubb38\uc7a5\uc744 \uc7ac\ubc30\uce58\ud558\uac70\ub098 \uc21c\uc11c\ub97c \ubc14\uafb8\ub294 \uac83\uc740 \uc808\ub300 \uae08\uc9c0\uc785\ub2c8\ub2e4. \uc6d0\ubcf8 \ud14d\uc2a4\ud2b8\uc758 \ud750\ub984\uc744 \uadf8\ub300\ub85c \ub530\ub77c\uac00\uba74\uc11c \uc758\ubbf8\uc801\uc73c\ub85c \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \uc9c0\uc810\uc5d0\uc11c\ub9cc \ub2e8\ub77d\uc744 \uad6c\ubd84\ud558\uace0, \ub2e8\ub77d \uc790\uccb4\ub294 \ub4a4\uc11e\uc5b4\uc8fc\uc138\uc694. \uc11e\uc778 \uc21c\uc11c\ub294 \ubc18\ub4dc\uc2dc [\uc22b\uc790, \uc22b\uc790, \uc22b\uc790, \uc22b\uc790] \ud615\ud0dc\ub85c \ucd9c\ub825\ud574\uc57c \ud569\ub2c8\ub2e4."},{role:"user",content:"\ub2e4\uc74c \uc601\uc5b4 \ud14d\uc2a4\ud2b8\ub97c \uc758\ubbf8 \uae30\ubc18\uc73c\ub85c \uc815\ud655\ud788 4\uac1c\uc758 \ub2e8\ub77d\uc73c\ub85c \ub098\ub204\uace0, 4\uac1c \ub2e8\ub77d\uc744 \uc801\uc808\ud788 \uc11e\uc5b4\uc8fc\uc138\uc694. \uc808\ub300\ub85c \ubb38\uc7a5 \uc21c\uc11c\ub97c \ubc14\uafb8\uac70\ub098 \ubb38\uc7a5\uc744 \ub2e4\ub978 \ub2e8\ub77d\uc73c\ub85c \uc774\ub3d9\uc2dc\ud0a4\uc9c0 \ub9c8\uc138\uc694:\n\n".concat(e)}],max_tokens:3e3,temperature:.1})});if(!t.ok){var r;const e=await t.json();throw new Error("OpenAI API \uc624\ub958: ".concat((null===(r=e.error)||void 0===r?void 0:r.message)||"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958"))}const s=(await t.json()).choices[0].message.content,{paragraphs:i,shuffledOrder:o}=function(e){const t=[];let n=[];console.log("\ud83d\udd0d AI \uc751\ub2f5\uc5d0\uc11c \ub2e8\ub77d\uacfc \uc11e\uc778 \uc21c\uc11c \ucd94\ucd9c \uc2dc\uc791..."),console.log("\ud83d\udcdd AI \uc751\ub2f5:",e.substring(0,200)+"...");const r=e.match(/\*\*\uc6d0\ubcf8 \ub2e8\ub77d \d+:\*\*\s*([\s\S]*?)(?=\*\*\uc6d0\ubcf8 \ub2e8\ub77d \d+:\*\*|$)/g);if(r){console.log("\u2705 \ud328\ud134 \ub9e4\uce6d\uc73c\ub85c \ub2e8\ub77d \ucd94\ucd9c:",r.length,"\uac1c");for(const e of r){let n=e.replace(/^\*\*\uc6d0\ubcf8 \ub2e8\ub77d \d+:\*\*\s*/,"").trim();n=n.replace(/\s*-\s*\uc8fc\uc81c:.*$/gm,"").trim(),n&&(t.push(n),console.log("\ud83d\udcc4 \ub2e8\ub77d ".concat(t.length,":"),n.substring(0,50)+"..."))}}const s=e.match(/\*\*\uc11e\uc778 \uc21c\uc11c:\*\*\s*\[([^\]]+)\]/);if(s){const e=s[1];console.log("\ud83c\udfb2 \uc11e\uc778 \uc21c\uc11c \ud14d\uc2a4\ud2b8:",e);const t=e.match(/\d+/g);t&&4===t.length&&(n=t.map(e=>parseInt(e)),console.log("\u2705 \uc11e\uc778 \uc21c\uc11c \ucd94\ucd9c:",n))}if(0===t.length){console.log("\u26a0\ufe0f \ud328\ud134 \ub9e4\uce6d \uc2e4\ud328, \uc904\ubc14\uafc8\uc73c\ub85c \ubd84\ud560 \uc2dc\ub3c4...");const n=e.split("\n").filter(e=>e.trim().length>0);let r="";for(const e of n)e.includes("\uc6d0\ubcf8 \ub2e8\ub77d")&&e.includes(":")?r&&(t.push(r.trim()),r=""):e.includes("\uc8fc\uc81c:")||e.includes("\uc11e\uc778 \uc21c\uc11c:")||(r+=e+" ");r&&t.push(r.trim())}0===n.length&&(console.log("\u26a0\ufe0f \uc11e\uc778 \uc21c\uc11c\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c, \uae30\ubcf8 \uc11e\uae30 \uc0dd\uc131"),n=[1,2,3,4].sort(()=>Math.random()-.5));return console.log("\ud83d\udcca \ucd5c\uc885 \ucd94\ucd9c \uacb0\uacfc:"),console.log("- \ub2e8\ub77d \uc218:",t.length),console.log("- \uc11e\uc778 \uc21c\uc11c:",n),{paragraphs:t,shuffledOrder:n}}(s);if(4!==i.length)throw new Error("AI\uac00 \uc815\ud655\ud788 4\uac1c\uc758 \ub2e8\ub77d\uc73c\ub85c \ubd84\ud560\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");if(!o||4!==o.length)throw new Error("AI\uac00 \uc11e\uc778 \uc21c\uc11c\ub97c \uc81c\ub300\ub85c \uc0dd\uc131\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");const a=function(e,t){try{const n=e.replace(/\.\s+/g,".|SPLIT|").replace(/[!?]\s+/g,"|SPLIT|").split("|SPLIT|").map(e=>e.trim()).filter(e=>e.length>0),r=t.join(" ").replace(/\.\s+/g,".|SPLIT|").replace(/[!?]\s+/g,"|SPLIT|").split("|SPLIT|").map(e=>e.trim()).filter(e=>e.length>0);if(n.length!==r.length)return console.warn("\ubb38\uc7a5 \uc218\uac00 \ub2e4\ub985\ub2c8\ub2e4:",n.length,"vs",r.length),!1;for(let e=0;e<n.length;e++){const t=n[e].replace(/\s+/g," ").trim(),s=r[e].replace(/\s+/g," ").trim();if(t!==s)return console.warn("\ubb38\uc7a5 ".concat(e+1,"\uc774 \ub2e4\ub985\ub2c8\ub2e4:")),console.warn("\uc6d0\ubcf8:",t),console.warn("AI\uacb0\uacfc:",s),!1}return!0}catch(n){return console.error("\uc21c\uc11c \uac80\uc99d \uc911 \uc624\ub958:",n),!1}}(e,i);if(!a)throw console.warn("\u26a0\ufe0f AI\uac00 \ubb38\uc7a5 \uc21c\uc11c\ub97c \ubcc0\uacbd\ud588\uc2b5\ub2c8\ub2e4. \uaddc\uce59 \uae30\ubc18\uc73c\ub85c \ud3f4\ubc31\ud569\ub2c8\ub2e4."),new Error("AI\uac00 \uc6d0\ubcf8 \ubb38\uc7a5 \uc21c\uc11c\ub97c \ubcc0\uacbd\ud588\uc2b5\ub2c8\ub2e4.");const l=o.map((e,t)=>i[e-1]);return console.log("\u2705 AI \ub2e8\ub77d \ubd84\ud560 \ubc0f \uc11e\uae30 \uc644\ub8cc"),{success:!0,paragraphs:i,shuffledParagraphs:l,originalText:e}}catch(s){return console.error("\u274c AI API \uc624\ub958:",s),console.log("\ud83d\udd04 \uaddc\uce59 \uae30\ubc18 \ubd84\ud560\ub85c \ud3f4\ubc31..."),function(e){const t=e.replace(/\.\s+([A-Z])/g,".|SPLIT|$1").replace(/[!?]\s+([A-Z])/g,"|SPLIT|$1").replace(/[.!?]$/,"|SPLIT|").split("|SPLIT|").map(e=>e.trim()).filter(e=>e.length>5),n=[],r=Math.ceil(t.length/4);for(let s=0;s<4;s++){const e=s*r,i=Math.min(e+r,t.length),o=t.slice(e,i);if(o.length>0){const e=o.map(e=>e.trim().match(/[.!?]$/)?e.trim():e.trim()+".").join(" ");n.push(e)}}return{success:!0,paragraphs:n,originalText:e}}(e)}}function Ro(e){if(1===e.length)return[e];const t=[];for(let n=0;n<e.length;n++){const r=e.slice(0,n).concat(e.slice(n+1));for(const s of Ro(r))t.push([e[n],...s])}return t}async function Oo(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])try{const t=await Ao(e);if(t.success&&t.paragraphs&&4===t.paragraphs.length)return console.log("\u2705 AI \uae30\ubc18 \ubd84\ud560 \uc131\uacf5"),t.paragraphs;console.log("\u26a0\ufe0f AI \ubd84\ud560 \uc2e4\ud328, \uaddc\uce59 \uae30\ubc18\uc73c\ub85c \ud3f4\ubc31")}catch(t){console.error("\u274c AI \ubd84\ud560 \uc624\ub958:",t)}return function(e){console.log("\ud83d\udcdd \uaddc\uce59 \uae30\ubc18 \ub2e8\ub77d \ubd84\ud560 \uc2dc\uc791...");const t=e.replace(/\n/g," ").replace(/\s+/g," ").trim().split(/(?<=[.!?])\s+(?=[A-Z])/).map(e=>e.trim()).filter(e=>e.length>5);if(console.log("\ud83d\udd0d \ubb38\uc7a5 \ubd84\ub9ac \uacb0\uacfc:",t.length,"\uac1c \ubb38\uc7a5"),console.log("\ud83d\udcc4 \uac01 \ubb38\uc7a5:",t.map((e,t)=>"".concat(t+1,". ").concat(e.substring(0,50),"..."))),t.length<4)throw console.warn("\u26a0\ufe0f \ubb38\uc7a5 \uc218\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4:",t.length,"\uac1c (\ucd5c\uc18c 4\uac1c \ud544\uc694)"),new Error("\ubcf8\ubb38\uc744 4\uac1c\uc758 \uc758\ubbf8\uc788\ub294 \ub2e8\ub77d\uc73c\ub85c \ub098\ub20c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694. (\ud604\uc7ac ".concat(t.length,"\uac1c \ubb38\uc7a5)"));const n=[],r=t.length,s=Math.floor(r/4),i=r%4;console.log("\ud83d\udcca \ub2e8\ub77d\ubcc4 \ubb38\uc7a5 \uc218 \uacc4\uc0b0:"),console.log("- \ucd1d \ubb38\uc7a5 \uc218:",r),console.log("- \uae30\ubcf8 \ubb38\uc7a5 \uc218:",s),console.log("- \ucd94\uac00 \ubb38\uc7a5 \uc218:",i);let o=0;for(let a=0;a<4;a++){const e=s+(a<i?1:0);if(e>0){const r=t.slice(o,o+e).map(e=>e.trim()).join(" ").replace(/\s+/g," ").trim();n.push(r),console.log("\ud83d\udcc4 \ub2e8\ub77d ".concat(a+1,": ").concat(e,"\uac1c \ubb38\uc7a5 - ").concat(r.substring(0,80),"...")),o+=e}}return console.log("\u2705 \uaddc\uce59 \uae30\ubc18 \ub2e8\ub77d \ubd84\ud560 \uc644\ub8cc:",n.length,"\uac1c \ub2e8\ub77d"),n}(e)}function Po(e){let t=0;for(;t<200;){const n=[...e];for(let e=0;e<4;e++){const e=Math.floor(Math.random()*n.length),t=Math.floor(Math.random()*n.length);e!==t&&([n[e],n[t]]=[n[t],n[e]])}if(Fo(n))return console.log("\u2705 ".concat(t+1,"\ubc88\uc9f8 \uc2dc\ub3c4\ub85c \uc720\ud6a8\ud55c \uc11e\uae30 \uacb0\uacfc \ubc1c\uacac")),n;t++}return console.warn("\u26a0\ufe0f \uc11e\uae30 \uc870\uac74\uc744 \ub9cc\uc871\ud558\ub294 \uacb0\uacfc\ub97c \ucc3e\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4. \uac15\uc81c \uc11e\uae30\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4."),function(e){const t=[...e];for(let r=t.length-1;r>0;r--){const e=Math.floor(Math.random()*(r+1));[t[r],t[e]]=[t[e],t[r]]}let n=0;for(let r=0;r<t.length;r++)t[r].originalOrder===r&&n++;if(n>2)for(let r=0;r<2;r++){const e=Math.floor(Math.random()*t.length),n=Math.floor(Math.random()*t.length);e!==n&&([t[e],t[n]]=[t[n],t[e]])}return t}(e)}function Fo(e){let t=0;for(let n=0;n<e.length;n++)e[n].originalOrder===n&&t++;return t<=2}async function Do(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Oo(e,n);if(r.length<4)throw new Error("\ubcf8\ubb38\uc744 4\uac1c\uc758 \uc758\ubbf8\uc788\ub294 \ub2e8\ub77d\uc73c\ub85c \ub098\ub20c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");console.log("\ud83d\udcdd \ub2e8\ub77d \ubd84\ud560 \uacb0\uacfc:",r.length,"\uac1c \ub2e8\ub77d"),console.log("\ud83d\udd0d \uac01 \ub2e8\ub77d \uae38\uc774:",r.map(e=>e.length));const s=r.map((e,t)=>({id:"paragraph-".concat(t),content:e.trim(),originalOrder:t,label:""}));let i;if(n){console.log("\ud83e\udd16 AI \uae30\ubc18 \uc11e\uae30 \uc2dc\ub3c4...");const t=await async function(e){try{const t=await Ao(e);if(t.success&&t.shuffledParagraphs&&4===t.shuffledParagraphs.length)return console.log("\u2705 AI \uae30\ubc18 \uc11e\uae30 \uacb0\uacfc \uc0ac\uc6a9"),t.shuffledParagraphs}catch(t){console.error("\u274c AI \uc11e\uae30 \uc624\ub958:",t)}return null}(e);t?(console.log("\u2705 AI \uc11e\uae30 \uacb0\uacfc \uc801\uc6a9:",t.length,"\uac1c \ub2e8\ub77d"),i=t.map((e,t)=>{const n=r.findIndex(t=>t.trim()===e.trim());return-1===n?(console.warn("\u26a0\ufe0f AI\uac00 \uc0dd\uc131\ud55c \ub2e8\ub77d\uc744 \uc6d0\ubcf8\uc5d0\uc11c \ucc3e\uc744 \uc218 \uc5c6\uc74c:",e.substring(0,50)),s[t]):{id:"paragraph-".concat(n),content:e.trim(),originalOrder:n,label:""}}),console.log("\ud83e\udd16 AI \uc11e\uae30 \uc644\ub8cc - \uc11e\uc778 \uc21c\uc11c:",i.map(e=>e.originalOrder))):(console.log("\u26a0\ufe0f AI \uc11e\uae30 \uc2e4\ud328, \uac1c\uc120\ub41c \uc11e\uae30 \ub85c\uc9c1 \uc0ac\uc6a9"),i=Po(s))}else console.log("\ud83d\udd04 \uaddc\uce59 \uae30\ubc18 \uc11e\uae30 \uc2dc\uc791..."),i=Po(s);const o=s.map(e=>e.originalOrder),a=i.map(e=>e.originalOrder);let l=0;for(let t=0;t<a.length;t++)a[t]===t&&l++;console.log("\ud83d\udcca \uc11e\uae30 \uacb0\uacfc \ubd84\uc11d:"),console.log("- \uc6d0\ub798 \uc21c\uc11c:",o),console.log("- \uc11e\uc778 \uc21c\uc11c:",a),console.log("- \uc6d0\ub798 \uc704\uce58\uc5d0 \uc788\ub294 \ub2e8\ub77d \uc218:",l),console.log("- \uc11e\uae30 \ud488\uc9c8:",l<=2?"\u2705 \uc591\ud638":"\u26a0\ufe0f \uac1c\uc120 \ud544\uc694");const c=["A","B","C","D"],d=i.map((e,n)=>(0,t.A)((0,t.A)({},e),{},{label:c[n]})),u=[];for(let t=0;t<4;t++){const e=d.find(e=>e.originalOrder===t);e&&u.push(e.label)}console.log("\ud83c\udfaf \uc815\ub2f5 \uc21c\uc11c \uc0dd\uc131:"),console.log("- \uc11e\uc778 \uc21c\uc11c (\ub77c\ubca8):",d.map(e=>e.label)),console.log("- \uc6d0\ubcf8 \uc21c\uc11c (\ub77c\ubca8):",u);const h=Ro(["A","B","C","D"]),{choices:p,answerIndex:m}=function(e,t){const n=t.map(e=>e.join("-")),r=e.join("-"),s=n.filter(e=>e!==r).sort(()=>Math.random()-.5).slice(0,3),i=[r,...s].sort(()=>Math.random()-.5),o=i.indexOf(r);return{choices:i.map(e=>e.split("-")),answerIndex:o}}(u,h);return{id:"quiz-".concat(Date.now()),originalText:e,paragraphs:d,shuffledParagraphs:d,correctOrder:u,choices:p,answerIndex:m}}function zo(e){if(!e)return"";const t=e.replace(/\D/g,"");return 11===t.length?"".concat(t.slice(0,3),"-").concat(t.slice(3,7),"-").concat(t.slice(7)):10===t.length?"".concat(t.slice(0,2),"-").concat(t.slice(2,6),"-").concat(t.slice(6)):e}function Lo(e){const t=e.replace(/\D/g,"").slice(0,11);return t.length<=3?t:t.length<=7?"".concat(t.slice(0,3),"-").concat(t.slice(3)):"".concat(t.slice(0,3),"-").concat(t.slice(3,7),"-").concat(t.slice(7))}const Mo=e=>{let{onQuizGenerated:t}=e;const[n,s]=(0,r.useState)(""),[i,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),[p,m]=(0,r.useState)("text"),[f,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(null),[x,b]=(0,r.useState)(!1),w=(0,r.useRef)(null),j=(0,r.useRef)(null),[N,k]=(0,r.useState)(!1),[S,_]=(0,r.useState)(!1),[T,C]=(0,r.useState)("none"),[E,I]=(0,r.useState)(null),[A,R]=(0,r.useState)(""),[O,P]=(0,r.useState)(!1),[F,D]=(0,r.useState)(!1),[z,L]=(0,r.useState)(!1),[M,B]=(0,r.useState)(!1),{userData:U,loading:W}=Te(),[V,q]=(0,r.useState)(!1),[H,K]=(0,r.useState)(0),[J,Y]=(0,r.useState)(0),[Q,G]=(0,r.useState)(0);(0,r.useEffect)(()=>{W||(async()=>{if(!W&&U)try{const[e,t]=await Promise.all([(0,vo.getWorkTypePoints)(),(0,vo.MC)(U.uid)]),n=e.find(e=>"1"===e.id);n&&(G(n.points),K(n.points)),Y(t)}catch(c){console.error("\ud3ec\uc778\ud2b8 \ucd08\uae30\ud654 \uc624\ub958:",c)}})()},[null===U||void 0===U?void 0:U.uid,W]);(0,r.useEffect)(()=>{E&&(()=>{if(!E)return;const e=E.shuffledParagraphs.reduce((e,t)=>e+t.content.length,0);P(e>=2e3)})()},[E]),(0,r.useEffect)(()=>{E&&A&&(E&&A&&(D(!0),L(!1),console.log("\ud83d\udcca \uc778\uc1c4(\uc815\ub2f5) 2\ud398\uc774\uc9c0 \uace0\uc815 \uad6c\uc131:",{page1:"\ubcf8\ubb38 + \uc815\ub2f5 + \uc120\ud0dd\uc9c0",page2:"\ud574\uc11d (2,700\uc790 \uae30\uc900 \ubd84\ud560)"})),(()=>{if(!E||!A)return;const e=E.choices[E.answerIndex],t=E.shuffledParagraphs&&E.shuffledParagraphs.length>0&&E.shuffledParagraphs[0].content?E.shuffledParagraphs:E.paragraphs||[],n=e.reduce((e,n)=>{const r=t.find(e=>e.label===n);return null!==r&&void 0!==r&&r.content?e+r.content.length:e},0),r=A.length,s=n+r;B(s>=2700),console.log("\ud83d\udcd6 \ud574\uc11d \ud398\uc774\uc9c0 \ubd84\ud560 \ubd84\uc11d:",{totalEnglishLength:n,totalTranslationLength:r,totalInterpretationLength:s,needsSplit:s>=2700,splitStructure:s>=2700?"A,B,C / D \ubd84\ud560":"\ud1b5\ud569 \ud398\uc774\uc9c0"})})())},[E,A]),(0,r.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,r.useEffect)(()=>{E&&window.scrollTo(0,0)},[E]);const $=async e=>{b(!0),l(!0),g(""),d("");try{e instanceof Blob&&v(URL.createObjectURL(e));const n=await(t=e,new Promise((e,n)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=()=>n(r.error),r.readAsDataURL(t)})),r="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",i=await async function(e,t,n){if(!n)throw new Error("API Key\uac00 \ube44\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. .env \ud30c\uc77c\uacfc \uac1c\ubc1c \uc11c\ubc84 \uc7ac\uc2dc\uc791\uc744 \ud655\uc778\ud558\uc138\uc694.");const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:t},{type:"image_url",image_url:{url:e}}]}],max_tokens:2048})});if(!r.ok){const e=await r.text();throw console.error("OpenAI Vision API \uc751\ub2f5:",e),new Error("OpenAI Vision API \ud638\ucd9c \uc2e4\ud328: "+e)}return(await r.json()).choices[0].message.content}(n,"\uc601\uc5b4\ubb38\uc81c\ub85c \uc0ac\uc6a9\ub418\ub294 \ubcf8\ubb38\uc774\uc57c.\n\uc774 \uc774\ubbf8\uc9c0\uc758 \ub0b4\uc6a9\uc744 \uc218\uc791\uc5c5\uc73c\ub85c \uc815\ud655\ud788 \uc77d\uace0, \uc601\uc5b4 \ubcf8\ubb38\ub9cc \ucd94\ub824\ub0b4\uc11c \ubcf4\uc5ec\uc918.\n\uae00\uc790\ub294 \uc778\uc1c4\uae00\uc528\uccb4 \uc774\uc678\uc5d0 \uc190\uae00\uc528\ub098 \uc6d0, \ubc11\uc904 \ub4f1 \ud45c\uc2dc\ub418\uc5b4\uc788\ub294 \uac83\uc740 \ubb34\uc2dc\ud574. \ubcf8\ubb38\uc911\uc5d0 \uc6d0\ubb38\uc790 1, 2, 3... \ub4f1\uc73c\ub85c \ud45c\uc2dc\ub41c\uac74 \uc81c\uac70\ud574\uc918. \uc6d0\ubb38\uc790 \uc81c\uac70\ud6c4 \uc904\uc744 \ubc14\uafb8\uac70\ub098 \ubb38\ub2e8\uc744 \ubc14\uafb8\uc9c0\ub9d0\uace0, \uc804\uccb4\uac00 \ud55c \ubb38\ub2e8\uc73c\ub85c \uad6c\uc131\ud574\uc918. \uc601\uc5b4 \ubcf8\ubb38\ub9cc, \uc544\ubb34\ub7f0 \uc124\uba85\uc774\ub098 \uc548\ub0b4\ubb38 \uc5c6\uc774, \ud55c \ubb38\ub2e8\uc73c\ub85c\ub9cc \ucd9c\ub825\ud574\uc918.",r);s(function(e){return e.replace(/^(Sure!|Here is|Here are|Here's|Here's)[^\n:]*[:\uff1a]?\s*/i,"").trim()}(i)),v(null),setTimeout(()=>{w.current&&(w.current.style.height="auto",w.current.style.height=w.current.scrollHeight+"px")},0)}catch(n){d("OpenAI Vision API \ud638\ucd9c \uc2e4\ud328: "+((null===n||void 0===n?void 0:n.message)||n)),v(null)}finally{b(!1),l(!1)}var t},X=e=>{m(e),g(""),d(""),s(""),"file"===e&&j.current&&(j.current.value="")},Z=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),C("no-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),C("none")},1e3)},100)},ee=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),C("with-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),C("none")},1e3)},100)},te=()=>{I(null),s(""),v(null),k(!1),d(""),g(""),R(""),j.current&&(j.current.value="")};return E?(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("div",{className:"quiz-display no-print",children:[(0,Se.jsxs)("div",{className:"quiz-header",children:[(0,Se.jsx)("h2",{className:"no-print",children:"#01. \ubb38\uc7a5 \uc21c\uc11c \ub9de\ucd94\uae30"}),(0,Se.jsxs)("div",{className:"quiz-header-buttons no-print",children:[(0,Se.jsx)("button",{onClick:te,className:"reset-button",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\uc0c8 \ubb38\uc81c \ub9cc\ub4e4\uae30"}),(0,Se.jsx)("button",{onClick:Z,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\ud83d\udda8\ufe0f \uc778\uc1c4 (\ubb38\uc81c)"}),(0,Se.jsx)("button",{onClick:ee,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 6px rgba(240, 147, 251, 0.25)"},children:"\ud83d\udda8\ufe0f \uc778\uc1c4 (\uc815\ub2f5)"})]})]}),(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1.13rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.6rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ub2e8\ub77d\ub4e4\uc744 \uc6d0\ub798 \uc21c\uc11c\ub300\ub85c \ubc30\uc5f4\ud55c \uac83\uc744 \uace0\ub974\uc138\uc694"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#01"})]}),(0,Se.jsx)("div",{className:"problem-passage",children:E.shuffledParagraphs.map((e,t)=>(0,Se.jsxs)("div",{className:"shuffled-paragraph",children:[(0,Se.jsxs)("strong",{children:[e.label,":"]})," ",e.content]},e.id))}),(0,Se.jsx)("div",{className:"problem-options",children:E.choices.map((e,t)=>(0,Se.jsxs)("div",{className:"option",children:[["\u2460","\u2461","\u2462","\u2463"][t]," ",e.join(" \u2192 ")]},t))}),(0,Se.jsxs)("div",{className:"screen-answer-footer",style:{color:"#1976d2",fontWeight:700,fontSize:"1.1rem",textAlign:"center",marginTop:"2rem",padding:"0.8rem",backgroundColor:"#f0f7ff",borderRadius:"8px"},children:[["\u2460","\u2461","\u2462","\u2463"][E.answerIndex]," ",E.choices[E.answerIndex].join(" \u2192 ")," (\uc815\ub2f5)"]})]})]}),"no-answer"===T&&(0,Se.jsx)("div",{className:"only-print",children:O?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ub2e8\ub77d\ub4e4\uc744 \uc6d0\ub798 \uc21c\uc11c\ub300\ub85c \ubc30\uc5f4\ud55c \uac83\uc744 \uace0\ub974\uc138\uc694"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#01"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.75rem"},children:E.shuffledParagraphs.map((e,t)=>(0,Se.jsxs)("div",{className:"shuffled-paragraph",children:[(0,Se.jsxs)("strong",{children:[e.label,":"]})," ",e.content]},e.id))})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsx)("div",{className:"quiz-content",children:E.choices.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.75rem",marginTop:"0",paddingLeft:"0.6rem",paddingRight:"0.6rem",paddingTop:"5px",paddingBottom:"5px",marginBottom:"4px"},children:[["\u2460","\u2461","\u2462","\u2463"][t]," ",e.join(" \u2192 ")]},t))})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ubb38\uc81c: \ub2e4\uc74c \ub2e8\ub77d\ub4e4\uc744 \uc6d0\ub798 \uc21c\uc11c\ub300\ub85c \ubc30\uc5f4\ud55c \uac83\uc744 \uace0\ub974\uc138\uc694"}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",marginBottom:"0",fontSize:"0.75rem"},children:E.shuffledParagraphs.map((e,t)=>(0,Se.jsxs)("div",{className:"shuffled-paragraph",children:[(0,Se.jsxs)("strong",{children:[e.label,":"]})," ",e.content]},e.id))}),E.choices.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.75rem",marginTop:0===t?"0.3rem":"4px",paddingTop:"5px",paddingBottom:"5px"},children:[["\u2460","\u2461","\u2462","\u2463"][t]," ",e.join(" \u2192 ")]},t))]})})]})}),"with-answer"===T&&(0,Se.jsxs)("div",{className:"only-print work-01-print",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ub2e8\ub77d\ub4e4\uc744 \uc6d0\ub798 \uc21c\uc11c\ub300\ub85c \ubc30\uc5f4\ud55c \uac83\uc744 \uace0\ub974\uc138\uc694"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#01"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",marginBottom:"0",fontSize:"1rem"},children:E.shuffledParagraphs.map((e,t)=>(0,Se.jsxs)("div",{className:"shuffled-paragraph",children:[(0,Se.jsxs)("strong",{children:[e.label,":"]})," ",e.content]},e.id))}),(0,Se.jsxs)("div",{style:{fontWeight:700,fontSize:"1rem",margin:"0.5rem 0 0 0",padding:"0.6rem 0.8rem",background:"#fff",border:"1px solid #ddd",borderRadius:"5px"},children:[(0,Se.jsxs)("span",{style:{color:"#000000"},children:[["\u2460","\u2461","\u2462","\u2463"][E.answerIndex]," ",E.choices[E.answerIndex].join(" \u2192 ")]})," ",(0,Se.jsx)("span",{style:{color:"#1976d2"},children:"(\uc815\ub2f5)"})]})]})})]}),M?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:"800",fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(()=>{const e=E.choices[E.answerIndex],t=E.shuffledParagraphs&&E.shuffledParagraphs.length>0&&E.shuffledParagraphs[0].content?E.shuffledParagraphs:E.paragraphs||[];return e.slice(0,3).map((e,n)=>{const r=t.find(t=>t.label===e);return r&&r.content?(0,Se.jsxs)("div",{className:"paragraph-simple",style:{marginBottom:"1.5rem"},children:[(0,Se.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"1rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[(0,Se.jsxs)("strong",{style:{fontSize:"1rem",color:"#333"},children:[r.label,":"]})," ",r.content]}),(0,Se.jsx)("div",{style:{width:"100%",minHeight:"60px",border:"1px solid #ccc",backgroundColor:"#F1F8E9",marginTop:"0.5rem",padding:"0.6rem",fontSize:"1rem",lineHeight:"1.4",color:"#333"},children:A?(()=>{if(!A)return"\ubc88\uc5ed \uc911...";return A.split("\n\n")[n]||"\ubc88\uc5ed \uc5c6\uc74c"})():"\ubc88\uc5ed \uc911..."})]},e):(0,Se.jsxs)("div",{style:{color:"red",padding:"1rem",border:"1px solid red"},children:["\ub2e8\ub77d\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4: ",e]},e)})})()]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:"800",fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"3rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d (\uacc4\uc18d)"}),(()=>{const e=E.choices[E.answerIndex],t=E.shuffledParagraphs&&E.shuffledParagraphs.length>0&&E.shuffledParagraphs[0].content?E.shuffledParagraphs:E.paragraphs||[],n=e[3],r=t.find(e=>e.label===n);return r&&r.content?(0,Se.jsxs)("div",{className:"paragraph-simple",style:{marginBottom:"1.5rem",marginTop:"0rem"},children:[(0,Se.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"1rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[(0,Se.jsxs)("strong",{style:{fontSize:"1rem",color:"#333"},children:[r.label,":"]})," ",r.content]}),(0,Se.jsx)("div",{style:{width:"100%",minHeight:"60px",border:"1px solid #ccc",backgroundColor:"#F1F8E9",marginTop:"0.5rem",padding:"0.6rem",fontSize:"1rem",lineHeight:"1.4",color:"#333"},children:A?(()=>{if(!A)return"\ubc88\uc5ed \uc911...";return A.split("\n\n")[3]||"\ubc88\uc5ed \uc5c6\uc74c"})():"\ubc88\uc5ed \uc911..."})]}):(0,Se.jsxs)("div",{style:{color:"red",padding:"1rem",border:"1px solid red"},children:["\ub2e8\ub77d\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4: ",n]})})()]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:"800",fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(()=>{const e=E.choices[E.answerIndex],t=E.shuffledParagraphs&&E.shuffledParagraphs.length>0&&E.shuffledParagraphs[0].content?E.shuffledParagraphs:E.paragraphs||[];return e.map((e,n)=>{const r=t.find(t=>t.label===e);return r&&r.content?(0,Se.jsxs)("div",{className:"paragraph-simple",style:{marginBottom:"1.5rem"},children:[(0,Se.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"1rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[(0,Se.jsxs)("strong",{style:{fontSize:"1rem",color:"#333"},children:[r.label,":"]})," ",r.content]}),(0,Se.jsx)("div",{style:{width:"100%",minHeight:"60px",border:"1px solid #ccc",backgroundColor:"#F1F8E9",marginTop:"0.5rem",padding:"0.6rem",fontSize:"1rem",lineHeight:"1.4",color:"#333"},children:A?(()=>{if(!A)return"\ubc88\uc5ed \uc911...";return A.split("\n\n")[n]||"\ubc88\uc5ed \uc5c6\uc74c"})():"\ubc88\uc5ed \uc911..."})]},e):(0,Se.jsxs)("div",{style:{color:"red",padding:"1rem",border:"1px solid red"},children:["\ub2e8\ub77d\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4: ",e]},e)})})()]})})]})]})]}):(0,Se.jsxs)("div",{className:"quiz-generator",children:[(0,Se.jsxs)("div",{className:"generator-header",children:[(0,Se.jsx)("h2",{children:"[\uc720\ud615#01] \ubb38\uc7a5 \uc21c\uc11c \ub9de\ucd94\uae30"}),(0,Se.jsx)("p",{children:"\ubcf8\ubb38\uc744 4\uac1c\ub85c \ubd84\ud560\ud558\uace0 \uc11e\uc5b4\uc11c \uc62c\ubc14\ub978 \uc21c\uc11c\ub97c \ucc3e\ub294 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"input-type-section",children:[(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputType",checked:"clipboard"===p,onChange:()=>X("clipboard")}),(0,Se.jsx)("span",{children:"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30"}),(0,Se.jsx)("button",{type:"button",className:"screenshot-help-btn",onClick:e=>{e.preventDefault(),_(!0)},title:"\ud654\uba74 \ucea1\ucc98 \ubc29\ubc95 \ubcf4\uae30",children:"?"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputType",checked:"file"===p,onChange:()=>X("file")}),(0,Se.jsx)("span",{children:"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \ud30c\uc77c \ucca8\ubd80"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputType",checked:"text"===p,onChange:()=>X("text")}),(0,Se.jsx)("span",{children:"\u270d\ufe0f \uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30"})]})]}),"clipboard"===p&&(0,Se.jsxs)("div",{className:"input-guide".concat(N?" paste-focused":""),tabIndex:0,onClick:()=>k(!0),onFocus:()=>k(!0),onBlur:()=>k(!1),onPaste:e=>{if("clipboard"!==p)return;const t=e.clipboardData.items;for(let n=0;n<t.length;n++)if(-1!==t[n].type.indexOf("image")){const r=t[n].getAsFile();return r&&$(r),void e.preventDefault()}g("\ucea1\ucc98 \uc774\ubbf8\uc9c0\uac00 \uac10\uc9c0\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc5b4 \uc8fc\uc138\uc694."),e.preventDefault()},children:[(0,Se.jsx)("div",{className:"drop-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("div",{className:"drop-text",children:"\uc5ec\uae30\uc5d0 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc73c\uc138\uc694"}),(0,Se.jsxs)("div",{className:"drop-desc",children:["\ud074\ub9ad \ub610\ub294 Tab \ud6c4 ",(0,Se.jsx)("b",{children:"Ctrl+V"}),"\ub85c \ucea1\ucc98 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),y&&(0,Se.jsxs)("div",{className:"preview-row",children:[(0,Se.jsx)("img",{src:y,alt:"\ubd99\uc5ec\ub123\uc740 \uc774\ubbf8\uc9c0 \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"}),x&&(0,Se.jsx)("span",{className:"loading-text",children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),x&&!y&&(0,Se.jsx)("div",{className:"loading-text",children:"OpenAI Vision \ucc98\ub9ac \uc911..."}),f&&(0,Se.jsx)("div",{className:"error-text",children:f})]}),"file"===p&&(0,Se.jsx)("div",{className:"input-guide",children:(0,Se.jsxs)("div",{className:"file-upload-row",children:[(0,Se.jsxs)("label",{htmlFor:"file-upload",className:"file-upload-btn",children:["\ud30c\uc77c \uc120\ud0dd",(0,Se.jsx)("input",{id:"file-upload",type:"file",accept:"image/*",ref:j,onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&(n.type.startsWith("image/")?$(n):g("\uc774\ubbf8\uc9c0 \ud30c\uc77c\ub9cc \ucca8\ubd80 \uac00\ub2a5\ud569\ub2c8\ub2e4."))},disabled:i,style:{display:"none"}})]}),(0,Se.jsx)("span",{className:"file-upload-status",children:j.current&&j.current.files&&j.current.files.length>0?j.current.files[0].name:"\uc120\ud0dd\ub41c \ud30c\uc77c \uc5c6\uc74c"})]})}),(0,Se.jsxs)("div",{className:"input-section",children:[(0,Se.jsxs)("div",{className:"input-label-row",children:[(0,Se.jsx)("label",{htmlFor:"text-input",className:"input-label",children:"\uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30:"}),n.length<100&&(0,Se.jsx)("span",{className:"warning",children:"\u26a0\ufe0f \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 \ub354 \uc88b\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("textarea",{id:"text-input",ref:w,value:n,onChange:e=>{s(e.target.value),w.current&&(w.current.style.height="auto",w.current.style.height=w.current.scrollHeight+"px")},placeholder:"\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc9c1\uc811 \ubd99\uc5ec\ub123\uc5b4 \uc8fc\uc138\uc694. \ucd5c\uc18c 100\uc790 \uc774\uc0c1 \uad8c\uc7a5\ud569\ub2c8\ub2e4.",className:"text-input",rows:8,style:{overflow:"hidden",resize:"none"},disabled:"file"===p&&!n}),(0,Se.jsxs)("div",{className:"text-info",children:[(0,Se.jsxs)("span",{children:["\uae00\uc790 \uc218: ",n.length,"\uc790"]}),"clipboard"===p&&n&&(0,Se.jsx)("span",{className:"edit-hint",children:"\u270f\ufe0f \ucd94\ucd9c\ub41c \ud14d\uc2a4\ud2b8\ub97c \ud0a4\ubcf4\ub4dc\ub85c \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"})]}),f&&(0,Se.jsx)("div",{className:"tooltip",children:f}),x&&(0,Se.jsx)("div",{style:{color:"#6a5acd",fontWeight:600,marginTop:"0.5rem"},children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),c&&(0,Se.jsxs)("div",{className:"error-message",children:["\u274c ",c]}),(0,Se.jsxs)("div",{className:"ai-option-section",children:[(0,Se.jsxs)("div",{className:"option-group",children:[(0,Se.jsxs)("label",{className:"option-label",children:[(0,Se.jsx)("input",{type:"radio",name:"splitMethod",checked:!u,onChange:()=>h(!1)}),(0,Se.jsx)("span",{className:"option-text",children:"\ud83d\udccb \uaddc\uce59 \uae30\ubc18 \ubd84\ud560 (\uae30\ubcf8)"})]}),(0,Se.jsx)("p",{className:"option-description",children:"\uc804\ud658\uc5b4\uc640 \ubb38\uc7a5 \uc218\ub97c \uae30\uc900\uc73c\ub85c \ub2e8\ub77d\uc744 \ubd84\ud560\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"option-group",children:[(0,Se.jsxs)("label",{className:"option-label",children:[(0,Se.jsx)("input",{type:"radio",name:"splitMethod",checked:u,onChange:()=>h(!0),disabled:!1}),(0,Se.jsx)("span",{className:"option-text",children:"\ud83e\udd16 AI \uae30\ubc18 \uc758\ubbf8 \ubd84\ud560 (\uace0\uae09)"})]}),(0,Se.jsx)("p",{className:"option-description",children:"OpenAI GPT-4\uac00 \uc758\ubbf8\uc640 \uc8fc\uc81c\ub97c \ubd84\uc11d\ud558\uc5ec \uc790\uc5f0\uc2a4\ub7fd\uac8c \ub2e8\ub77d\uc744 \ubd84\ud560\ud558\uace0, \uc801\uc808\ud558\uac8c \uc11e\uc5b4\uc11c \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."}),!1]})]}),(0,Se.jsx)("button",{onClick:async()=>{n.trim()?W?d("\ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ud655\uc778 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):U&&U.uid?J<H?d("\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. \ud604\uc7ac ".concat(J.toLocaleString(),"\ud3ec\uc778\ud2b8, \ud544\uc694 ").concat(H.toLocaleString(),"\ud3ec\uc778\ud2b8")):q(!0):d("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."):d("\ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.")},disabled:i||!n.trim(),className:"generate-button",children:u?"\ud83e\udd16 AI\ub85c \ubb38\uc81c \uc0dd\uc131":"\ud83d\udccb \ubb38\uc81c \uc0dd\uc131"}),(i||a)&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("span",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:a?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":u?"\ud83e\udd16 AI \ubd84\uc11d \uc911...":"\ud83d\udccb \ubb38\uc81c \uc0dd\uc131 \uc911..."})]})}),(0,Se.jsx)(go,{isOpen:S,onClose:()=>_(!1)}),(0,Se.jsx)(yo,{isOpen:V,onClose:()=>q(!1),onConfirm:async()=>{q(!1),o(!0),d("");try{const e=await(0,vo.ev)(U.uid,"11","\ubb38\uc7a5 \uc21c\uc11c \ub9de\ucd94\uae30",U.displayName||"\uc0ac\uc6a9\uc790",U.nickname||"\uc0ac\uc6a9\uc790");if(!e.success)throw new Error(e.error||"\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");{Y(e.remainingPoints),console.log("\ud83d\udd0d \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791..."),console.log("\ud83d\udcdd \uc785\ub825 \ud14d\uc2a4\ud2b8 \uae38\uc774:",n.length),console.log("\ud83e\udd16 AI \uc0ac\uc6a9 \uc5ec\ubd80:",u);const r=await Do(n,u);console.log("\ud83d\udd0d \uc11e\uae30 \uacb0\uacfc \uac80\uc99d...");const s=r.shuffledParagraphs.map(e=>e.label),i=r.correctOrder;console.log("\ud83d\udcca \uc11e\uae30 \uacb0\uacfc \ubd84\uc11d:"),console.log("- \uc11e\uc778 \uc21c\uc11c (\ub77c\ubca8):",s),console.log("- \uc6d0\ubcf8 \uc21c\uc11c (\ub77c\ubca8):",i),console.log("\uc0dd\uc131\ub41c \ud034\uc988 \uc815\ubcf4:",{originalText:r.originalText,shuffledParagraphs:r.shuffledParagraphs,correctOrder:r.correctOrder,choices:r.choices,answerIndex:r.answerIndex}),I(r);try{const e="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";if(!e)return void R("\ubc88\uc5ed\uc744 \uc0ac\uc6a9\ud558\ub824\uba74 .env \ud30c\uc77c\uc5d0 REACT_APP_OPENAI_API_KEY\ub97c \uc124\uc815\ud574\uc8fc\uc138\uc694.");if(!r.originalText)return void R("\ubc88\uc5ed\ud560 \uc6d0\ubcf8 \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const t=r.choices[r.answerIndex],n=r.shuffledParagraphs&&r.shuffledParagraphs.length>0&&r.shuffledParagraphs[0].content?r.shuffledParagraphs:r.paragraphs||[];console.log("\ud83d\udd04 \ub2e8\ub77d\ubcc4 \ubcd1\ub82c \ubc88\uc5ed \uc2dc\uc791...");const s=t.map(async(t,r)=>{const s=n.find(e=>e.label===t);if(!s||!s.content)return console.warn("\u26a0\ufe0f ".concat(t," \ub2e8\ub77d\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc74c")),{index:r,translation:"[".concat(t,"] \ub2e8\ub77d \uc5c6\uc74c"),label:t};console.log("\ud83d\udcdd ".concat(t," \ub2e8\ub77d \ubc88\uc5ed \uc2dc\uc791..."));try{const n=await async function(e,t){try{if(console.log("\ud83c\udf10 \ubc88\uc5ed \uc2dc\uc791:",e.substring(0,50)+"..."),!t)throw new Error("API \ud0a4\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");const n="\ub2e4\uc74c \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\ub85c \ubc88\uc5ed\ud558\uc138\uc694.\n\n\ubc88\uc5ed \uc694\uad6c\uc0ac\ud56d:\n- \uc790\uc5f0\uc2a4\ub7fd\uace0 \ub9e4\ub044\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\n- \uc6d0\ubb38\uc758 \uc758\ubbf8\ub97c \uc815\ud655\ud788 \uc804\ub2ec\n- \ubb38\ud559\uc801\uc774\uace0 \uc77d\uae30 \uc26c\uc6b4 \ubb38\uccb4\n\n\ubc88\uc5ed\ub9cc \ubc18\ud658\ud558\uc138\uc694 (\ub2e4\ub978 \ud14d\uc2a4\ud2b8 \uc5c6\uc774):\n\n".concat(e),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a helpful assistant that provides natural Korean translations."},{role:"user",content:n}],temperature:.3,max_tokens:800})});if(!r.ok){const e=await r.text();throw console.error("\u274c API \uc624\ub958:",r.status,e),new Error("API \ud638\ucd9c \uc2e4\ud328: ".concat(r.status))}const s=await r.json();if(console.log("\u2705 \ubc88\uc5ed \uc644\ub8cc"),!s.choices||!s.choices[0]||!s.choices[0].message)throw new Error("API \uc751\ub2f5 \ud615\uc2dd \uc624\ub958");return s.choices[0].message.content.trim()}catch(c){throw console.error("\u274c \ubc88\uc5ed \uc624\ub958:",c),c}}(s.content,e);return console.log("\u2705 ".concat(t," \ub2e8\ub77d \ubc88\uc5ed \uc644\ub8cc")),{index:r,translation:n,label:t}}catch(c){return console.error("\u274c ".concat(t," \ub2e8\ub77d \ubc88\uc5ed \uc2e4\ud328:"),c),{index:r,translation:"[".concat(t,"] \ubc88\uc5ed \uc2e4\ud328"),label:t}}}),i=await Promise.all(s),o=i.sort((e,t)=>e.index-t.index).map(e=>e.translation).join("\n\n");R(o),console.log("\u2705 \ubaa8\ub4e0 \ub2e8\ub77d \ubcd1\ub82c \ubc88\uc5ed \uc644\ub8cc")}catch(c){console.error("\u274c \ubc88\uc5ed \uc2e4\ud328:",c);const t=c instanceof Error?c.message:"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958";R("\ubc88\uc5ed \uc2e4\ud328: ".concat(t))}t&&t(r)}}catch(e){try{await(0,vo.Lw)(U.uid,H,"\ubb38\uc7a5 \uc21c\uc11c \ub9de\ucd94\uae30",U.displayName||"\uc0ac\uc6a9\uc790",U.nickname||"\uc0ac\uc6a9\uc790");const e=await(0,vo.MC)(U.uid);Y(e)}catch(r){console.error("\ud3ec\uc778\ud2b8 \ud658\ubd88 \uc2e4\ud328:",r)}d(e instanceof Error?e.message:"\ubb38\uc81c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{o(!1)}},pointsToDeduct:H,userCurrentPoints:J,remainingPoints:J-H,workTypeName:"\ubb38\uc7a5 \uc21c\uc11c \ub9de\ucd94\uae30"})]})},Bo=e=>{let{isOpen:t,onRequestClose:n}=e;const r=Z();return(0,Se.jsx)(be(),{isOpen:t,onRequestClose:n,className:"auth-modal",overlayClassName:"auth-modal-overlay",children:(0,Se.jsxs)("div",{className:"auth-modal-content",children:[(0,Se.jsx)("h2",{children:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud55c \uc11c\ube44\uc2a4\uc785\ub2c8\ub2e4"}),(0,Se.jsx)("p",{children:"\ud574\ub2f9 \uae30\ub2a5\uc744 \uc774\uc6a9\ud558\uae30 \uc704\ud574\uc11c\ub294 \ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."}),(0,Se.jsxs)("div",{className:"auth-modal-buttons",children:[(0,Se.jsx)("button",{onClick:()=>{n(),r("/login")},className:"login-button",children:"\ub85c\uadf8\uc778"}),(0,Se.jsx)("button",{onClick:()=>{n(),r("/signup")},className:"signup-button",children:"\ud68c\uc6d0\uac00\uc785"})]}),(0,Se.jsx)("button",{onClick:n,className:"close-button",children:"\ub2eb\uae30"})]})})},Uo=()=>(0,Se.jsxs)("div",{className:"print-header",children:[(0,Se.jsx)("img",{src:"/logo.png",alt:"Edge English Lab",className:"print-header-logo"}),(0,Se.jsxs)("div",{className:"print-header-texts",children:[(0,Se.jsx)("span",{className:"print-header-title",children:"Edge English Lab"}),(0,Se.jsx)("span",{className:"print-header-tagline",children:"AI \uc601\uc5b4 \ubb38\uc81c \uc0dd\uc131 \ud50c\ub7ab\ud3fc"})]})]});const Wo=function(){const{pathname:e}=$();return(0,r.useEffect)(()=>{window.scrollTo(0,0)},[e]),null},Vo=1123,qo=19,Ho=38,Ko=30,Jo=11,Yo=30,Qo=11,Go=30,$o=11;function Xo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:38,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.7;const s=.55*n,i=Math.floor(680/s);return Math.ceil(e.length/i)*n*r+t}const Zo=()=>{const{userData:e,loading:t}=Te(),[n,s]=(0,r.useState)("text"),[i,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[x,b]=(0,r.useState)("none"),[w,j]=(0,r.useState)(!1),N=(0,r.useRef)(null),[k,S]=(0,r.useState)({needsSecondPage:!1,needsThirdPage:!1,page1Content:"",page2Content:"",page3Content:""}),[_,T]=(0,r.useState)(!1),[C,E]=(0,r.useState)(!1),[I,A]=(0,r.useState)(!1),[R,O]=(0,r.useState)(!1),[P,F]=(0,r.useState)(0),[D,z]=(0,r.useState)(0),[L,M]=(0,r.useState)([]);(0,r.useEffect)(()=>{t||(async()=>{try{var n;const r=await(0,vo.getWorkTypePoints)();M(r);const s=(null===(n=r.find(e=>"4"===e.id))||void 0===n?void 0:n.points)||0;if(F(s),!t&&e&&e.uid){const t=await(0,vo.MC)(e.uid);z(t)}}catch(r){console.error("\ud3ec\uc778\ud2b8 \ucd08\uae30\ud654 \uc624\ub958:",r)}})()},[null===e||void 0===e?void 0:e.uid,t]),(0,r.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,r.useEffect)(()=>{u&&window.scrollTo(0,0)},[u]);(0,r.useEffect)(()=>{u&&u.translation&&(()=>{if(!u||!u.translation)return;const e=Vo-qo-Ho,t=Ko+Jo+Xo(u.blankedText,38,16,1.7),n=Go+$o;let r=0;u.options.forEach(e=>{r+=Xo("".concat(e," (\uc815\ub2f5)"),11,16,1.3)});const s=n+r,i=Yo+Qo+Xo(u.translation,38,16,1.7),o=e-76;console.log("\ud83d\udccf \uc720\ud615#04 \ub3d9\uc801 \ud398\uc774\uc9c0 \ubd84\ud560 \uacc4\uc0b0:",{availableHeight:e.toFixed(2)+"px",sectionAHeight:t.toFixed(2)+"px",sectionBHeight:s.toFixed(2)+"px",sectionCHeight:i.toFixed(2)+"px",totalHeight:(t+s+i).toFixed(2)+"px",effectiveAvailableHeight:o.toFixed(2)+"px",quizTextLength:u.blankedText.length,translationTextLength:u.translation.length}),S(t+s+i<=o?{needsSecondPage:!1,needsThirdPage:!1,page1Content:"A+B+C",page2Content:"",page3Content:""}:t+s<=o?i<=o?{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A+B",page2Content:"C",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!0,page1Content:"A+B",page2Content:"C-part1",page3Content:"C-part2"}:t<=o&&s+i<=o?{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A",page2Content:"B+C",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!0,page1Content:"A",page2Content:"B",page3Content:"C"})})()},[u]),(0,r.useEffect)(()=>{j(i.length>=2e3)},[i]);const B=e=>{s(e),o(""),l(null),d(null),h(null),v(null)};async function U(e){const t=await(n=e,new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)}));var n;const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"\uc601\uc5b4\ubb38\uc81c\ub85c \uc0ac\uc6a9\ub418\ub294 \ubcf8\ubb38\uc774\uc57c.\n\uc774 \uc774\ubbf8\uc9c0\uc758 \ub0b4\uc6a9\uc744 \uc218\uc791\uc5c5\uc73c\ub85c \uc815\ud655\ud788 \uc77d\uace0, \uc601\uc5b4 \ubcf8\ubb38\ub9cc \ucd94\ub824\ub0b4\uc11c \ubcf4\uc5ec\uc918.\n\uae00\uc790\ub294 \uc778\uc1c4\uae00\uc528\uccb4 \uc774\uc678\uc5d0 \uc190\uae00\uc528\ub098 \uc6d0, \ubc11\uc904 \ub4f1 \ud45c\uc2dc\ub418\uc5b4\uc788\ub294 \uac83\uc740 \ubb34\uc2dc\ud574. \n\ubcf8\ubb38\uc911\uc5d0 \uc6d0\ubb38\uc790 1, 2, 3... \ub4f1\uc73c\ub85c \ud45c\uc2dc\ub41c\uac74 \uc81c\uac70\ud574\uc918. \n\uc6d0\ubb38\uc790 \uc81c\uac70\ud6c4 \uc904\uc744 \ubc14\uafb8\uac70\ub098 \ubb38\ub2e8\uc744 \ubc14\uafb8\uc9c0\ub9d0\uace0, \uc804\uccb4\uac00 \ud55c \ubb38\ub2e8\uc73c\ub85c \uad6c\uc131\ud574\uc918. \n\uc601\uc5b4 \ubcf8\ubb38\ub9cc, \uc544\ubb34\ub7f0 \uc124\uba85\uc774\ub098 \uc548\ub0b4\ubb38 \uc5c6\uc774, \ud55c \ubb38\ub2e8\uc73c\ub85c\ub9cc \ucd9c\ub825\ud574\uc918."},{type:"image_url",image_url:{url:t}}]}],max_tokens:2048})});return(await r.json()).choices[0].message.content.trim()}const W=async()=>{if(null===e||void 0===e||!e.uid)return;let t="";m(!0),h(null),v(null);let r=0;try{const s=L.find(e=>"4"===e.id);if(!s)throw new Error("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const o=await(0,vo.ev)(e.uid,"4",s.name,e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790");if(!o.success)throw new Error(o.error||"\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");if(r=o.deductedPoints,z(o.remainingPoints),"text"===n){if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}else if("image"===n&&a)t=await U(a);else{if("capture"!==n)throw new Error("\uc774\ubbf8\uc9c0\ub97c \ucca8\ubd80\ud574\uc8fc\uc138\uc694.");if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}if(!t.trim())throw new Error("\ucd94\ucd9c\ub41c \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const l=[],c=/\(([^)]+)\)/g;let d;for(;null!==(d=c.exec(i));)l.push(d[1].trim());const u=await async function(e){const t=[],n=/\(([^)]+)\)/g;let r;for(;null!==(r=n.exec(e));)t.push(r[1].trim());const s="\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uae00\uc758 \uc8fc\uc81c\uc640 \uac00\uc7a5 \ubc00\uc811\ud55c, \uc758\ubbf8 \uc788\ub294 \uad6c(phrase, 3~10\ub2e8\uc5b4 \uc774\ub0b4) 1\uac1c\ub97c \uc120\uc815\ud574.\n1. \ubc18\ub4dc\uc2dc \ubcf8\ubb38\uc5d0 \uc2e4\uc81c\ub85c \ub4f1\uc7a5\ud55c \uad6c(\ucca0\uc790, \ud615\ud0dc, \ub300\uc18c\ubb38\uc790\uae4c\uc9c0 \ub3d9\uc77c)\ub97c \uc815\ub2f5\uc73c\ub85c \uc120\uc815\ud574\uc57c \ud574. \ubcc0\ud615, \ub300\uccb4, \ub3d9\uc758\uc5b4, \uc5b4\ud615 \ubcc0\ud654 \uc5c6\uc774 \ubcf8\ubb38\uc5d0 \uc788\ub358 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud574\uc57c \ud574.\n2. \ubb38\uc81c\uc758 \ubcf8\ubb38(\ube48\uce78 \ud3ec\ud568)\uc740 \ubc18\ub4dc\uc2dc \uc0ac\uc6a9\uc790\uac00 \uc785\ub825\ud55c \uc804\uccb4 \ubcf8\ubb38\uacfc \uc644\uc804\ud788 \ub3d9\uc77c\ud574\uc57c \ud558\uba70, \uc77c\ubd80 \ubb38\uc7a5\ub9cc \ucd94\ucd9c\ud558\uac70\ub098, \ubb38\uc7a5 \uc21c\uc11c\ub97c \ubc14\uafb8\uac70\ub098, \ubcf8\ubb38\uc744 \uc694\uc57d/\ubcc0\ud615\ud574\uc11c\ub294 \uc548 \ub3fc. \uc624\uc9c1 \uc815\ub2f5 \uad6c\ub9cc ()\ub85c \uce58\ud658\ud574.\n3. \uc785\ub825\ub41c \ubcf8\ubb38\uc5d0 \uc774\ubbf8 ()\ub85c \ubb36\uc778 \ub2e8\uc5b4\ub098 \uad6c\uac00 \uc788\ub2e4\uba74, \uadf8 \ubd80\ubd84\uc740 \uc808\ub300 \ube48\uce78 \ucc98\ub9ac \ub300\uc0c1\uc73c\ub85c \uc0bc\uc9c0 \ub9c8\uc138\uc694. \ubc18\ub4dc\uc2dc \uad04\ud638 \ubc16\uc5d0 \uc788\ub294 \uad6c\ub9cc \ube48\uce78 \ud6c4\ubcf4\ub85c \uc120\uc815\ud558\uc138\uc694.\n4. \uc544\ub798 \uad6c\ub294 \uc808\ub300 \ube48\uce78 \ucc98\ub9ac\ud558\uc9c0 \ub9c8\uc138\uc694: ".concat(t.length>0?t.join(", "):"\uc5c6\uc74c",'\n5. \uc815\ub2f5(\uad6c) + \uc624\ub2f5(\ube44\uc2b7\ud55c \uae38\uc774\uc758 \uad6c 4\uac1c, \uc758\ubbf8\ub294 \ub2e4\ub984) \ucd1d 5\uac1c\ub97c \uc0dd\uc131\ud574.\n6. \uc815\ub2f5\uc758 \uc704\uce58\ub294 1~5\ubc88 \uc911 \ub79c\ub364.\n7. \ubcf8\ubb38 \ud574\uc11d\ub3c4 \ud568\uaed8 \uc81c\uacf5.\n8. \uc544\ub798 JSON \ud615\uc2dd\uc73c\ub85c \uc751\ub2f5:\n{\n  "options": ["...", ...],\n  "answerIndex": 2, // 0~4\n  "translation": "..."\n}\n\uc8fc\uc758: options\uc758 \uc815\ub2f5(\uc815\ub2f5 \uc778\ub371\uc2a4\uc5d0 \ud574\ub2f9\ud558\ub294 \uad6c)\ub294 \ubc18\ub4dc\uc2dc \ubcf8\ubb38\uc5d0 \uc788\ub358 \uad6c\uc640 \uc644\uc804\ud788 \uc77c\uce58\ud574\uc57c \ud558\uba70, \ubcc0\ud615/\ub300\uccb4/\ub3d9\uc758\uc5b4/\uc5b4\ud615 \ubcc0\ud654\uac00 \uc788\uc73c\uba74 \uc548 \ub428. \ubb38\uc81c\uc758 \ubcf8\ubb38(\ube48\uce78 \ud3ec\ud568)\uc740 \ubc18\ub4dc\uc2dc \uc785\ub825\ud55c \uc804\uccb4 \ubcf8\ubb38\uacfc \ub3d9\uc77c\ud574\uc57c \ud568. \uc785\ub825\ub41c \ubcf8\ubb38\uc5d0 \uc774\ubbf8 ()\ub85c \ubb36\uc778 \ubd80\ubd84\uc740 \ube48\uce78 \ucc98\ub9ac \ub300\uc0c1\uc5d0\uc11c \uc81c\uc678\ud574\uc57c \ud568.\n\ubcf8\ubb38:\n').concat(e),i=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:s}],max_tokens:1200,temperature:.7})}),o=(await i.json()).choices[0].message.content.match(/\{[\s\S]*\}/);if(!o)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let a;try{a=JSON.parse(o[0])}catch(d){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!e.includes(a.options[a.answerIndex]))throw new Error("\uc815\ub2f5 \uad6c\uac00 \ubcf8\ubb38\uc5d0 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. AI \uc751\ub2f5 \uc624\ub958\uc785\ub2c8\ub2e4.");const l=a.options[a.answerIndex],c=function(e,t){let n=!1;const r=e.split(/([()])/);let s=!1;for(let o=0;o<r.length;o++)if("("!==r[o])if(")"!==r[o]){if(!s&&!n){const e=new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));e.test(r[o])&&(r[o]=r[o].replace(e,"(__________)"),n=!0)}}else s=!1;else s=!0;let i="";s=!1;for(let o=0;o<r.length;o++)"("!==r[o]?")"!==r[o]?i+=r[o]:(s=!1,i+=")"):(s=!0,i+="(");return i}(e,l);if(a.blankedText=c,a.blankedText.replace(/\( *_{6,}\)/,l).trim()!==e.trim())throw new Error("\ube48\uce78 \ubcf8\ubb38\uc774 \uc6d0\ubcf8 \ubcf8\ubb38\uacfc \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. AI \uc751\ub2f5 \uc624\ub958\uc785\ub2c8\ub2e4.");if(!a.blankedText||!a.options||"number"!==typeof a.answerIndex||!a.translation)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");return a}(t);h(u)}catch(s){if(console.error("\ube48\uce78 \ubb38\uc81c \uc0dd\uc131 \uc624\ub958:",s),r>0&&null!==e&&void 0!==e&&e.uid)try{await(0,vo.Lw)(e.uid,r,"\ube48\uce78(\uad6c) \ubb38\uc81c \uc0dd\uc131",e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790","\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\ub85c \uc778\ud55c \ud3ec\uc778\ud2b8 \ud658\ubd88"),z(e=>e+r)}catch(o){console.error("\ud3ec\uc778\ud2b8 \ud658\ubd88 \uc624\ub958:",o)}alert(s.message||"\ubb38\uc81c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}},V=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),b("no-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),b("none")},1e3)},100)},q=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),b("with-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),b("none")},1e3)},100)},H=()=>{h(null),v(null),o(""),l(null),d(null),T(!1),m(!1),g(!1)};if(u){const e=u.options[u.answerIndex]||"",t=e.trim().split(/\s+/).length,n=Math.max(e.length,4*t),r=("_".repeat(n),u.blankedText);return(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("div",{className:"quiz-display no-print",children:[(0,Se.jsxs)("div",{className:"quiz-header",children:[(0,Se.jsx)("h2",{className:"no-print",children:"#04. \ube48\uce78(\uad6c) \ucd94\ub860 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"quiz-header-buttons no-print",children:[(0,Se.jsx)("button",{onClick:H,className:"reset-button",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\uc0c8 \ubb38\uc81c \ub9cc\ub4e4\uae30"}),(0,Se.jsxs)("button",{onClick:V,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsx)("span",{children:"\uc778\uc1c4 (\ubb38\uc81c)"})]}),(0,Se.jsxs)("button",{onClick:q,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 6px rgba(240, 147, 251, 0.25)"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsxs)("span",{children:["\uc778\uc1c4 (",(0,Se.jsx)("span",{style:{color:"#FFD600"},children:"\uc815\ub2f5"}),")"]})]})]})]}),(0,Se.jsxs)("div",{className:"quiz-section",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1.18rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uad6c(phrase)\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#04"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{fontSize:"1.08rem",lineHeight:1.7,margin:"1.2rem 0",background:"#f7f8fc",borderRadius:"8px",padding:"1.2rem",fontFamily:"inherit",fontWeight:400},children:r}),(0,Se.jsx)("div",{className:"work04-problem-options",style:{margin:"1.2rem 0"},children:u.options.map((e,t)=>(0,Se.jsxs)("label",{style:{display:"block",fontSize:"1.08rem",margin:"0.4rem 0",cursor:"pointer",fontWeight:y===t?700:400,color:y===t?"#6a5acd":"#222",fontFamily:"inherit"},children:[(0,Se.jsx)("input",{type:"radio",name:"blank-quiz",checked:y===t,onChange:()=>v(t),style:{marginRight:"0.7rem"}}),"\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,null!==y&&u.answerIndex===t&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]},t))}),null!==y&&(0,Se.jsxs)("div",{className:"problem-answer no-print",style:{marginTop:"1.2rem",color:"#1976d2",fontWeight:700},children:["\uc815\ub2f5: ","\u2460\u2461\u2462\u2463\u2464"[u.answerIndex]||u.answerIndex+1," ",u.options[u.answerIndex]]})]})]}),"no-answer"===x&&(0,Se.jsx)("div",{className:"only-print",children:w?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uad6c(phrase)\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#04"})]}),(0,Se.jsx)("div",{className:"work04-print-answer-passage",style:{marginTop:"0.9rem",fontSize:"0.8rem !important",padding:"1rem",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:r})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.8rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ub2e4\uc74c \uc911\uc5d0\uc11c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("div",{className:"work04-options-container",children:(0,Se.jsx)("div",{className:"work04-problem-options",style:{margin:"1rem 0"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e]},t))})})]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.8rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uad6c(phrase)\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("div",{className:"work04-print-problem-passage",style:{marginTop:"0.9rem",fontSize:"0.8rem !important",padding:"1rem",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:r}),(0,Se.jsx)("div",{className:"work04-options-container",children:(0,Se.jsx)("div",{className:"work04-problem-options work04-print-options",style:{margin:"1rem 0"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e]},t))})})]})})]})}),"with-answer"===x&&u&&(0,Se.jsxs)("div",{className:"only-print print-answer-mode",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(k.page1Content.includes("A")||"A"===k.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uad6c(phrase)\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#04"})]}),(0,Se.jsx)("div",{className:"work04-print-answer-passage",style:{marginTop:"0.9rem",marginBottom:"1.5rem",fontSize:"1rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:r})]}),(k.page1Content.includes("B")||"B"===k.page1Content)&&(0,Se.jsx)("div",{className:"work04-options-container",children:(0,Se.jsx)("div",{className:"work04-problem-options",style:{marginTop:"0",marginBottom:"1rem"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,u.answerIndex===t&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]},t))})}),(k.page1Content.includes("C")||"C"===k.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction-copy",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",border:"2px solid #333",marginTop:"1.2rem",marginBottom:"1.2rem",display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",boxSizing:"border-box",marginLeft:"0",marginRight:"0"},children:(0,Se.jsx)("span",{children:"\ubcf8\ubb38 \ud574\uc11d"})}),(0,Se.jsx)("div",{className:"work04-print-answer-translation",style:{fontSize:"1rem",lineHeight:"1.7",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",marginBottom:"1.2rem"},children:"C-part1"===k.page1Content?u.translation.substring(0,Math.floor(u.translation.length/2)):u.translation})]})]})})]}),k.needsSecondPage&&(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(k.page2Content.includes("B")||"B"===k.page2Content)&&(0,Se.jsx)("div",{className:"work04-options-container",children:(0,Se.jsx)("div",{className:"work04-problem-options",style:{marginTop:"0",marginBottom:"1rem"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,u.answerIndex===t&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]},t))})}),(k.page2Content.includes("C")||"C"===k.page2Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction-copy",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",border:"2px solid #333",marginTop:"1.2rem",marginBottom:"1.2rem",display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",boxSizing:"border-box",marginLeft:"0",marginRight:"0"},children:(0,Se.jsx)("span",{children:"\ubcf8\ubb38 \ud574\uc11d"})}),(0,Se.jsx)("div",{className:"work04-print-answer-translation",style:{fontSize:"1rem",lineHeight:"1.7",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",marginBottom:"1.2rem"},children:"C-part1"===k.page2Content?u.translation.substring(0,Math.floor(u.translation.length/2)):u.translation})]})]})})]}),k.needsThirdPage&&(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsx)("div",{className:"quiz-content",children:(k.page3Content.includes("C")||"C"===k.page3Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction-copy",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",border:"2px solid #333",marginTop:"1.2rem",marginBottom:"1.2rem",display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",boxSizing:"border-box",marginLeft:"0",marginRight:"0"},children:(0,Se.jsx)("span",{children:"\ubcf8\ubb38 \ud574\uc11d"})}),(0,Se.jsx)("div",{className:"work04-print-answer-translation",style:{fontSize:"1rem",lineHeight:"1.7",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",marginBottom:"1.2rem"},children:"C-part2"===k.page3Content?u.translation.substring(Math.floor(u.translation.length/2)):u.translation})]})})})]})]})]})}return(0,Se.jsxs)("div",{className:"quiz-generator",onPaste:async e=>{if("capture"!==n)return;const t=e.clipboardData.items;for(let n=0;n<t.length;n++)if(-1!==t[n].type.indexOf("image")){const s=t[n].getAsFile();if(s){l(s),d(URL.createObjectURL(s)),g(!0);try{const e=await U(s);o(e),setTimeout(()=>{N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}return void e.preventDefault()}e.preventDefault()},children:[(0,Se.jsxs)("div",{className:"generator-header",children:[(0,Se.jsx)("h2",{children:"[\uc720\ud615#04] \ube48\uce78(\uad6c) \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131"}),(0,Se.jsx)("p",{children:"\uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uac00\uc7a5 \uc911\uc694\ud55c \uad6c(phrase)\ub97c \ube48\uce78\uc73c\ub85c \ubc14\uafb8\uace0, \uac1d\uad00\uc2dd 5\uc9c0\uc120\ub2e4 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"input-type-section",children:[(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"capture"===n,onChange:()=>B("capture")}),(0,Se.jsx)("span",{children:"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30"}),(0,Se.jsx)("button",{type:"button",className:"screenshot-help-btn",onClick:e=>{e.preventDefault(),A(!0)},title:"\ud654\uba74 \ucea1\ucc98 \ubc29\ubc95 \ubcf4\uae30",children:"?"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"image"===n,onChange:()=>B("image")}),(0,Se.jsx)("span",{children:"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \ud30c\uc77c \ucca8\ubd80"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"text"===n,onChange:()=>B("text")}),(0,Se.jsx)("span",{children:"\u270d\ufe0f \uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30"})]})]}),"capture"===n&&(0,Se.jsxs)("div",{className:"input-guide".concat(_?" paste-focused":""),tabIndex:0,onClick:()=>T(!0),onFocus:()=>T(!0),onBlur:()=>T(!1),children:[(0,Se.jsx)("div",{className:"drop-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("div",{className:"drop-text",children:"\uc5ec\uae30\uc5d0 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc73c\uc138\uc694"}),(0,Se.jsxs)("div",{className:"drop-desc",children:["\ud074\ub9ad \ub610\ub294 Tab \ud6c4 ",(0,Se.jsx)("b",{children:"Ctrl+V"}),"\ub85c \ucea1\ucc98 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),c&&(0,Se.jsx)("div",{className:"preview-row",children:(0,Se.jsx)("img",{src:c,alt:"\ucea1\ucc98 \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"})}),(p||f)&&(0,Se.jsx)("div",{style:{color:"#6a5acd",fontWeight:600,marginTop:"0.7rem"},children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),"image"===n&&(0,Se.jsx)("div",{className:"input-guide",children:(0,Se.jsxs)("div",{className:"file-upload-row",children:[(0,Se.jsxs)("label",{htmlFor:"blank-quiz-image",className:"file-upload-btn",children:["\ud30c\uc77c \uc120\ud0dd",(0,Se.jsx)("input",{id:"blank-quiz-image",type:"file",accept:"image/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){l(n),d(URL.createObjectURL(n)),g(!0);try{const e=await U(n);o(e),setTimeout(()=>{N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}},style:{display:"none"}})]}),(0,Se.jsx)("span",{className:"file-upload-status",children:a?a.name:"\uc120\ud0dd\ub41c \ud30c\uc77c \uc5c6\uc74c"}),c&&(0,Se.jsx)("img",{src:c,alt:"\uc5c5\ub85c\ub4dc \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"}),(p||f)&&(0,Se.jsx)("div",{className:"loading-text",children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]})}),(0,Se.jsxs)("div",{className:"input-section",children:[(0,Se.jsxs)("div",{className:"input-label-row",children:[(0,Se.jsx)("label",{htmlFor:"blank-quiz-text",className:"input-label",children:"\uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30:"}),i.length<100&&(0,Se.jsx)("span",{className:"warning",children:"\u26a0\ufe0f \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 \ub354 \uc88b\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("textarea",{id:"blank-quiz-text",ref:N,value:i,onChange:e=>{o(e.target.value),N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},placeholder:"\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc9c1\uc811 \ubd99\uc5ec\ub123\uc5b4 \uc8fc\uc138\uc694. \ucd5c\uc18c 100\uc790 \uc774\uc0c1 \uad8c\uc7a5\ud569\ub2c8\ub2e4.",className:"text-input",rows:8,style:{overflow:"hidden",resize:"none"},disabled:"image"===n&&!i}),(0,Se.jsx)("div",{className:"text-info",children:(0,Se.jsxs)("span",{children:["\uae00\uc790 \uc218: ",i.length,"\uc790"]})})]}),(0,Se.jsx)("button",{onClick:async()=>{if(console.log("\ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778:",{userData:e,uid:null===e||void 0===e?void 0:e.uid,loading:t}),t)return void alert("\ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if(!e||!e.uid)return console.error("\ub85c\uadf8\uc778 \uc0c1\ud0dc \uc624\ub958:",{userData:e,loading:t}),void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.");const n=L.find(e=>"4"===e.id);if(!n)return void alert("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=n.points;D<r?alert("\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. \ud604\uc7ac ".concat(D.toLocaleString(),"P, \ud544\uc694 ").concat(r.toLocaleString(),"P")):(F(r),O(!0))},disabled:p||!i.trim(),className:"generate-button",children:"\ube48\uce78(\uad6c) \ubb38\uc81c \uc0dd\uc131\ud558\uae30"}),(p||f)&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("span",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:f?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":"\ud83d\udccb \ubb38\uc81c \uc0dd\uc131 \uc911..."})]})}),(0,Se.jsx)(yo,{isOpen:R,onClose:()=>O(!1),onConfirm:()=>{O(!1),W()},workTypeName:"\ube48\uce78(\uad6c) \ubb38\uc81c \uc0dd\uc131",pointsToDeduct:P,userCurrentPoints:D,remainingPoints:D-P}),(0,Se.jsx)(go,{isOpen:C,onClose:()=>E(!1)})]})},ea=25,ta=25,na=20,ra=20,sa=30,ia=20,oa=754,aa=1048,la=30,ca=11,da=30,ua=11,ha=30,pa=11;function ma(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:38,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.7;const s=oa-40,i=.55*n,o=Math.floor(s/i);return Math.ceil(e.length/o)*n*r+t}const fa=()=>{const{userData:e,loading:t}=Te(),[n,s]=(0,r.useState)("text"),[i,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[x,b]=(0,r.useState)("none"),[w,j]=(0,r.useState)(!1),N=(0,r.useRef)(null),[k,S]=(0,r.useState)(!1),[_,T]=(0,r.useState)(!1),[C,E]=(0,r.useState)(!1),[I,A]=(0,r.useState)(0),[R,O]=(0,r.useState)(0),[P,F]=(0,r.useState)([]);(0,r.useEffect)(()=>{t||(async()=>{try{const r=await(0,vo.getWorkTypePoints)();if(console.log("\ud3ec\uc778\ud2b8 \uc124\uc815 \ub85c\ub4dc \uacb0\uacfc:",r),Array.isArray(r)&&r.length>0){var n;F(r);const e=(null===(n=r.find(e=>"5"===e.id))||void 0===n?void 0:n.points)||20;A(e),console.log("\uc720\ud615#05 \ud3ec\uc778\ud2b8 \uc124\uc815:",e)}else console.warn("\ud3ec\uc778\ud2b8 \uc124\uc815\uc774 \ube44\uc5b4\uc788\uac70\ub098 \ubc30\uc5f4\uc774 \uc544\ub2d9\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4."),F([{id:"1",name:"\uc720\ud615#01",points:10,description:"\ubb38\uc7a5 \uc21c\uc11c \ud14c\uc2a4\ud2b8"},{id:"2",name:"\uc720\ud615#02",points:15,description:"\ub3c5\ud574 \ubb38\uc81c \uc0dd\uc131"},{id:"3",name:"\uc720\ud615#03",points:12,description:"\uc5b4\ud718 \ub2e8\uc5b4 \ubb38\uc81c"},{id:"4",name:"\uc720\ud615#04",points:18,description:"\ube48\uce78(\uad6c) \ucd94\ub860 \ubb38\uc81c"},{id:"5",name:"\uc720\ud615#05",points:20,description:"\ube48\uce78(\ubb38\uc7a5) \ucd94\ub860 \ubb38\uc81c"},{id:"6",name:"\uc720\ud615#06",points:16,description:"\ubb38\uc7a5 \uc704\uce58 \ucd94\ub860 \ubb38\uc81c"},{id:"7",name:"\uc720\ud615#07",points:22,description:"\uc8fc\uc694 \uc544\uc774\ub514\uc5b4 \ucd94\ub860 \ubb38\uc81c"},{id:"8",name:"\uc720\ud615#08",points:25,description:"\uc81c\ubaa9 \ucd94\ub860 \ubb38\uc81c"},{id:"9",name:"\uc720\ud615#09",points:14,description:"\ubb38\ubc95 \uc624\ub958 \ubb38\uc81c"},{id:"10",name:"\uc720\ud615#10",points:30,description:"\ubcf5\ud569 \ubb38\ubc95 \uc624\ub958 \ubb38\uc81c"},{id:"11",name:"\uc720\ud615#11",points:18,description:"\uae30\uc0ac \uc21c\uc11c \ubb38\uc81c"},{id:"12",name:"\uc720\ud615#12",points:20,description:"\uc601\uc5b4\ub2e8\uc5b4 \ubb38\uc81c"},{id:"13",name:"\uc720\ud615#13",points:12,description:"\ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c(\ub2e8\uc5b4-\uc8fc\uad00\uc2dd)"},{id:"14",name:"\uc720\ud615#14",points:15,description:"\ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c(\ubb38\uc7a5-\uc8fc\uad00\uc2dd)"}]),A(20);if(!t&&e&&e.uid){const t=await(0,vo.MC)(e.uid);O(t)}}catch(r){console.error("\ud3ec\uc778\ud2b8 \ucd08\uae30\ud654 \uc624\ub958:",r),F([{id:"5",name:"\uc720\ud615#05",points:20,description:"\ube48\uce78(\ubb38\uc7a5) \ucd94\ub860 \ubb38\uc81c"}]),A(20)}})()},[null===e||void 0===e?void 0:e.uid,t]),(0,r.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,r.useEffect)(()=>{u&&window.scrollTo(0,0)},[u]);const[D,z]=(0,r.useState)({needsSecondPage:!1,needsThirdPage:!1,page1Content:"",page2Content:"",page3Content:""});(0,r.useEffect)(()=>{u&&u.translation&&(()=>{if(!u||!u.translation)return;const e=aa,t=la+ca+ma(u.blankedText,38,16,1.7),n=ha+pa;let r=0;u.options.forEach((e,t)=>{r+=ma("".concat(e," (\uc815\ub2f5)"),11,16,1.3),u.optionTranslations&&u.optionTranslations[t]&&(r+=ma(u.optionTranslations[t],11,16,1.3))});const s=n+r+36,i=da+ua+ma(u.translation,19,16,1.7),o=e-50;console.log("\ud83d\udccf \uc720\ud615#05 \ub3d9\uc801 \ud398\uc774\uc9c0 \ubd84\ud560 \uacc4\uc0b0:",{availableHeight:e.toFixed(2)+"px",sectionAHeight:t.toFixed(2)+"px",sectionBHeight:s.toFixed(2)+"px",sectionCHeight:i.toFixed(2)+"px",totalHeight:(t+s+i).toFixed(2)+"px",effectiveAvailableHeight:o.toFixed(2)+"px",quizTextLength:u.blankedText.length,translationTextLength:u.translation.length}),console.log("\ud83d\udd0d \uc2e4\uc81c A4 \ud06c\uae30 \uae30\uc900 \uacc4\uc0b0:",{A4_SIZE:"210mm \xd7 297mm = 794px \xd7 1123px (96 DPI)",CONTENT_AREA:oa+"px \xd7 "+aa+"px",TOP_MARGIN:ea+"px",BOTTOM_MARGIN:ta+"px",LEFT_MARGIN:na+"px",RIGHT_MARGIN:ra+"px",HEADER_HEIGHT:sa+"px",FOOTER_HEIGHT:ia+"px",availableHeight:e+"px",safetyMargin:"50px",effectiveAvailableHeight:o+"px"}),z(t+s+i<=o?{needsSecondPage:!1,needsThirdPage:!1,page1Content:"A+B+C",page2Content:"",page3Content:""}:t+s<=o?i<=o?{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A+B",page2Content:"C",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!0,page1Content:"A+B",page2Content:"C-part1",page3Content:"C-part2"}:t<=o&&s+i<=o?{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A",page2Content:"B+C",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!0,page1Content:"A",page2Content:"B",page3Content:"C"})})()},[u]);const L=e=>{s(e),o(""),l(null),d(null),h(null),v(null)};async function M(e){const t=await(n=e,new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)}));var n;const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"\uc601\uc5b4\ubb38\uc81c\ub85c \uc0ac\uc6a9\ub418\ub294 \ubcf8\ubb38\uc774\uc57c.\n\uc774 \uc774\ubbf8\uc9c0\uc758 \ub0b4\uc6a9\uc744 \uc218\uc791\uc5c5\uc73c\ub85c \uc815\ud655\ud788 \uc77d\uace0, \uc601\uc5b4 \ubcf8\ubb38\ub9cc \ucd94\ub824\ub0b4\uc11c \ubcf4\uc5ec\uc918.\n\uae00\uc790\ub294 \uc778\uc1c4\uae00\uc528\uccb4 \uc774\uc678\uc5d0 \uc190\uae00\uc528\ub098 \uc6d0, \ubc11\uc904 \ub4f1 \ud45c\uc2dc\ub418\uc5b4\uc788\ub294 \uac83\uc740 \ubb34\uc2dc\ud574. \n\ubcf8\ubb38\uc911\uc5d0 \uc6d0\ubb38\uc790 1, 2, 3... \ub4f1\uc73c\ub85c \ud45c\uc2dc\ub41c\uac74 \uc81c\uac70\ud574\uc918. \n\uc6d0\ubb38\uc790 \uc81c\uac70\ud6c4 \uc904\uc744 \ubc14\uafb8\uac70\ub098 \ubb38\ub2e8\uc744 \ubc14\uafb8\uc9c0\ub9d0\uace0, \uc804\uccb4\uac00 \ud55c \ubb38\ub2e8\uc73c\ub85c \uad6c\uc131\ud574\uc918. \n\uc601\uc5b4 \ubcf8\ubb38\ub9cc, \uc544\ubb34\ub7f0 \uc124\uba85\uc774\ub098 \uc548\ub0b4\ubb38 \uc5c6\uc774, \ud55c \ubb38\ub2e8\uc73c\ub85c\ub9cc \ucd9c\ub825\ud574\uc918."},{type:"image_url",image_url:{url:t}}]}],max_tokens:2048})});return(await r.json()).choices[0].message.content.trim()}const B=[],U=/\(([^)]+)\)/g;let W;for(;null!==(W=U.exec(i));)B.push(W[1].trim());async function V(e){const t="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",n="\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uae00\uc758 \uc8fc\uc81c\uc640 \uac00\uc7a5 \ubc00\uc811\ud55c, \uc758\ubbf8 \uc788\ub294 \ubb38\uc7a5(sentence) 1\uac1c\ub97c \uc120\uc815\ud574.\n1. \ubc18\ub4dc\uc2dc \ubcf8\ubb38\uc5d0 \uc2e4\uc81c\ub85c \ub4f1\uc7a5\ud55c \ubb38\uc7a5(\ucca0\uc790, \ud615\ud0dc, \ub300\uc18c\ubb38\uc790\uae4c\uc9c0 \ub3d9\uc77c)\uc744 \uc815\ub2f5\uc73c\ub85c \uc120\uc815\ud574\uc57c \ud574. \ubcc0\ud615, \ub300\uccb4, \ub3d9\uc758\uc5b4, \uc5b4\ud615 \ubcc0\ud654 \uc5c6\uc774 \ubcf8\ubb38\uc5d0 \uc788\ub358 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud574\uc57c \ud574.\n2. \ubb38\uc81c\uc758 \ubcf8\ubb38(\ube48\uce78 \ud3ec\ud568)\uc740 \ubc18\ub4dc\uc2dc \uc0ac\uc6a9\uc790\uac00 \uc785\ub825\ud55c \uc804\uccb4 \ubcf8\ubb38\uacfc \uc644\uc804\ud788 \ub3d9\uc77c\ud574\uc57c \ud558\uba70, \uc77c\ubd80 \ubb38\uc7a5\ub9cc \ucd94\ucd9c\ud558\uac70\ub098, \ubb38\uc7a5 \uc21c\uc11c\ub97c \ubc14\uafb8\uac70\ub098, \ubcf8\ubb38\uc744 \uc694\uc57d/\ubcc0\ud615\ud574\uc11c\ub294 \uc548 \ub3fc. \uc624\uc9c1 \uc815\ub2f5 \ubb38\uc7a5\ub9cc ()\ub85c \uce58\ud658\ud574.\n3. \uc785\ub825\ub41c \ubcf8\ubb38\uc5d0 \uc774\ubbf8 ()\ub85c \ubb36\uc778 \ubb38\uc7a5\uc774 \uc788\ub2e4\uba74, \uadf8 \ubd80\ubd84\uc740 \uc808\ub300 \ube48\uce78 \ucc98\ub9ac \ub300\uc0c1\uc73c\ub85c \uc0bc\uc9c0 \ub9c8\uc138\uc694. \ubc18\ub4dc\uc2dc \uad04\ud638 \ubc16\uc5d0 \uc788\ub294 \ubb38\uc7a5\ub9cc \ube48\uce78 \ud6c4\ubcf4\ub85c \uc120\uc815\ud558\uc138\uc694.\n4. \uc544\ub798 \ubb38\uc7a5\uc740 \uc808\ub300 \ube48\uce78 \ucc98\ub9ac\ud558\uc9c0 \ub9c8\uc138\uc694: ".concat(B.length>0?B.join(", "):"\uc5c6\uc74c",'\n5. \uc815\ub2f5(\ubb38\uc7a5) + \uc624\ub2f5(\ubcf8\ubb38\uacfc \uc720\uc0ac\ud55c \uc8fc\uc81c/\ub9e5\ub77d\uc758 \uc0c8\ub85c\uc6b4 \ubb38\uc7a5 4\uac1c) \ucd1d 5\uac1c\ub97c \uc0dd\uc131\ud574.\n   - \uc624\ub2f5 \ubb38\uc7a5\ub4e4\uc740 \ubcf8\ubb38\uc758 \uc8fc\uc81c\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc \ubcf8\ubb38\uc5d0 \uc5c6\ub294 \uc0c8\ub85c\uc6b4 \ub0b4\uc6a9\uc774\uc5b4\uc57c \ud568\n   - \ubcf8\ubb38\uc758 \ub2e4\ub978 \ubb38\uc7a5\uc744 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud558\uba74 \uc548 \ub428\n   - \uc815\ub2f5\uacfc \ube44\uc2b7\ud55c \uae38\uc774\uc640 \ubb38\uccb4\ub85c \uc791\uc131\ud574\uc57c \ud568\n   - \ubcf8\ubb38\uc758 \ub9e5\ub77d\uacfc \uad00\ub828\uc774 \uc788\uc9c0\ub9cc \uc2e4\uc81c\ub85c\ub294 \ud2c0\ub9b0 \ub0b4\uc6a9\uc774\uc5b4\uc57c \ud568\n6. \uc815\ub2f5\uc758 \uc704\uce58\ub294 1~5\ubc88 \uc911 \ub79c\ub364.\n7. \uac01 \uc120\ud0dd\uc9c0(\uc815\ub2f5 \ud3ec\ud568)\uc5d0 \ub300\ud55c \ud55c\uad6d\uc5b4 \ud574\uc11d\uc744 \uc0dd\uc131\ud574.\n8. \uc544\ub798 JSON \ud615\uc2dd\uc73c\ub85c \uc751\ub2f5 (optionTranslations \ud544\ub4dc\ub294 \ubc18\ub4dc\uc2dc \ud3ec\ud568\ud574\uc57c \ud568):\n{\n  "options": ["\uc601\uc5b4 \uc120\ud0dd\uc9c01", "\uc601\uc5b4 \uc120\ud0dd\uc9c02", "\uc601\uc5b4 \uc120\ud0dd\uc9c03", "\uc601\uc5b4 \uc120\ud0dd\uc9c04", "\uc601\uc5b4 \uc120\ud0dd\uc9c05"],\n  "answerIndex": 2,\n  "optionTranslations": ["\ud55c\uad6d\uc5b4 \ud574\uc11d1", "\ud55c\uad6d\uc5b4 \ud574\uc11d2", "\ud55c\uad6d\uc5b4 \ud574\uc11d3", "\ud55c\uad6d\uc5b4 \ud574\uc11d4", "\ud55c\uad6d\uc5b4 \ud574\uc11d5"]\n}\n\uc8fc\uc758: options\uc758 \uc815\ub2f5(\uc815\ub2f5 \uc778\ub371\uc2a4\uc5d0 \ud574\ub2f9\ud558\ub294 \ubb38\uc7a5)\uc740 \ubc18\ub4dc\uc2dc \ubcf8\ubb38\uc5d0 \uc788\ub358 \ubb38\uc7a5\uacfc \uc644\uc804\ud788 \uc77c\uce58\ud574\uc57c \ud558\uba70, \ubcc0\ud615/\ub300\uccb4/\ub3d9\uc758\uc5b4/\uc5b4\ud615 \ubcc0\ud654\uac00 \uc788\uc73c\uba74 \uc548 \ub428. \uc624\ub2f5\ub4e4\uc740 \ubcf8\ubb38\uc5d0 \uc5c6\ub294 \uc0c8\ub85c\uc6b4 \ubb38\uc7a5\uc774\uc5b4\uc57c \ud568. \ubb38\uc81c\uc758 \ubcf8\ubb38(\ube48\uce78 \ud3ec\ud568)\uc740 \ubc18\ub4dc\uc2dc \uc785\ub825\ud55c \uc804\uccb4 \ubcf8\ubb38\uacfc \ub3d9\uc77c\ud574\uc57c \ud568. \uc785\ub825\ub41c \ubcf8\ubb38\uc5d0 \uc774\ubbf8 ()\ub85c \ubb36\uc778 \ubd80\ubd84\uc740 \ube48\uce78 \ucc98\ub9ac \ub300\uc0c1\uc5d0\uc11c \uc81c\uc678\ud574\uc57c \ud568.\n\ubcf8\ubb38:\n').concat(e),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:n}],max_tokens:3e3,temperature:.7})}),s=await r.json();console.log("AI \uc751\ub2f5 \uc6d0\ubcf8:",s.choices[0].message.content);const i=s.choices[0].message.content.match(/\{[\s\S]*\}/);if(!i)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let o;try{o=JSON.parse(i[0]),console.log("\ud30c\uc2f1\ub41c \uacb0\uacfc:",o),console.log("optionTranslations:",o.optionTranslations)}catch(f){throw console.error("JSON \ud30c\uc2f1 \uc624\ub958:",f),new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}const a=o.options[o.answerIndex],l=e.replace(/\s+/g," ").trim(),c=a.replace(/\s+/g," ").trim();console.log("\uc815\ub2f5 \uac80\uc99d:",{answerSentence:a,answerNormalized:c,passageContains:e.includes(a),passageNormalizedContains:l.includes(c)}),e.includes(a)||l.includes(c)||console.warn("\uc815\ub2f5 \ubb38\uc7a5\uc774 \ubcf8\ubb38\uacfc \uc815\ud655\ud788 \uc77c\uce58\ud558\uc9c0 \uc54a\uc9c0\ub9cc \uacc4\uc18d \uc9c4\ud589\ud569\ub2c8\ub2e4.");const d=o.options[o.answerIndex];let u;try{u=function(e,t){let n=!1;const r=e.split(/([()])/);let s=!1;for(let o=0;o<r.length;o++)if("("!==r[o])if(")"!==r[o]){if(!s&&!n){const e=new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));e.test(r[o])&&(r[o]=r[o].replace(e,"(__________)"),n=!0)}}else s=!1;else s=!0;let i="";s=!1;for(let o=0;o<r.length;o++)"("!==r[o]?")"!==r[o]?i+=r[o]:(s=!1,i+=")"):(s=!0,i+="(");return i}(e,d)}catch(g){console.warn("\ube48\uce78 \uc0dd\uc131 \uc2e4\ud328, \uc6d0\ubcf8 \ubcf8\ubb38\uc744 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud569\ub2c8\ub2e4:",g),u=e}o.blankedText=u;const h=o.blankedText.replace(/\( *_{6,}\)/,d),p=e.replace(/\s+/g," ").trim(),m=h.replace(/\s+/g," ").trim();if(m!==p&&console.warn("\ube48\uce78 \ubcf5\uc6d0 \uac80\uc99d \uc2e4\ud328\ud558\uc9c0\ub9cc \uacc4\uc18d \uc9c4\ud589\ud569\ub2c8\ub2e4:",{original:p,restored:m}),!o.blankedText||!o.options||"number"!==typeof o.answerIndex)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");o.optionTranslations&&Array.isArray(o.optionTranslations)||(console.warn("optionTranslations\uac00 \uc5c6\uac70\ub098 \ubc30\uc5f4\uc774 \uc544\ub2d9\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc744 \uc124\uc815\ud569\ub2c8\ub2e4."),o.optionTranslations=o.options.map(()=>"\ud574\uc11d\uc744 \uc0dd\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")),console.log("\ubcf8\ubb38 \ubc88\uc5ed \uc2dc\uc791:",{passageLength:e.length});try{const n=await async function(e,t){if(console.log("\ubc88\uc5ed \uc2dc\uc791:",{textLength:e.length,hasApiKey:!!t}),!t)return console.error("API \ud0a4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),"API \ud0a4\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.";if(!e||0===e.trim().length)return console.error("\ubc88\uc5ed\ud560 \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),"\ubc88\uc5ed\ud560 \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.";try{var n;const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a helpful assistant that provides natural Korean translations. Always provide complete and accurate translations."},{role:"user",content:"\ub2e4\uc74c \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\ub85c \ubc88\uc5ed\ud574\uc8fc\uc138\uc694. \ubc88\uc5ed\uc740 \uc644\uc804\ud558\uace0 \uc815\ud655\ud574\uc57c \ud569\ub2c8\ub2e4:\n\n".concat(e)}],max_tokens:800,temperature:.3})});if(!r.ok)throw new Error("HTTP \uc624\ub958: ".concat(r.status," ").concat(r.statusText));const s=await r.json();if(console.log("\ubc88\uc5ed API \uc751\ub2f5:",{hasChoices:!!s.choices,choiceCount:null===(n=s.choices)||void 0===n?void 0:n.length}),s.choices&&s.choices[0]&&s.choices[0].message&&s.choices[0].message.content){const e=s.choices[0].message.content.trim();if(console.log("\ubc88\uc5ed \uc131\uacf5:",{translationLength:e.length,preview:e.substring(0,100)}),0===e.length)throw new Error("\ubc88\uc5ed \uacb0\uacfc\uac00 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4.");return e}throw console.error("AI \uc751\ub2f5 \uad6c\uc870 \uc624\ub958:",s),new Error("AI \uc751\ub2f5 \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}catch(g){return console.error("\ubc88\uc5ed \uc624\ub958 \uc0c1\uc138:",{message:g.message,name:g.name,stack:g.stack}),g.message.includes("HTTP \uc624\ub958")?"\ubc88\uc5ed \uc11c\ube44\uc2a4 \uc624\ub958: ".concat(g.message):g.message.includes("API \ud0a4")?"API \ud0a4 \uc624\ub958\ub85c \uc778\ud574 \ubc88\uc5ed\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.":"\ubc88\uc5ed \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(g.message)}}(e,t);console.log("\ubc88\uc5ed \uacb0\uacfc \uc800\uc7a5:",{translationLength:n.length,hasTranslation:!!n}),n&&n.trim().length>0?o.translation=n:(console.warn("\ubc88\uc5ed \uacb0\uacfc\uac00 \ube44\uc5b4\uc788\uc5b4 \uae30\ubcf8\uac12 \uc0ac\uc6a9"),o.translation="\ubc88\uc5ed\uc744 \uc0dd\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694.")}catch(y){console.error("\ubc88\uc5ed \ucc98\ub9ac \uc911 \uc624\ub958:",y),o.translation="\ubc88\uc5ed \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(y.message)}return o}const q=async()=>{if(null===e||void 0===e||!e.uid)return;let t="";m(!0),h(null),v(null);let r=0;try{const s=P.find(e=>"5"===e.id);if(!s)throw new Error("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const o=await(0,vo.ev)(e.uid,"5",s.name,e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790");if(!o.success)throw new Error(o.error||"\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");if(r=o.deductedPoints,O(o.remainingPoints),"text"===n){if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}else if("image"===n&&a)t=await M(a);else{if("capture"!==n)throw new Error("\uc774\ubbf8\uc9c0\ub97c \ucca8\ubd80\ud574\uc8fc\uc138\uc694.");if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}if(!t.trim())throw new Error("\ucd94\ucd9c\ub41c \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const l=await V(t);h(l)}catch(s){if(console.error("\ube48\uce78 \ubb38\uc81c \uc0dd\uc131 \uc624\ub958:",s),r>0&&null!==e&&void 0!==e&&e.uid)try{await(0,vo.Lw)(e.uid,r,"\ube48\uce78(\ubb38\uc7a5) \ubb38\uc81c \uc0dd\uc131",e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790","\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\ub85c \uc778\ud55c \ud3ec\uc778\ud2b8 \ud658\ubd88"),O(e=>e+r)}catch(o){console.error("\ud3ec\uc778\ud2b8 \ud658\ubd88 \uc624\ub958:",o)}alert(s.message||"\ubb38\uc81c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}},H=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),b("no-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),b("none")},1e3)},100)},K=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),b("with-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),b("none")},1e3)},100)},J=()=>{h(null),v(null),o(""),l(null),d(null),S(!1),m(!1),g(!1)};if(u){const e=u.options[u.answerIndex]||"",t=e.trim().split(/\s+/).length,n=Math.max(e.length,5*t),r=30,s="("+"_".repeat(Math.min(n,r))+")",o=u.blankedText.replace(/\([^)]*\)/,s);return(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("div",{className:"quiz-display no-print",children:[(0,Se.jsxs)("div",{className:"quiz-header",children:[(0,Se.jsx)("h2",{className:"no-print",children:"#05. \ube48\uce78(\ubb38\uc7a5) \ucd94\ub860 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"quiz-header-buttons no-print",children:[(0,Se.jsx)("button",{onClick:J,className:"reset-button",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\uc0c8 \ubb38\uc81c \ub9cc\ub4e4\uae30"}),(0,Se.jsxs)("button",{onClick:H,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsx)("span",{children:"\uc778\uc1c4 (\ubb38\uc81c)"})]}),(0,Se.jsxs)("button",{onClick:K,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 6px rgba(240, 147, 251, 0.25)"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsxs)("span",{children:["\uc778\uc1c4 (",(0,Se.jsx)("span",{style:{color:"#FFD600"},children:"\uc815\ub2f5"}),")"]})]})]})]}),(0,Se.jsxs)("div",{className:"quiz-section",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1.18rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"1.2rem",display:"inline-block"},children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ubb38\uc7a5(sentence)\uc73c\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("div",{className:"problem-passage",style:{fontSize:"1.08rem",lineHeight:1.7,margin:"1.2rem 0",background:"#f7f8fc",borderRadius:"8px",padding:"1.2rem",fontFamily:"inherit"},children:o}),(0,Se.jsx)("div",{className:"problem-options",style:{margin:"1.2rem 0"},children:u.options.map((e,t)=>(0,Se.jsxs)("label",{style:{display:"block",fontSize:"1.08rem",margin:"0.8rem 0",cursor:"pointer",fontWeight:y===t?700:400,color:y===t?"#6a5acd":"#222",fontFamily:"inherit"},children:[(0,Se.jsx)("input",{type:"radio",name:"blank-quiz",checked:y===t,onChange:()=>v(t),style:{marginRight:"0.7rem"}}),"\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,null!==y&&u.answerIndex===t&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]},t))}),null!==y&&(0,Se.jsxs)("div",{className:"problem-answer no-print",style:{marginTop:"1.2rem",color:"#1976d2",fontWeight:700},children:["\uc815\ub2f5: ","\u2460\u2461\u2462\u2463\u2464"[u.answerIndex]||u.answerIndex+1," ",u.options[u.answerIndex]]})]})]}),"no-answer"===x&&(0,Se.jsx)("div",{className:"only-print",children:(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ubb38\uc7a5(sentence)\uc73c\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("div",{className:i.length>=1700?"work05-long-text":"",style:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:o}),(0,Se.jsx)("div",{className:"problem-options",style:{margin:"1rem 0"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.8rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e]},t))})]})})]})}),"with-answer"===x&&u&&(0,Se.jsxs)("div",{className:"only-print print-answer-mode",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(D.page1Content.includes("A")||"A"===D.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ubb38\uc7a5(sentence)\uc73c\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#05"})]}),(0,Se.jsx)("div",{className:"work05-print-answer-passage",style:{marginTop:"0.9rem",marginBottom:"1.5rem",fontSize:"1rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:o})]}),(D.page1Content.includes("B")||"B"===D.page1Content)&&(0,Se.jsx)("div",{className:"work05-options-container",style:{border:"2px solid #ddd",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",background:"#f9f9f9"},children:(0,Se.jsx)("div",{className:"work05-problem-options",style:{marginTop:"0",marginBottom:"0"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:[(0,Se.jsxs)("div",{className:"option-english",children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,u.answerIndex===t&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]}),u.optionTranslations&&u.optionTranslations[t]&&(0,Se.jsx)("div",{className:"option-translation",style:{fontSize:"0.9rem",color:"#666",marginTop:"0.2rem"},children:u.optionTranslations[t]})]},t))})}),(D.page1Content.includes("C")||"C"===D.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction-copy",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",border:"2px solid #333",marginTop:"1.2rem",marginBottom:"1.2rem",display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",boxSizing:"border-box",marginLeft:"0",marginRight:"0"},children:(0,Se.jsx)("span",{children:"\ubcf8\ubb38 \ud574\uc11d"})}),(0,Se.jsx)("div",{className:"work05-print-answer-translation",style:{fontSize:"1rem",lineHeight:"1.7",padding:"0.5rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",marginBottom:"1.2rem"},children:"C-part1"===D.page1Content?u.translation.substring(0,Math.floor(u.translation.length/2)):u.translation})]})]})})]}),D.needsSecondPage&&(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(D.page2Content.includes("B")||"B"===D.page2Content)&&(0,Se.jsx)("div",{className:"work05-options-container",style:{border:"2px solid #ddd",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",background:"#f9f9f9"},children:(0,Se.jsx)("div",{className:"work05-problem-options",style:{marginTop:"0",marginBottom:"0"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:[(0,Se.jsxs)("div",{className:"option-english",children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,u.answerIndex===t&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]}),u.optionTranslations&&u.optionTranslations[t]&&(0,Se.jsx)("div",{className:"option-translation",style:{fontSize:"0.9rem",color:"#666",marginTop:"0.2rem"},children:u.optionTranslations[t]})]},t))})}),(D.page2Content.includes("C")||"C"===D.page2Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction-copy",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",border:"2px solid #333",marginTop:"1.2rem",marginBottom:"1.2rem",display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",boxSizing:"border-box",marginLeft:"0",marginRight:"0"},children:(0,Se.jsx)("span",{children:"\ubcf8\ubb38 \ud574\uc11d"})}),(0,Se.jsx)("div",{className:"work05-print-answer-translation",style:{fontSize:"1rem",lineHeight:"1.7",padding:"0.5rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",marginBottom:"1.2rem"},children:"C-part1"===D.page2Content?u.translation.substring(0,Math.floor(u.translation.length/2)):u.translation})]})]})})]}),D.needsThirdPage&&(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsx)("div",{className:"quiz-content",children:(D.page3Content.includes("C")||"C"===D.page3Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction-copy",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",border:"2px solid #333",marginTop:"1.2rem",marginBottom:"1.2rem",display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",boxSizing:"border-box",marginLeft:"0",marginRight:"0"},children:(0,Se.jsx)("span",{children:"\ubcf8\ubb38 \ud574\uc11d"})}),(0,Se.jsx)("div",{className:"work05-print-answer-translation",style:{fontSize:"1rem",lineHeight:"1.7",padding:"0.5rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",marginBottom:"1.2rem"},children:"C-part2"===D.page3Content?u.translation.substring(Math.floor(u.translation.length/2)):u.translation})]})})})]})]})]})}return(0,Se.jsxs)("div",{className:"quiz-generator",onPaste:async e=>{if("capture"!==n)return;const t=e.clipboardData.items;for(let n=0;n<t.length;n++)if(-1!==t[n].type.indexOf("image")){const s=t[n].getAsFile();if(s){l(s),d(URL.createObjectURL(s)),g(!0);try{const e=await M(s);o(e),setTimeout(()=>{N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}return void e.preventDefault()}e.preventDefault()},children:[(0,Se.jsxs)("div",{className:"generator-header",children:[(0,Se.jsx)("h2",{children:"[\uc720\ud615#05] \ube48\uce78(\ubb38\uc7a5) \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131"}),(0,Se.jsx)("p",{children:"\uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uac00\uc7a5 \uc911\uc694\ud55c \ubb38\uc7a5(sentence)\uc744 \ube48\uce78\uc73c\ub85c \ubc14\uafb8\uace0, \uac1d\uad00\uc2dd 5\uc9c0\uc120\ub2e4 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"input-type-section",children:[(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"capture"===n,onChange:()=>L("capture")}),(0,Se.jsx)("span",{children:"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30"}),(0,Se.jsx)("button",{type:"button",className:"screenshot-help-btn",onClick:e=>{e.preventDefault(),T(!0)},title:"\ud654\uba74 \ucea1\ucc98 \ubc29\ubc95 \ubcf4\uae30",children:"?"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"image"===n,onChange:()=>L("image")}),(0,Se.jsx)("span",{children:"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \ud30c\uc77c \ucca8\ubd80"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"text"===n,onChange:()=>L("text")}),(0,Se.jsx)("span",{children:"\u270d\ufe0f \uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30"})]})]}),"capture"===n&&(0,Se.jsxs)("div",{className:"input-guide".concat(k?" paste-focused":""),tabIndex:0,onClick:()=>S(!0),onFocus:()=>S(!0),onBlur:()=>S(!1),children:[(0,Se.jsx)("div",{className:"drop-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("div",{className:"drop-text",children:"\uc5ec\uae30\uc5d0 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc73c\uc138\uc694"}),(0,Se.jsxs)("div",{className:"drop-desc",children:["\ud074\ub9ad \ub610\ub294 Tab \ud6c4 ",(0,Se.jsx)("b",{children:"Ctrl+V"}),"\ub85c \ucea1\ucc98 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),c&&(0,Se.jsx)("div",{className:"preview-row",children:(0,Se.jsx)("img",{src:c,alt:"\ucea1\ucc98 \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"})}),(p||f)&&(0,Se.jsx)("div",{style:{color:"#6a5acd",fontWeight:600,marginTop:"0.7rem"},children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),"image"===n&&(0,Se.jsx)("div",{className:"input-guide",children:(0,Se.jsxs)("div",{className:"file-upload-row",children:[(0,Se.jsxs)("label",{htmlFor:"blank-quiz-image",className:"file-upload-btn",children:["\ud30c\uc77c \uc120\ud0dd",(0,Se.jsx)("input",{id:"blank-quiz-image",type:"file",accept:"image/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){l(n),d(URL.createObjectURL(n)),g(!0);try{const e=await M(n);o(e),setTimeout(()=>{N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}},style:{display:"none"}})]}),(0,Se.jsx)("span",{className:"file-upload-status",children:a?a.name:"\uc120\ud0dd\ub41c \ud30c\uc77c \uc5c6\uc74c"}),c&&(0,Se.jsx)("img",{src:c,alt:"\uc5c5\ub85c\ub4dc \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"}),(p||f)&&(0,Se.jsx)("div",{className:"loading-text",children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]})}),(0,Se.jsxs)("div",{className:"input-section",children:[(0,Se.jsxs)("div",{className:"input-label-row",children:[(0,Se.jsx)("label",{htmlFor:"blank-quiz-text",className:"input-label",children:"\uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30: (2,000\uc790 \ubbf8\ub9cc \uad8c\uc7a5)"}),i.length<100&&(0,Se.jsx)("span",{className:"warning",children:"\u26a0\ufe0f \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 \ub354 \uc88b\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("textarea",{id:"blank-quiz-text",ref:N,value:i,onChange:e=>{o(e.target.value),N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},placeholder:"\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc9c1\uc811 \ubd99\uc5ec\ub123\uc5b4 \uc8fc\uc138\uc694. \ucd5c\uc18c 100\uc790 \uc774\uc0c1 \uad8c\uc7a5\ud569\ub2c8\ub2e4.",className:"text-input",rows:8,style:{overflow:"hidden",resize:"none"},disabled:"image"===n&&!i}),(0,Se.jsx)("div",{className:"text-info",children:(0,Se.jsxs)("span",{children:["\uae00\uc790 \uc218: ",i.length,"\uc790"]})})]}),(0,Se.jsx)("button",{onClick:async()=>{if(console.log("\ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778:",{userData:e,uid:null===e||void 0===e?void 0:e.uid,loading:t}),t)return void alert("\ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if(!e||!e.uid)return console.error("\ub85c\uadf8\uc778 \uc0c1\ud0dc \uc624\ub958:",{userData:e,loading:t}),void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.");const n=P.find(e=>"5"===e.id);if(!n)return void alert("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=n.points;R<r?alert("\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. \ud604\uc7ac ".concat(R.toLocaleString(),"P, \ud544\uc694 ").concat(r.toLocaleString(),"P")):(A(r),E(!0))},disabled:p||!i.trim(),className:"generate-button",children:"\ube48\uce78(\ubb38\uc7a5) \ubb38\uc81c \uc0dd\uc131\ud558\uae30"}),(p||f)&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("span",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:f?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":"\ud83d\udccb \ubb38\uc81c \uc0dd\uc131 \uc911..."})]})}),(0,Se.jsx)(yo,{isOpen:C,onClose:()=>E(!1),onConfirm:()=>{E(!1),q()},workTypeName:"\ube48\uce78(\ubb38\uc7a5) \ubb38\uc81c \uc0dd\uc131",pointsToDeduct:I,userCurrentPoints:R,remainingPoints:R-I}),(0,Se.jsx)(go,{isOpen:_,onClose:()=>T(!1)})]})},ga=25,ya=25,va=20,xa=20,ba=30,wa=20,ja=754,Na=1048,ka=30,Sa=11,_a=30,Ta=11;function Ca(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:38,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.7;const s=ja-40,i=.55*n,o=Math.floor(s/i);return Math.ceil(e.length/o)*n*r+t}const Ea=()=>{const{userData:e,loading:t}=Te(),[n,s]=(0,r.useState)("text"),[i,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)("none"),x=(0,r.useRef)(null),[b,w]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[k,S]=(0,r.useState)(!1),[_,T]=(0,r.useState)(0),[C,E]=(0,r.useState)(0),[I,A]=(0,r.useState)([]);(0,r.useEffect)(()=>{t||(async()=>{try{var n;const r=await(0,vo.getWorkTypePoints)();A(r);const s=(null===(n=r.find(e=>"6"===e.id))||void 0===n?void 0:n.points)||0;if(T(s),!t&&e&&e.uid){const t=await(0,vo.MC)(e.uid);E(t)}}catch(r){console.error("\ud3ec\uc778\ud2b8 \ucd08\uae30\ud654 \uc624\ub958:",r)}})()},[null===e||void 0===e?void 0:e.uid,t]),(0,r.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,r.useEffect)(()=>{u&&window.scrollTo(0,0)},[u]);const[R,O]=(0,r.useState)({needsSecondPage:!1,needsThirdPage:!1,page1Content:"",page2Content:"",page3Content:""});(0,r.useEffect)(()=>{u&&u.translation&&(()=>{if(!u)return;const e=ka+Sa+Ca("\uc8fc\uc694 \ubb38\uc7a5: ".concat(u.missingSentence),38,16,1.7)+Ca(u.numberedPassage,38,16,1.7)+Ca("\uc815\ub2f5: ".concat("\u2460\u2461\u2462\u2463\u2464"[u.answerIndex]||u.answerIndex+1),38,16,1.7),t=_a+Ta,n=u.translation||"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.",r=t+Ca(n,38,16,1.7),s=Na,i=s-50,o=e+r;console.log("\ud83d\udccf \uc720\ud615#06 \ub3d9\uc801 \ud398\uc774\uc9c0 \ubd84\ud560 \uacc4\uc0b0 (2\uc139\uc158):",{availableHeight:s.toFixed(2)+"px",sectionAHeight:e.toFixed(2)+"px",sectionBHeight:r.toFixed(2)+"px",totalHeight:o.toFixed(2)+"px",effectiveAvailableHeight:i.toFixed(2)+"px",quizTextLength:u.numberedPassage.length,translationTextLength:n.length}),console.log("\ud83d\udd0d \uc2e4\uc81c A4 \ud06c\uae30 \uae30\uc900 \uacc4\uc0b0:",{A4_SIZE:"210mm \xd7 297mm = 794px \xd7 1123px (96 DPI)",CONTENT_AREA:ja+"px \xd7 "+Na+"px",TOP_MARGIN:ga+"px",BOTTOM_MARGIN:ya+"px",LEFT_MARGIN:va+"px",RIGHT_MARGIN:xa+"px",HEADER_HEIGHT:ba+"px",FOOTER_HEIGHT:wa+"px",availableHeight:s+"px",safetyMargin:"50px",effectiveAvailableHeight:i+"px"}),O(o<=i?{needsSecondPage:!1,needsThirdPage:!1,page1Content:"A+B",page2Content:"",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A",page2Content:"B",page3Content:""})})()},[u,null===u||void 0===u?void 0:u.translation]);const P=e=>{s(e),o(""),l(null),d(null),h(null)};async function F(e){const t=await(n=e,new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)}));var n;const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:'\uc774 \uc774\ubbf8\uc9c0\uc5d0\uc11c \uc601\uc5b4 \ubcf8\ubb38\ub9cc \uc815\ud655\ud558\uac8c \ucd94\ucd9c\ud574\uc8fc\uc138\uc694.\n\n**\ucd94\ucd9c \uc694\uad6c\uc0ac\ud56d:**\n1. \uc601\uc5b4 \ubcf8\ubb38\ub9cc \ucd94\ucd9c (\ud55c\uae00 \uc124\uba85, \ubb38\uc81c \ubc88\ud638, \uc81c\ubaa9 \ub4f1\uc740 \uc81c\uc678)\n2. \ubb38\uc7a5 \uad6c\ubd84\uc744 \uba85\ud655\ud788 \ud558\uc5ec \ub9c8\uce68\ud45c(.), \ub290\ub08c\ud45c(!), \ubb3c\uc74c\ud45c(?) \uc720\uc9c0\n3. \ubaa8\ub4e0 \uc601\uc5b4 \ud14d\uc2a4\ud2b8\ub97c \ud558\ub098\uc758 \uc5f0\uc18d\ub41c \ubb38\ub2e8\uc73c\ub85c \ucd9c\ub825\n4. \uc904\ubc14\uafc8 \uc5c6\uc774 \uacf5\ubc31\uc73c\ub85c \ubb38\uc7a5\ub4e4\uc744 \uc5f0\uacb0\n5. \ud2b9\uc218\ubb38\uc790\ub098 \ubc88\ud638 \ub9e4\uae40\uc740 \uc81c\uc678\n\n**\ucd9c\ub825 \ud615\ud0dc:** \uc21c\uc218\ud55c \uc601\uc5b4 \ubcf8\ubb38\ub9cc (\uc608: "Sentence one. Sentence two. Sentence three.")'},{type:"image_url",image_url:{url:t}}]}],max_tokens:2048})});let s=(await r.json()).choices[0].message.content.trim();return s=function(e){if(!(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[\uac00-\ud7a3]+/g,"")).replace(/^\s*[\(\[]?\d+[\.\)\]]\s*/gm,"")).replace(/\b\d+\.\s*/g,"")).replace(/['"'"]/g,'"')).replace(/['']/g,"'")).replace(/\s+/g," ")).replace(/([.!?])\s*([A-Z])/g,"$1 $2")).trim())||e.length<10)throw new Error("\ucd94\ucd9c\ub41c \ud14d\uc2a4\ud2b8\uac00 \ub108\ubb34 \uc9e7\uc2b5\ub2c8\ub2e4. \uc774\ubbf8\uc9c0\ub97c \ub2e4\uc2dc \ud655\uc778\ud574\uc8fc\uc138\uc694.");return e}(s),s}const D=async()=>{if(null===e||void 0===e||!e.uid)return;let t="";m(!0),h(null);let r=0;try{const s=I.find(e=>"6"===e.id);if(!s)throw new Error("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const o=await(0,vo.ev)(e.uid,"6",s.name,e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790");if(!o.success)throw new Error(o.error||"\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");if(r=o.deductedPoints,E(o.remainingPoints),"text"===n){if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}else if("image"===n&&a)t=await F(a);else{if("capture"!==n)throw new Error("\uc774\ubbf8\uc9c0\ub97c \ucca8\ubd80\ud574\uc8fc\uc138\uc694.");if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}if(!t.trim())throw new Error("\ucd94\ucd9c\ub41c \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");console.log("\uc6d0\ubcf8 \ubcf8\ubb38:",t);const l=t.split(/(?<=[.!?])\s+/).filter(e=>e.trim().length>0&&e.trim().length>10);if(console.log("\uc6d0\ubcf8 \ubb38\uc7a5\ub4e4:",l),l.length<5)throw new Error("\ubcf8\ubb38\uc5d0 \ucda9\ubd84\ud55c \ubb38\uc7a5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \ucd5c\uc18c 5\uac1c\uc758 \ubb38\uc7a5\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const{missingSentence:c,topicSentenceIndex:d}=await async function(e){const t="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",n=e.join(" "),r='\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uac00\uc7a5 \uc911\uc694\ud55c \uc8fc\uc81c \ubb38\uc7a5 1\uac1c\ub97c \ucc3e\uc544\uc11c \uc81c\uac70\ud574\uc8fc\uc138\uc694.\n\n**\uc791\uc5c5 \uc694\uad6c\uc0ac\ud56d:**\n1. \ubcf8\ubb38\uc5d0\uc11c \uac00\uc7a5 \uc911\uc694\ud55c \uc8fc\uc81c \ubb38\uc7a5(\ud575\uc2ec \ubb38\uc7a5) 1\uac1c\ub97c \ucc3e\uc544\uc8fc\uc138\uc694.\n2. \uc81c\uac70\ub41c \uc8fc\uc81c \ubb38\uc7a5\uc774 \uc6d0\ub798 \uc788\ub358 \uc704\uce58(0\ubd80\ud130 \uc2dc\uc791\ud558\ub294 \uc778\ub371\uc2a4)\ub97c \uc54c\ub824\uc8fc\uc138\uc694.\n\n**\uc751\ub2f5 \ud615\uc2dd:**\n{\n  "missingSentence": "\uc81c\uac70\ub41c \uc8fc\uc81c \ubb38\uc7a5",\n  "topicSentenceIndex": 2\n}\n\n**\uc911\uc694:** \n- \uc81c\uac70\ub41c \uc8fc\uc81c \ubb38\uc7a5\uc740 \ubc18\ub4dc\uc2dc \uc6d0\ubcf8 \ubcf8\ubb38\uc5d0 \uc788\ub358 \ubb38\uc7a5\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.\n- topicSentenceIndex\ub294 \uc81c\uac70\ub41c \ubb38\uc7a5\uc774 \uc6d0\ub798 \uc788\ub358 \uc704\uce58\uc785\ub2c8\ub2e4.\n\n\ubcf8\ubb38:\n'.concat(n),s=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:r}],max_tokens:2e3,temperature:.7})}),i=await s.json(),o=i.choices[0].message.content.match(/\{[\s\S]*\}/);if(!o)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const a=JSON.parse(o[0]);if(!a.missingSentence||"number"!==typeof a.topicSentenceIndex)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");const l=a.missingSentence.trim();let c=-1;for(let d=0;d<e.length;d++)if(e[d].trim()===l){c=d;break}if(-1===c){console.log("\uc815\ud655\ud55c \ub9e4\uce6d \uc2e4\ud328, \uc720\uc0ac\ub3c4 \uac80\uc0ac \uc2dc\uc791..."),console.log("AI\uac00 \ubc18\ud658\ud55c \ubb38\uc7a5:",l),console.log("\uc6d0\ubcf8 \ubb38\uc7a5\ub4e4:",e);let t={index:-1,similarity:0};for(let n=0;n<e.length;n++){const r=z(e[n].trim(),l);console.log("\ubb38\uc7a5 ".concat(n," \uc720\uc0ac\ub3c4:"),r,e[n].trim()),r>t.similarity&&(t={index:n,similarity:r})}console.log("\ucd5c\uace0 \uc720\uc0ac\ub3c4 \ub9e4\uce58:",t),t.similarity>.5&&(c=t.index,a.missingSentence=e[t.index].trim(),console.log("\uc720\uc0ac\ub3c4 \ub9e4\uce6d \uc131\uacf5:",a.missingSentence))}if(-1===c)throw console.error("\ubaa8\ub4e0 \ub9e4\uce6d \uc2dc\ub3c4 \uc2e4\ud328"),console.error("AI \ubc18\ud658 \ubb38\uc7a5:",l),console.error("\uc6d0\ubcf8 \ubb38\uc7a5\ub4e4:",e),new Error("\uc81c\uac70\ub41c \uc8fc\uc81c \ubb38\uc7a5\uc774 \uc6d0\ubcf8 \ubcf8\ubb38\uc5d0 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");return a.topicSentenceIndex=c,a}(l);console.log("\uc120\uc815\ub41c \uc8fc\uc81c \ubb38\uc7a5:",c),console.log("\uc8fc\uc81c \ubb38\uc7a5 \uc704\uce58:",d);const u=l.filter((e,t)=>t!==d);console.log("\uc8fc\uc81c \ubb38\uc7a5 \uc81c\uac70 \ud6c4 \ubb38\uc7a5\ub4e4:",u),console.log("\uc6d0\ubcf8 \ubb38\uc7a5 \uc218:",l.length),console.log("\uc81c\uac70 \ud6c4 \ubb38\uc7a5 \uc218:",u.length),console.log("\uc81c\uac70\ub41c \ubb38\uc7a5:",l[d]);const{numberedPassage:p,answerIndex:m}=function(e,t){const n=["\u2460","\u2461","\u2462","\u2463","\u2464"],r=e.length;if(console.log("\ubc88\ud638 \ubd80\uc5ec \uc2dc\uc791:",{totalSentences:r,originalTopicIndex:t}),r<=5){let s="";for(let t=0;t<r;t++)s+=n[t]+" "+e[t].trim(),t<r-1&&(s+=" ");const i=Math.min(t,r-1);return console.log("5\uac1c \uc774\ud558 \ucc98\ub9ac \uc644\ub8cc:",{answerIndex:i}),{numberedPassage:s.trim(),answerIndex:i}}const s=function(e,t){const n=[];n.push(t);const r=Math.floor(e/5),s=[];for(let a=0;a<e;a+=r)a!==t&&s.length<4&&s.push(a);for(let a=0;a<e&&s.length<4;a++)n.includes(a)||s.includes(a)||s.push(a);const i=[...n,...s],o=Array.from(new Set(i)).sort((e,t)=>e-t).slice(0,5);return console.log("\uc704\uce58 \uc120\ud0dd \uacfc\uc815:",{totalSentences:e,topicIndex:t,step:r,additionalPositions:s,finalPositions:o}),o}(r,t);console.log("\uc120\ud0dd\ub41c \uc704\uce58\ub4e4:",s);let i="",o=0;for(let d=0;d<r;d++)s.includes(d)?(i+=n[o]+" "+e[d].trim(),o++):i+=e[d].trim(),d<r-1&&(i+=" ");const a=s.indexOf(t),l=i.match(/[\u2460\u2461\u2462\u2463\u2464]/g)||[],c=Array.from(new Set(l));if(console.log("\ubc88\ud638 \ubd80\uc5ec \uac80\uc99d:",{usedNumbers:l,uniqueNumbers:c,count:l.length,answerIndex:a,selectedIndices:s}),5!==l.length||5!==c.length)throw console.error("\uc6d0\ubb38\uc790 \uc911\ubcf5 \ub610\ub294 \uac1c\uc218 \uc624\ub958!",{usedNumbers:l,uniqueNumbers:c,count:l.length}),new Error("\uc6d0\ubb38\uc790 \ubc88\ud638 \ubd80\uc5ec\uc5d0 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.");return{numberedPassage:i.trim(),answerIndex:a}}(u,d);console.log("\ubc88\ud638 \ubd80\uc5ec \ud6c4 \ubcf8\ubb38:",p),console.log("\uc815\ub2f5 \uc704\uce58:",m);const f=await async function(e){const t="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",n="\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc744 \ud55c\uad6d\uc5b4\ub85c \ubc88\uc5ed\ud574\uc8fc\uc138\uc694.\n\n\ubcf8\ubb38:\n".concat(e),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"user",content:n}],max_tokens:1e3,temperature:.3})}),s=await r.json();return s.choices[0].message.content.trim()}(t),g={missingSentence:c.trim(),numberedPassage:p.trim(),answerIndex:m,translation:f.trim()};console.log("\ucd5c\uc885 \uc0dd\uc131\ub41c \ubb38\uc81c:",g),h(g)}catch(s){if(console.error("\ubb38\uc7a5 \uc704\uce58 \ubb38\uc81c \uc0dd\uc131 \uc624\ub958:",s),r>0&&null!==e&&void 0!==e&&e.uid)try{await(0,vo.Lw)(e.uid,r,"\ubb38\uc7a5 \uc704\uce58 \ubb38\uc81c \uc0dd\uc131",e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790","\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\ub85c \uc778\ud55c \ud3ec\uc778\ud2b8 \ud658\ubd88"),E(e=>e+r)}catch(o){console.error("\ud3ec\uc778\ud2b8 \ud658\ubd88 \uc624\ub958:",o)}alert(s.message||"\ubb38\uc81c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}};function z(e,t){const n=e=>e.toLowerCase().replace(/[^\w\s]/g,"").replace(/\s+/g," ").trim(),r=n(e),s=n(t);if(r===s)return 1;const i=r.split(/\s+/).filter(e=>e.length>0),o=s.split(/\s+/).filter(e=>e.length>0);if(0===i.length||0===o.length)return 0;const a=i.filter(e=>o.includes(e)).length/Math.max(i.length,o.length),l=r.length>s.length?r:s,c=r.length>s.length?s:r;if(l.includes(c)&&c.length>20)return Math.max(a,.8);const d=function(e,t){const n=Array(t.length+1).fill(null).map(()=>Array(e.length+1).fill(null));for(let s=0;s<=e.length;s++)n[0][s]=s;for(let s=0;s<=t.length;s++)n[s][0]=s;for(let s=1;s<=t.length;s++)for(let r=1;r<=e.length;r++){const i=e[r-1]===t[s-1]?0:1;n[s][r]=Math.min(n[s][r-1]+1,n[s-1][r]+1,n[s-1][r-1]+i)}const r=Math.max(e.length,t.length);return 0===r?1:(r-n[t.length][e.length])/r}(r,s);return(a+d)/2}const L=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),v("no-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),v("none")},1e3)},100)},M=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),v("with-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),v("none")},1e3)},100)},B=()=>{h(null),o(""),l(null),d(null),w(!1),m(!1),g(!1)},U=()=>{if(!u)return null;const e={instruction:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},missingSentenceBox:{border:"2px solid #222",borderRadius:"6px",background:"#f7f8fc",padding:"0.8em 1.2em",marginTop:"1rem",marginBottom:"1rem",fontWeight:700,fontSize:"1rem !important"},numberedPassage:{fontSize:"1rem !important",lineHeight:"1.7",margin:"0.3rem 0",background:"#FFF3CD",borderRadius:"8px",padding:"1rem",fontFamily:"inherit",color:"#222",whiteSpace:"pre-line",border:"1.5px solid #e3e6f0"},answer:{marginTop:"1.2rem",marginBottom:"1.5rem",color:"#1976d2",fontWeight:700,fontSize:"1rem !important"},translation:{marginTop:"0.9rem",fontSize:"0.8rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"}},t=()=>(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(R.page1Content.includes("A")||"A"===R.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:e.instruction,children:"\uc544\ub798 \ubcf8\ubb38\uc5d0\uc11c \ube60\uc9c4 \uc8fc\uc81c \ubb38\uc7a5\uc744 \uac00\uc7a5 \uc801\uc808\ud55c \uc704\uce58\uc5d0 \ub123\uc73c\uc2dc\uc624."}),(0,Se.jsxs)("div",{className:"missing-sentence-box",style:e.missingSentenceBox,children:[(0,Se.jsx)("span",{style:{color:"#222"},children:"\uc8fc\uc694 \ubb38\uc7a5:"})," ",(0,Se.jsx)("span",{style:{color:"#6a5acd"},children:u.missingSentence})]}),(0,Se.jsx)("div",{style:e.numberedPassage,children:u.numberedPassage}),(0,Se.jsxs)("div",{className:"problem-answer",style:e.answer,children:["\uc815\ub2f5: ","\u2460\u2461\u2462\u2463\u2464"[u.answerIndex]||u.answerIndex+1]})]}),(R.page1Content.includes("B")||"B"===R.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:e.instruction,children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:e.translation,children:u.translation&&u.translation.trim().length>0?u.translation:"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})]})})]});return R.needsSecondPage?(0,Se.jsxs)(Se.Fragment,{children:[t(),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(R.page2Content.includes("A")||"A"===R.page2Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:e.instruction,children:"\uc544\ub798 \ubcf8\ubb38\uc5d0\uc11c \ube60\uc9c4 \uc8fc\uc81c \ubb38\uc7a5\uc744 \uac00\uc7a5 \uc801\uc808\ud55c \uc704\uce58\uc5d0 \ub123\uc73c\uc2dc\uc624."}),(0,Se.jsxs)("div",{className:"missing-sentence-box",style:e.missingSentenceBox,children:[(0,Se.jsx)("span",{style:{color:"#222"},children:"\uc8fc\uc694 \ubb38\uc7a5:"})," ",(0,Se.jsx)("span",{style:{color:"#6a5acd"},children:u.missingSentence})]}),(0,Se.jsx)("div",{style:e.numberedPassage,children:u.numberedPassage}),(0,Se.jsxs)("div",{className:"problem-answer",style:e.answer,children:["\uc815\ub2f5: ","\u2460\u2461\u2462\u2463\u2464"[u.answerIndex]||u.answerIndex+1]})]}),(R.page2Content.includes("B")||"B"===R.page2Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:e.instruction,children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:e.translation,children:u.translation&&u.translation.trim().length>0?u.translation:"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})]})})]})]}):t()};return u?(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("div",{className:"quiz-display no-print",children:[(0,Se.jsxs)("div",{className:"quiz-header",children:[(0,Se.jsx)("h2",{className:"no-print",children:"#06. \uc8fc\uc694 \ubb38\uc7a5 \uc704\uce58 \ucc3e\uae30 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"quiz-header-buttons no-print",children:[(0,Se.jsx)("button",{onClick:B,className:"reset-button",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\uc0c8 \ubb38\uc81c \ub9cc\ub4e4\uae30"}),(0,Se.jsxs)("button",{onClick:L,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsx)("span",{children:"\uc778\uc1c4 (\ubb38\uc81c)"})]}),(0,Se.jsxs)("button",{onClick:M,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 6px rgba(240, 147, 251, 0.25)"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsxs)("span",{children:["\uc778\uc1c4 (",(0,Se.jsx)("span",{style:{color:"#FFD600"},children:"\uc815\ub2f5"}),")"]})]})]})]}),(0,Se.jsxs)("div",{className:"sentence-position-section",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1.13rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"2.0rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\uc544\ub798 \ubcf8\ubb38\uc5d0\uc11c \ube60\uc9c4 \uc8fc\uc81c \ubb38\uc7a5\uc744 \uac00\uc7a5 \uc801\uc808\ud55c \uc704\uce58\uc5d0 \ub123\uc73c\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#06"})]}),(0,Se.jsxs)("div",{className:"missing-sentence-box",style:{border:"2px solid #222",borderRadius:"6px",background:"#f7f8fc",padding:"0.8em 1.2em",marginBottom:"1.8em",fontWeight:700,fontSize:"1.08rem"},children:[(0,Se.jsx)("span",{style:{color:"#222"},children:"\uc8fc\uc694 \ubb38\uc7a5:"})," ",(0,Se.jsx)("span",{style:{color:"#6a5acd"},children:u.missingSentence})]}),(0,Se.jsx)("div",{className:"numbered-passage",style:{fontSize:"1.08rem",lineHeight:1.7,margin:"1.2rem 0",background:"#FFF3CD",borderRadius:"8px",padding:"1.2rem",fontFamily:"inherit",whiteSpace:"pre-line",border:"1.5px solid #e3e6f0"},children:u.numberedPassage})]})]}),"no-answer"===y&&(0,Se.jsx)("div",{className:"only-print",children:(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\uc544\ub798 \ubcf8\ubb38\uc5d0\uc11c \ube60\uc9c4 \uc8fc\uc81c \ubb38\uc7a5\uc744 \uac00\uc7a5 \uc801\uc808\ud55c \uc704\uce58\uc5d0 \ub123\uc73c\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#06"})]}),(0,Se.jsxs)("div",{className:"missing-sentence-box",style:{border:"2px solid #222",borderRadius:"6px",background:"#f7f8fc",padding:"0.8em 1.2em",marginTop:"1rem",marginBottom:"1rem",fontWeight:700,fontSize:"1rem !important"},children:[(0,Se.jsx)("span",{style:{color:"#222"},children:"\uc8fc\uc694 \ubb38\uc7a5:"})," ",(0,Se.jsx)("span",{style:{color:"#6a5acd"},children:u.missingSentence})]}),(0,Se.jsx)("div",{style:{fontSize:"1rem !important",lineHeight:"1.7",margin:"0.3rem 0",background:"#FFF3CD",borderRadius:"8px",padding:"1rem",fontFamily:"inherit",color:"#222",whiteSpace:"pre-line",border:"1.5px solid #e3e6f0"},children:u.numberedPassage})]})})]})}),"with-answer"===y&&u&&(0,Se.jsx)("div",{className:"only-print print-answer-mode",children:U()})]}):(0,Se.jsxs)("div",{className:"quiz-generator",onPaste:async e=>{if("capture"!==n)return;const t=e.clipboardData.items;for(let n=0;n<t.length;n++)if(-1!==t[n].type.indexOf("image")){const s=t[n].getAsFile();if(s){l(s),d(URL.createObjectURL(s)),g(!0);try{const e=await F(s);o(e),setTimeout(()=>{x.current&&(x.current.style.height="auto",x.current.style.height=x.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}return void e.preventDefault()}e.preventDefault()},children:[(0,Se.jsxs)("div",{className:"generator-header",children:[(0,Se.jsx)("h2",{children:"[\uc720\ud615#06] \uc8fc\uc694 \ubb38\uc7a5 \uc704\uce58 \ucc3e\uae30 \ubb38\uc81c \uc0dd\uc131"}),(0,Se.jsx)("p",{children:"\uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uac00\uc7a5 \uc911\uc694\ud55c \uc8fc\uc81c \ubb38\uc7a5\uc744 \ucc3e\uc544 \ubcf8\ubb38\uc5d0\uc11c \uc81c\uac70\ud558\uace0, \ubcf8\ubb38 \ubb38\uc7a5 \uc0ac\uc774\uc5d0 \uc6d0\ubb38\uc790(\u2460~\u2464)\ub97c \uc0bd\uc785\ud574 \uc704\uce58 \ucc3e\uae30 \ubb38\uc81c\ub97c \ub9cc\ub4ed\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"input-type-section",children:[(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"capture"===n,onChange:()=>P("capture")}),(0,Se.jsx)("span",{children:"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30"}),(0,Se.jsx)("button",{type:"button",className:"screenshot-help-btn",onClick:e=>{e.preventDefault(),N(!0)},title:"\ud654\uba74 \ucea1\ucc98 \ubc29\ubc95 \ubcf4\uae30",children:"?"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"image"===n,onChange:()=>P("image")}),(0,Se.jsx)("span",{children:"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \ud30c\uc77c \ucca8\ubd80"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"text"===n,onChange:()=>P("text")}),(0,Se.jsx)("span",{children:"\u270d\ufe0f \uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30"})]})]}),"capture"===n&&(0,Se.jsxs)("div",{className:"input-guide".concat(b?" paste-focused":""),tabIndex:0,onClick:()=>w(!0),onFocus:()=>w(!0),onBlur:()=>w(!1),children:[(0,Se.jsx)("div",{className:"drop-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("div",{className:"drop-text",children:"\uc5ec\uae30\uc5d0 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc73c\uc138\uc694"}),(0,Se.jsxs)("div",{className:"drop-desc",children:["\ud074\ub9ad \ub610\ub294 Tab \ud6c4 ",(0,Se.jsx)("b",{children:"Ctrl+V"}),"\ub85c \ucea1\ucc98 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),c&&(0,Se.jsx)("div",{className:"preview-row",children:(0,Se.jsx)("img",{src:c,alt:"\ucea1\ucc98 \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"})}),(p||f)&&(0,Se.jsx)("div",{style:{color:"#6a5acd",fontWeight:600,marginTop:"0.7rem"},children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),"image"===n&&(0,Se.jsx)("div",{className:"input-guide",children:(0,Se.jsxs)("div",{className:"file-upload-row",children:[(0,Se.jsxs)("label",{htmlFor:"sentence-position-image",className:"file-upload-btn",children:["\ud30c\uc77c \uc120\ud0dd",(0,Se.jsx)("input",{id:"sentence-position-image",type:"file",accept:"image/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){l(n),d(URL.createObjectURL(n)),g(!0);try{const e=await F(n);o(e),setTimeout(()=>{x.current&&(x.current.style.height="auto",x.current.style.height=x.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}},style:{display:"none"}})]}),(0,Se.jsx)("span",{className:"file-upload-status",children:a?a.name:"\uc120\ud0dd\ub41c \ud30c\uc77c \uc5c6\uc74c"}),c&&(0,Se.jsx)("img",{src:c,alt:"\uc5c5\ub85c\ub4dc \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"}),(p||f)&&(0,Se.jsx)("div",{className:"loading-text",children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]})}),(0,Se.jsxs)("div",{className:"input-section",children:[(0,Se.jsxs)("div",{className:"input-label-row",children:[(0,Se.jsx)("label",{htmlFor:"sentence-position-text",className:"input-label",children:"\uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30:"}),i.length<100&&(0,Se.jsx)("span",{className:"warning",children:"\u26a0\ufe0f \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 \ub354 \uc88b\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("textarea",{id:"sentence-position-text",ref:x,value:i,onChange:e=>{o(e.target.value),x.current&&(x.current.style.height="auto",x.current.style.height=x.current.scrollHeight+"px")},placeholder:"\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc9c1\uc811 \ubd99\uc5ec\ub123\uc5b4 \uc8fc\uc138\uc694. \ucd5c\uc18c 100\uc790 \uc774\uc0c1 \uad8c\uc7a5\ud569\ub2c8\ub2e4.",className:"text-input",rows:8,style:{overflow:"hidden",resize:"none"},disabled:"image"===n&&!i}),(0,Se.jsx)("div",{className:"text-info",children:(0,Se.jsxs)("span",{children:["\uae00\uc790 \uc218: ",i.length,"\uc790"]})})]}),(0,Se.jsx)("button",{onClick:async()=>{if(console.log("\ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778:",{userData:e,uid:null===e||void 0===e?void 0:e.uid,loading:t}),t)return void alert("\ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if(!e||!e.uid)return console.error("\ub85c\uadf8\uc778 \uc0c1\ud0dc \uc624\ub958:",{userData:e,loading:t}),void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.");const n=I.find(e=>"6"===e.id);if(!n)return void alert("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=n.points;C<r?alert("\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. \ud604\uc7ac ".concat(C.toLocaleString(),"P, \ud544\uc694 ").concat(r.toLocaleString(),"P")):(T(r),S(!0))},disabled:p||!i.trim(),className:"generate-button",children:"\uc8fc\uc694 \ubb38\uc7a5 \uc704\uce58 \ucc3e\uae30 \ubb38\uc81c \uc0dd\uc131\ud558\uae30"}),(p||f)&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("span",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:f?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":"\ud83d\udccb \ubb38\uc81c \uc0dd\uc131 \uc911..."})]})}),(0,Se.jsx)(yo,{isOpen:k,onClose:()=>S(!1),onConfirm:()=>{S(!1),D()},workTypeName:"\uc8fc\uc694 \ubb38\uc7a5 \uc704\uce58 \ucc3e\uae30 \ubb38\uc81c \uc0dd\uc131",pointsToDeduct:_,userCurrentPoints:C,remainingPoints:C-_}),(0,Se.jsx)(go,{isOpen:j,onClose:()=>N(!1)})]})},Ia=754,Aa=1048,Ra=30,Oa=11,Pa=30,Fa=11,Da=30,za=11,La=()=>{const{userData:e,loading:n}=Te(),[s,i]=(0,r.useState)("text"),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[h,p]=(0,r.useState)(null),[m,f]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[v,x]=(0,r.useState)(null),[b,w]=(0,r.useState)("none"),j=(0,r.useRef)(null),[N,k]=(0,r.useState)({needsSecondPage:!1,needsThirdPage:!1,page1Content:"",page2Content:"",page3Content:""}),[S,_]=(0,r.useState)(!1),[T,C]=(0,r.useState)(!1),[E,I]=(0,r.useState)(!1),[A,R]=(0,r.useState)(0),[O,P]=(0,r.useState)(0),[F,D]=(0,r.useState)([]),z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:38,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.7;const s=Ia-40,i=.55*n,o=Math.floor(s/i);return Math.ceil(e.length/o)*n*r+t};(0,r.useEffect)(()=>{n||(async()=>{try{var t;const r=await(0,vo.getWorkTypePoints)();D(r);const s=(null===(t=r.find(e=>"7"===e.id))||void 0===t?void 0:t.points)||0;if(R(s),!n&&e&&e.uid){const t=await(0,vo.MC)(e.uid);P(t)}}catch(r){console.error("\ud3ec\uc778\ud2b8 \ucd08\uae30\ud654 \uc624\ub958:",r)}})()},[null===e||void 0===e?void 0:e.uid,n]),(0,r.useEffect)(()=>{h&&("with-answer"===b&&h.translation?(()=>{if(!h)return;const e=Ra+Oa+z(h.passage,38,16,1.7),t=Da+za;let n=0;h.options.forEach(e=>{n+=z("".concat(e," (\uc815\ub2f5)"),11,16,1.3)});const r=t+n,s=Pa+Fa,i=h.translation||"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.",o=s+z(i,38,16,1.7),a=Aa,l=a-50,c=e+r+o;console.log("\ud83d\udccf \uc720\ud615#07 \uc778\uc1c4(\uc815\ub2f5) \ub3d9\uc801 \ud398\uc774\uc9c0 \ubd84\ud560 \uacc4\uc0b0:",{availableHeight:a.toFixed(2)+"px",sectionAHeight:e.toFixed(2)+"px",sectionBHeight:r.toFixed(2)+"px",sectionCHeight:o.toFixed(2)+"px",totalHeight:c.toFixed(2)+"px",effectiveAvailableHeight:l.toFixed(2)+"px",quizTextLength:h.passage.length,translationTextLength:i.length}),k(c<=l?{needsSecondPage:!1,needsThirdPage:!1,page1Content:"A+B+C",page2Content:"",page3Content:""}:e+r<=l?o<=l?{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A+B",page2Content:"C",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!0,page1Content:"A+B",page2Content:"C-part1",page3Content:"C-part2"}:e<=l&&r+o<=l?{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A",page2Content:"B+C",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!0,page1Content:"A",page2Content:"B",page3Content:"C"})})():"no-answer"===b&&(()=>{if(!h)return;const e=Ra+Oa+z(h.passage,38,16,1.7);let t=0;h.options.forEach(e=>{t+=z(e,11,16,1.3)});const n=t,r=Aa,s=r-50,i=e+n;console.log("\ud83d\udccf \uc720\ud615#07 \uc778\uc1c4(\ubb38\uc81c) \ub3d9\uc801 \ud398\uc774\uc9c0 \ubd84\ud560 \uacc4\uc0b0 (2\uc139\uc158):",{availableHeight:r.toFixed(2)+"px",sectionAHeight:e.toFixed(2)+"px",sectionBHeight:n.toFixed(2)+"px",totalHeight:i.toFixed(2)+"px",effectiveAvailableHeight:s.toFixed(2)+"px",quizTextLength:h.passage.length}),k(i<=s?{needsSecondPage:!1,needsThirdPage:!1,page1Content:"A+B",page2Content:"",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A",page2Content:"B",page3Content:""})})())},[h,null===h||void 0===h?void 0:h.translation,b]);const L=()=>{if(!h)return null;const e={instruction:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},passage:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},options:{margin:"1rem 0"},option:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},optionTranslation:{fontSize:"0.9rem",marginTop:"0.2rem",color:"#333",fontWeight:500,paddingLeft:"1.5rem"},translation:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"}},n=()=>(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(N.page1Content.includes("A")||"A"===N.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:(0,t.A)((0,t.A)({},e.instruction),{},{display:"flex",justifyContent:"space-between",alignItems:"center"}),children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \uc8fc\uc81c\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#07"})]}),(0,Se.jsx)("div",{style:e.passage,children:h.passage})]}),(N.page1Content.includes("B")||"B"===N.page1Content)&&(0,Se.jsx)("div",{className:"problem-options",style:e.options,children:h.options.map((t,n)=>(0,Se.jsxs)("div",{style:e.option,children:[(0,Se.jsxs)("div",{children:["\u2460\u2461\u2462\u2463\u2464"[n]||"".concat(n+1,".")," ",t,h.answerIndex===n&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]}),(0,Se.jsx)("div",{style:e.optionTranslation,children:h.optionTranslations&&h.optionTranslations[n]?h.optionTranslations[n]:"\ud574\uc11d \uc5c6\uc74c"})]},n))}),(N.page1Content.includes("C")||"C"===N.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:e.instruction,children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:e.translation,children:h.translation&&h.translation.trim().length>0?h.translation:"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})]})})]}),r=()=>(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(N.page2Content.includes("B")||"B"===N.page2Content)&&(0,Se.jsx)("div",{className:"problem-options",style:e.options,children:h.options.map((t,n)=>(0,Se.jsxs)("div",{style:e.option,children:[(0,Se.jsxs)("div",{children:["\u2460\u2461\u2462\u2463\u2464"[n]||"".concat(n+1,".")," ",t,h.answerIndex===n&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]}),(0,Se.jsx)("div",{style:e.optionTranslation,children:h.optionTranslations&&h.optionTranslations[n]?h.optionTranslations[n]:"\ud574\uc11d \uc5c6\uc74c"})]},n))}),(N.page2Content.includes("C")||"C"===N.page2Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:e.instruction,children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:e.translation,children:h.translation&&h.translation.trim().length>0?h.translation:"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})]})})]});return N.needsSecondPage||N.needsThirdPage?N.needsSecondPage&&!N.needsThirdPage?(0,Se.jsxs)(Se.Fragment,{children:[n(),r()]}):(0,Se.jsxs)(Se.Fragment,{children:[n(),r(),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsx)("div",{className:"quiz-content",children:(N.page3Content.includes("C")||"C"===N.page3Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:e.instruction,children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:e.translation,children:h.translation&&h.translation.trim().length>0?h.translation:"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})})})]})]}):n()},M=()=>{if(!h)return null;const e={instruction:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},passage:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},options:{margin:"1rem 0"},option:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"}},t=()=>(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(N.page1Content.includes("A")||"A"===N.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:e.instruction,children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \uc8fc\uc81c\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#07"})]}),(0,Se.jsx)("div",{style:e.passage,children:h.passage})]}),(N.page1Content.includes("B")||"B"===N.page1Content)&&(0,Se.jsx)("div",{className:"problem-options",style:e.options,children:h.options.map((t,n)=>(0,Se.jsxs)("div",{style:e.option,children:["\u2460\u2461\u2462\u2463\u2464"[n]||"".concat(n+1,".")," ",t]},n))})]})})]});return N.needsSecondPage?(0,Se.jsxs)(Se.Fragment,{children:[t(),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsx)("div",{className:"quiz-content",children:(N.page2Content.includes("B")||"B"===N.page2Content)&&(0,Se.jsx)("div",{className:"problem-options",style:e.options,children:h.options.map((t,n)=>(0,Se.jsxs)("div",{style:e.option,children:["\u2460\u2461\u2462\u2463\u2464"[n]||"".concat(n+1,".")," ",t]},n))})})})]})]}):t()};(0,r.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,r.useEffect)(()=>{h&&window.scrollTo(0,0)},[h]);const B=e=>{i(e),a(""),c(null),u(null),p(null),x(null)};async function U(e){const t=await(n=e,new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)}));var n;const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"\uc601\uc5b4\ubb38\uc81c\ub85c \uc0ac\uc6a9\ub418\ub294 \ubcf8\ubb38\uc774\uc57c.\n\uc774 \uc774\ubbf8\uc9c0\uc758 \ub0b4\uc6a9\uc744 \uc218\uc791\uc5c5\uc73c\ub85c \uc815\ud655\ud788 \uc77d\uace0, \uc601\uc5b4 \ubcf8\ubb38\ub9cc \ucd94\ub824\ub0b4\uc11c \ubcf4\uc5ec\uc918.\n\uae00\uc790\ub294 \uc778\uc1c4\uae00\uc528\uccb4 \uc774\uc678\uc5d0 \uc190\uae00\uc528\ub098 \uc6d0, \ubc11\uc904 \ub4f1 \ud45c\uc2dc\ub418\uc5b4\uc788\ub294 \uac83\uc740 \ubb34\uc2dc\ud574. \n\ubcf8\ubb38\uc911\uc5d0 \uc6d0\ubb38\uc790 1, 2, 3... \ub4f1\uc73c\ub85c \ud45c\uc2dc\ub41c\uac74 \uc81c\uac70\ud574\uc918. \n\uc6d0\ubb38\uc790 \uc81c\uac70\ud6c4 \uc904\uc744 \ubc14\uafb8\uac70\ub098 \ubb38\ub2e8\uc744 \ubc14\uafb8\uc9c0\ub9d0\uace0, \uc804\uccb4\uac00 \ud55c \ubb38\ub2e8\uc73c\ub85c \uad6c\uc131\ud574\uc918. \n\uc601\uc5b4 \ubcf8\ubb38\ub9cc, \uc544\ubb34\ub7f0 \uc124\uba85\uc774\ub098 \uc548\ub0b4\ubb38 \uc5c6\uc774, \ud55c \ubb38\ub2e8\uc73c\ub85c\ub9cc \ucd9c\ub825\ud574\uc918."},{type:"image_url",image_url:{url:t}}]}],max_tokens:2048})});return(await r.json()).choices[0].message.content.trim()}async function W(e){const t='\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc77d\uace0, \uae00\uc758 \uc8fc\uc81c\ub97c \uac00\uc7a5 \uc798 \uc694\uc57d\ud558\ub294 \ubb38\uc7a5/\uad6c 1\uac1c\ub97c \uc120\uc815\ud574.\n\n\ub2e8\uacc4\ubcc4 \uc791\uc5c5:\n1\ub2e8\uacc4: \ubcf8\ubb38\uc744 \uc77d\uace0 \uc8fc\uc81c\ub97c \ud30c\uc545\n2\ub2e8\uacc4: \uc8fc\uc81c\ub97c \uc694\uc57d\ud558\ub294 \uc815\ub2f5 \ubb38\uc7a5 1\uac1c \uc0dd\uc131\n3\ub2e8\uacc4: \uc815\ub2f5\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc \ub2e4\ub978 \uc758\ubbf8\uc758 \uc624\ub2f5 4\uac1c \uc0dd\uc131\n4\ub2e8\uacc4: 5\uac1c \uc120\ud0dd\uc9c0\ub97c \ubc30\uc5f4\uc5d0 \ubc30\uce58 (\uc815\ub2f5 \uc704\uce58\ub294 \ub79c\ub364)\n5\ub2e8\uacc4: \ubcf8\ubb38 \uc804\uccb4\ub97c \ud55c\uae00\ub85c \ubc88\uc5ed\n6\ub2e8\uacc4: \uc815\ub2f5 \uc120\ud0dd\uc9c0\ub9cc \uc815\ud655\ud788 \ud55c\uae00\ub85c \ubc88\uc5ed\n7\ub2e8\uacc4: \ubaa8\ub4e0 \uc120\ud0dd\uc9c0(1~5\ubc88)\ub97c \uac01\uac01 \ud55c\uae00\ub85c \ubc88\uc5ed\n\n\uc544\ub798 JSON \ud615\uc2dd\uc73c\ub85c \uc751\ub2f5:\n{\n  "passage": "\uc6d0\ubcf8 \uc601\uc5b4 \ubcf8\ubb38",\n  "options": ["\uc120\ud0dd\uc9c01", "\uc120\ud0dd\uc9c02", "\uc120\ud0dd\uc9c03", "\uc120\ud0dd\uc9c04", "\uc120\ud0dd\uc9c05"],\n  "answerIndex": 0,\n  "translation": "\ubcf8\ubb38 \uc804\uccb4\uc758 \ud55c\uae00 \ud574\uc11d",\n  "answerTranslation": "\uc815\ub2f5 \uc120\ud0dd\uc9c0\uc758 \uc815\ud655\ud55c \ud55c\uae00 \ud574\uc11d",\n  "optionTranslations": ["\uc120\ud0dd\uc9c01 \ud574\uc11d", "\uc120\ud0dd\uc9c02 \ud574\uc11d", "\uc120\ud0dd\uc9c03 \ud574\uc11d", "\uc120\ud0dd\uc9c04 \ud574\uc11d", "\uc120\ud0dd\uc9c05 \ud574\uc11d"]\n}\n\n\ubcf8\ubb38:\n'.concat(e,'\n\n\uc911\uc694 \uaddc\uce59:\n- answerIndex\ub294 0~4 \uc0ac\uc774\uc758 \uc22b\uc790 (\ubc30\uc5f4 \uc778\ub371\uc2a4)\n- answerTranslation\uc740 \ubc18\ub4dc\uc2dc options[answerIndex]\uc758 \uc815\ud655\ud55c \ubc88\uc5ed\n- optionTranslations\ub294 \ubaa8\ub4e0 \uc120\ud0dd\uc9c0\uc758 \ud574\uc11d \ubc30\uc5f4 (options\uc640 \ub3d9\uc77c\ud55c \uc21c\uc11c)\n- \uc608\uc2dc: answerIndex=1, options[1]="The future is uncertain but promising." \u2192 answerTranslation="\ubbf8\ub798\ub294 \ubd88\ud655\uc2e4\ud558\uc9c0\ub9cc \ud76c\ub9dd\uc801\uc785\ub2c8\ub2e4."\n- optionTranslations[1]\ub3c4 "\ubbf8\ub798\ub294 \ubd88\ud655\uc2e4\ud558\uc9c0\ub9cc \ud76c\ub9dd\uc801\uc785\ub2c8\ub2e4."\uac00 \ub418\uc5b4\uc57c \ud568\n- \ubaa8\ub4e0 \ud574\uc11d\uc774 \uc815\ud655\ud788 \uc77c\uce58\ud574\uc57c \ud568'),n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:t}],max_tokens:2e3,temperature:.3})}),r=(await n.json()).choices[0].message.content.match(/\{[\s\S]*\}/);if(!r)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let s;try{s=JSON.parse(r[0])}catch(i){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!s.passage||!s.options||"number"!==typeof s.answerIndex||!s.translation||!s.answerTranslation||!s.optionTranslations)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");if(s.answerIndex<0||s.answerIndex>=s.options.length)throw new Error("\uc815\ub2f5 \uc778\ub371\uc2a4\uac00 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");if(!Array.isArray(s.optionTranslations)||s.optionTranslations.length!==s.options.length)throw new Error("optionTranslations \ubc30\uc5f4\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");if(q(s.options[s.answerIndex],s.answerTranslation))return console.warn("\uc815\ub2f5 \ud574\uc11d\uc774 \uc815\ub2f5\uacfc \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc7ac\uc2dc\ub3c4\ud569\ub2c8\ub2e4."),await H(e,1);return V(s)}function V(e){const n=e.options[e.answerIndex],r=e.answerTranslation,s=e.optionTranslations[e.answerIndex],i=e.options.filter((t,n)=>n!==e.answerIndex),o=e.optionTranslations.filter((t,n)=>n!==e.answerIndex),a=Math.floor(5*Math.random()),l=new Array(5),c=new Array(5);l[a]=n,c[a]=s;const d=[];for(let t=0;t<5;t++)t!==a&&d.push(t);for(let t=i.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[i[t],i[e]]=[i[e],i[t]],[o[t],o[e]]=[o[e],o[t]]}let u=0;for(const t of d)l[t]=i[u],c[t]=o[u],u++;return console.log("\ud83c\udfb2 \uc120\ud0dd\uc9c0 \uc11e\uae30 \uc644\ub8cc:",{originalAnswerIndex:e.answerIndex,newAnswerIndex:a,originalAnswer:n,shuffledOptions:l,randomSeed:Math.random()}),(0,t.A)((0,t.A)({},e),{},{options:l,optionTranslations:c,answerIndex:a,answerTranslation:r})}function q(e,t){const n=e.toLowerCase(),r=t.toLowerCase(),s=[{english:"future",korean:["\ubbf8\ub798","\uc55e\uc73c\ub85c","\uc55e\ub0a0","\uc7a5\ub798"]},{english:"uncertain",korean:["\ubd88\ud655\uc2e4","\uc560\ub9e4","\ubaa8\ud638"]},{english:"promising",korean:["\ud76c\ub9dd\uc801","\uc720\ub9dd","\uae30\ub300"]},{english:"believe",korean:["\ubbff","\uc2e0\ub8b0"]},{english:"ability",korean:["\ub2a5\ub825","\uc7ac\ub2a5"]},{english:"change",korean:["\ubcc0\ud654","\ubc14\ub01c"]},{english:"justice",korean:["\uc815\uc758","\uacf5\uc815"]},{english:"equality",korean:["\ud3c9\ub4f1","\ub3d9\ub4f1"]},{english:"resilience",korean:["\ud68c\ubcf5\ub825","\ud0c4\ub825"]},{english:"hope",korean:["\ud76c\ub9dd","\uc18c\ub9dd"]},{english:"overcome",korean:["\uadf9\ubcf5","\uc774\uaca8\ub0b4"]},{english:"challenge",korean:["\ub3c4\uc804","\ub09c\uc81c"]}];for(const i of s)if(n.includes(i.english)){if(!i.korean.some(e=>r.includes(e)))return console.log('\ud0a4\uc6cc\ub4dc \ubd88\uc77c\uce58: "'.concat(i.english,'" \u2192 \ud574\uc11d\uc5d0 "').concat(i.korean.join(", "),'" \uc5c6\uc74c')),!0}return!(!n.includes("future")||r.includes("\ubbf8\ub798")||r.includes("\uc55e\uc73c\ub85c")||r.includes("\uc55e\ub0a0"))||!(!n.includes("believe")||r.includes("\ubbff"))}async function H(e,t){const n='\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc77d\uace0, \uae00\uc758 \uc8fc\uc81c\ub97c \uac00\uc7a5 \uc798 \uc694\uc57d\ud558\ub294 \ubb38\uc7a5/\uad6c 1\uac1c\ub97c \uc120\uc815\ud574.\n\n\ub2e8\uacc4\ubcc4 \uc791\uc5c5:\n1\ub2e8\uacc4: \ubcf8\ubb38\uc744 \uc77d\uace0 \uc8fc\uc81c\ub97c \ud30c\uc545\n2\ub2e8\uacc4: \uc8fc\uc81c\ub97c \uc694\uc57d\ud558\ub294 \uc815\ub2f5 \ubb38\uc7a5 1\uac1c \uc0dd\uc131\n3\ub2e8\uacc4: \uc815\ub2f5\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc \ub2e4\ub978 \uc758\ubbf8\uc758 \uc624\ub2f5 4\uac1c \uc0dd\uc131\n4\ub2e8\uacc4: 5\uac1c \uc120\ud0dd\uc9c0\ub97c \ubc30\uc5f4\uc5d0 \ubc30\uce58 (\uc815\ub2f5 \uc704\uce58\ub294 \ub79c\ub364)\n5\ub2e8\uacc4: \ubcf8\ubb38 \uc804\uccb4\ub97c \ud55c\uae00\ub85c \ubc88\uc5ed\n6\ub2e8\uacc4: \uc815\ub2f5 \uc120\ud0dd\uc9c0\ub9cc \uc815\ud655\ud788 \ud55c\uae00\ub85c \ubc88\uc5ed\n7\ub2e8\uacc4: \ubaa8\ub4e0 \uc120\ud0dd\uc9c0(1~5\ubc88)\ub97c \uac01\uac01 \ud55c\uae00\ub85c \ubc88\uc5ed\n\n\uc544\ub798 JSON \ud615\uc2dd\uc73c\ub85c \uc751\ub2f5:\n{\n  "passage": "\uc6d0\ubcf8 \uc601\uc5b4 \ubcf8\ubb38",\n  "options": ["\uc120\ud0dd\uc9c01", "\uc120\ud0dd\uc9c02", "\uc120\ud0dd\uc9c03", "\uc120\ud0dd\uc9c04", "\uc120\ud0dd\uc9c05"],\n  "answerIndex": 0,\n  "translation": "\ubcf8\ubb38 \uc804\uccb4\uc758 \ud55c\uae00 \ud574\uc11d",\n  "answerTranslation": "\uc815\ub2f5 \uc120\ud0dd\uc9c0\uc758 \uc815\ud655\ud55c \ud55c\uae00 \ud574\uc11d",\n  "optionTranslations": ["\uc120\ud0dd\uc9c01 \ud574\uc11d", "\uc120\ud0dd\uc9c02 \ud574\uc11d", "\uc120\ud0dd\uc9c03 \ud574\uc11d", "\uc120\ud0dd\uc9c04 \ud574\uc11d", "\uc120\ud0dd\uc9c05 \ud574\uc11d"]\n}\n\n\ubcf8\ubb38:\n'.concat(e,'\n\n\uc911\uc694 \uaddc\uce59:\n- answerIndex\ub294 0~4 \uc0ac\uc774\uc758 \uc22b\uc790 (\ubc30\uc5f4 \uc778\ub371\uc2a4)\n- answerTranslation\uc740 \ubc18\ub4dc\uc2dc options[answerIndex]\uc758 \uc815\ud655\ud55c \ubc88\uc5ed\n- optionTranslations\ub294 \ubaa8\ub4e0 \uc120\ud0dd\uc9c0\uc758 \ud574\uc11d \ubc30\uc5f4 (options\uc640 \ub3d9\uc77c\ud55c \uc21c\uc11c)\n- \uc608\uc2dc: answerIndex=1, options[1]="The future is uncertain but promising." \u2192 answerTranslation="\ubbf8\ub798\ub294 \ubd88\ud655\uc2e4\ud558\uc9c0\ub9cc \ud76c\ub9dd\uc801\uc785\ub2c8\ub2e4."\n- optionTranslations[1]\ub3c4 "\ubbf8\ub798\ub294 \ubd88\ud655\uc2e4\ud558\uc9c0\ub9cc \ud76c\ub9dd\uc801\uc785\ub2c8\ub2e4."\uac00 \ub418\uc5b4\uc57c \ud568\n- \ubaa8\ub4e0 \ud574\uc11d\uc774 \uc815\ud655\ud788 \uc77c\uce58\ud574\uc57c \ud568\n- \uc7ac\uc2dc\ub3c4 ').concat(t,"\ubc88\uc9f8\uc785\ub2c8\ub2e4. \uc774\uc804\uc5d0 \uc815\ub2f5\uacfc \ud574\uc11d\uc774 \uc77c\uce58\ud558\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \ub9e4\uc6b0 \uc8fc\uc758\ud558\uc138\uc694."),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:n}],max_tokens:2e3,temperature:.1})}),s=(await r.json()).choices[0].message.content.match(/\{[\s\S]*\}/);if(!s)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let i;try{i=JSON.parse(s[0])}catch(o){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!i.passage||!i.options||"number"!==typeof i.answerIndex||!i.translation||!i.answerTranslation||!i.optionTranslations)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");if(i.answerIndex<0||i.answerIndex>=i.options.length)throw new Error("\uc815\ub2f5 \uc778\ub371\uc2a4\uac00 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");if(!Array.isArray(i.optionTranslations)||i.optionTranslations.length!==i.options.length)throw new Error("optionTranslations \ubc30\uc5f4\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");if(q(i.options[i.answerIndex],i.answerTranslation)&&t<2)return console.warn("\uc7ac\uc2dc\ub3c4 ".concat(t+1,"\ubc88\uc9f8: \uc815\ub2f5 \ud574\uc11d\uc774 \uc5ec\uc804\ud788 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")),await H(e,t+1);return V(i)}const K=async()=>{if(null===e||void 0===e||!e.uid)return;let t="";f(!0),p(null),x(null);let n=0;try{const r=F.find(e=>"7"===e.id);if(!r)throw new Error("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const i=await(0,vo.ev)(e.uid,"7",r.name,e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790");if(!i.success)throw new Error(i.error||"\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");if(n=i.deductedPoints,P(i.remainingPoints),"text"===s){if(!o.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=o.trim()}else if("image"===s&&l)t=await U(l);else{if("capture"!==s)throw new Error("\uc774\ubbf8\uc9c0\ub97c \ucca8\ubd80\ud574\uc8fc\uc138\uc694.");if(!o.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=o.trim()}if(!t.trim())throw new Error("\ucd94\ucd9c\ub41c \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const a=await W(t);p(a)}catch(r){if(console.error("\uc8fc\uc81c \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131 \uc624\ub958:",r),n>0&&null!==e&&void 0!==e&&e.uid)try{await(0,vo.Lw)(e.uid,n,"\uc8fc\uc81c \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131",e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790","\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\ub85c \uc778\ud55c \ud3ec\uc778\ud2b8 \ud658\ubd88"),P(e=>e+n)}catch(i){console.error("\ud3ec\uc778\ud2b8 \ud658\ubd88 \uc624\ub958:",i)}alert(r.message||"\ubb38\uc81c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{y(!1)}},J=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),w("no-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),w("none")},1e3)},100)},Y=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),w("with-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),w("none")},1e3)},100)},Q=()=>{p(null),x(null),a(""),c(null),u(null),_(!1),f(!1),y(!1)};return h?(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("div",{className:"quiz-display no-print",children:[(0,Se.jsxs)("div",{className:"quiz-header",children:[(0,Se.jsx)("h2",{className:"no-print",children:"#07. \uc8fc\uc81c \ucd94\ub860 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"quiz-header-buttons no-print",children:[(0,Se.jsx)("button",{onClick:Q,className:"reset-button",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\uc0c8 \ubb38\uc81c \ub9cc\ub4e4\uae30"}),(0,Se.jsxs)("button",{onClick:J,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsx)("span",{children:"\uc778\uc1c4 (\ubb38\uc81c)"})]}),(0,Se.jsxs)("button",{onClick:Y,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 6px rgba(240, 147, 251, 0.25)"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsxs)("span",{children:["\uc778\uc1c4 (",(0,Se.jsx)("span",{style:{color:"#FFD600"},children:"\uc815\ub2f5"}),")"]})]})]})]}),(0,Se.jsxs)("div",{className:"main-idea-section",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1.13rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"0.6rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \uc8fc\uc81c\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#07"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{fontSize:"1.08rem",lineHeight:1.7,margin:"1.2rem 0",background:"#f7f8fc",borderRadius:"8px",padding:"1.2rem",fontFamily:"inherit"},children:h.passage}),(0,Se.jsx)("div",{className:"problem-options",style:{margin:"1.2rem 0"},children:h.options.map((e,t)=>(0,Se.jsxs)("label",{style:{display:"block",fontSize:"1.08rem",margin:"0.4rem 0",cursor:"pointer",fontWeight:v===t?700:400,color:v===t?"#6a5acd":"#222",fontFamily:"inherit"},children:[(0,Se.jsx)("input",{type:"radio",name:"main-idea-quiz",checked:v===t,onChange:()=>x(t),style:{marginRight:"0.7rem"}}),"\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,null!==v&&h.answerIndex===t&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]},t))}),null!==v&&(0,Se.jsxs)("div",{className:"problem-answer no-print",style:{marginTop:"1.2rem",color:"#1976d2",fontWeight:700},children:["\uc815\ub2f5: ","\u2460\u2461\u2462\u2463\u2464"[h.answerIndex]||h.answerIndex+1," ",h.options[h.answerIndex],(0,Se.jsxs)("div",{style:{marginTop:"0.4em",color:"#388e3c",fontWeight:600},children:["\uc815\ub2f5 \ud574\uc11d: ",h.answerTranslation]})]})]})]}),"no-answer"===b&&(0,Se.jsx)("div",{className:"only-print",children:M()}),"with-answer"===b&&h&&(0,Se.jsx)("div",{className:"only-print print-answer-mode",children:L()})]}):(0,Se.jsxs)("div",{className:"quiz-generator",onPaste:async e=>{if("capture"!==s)return;const t=e.clipboardData.items;for(let r=0;r<t.length;r++)if(-1!==t[r].type.indexOf("image")){const s=t[r].getAsFile();if(s){c(s),u(URL.createObjectURL(s)),y(!0);try{const e=await U(s);a(e),setTimeout(()=>{j.current&&(j.current.style.height="auto",j.current.style.height=j.current.scrollHeight+"px")},0)}catch(n){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{y(!1)}}return void e.preventDefault()}e.preventDefault()},children:[(0,Se.jsxs)("div",{className:"generator-header",children:[(0,Se.jsx)("h2",{children:"[\uc720\ud615#07] \uc8fc\uc81c \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131"}),(0,Se.jsx)("p",{children:"\uc601\uc5b4 \ubcf8\ubb38\uc758 \uc8fc\uc81c\ub97c AI\uac00 \ucd94\ub860\ud574 5\uc9c0\uc120\ub2e4 \uac1d\uad00\uc2dd \ubb38\uc81c\ub85c \ucd9c\uc81c\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"input-type-section",children:[(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"capture"===s,onChange:()=>B("capture")}),(0,Se.jsx)("span",{children:"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30"}),(0,Se.jsx)("button",{type:"button",className:"screenshot-help-btn",onClick:e=>{e.preventDefault(),C(!0)},title:"\ud654\uba74 \ucea1\ucc98 \ubc29\ubc95 \ubcf4\uae30",children:"?"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"image"===s,onChange:()=>B("image")}),(0,Se.jsx)("span",{children:"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \ud30c\uc77c \ucca8\ubd80"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"text"===s,onChange:()=>B("text")}),(0,Se.jsx)("span",{children:"\u270d\ufe0f \uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30"})]})]}),"capture"===s&&(0,Se.jsxs)("div",{className:"input-guide".concat(S?" paste-focused":""),tabIndex:0,onClick:()=>_(!0),onFocus:()=>_(!0),onBlur:()=>_(!1),children:[(0,Se.jsx)("div",{className:"drop-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("div",{className:"drop-text",children:"\uc5ec\uae30\uc5d0 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc73c\uc138\uc694"}),(0,Se.jsxs)("div",{className:"drop-desc",children:["\ud074\ub9ad \ub610\ub294 Tab \ud6c4 ",(0,Se.jsx)("b",{children:"Ctrl+V"}),"\ub85c \ucea1\ucc98 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),d&&(0,Se.jsx)("div",{className:"preview-row",children:(0,Se.jsx)("img",{src:d,alt:"\ucea1\ucc98 \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"})}),(m||g)&&(0,Se.jsx)("div",{style:{color:"#6a5acd",fontWeight:600,marginTop:"0.7rem"},children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),"image"===s&&(0,Se.jsx)("div",{className:"input-guide",children:(0,Se.jsxs)("div",{className:"file-upload-row",children:[(0,Se.jsxs)("label",{htmlFor:"main-idea-image",className:"file-upload-btn",children:["\ud30c\uc77c \uc120\ud0dd",(0,Se.jsx)("input",{id:"main-idea-image",type:"file",accept:"image/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){c(n),u(URL.createObjectURL(n)),y(!0);try{const e=await U(n);a(e),setTimeout(()=>{j.current&&(j.current.style.height="auto",j.current.style.height=j.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{y(!1)}}},style:{display:"none"}})]}),(0,Se.jsx)("span",{className:"file-upload-status",children:l?l.name:"\uc120\ud0dd\ub41c \ud30c\uc77c \uc5c6\uc74c"}),d&&(0,Se.jsx)("img",{src:d,alt:"\uc5c5\ub85c\ub4dc \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"}),(m||g)&&(0,Se.jsx)("div",{className:"loading-text",children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]})}),(0,Se.jsxs)("div",{className:"input-section",children:[(0,Se.jsxs)("div",{className:"input-label-row",children:[(0,Se.jsx)("label",{htmlFor:"main-idea-text",className:"input-label",children:"\uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30: (2,000\uc790 \ubbf8\ub9cc \uad8c\uc7a5)"}),o.length<100&&(0,Se.jsx)("span",{className:"warning",children:"\u26a0\ufe0f \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 \ub354 \uc88b\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("textarea",{id:"main-idea-text",ref:j,value:o,onChange:e=>{a(e.target.value),j.current&&(j.current.style.height="auto",j.current.style.height=j.current.scrollHeight+"px")},placeholder:"\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc9c1\uc811 \ubd99\uc5ec\ub123\uc5b4 \uc8fc\uc138\uc694. \ucd5c\uc18c 100\uc790 \uc774\uc0c1 \uad8c\uc7a5\ud569\ub2c8\ub2e4.",className:"text-input",rows:8,style:{overflow:"hidden",resize:"none"},disabled:"image"===s&&!o}),(0,Se.jsx)("div",{className:"text-info",children:(0,Se.jsxs)("span",{children:["\uae00\uc790 \uc218: ",o.length,"\uc790"]})})]}),(0,Se.jsx)("button",{onClick:async()=>{if(console.log("\ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778:",{userData:e,uid:null===e||void 0===e?void 0:e.uid,loading:n}),n)return void alert("\ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if(!e||!e.uid)return console.error("\ub85c\uadf8\uc778 \uc0c1\ud0dc \uc624\ub958:",{userData:e,loading:n}),void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.");const t=F.find(e=>"7"===e.id);if(!t)return void alert("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=t.points;O<r?alert("\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. \ud604\uc7ac ".concat(O.toLocaleString(),"P, \ud544\uc694 ").concat(r.toLocaleString(),"P")):(R(r),I(!0))},disabled:m||!o.trim(),className:"generate-button",children:"\uc8fc\uc81c \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131\ud558\uae30"}),(m||g)&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("span",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:g?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":"\ud83d\udccb \ubb38\uc81c \uc0dd\uc131 \uc911..."})]})}),(0,Se.jsx)(yo,{isOpen:E,onClose:()=>I(!1),onConfirm:()=>{I(!1),K()},workTypeName:"\uc8fc\uc81c \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131",pointsToDeduct:A,userCurrentPoints:O,remainingPoints:O-A}),(0,Se.jsx)(go,{isOpen:T,onClose:()=>C(!1)})]})},Ma=25,Ba=25,Ua=20,Wa=20,Va=30,qa=20,Ha=754,Ka=1048,Ja=30,Ya=11,Qa=30,Ga=11,$a=30,Xa=11,Za=()=>{const{userData:e,loading:n}=Te(),[s,i]=(0,r.useState)("text"),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[h,p]=(0,r.useState)(null),[m,f]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[v,x]=(0,r.useState)(null),[b,w]=(0,r.useState)("none"),j=(0,r.useRef)(null),[N,k]=(0,r.useState)({needsSecondPage:!1,needsThirdPage:!1,page1Content:"",page2Content:"",page3Content:""}),[S,_]=(0,r.useState)(!1),[T,C]=(0,r.useState)(!1),[E,I]=(0,r.useState)(!1),[A,R]=(0,r.useState)(0),[O,P]=(0,r.useState)(0),[F,D]=(0,r.useState)([]),z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:38,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.7;const s=Ha-40,i=.55*n,o=Math.floor(s/i);return Math.ceil(e.length/o)*n*r+t};(0,r.useEffect)(()=>{n||(async()=>{try{var t;const r=await(0,vo.getWorkTypePoints)();D(r);const s=(null===(t=r.find(e=>"8"===e.id))||void 0===t?void 0:t.points)||0;if(R(s),!n&&e&&e.uid){const t=await(0,vo.MC)(e.uid);P(t)}}catch(r){console.error("\ud3ec\uc778\ud2b8 \ucd08\uae30\ud654 \uc624\ub958:",r)}})()},[null===e||void 0===e?void 0:e.uid,n]);(0,r.useEffect)(()=>{h&&("with-answer"===b?(()=>{if(!h)return;const e=Ja+Ya+z(h.passage,38,16,1.7),t=$a+Xa;let n=0;h.options.forEach(e=>{n+=z("".concat(e," (\uc815\ub2f5)"),11,16,1.3)});const r=t+n,s=Qa+Ga,i=h.translation||"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.",o=s+z(i,38,16,1.7),a=Ka,l=a-50,c=e+r+o;console.log("\ud83d\udccf \uc720\ud615#08 \ub3d9\uc801 \ud398\uc774\uc9c0 \ubd84\ud560 \uacc4\uc0b0:",{availableHeight:a.toFixed(2)+"px",sectionAHeight:e.toFixed(2)+"px",sectionBHeight:r.toFixed(2)+"px",sectionCHeight:o.toFixed(2)+"px",totalHeight:c.toFixed(2)+"px",effectiveAvailableHeight:l.toFixed(2)+"px",quizTextLength:h.passage.length,translationTextLength:i.length}),console.log("\ud83d\udd0d \uc2e4\uc81c A4 \ud06c\uae30 \uae30\uc900 \uacc4\uc0b0:",{A4_SIZE:"210mm \xd7 297mm = 794px \xd7 1123px (96 DPI)",CONTENT_AREA:Ha+"px \xd7 "+Ka+"px",TOP_MARGIN:Ma+"px",BOTTOM_MARGIN:Ba+"px",LEFT_MARGIN:Ua+"px",RIGHT_MARGIN:Wa+"px",HEADER_HEIGHT:Va+"px",FOOTER_HEIGHT:qa+"px",availableHeight:a+"px",safetyMargin:"50px",effectiveAvailableHeight:l+"px"}),k(c<=l?{needsSecondPage:!1,needsThirdPage:!1,page1Content:"A+B+C",page2Content:"",page3Content:""}:e+r<=l?o<=l?{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A+B",page2Content:"C",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!0,page1Content:"A+B",page2Content:"C-part1",page3Content:"C-part2"}:e<=l&&r+o<=l?{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A",page2Content:"B+C",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!0,page1Content:"A",page2Content:"B",page3Content:"C"})})():"no-answer"===b&&(()=>{if(!h)return;const e=Ja+Ya+z(h.passage,38,16,1.7),t=$a+Xa;let n=0;h.options.forEach(e=>{n+=z(e,11,16,1.3)});const r=t+n,s=Ka,i=s-50,o=e+r;console.log("\ud83d\udccf \uc720\ud615#08 \uc778\uc1c4(\ubb38\uc81c) \ud398\uc774\uc9c0 \ubd84\ud560 \uacc4\uc0b0:",{availableHeight:s.toFixed(2)+"px",sectionAHeight:e.toFixed(2)+"px",sectionBHeight:r.toFixed(2)+"px",totalHeight:o.toFixed(2)+"px",effectiveAvailableHeight:i.toFixed(2)+"px",quizTextLength:h.passage.length}),k(o<=i?{needsSecondPage:!1,needsThirdPage:!1,page1Content:"A+B",page2Content:"",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A",page2Content:"B",page3Content:""})})())},[h,b]);const L=()=>{if(!h)return null;const e={instruction:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},passage:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},options:{margin:"1rem 0"},option:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"}},t=()=>(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(N.page1Content.includes("A")||"A"===N.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:e.instruction,children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \uc81c\ubaa9\uc73c\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#08"})]}),(0,Se.jsx)("div",{style:e.passage,children:h.passage})]}),(N.page1Content.includes("B")||"B"===N.page1Content)&&(0,Se.jsx)("div",{className:"problem-options",style:e.options,children:h.options.map((t,n)=>(0,Se.jsxs)("div",{style:e.option,children:["\u2460\u2461\u2462\u2463\u2464"[n]||"".concat(n+1,".")," ",t]},n))})]})})]});return N.needsSecondPage?(0,Se.jsxs)(Se.Fragment,{children:[t(),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsx)("div",{className:"quiz-content",children:(N.page2Content.includes("B")||"B"===N.page2Content)&&(0,Se.jsx)("div",{className:"problem-options",style:e.options,children:h.options.map((t,n)=>(0,Se.jsxs)("div",{style:e.option,children:["\u2460\u2461\u2462\u2463\u2464"[n]||"".concat(n+1,".")," ",t]},n))})})})]})]}):t()},M=()=>{if(!h)return null;const e={instruction:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},passage:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},options:{margin:"1rem 0"},option:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},translation:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"}},n=()=>(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(N.page1Content.includes("A")||"A"===N.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:e.instruction,children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \uc81c\ubaa9\uc73c\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#08"})]}),(0,Se.jsx)("div",{style:e.passage,children:h.passage})]}),(N.page1Content.includes("B")||"B"===N.page1Content)&&(0,Se.jsx)("div",{className:"problem-options",style:e.options,children:h.options.map((t,n)=>(0,Se.jsxs)("div",{style:e.option,children:[(0,Se.jsxs)("div",{children:["\u2460\u2461\u2462\u2463\u2464"[n]||"".concat(n+1,".")," ",t,h.answerIndex===n&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]}),(0,Se.jsx)("div",{style:{fontSize:"0.8rem",marginTop:"0.2rem",marginLeft:"1rem",color:"#333",fontWeight:500},children:h.optionTranslations&&h.optionTranslations[n]&&""!==h.optionTranslations[n].trim()?h.optionTranslations[n]:"\ud574\uc11d \uc0dd\uc131 \uc911..."})]},n))}),(N.page1Content.includes("C")||"C"===N.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:(0,t.A)((0,t.A)({},e.instruction),{},{display:"block"}),children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:e.translation,children:h.translation||"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})]})})]}),r=()=>(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(N.page2Content.includes("B")||"B"===N.page2Content)&&(0,Se.jsx)("div",{className:"problem-options",style:e.options,children:h.options.map((t,n)=>(0,Se.jsxs)("div",{style:e.option,children:[(0,Se.jsxs)("div",{children:["\u2460\u2461\u2462\u2463\u2464"[n]||"".concat(n+1,".")," ",t,h.answerIndex===n&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]}),(0,Se.jsx)("div",{style:{fontSize:"0.8rem",marginTop:"0.2rem",marginLeft:"1rem",color:"#333",fontWeight:500},children:h.optionTranslations&&h.optionTranslations[n]&&""!==h.optionTranslations[n].trim()?h.optionTranslations[n]:"\ud574\uc11d \uc0dd\uc131 \uc911..."})]},n))}),(N.page2Content.includes("C")||"C"===N.page2Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:(0,t.A)((0,t.A)({},e.instruction),{},{display:"block"}),children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:e.translation,children:h.translation||"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})]})})]});return N.needsSecondPage?N.needsThirdPage?(0,Se.jsxs)(Se.Fragment,{children:[n(),r(),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsx)("div",{className:"quiz-content",children:(N.page3Content.includes("C")||"C"===N.page3Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:(0,t.A)((0,t.A)({},e.instruction),{},{display:"block"}),children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:e.translation,children:h.translation||"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})})})]})]}):(0,Se.jsxs)(Se.Fragment,{children:[n(),r()]}):n()};(0,r.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,r.useEffect)(()=>{h&&window.scrollTo(0,0)},[h]);const B=e=>{i(e),a(""),c(null),u(null),p(null),x(null)};async function U(e){const t=await(n=e,new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)}));var n;const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"\uc601\uc5b4\ubb38\uc81c\ub85c \uc0ac\uc6a9\ub418\ub294 \ubcf8\ubb38\uc774\uc57c.\n\uc774 \uc774\ubbf8\uc9c0\uc758 \ub0b4\uc6a9\uc744 \uc218\uc791\uc5c5\uc73c\ub85c \uc815\ud655\ud788 \uc77d\uace0, \uc601\uc5b4 \ubcf8\ubb38\ub9cc \ucd94\ub824\ub0b4\uc11c \ubcf4\uc5ec\uc918.\n\uae00\uc790\ub294 \uc778\uc1c4\uae00\uc528\uccb4 \uc774\uc678\uc5d0 \uc190\uae00\uc528\ub098 \uc6d0, \ubc11\uc904 \ub4f1 \ud45c\uc2dc\ub418\uc5b4\uc788\ub294 \uac83\uc740 \ubb34\uc2dc\ud574. \n\ubcf8\ubb38\uc911\uc5d0 \uc6d0\ubb38\uc790 1, 2, 3... \ub4f1\uc73c\ub85c \ud45c\uc2dc\ub41c\uac74 \uc81c\uac70\ud574\uc918. \n\uc6d0\ubb38\uc790 \uc81c\uac70\ud6c4 \uc904\uc744 \ubc14\uafb8\uac70\ub098 \ubb38\ub2e8\uc744 \ubc14\uafb8\uc9c0\ub9d0\uace0, \uc804\uccb4\uac00 \ud55c \ubb38\ub2e8\uc73c\ub85c \uad6c\uc131\ud574\uc918. \n\uc601\uc5b4 \ubcf8\ubb38\ub9cc, \uc544\ubb34\ub7f0 \uc124\uba85\uc774\ub098 \uc548\ub0b4\ubb38 \uc5c6\uc774, \ud55c \ubb38\ub2e8\uc73c\ub85c\ub9cc \ucd9c\ub825\ud574\uc918."},{type:"image_url",image_url:{url:t}}]}],max_tokens:2048})});return(await r.json()).choices[0].message.content.trim()}const W=async()=>{if(null===e||void 0===e||!e.uid)return;let t="";f(!0),p(null),x(null);let n=0;try{const r=F.find(e=>"8"===e.id);if(!r)throw new Error("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const i=await(0,vo.ev)(e.uid,"8",r.name,e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790");if(!i.success)throw new Error(i.error||"\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");if(n=i.deductedPoints,P(i.remainingPoints),"text"===s){if(!o.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=o.trim()}else if("image"===s&&l)t=await U(l);else{if("capture"!==s)throw new Error("\uc774\ubbf8\uc9c0\ub97c \ucca8\ubd80\ud574\uc8fc\uc138\uc694.");if(!o.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=o.trim()}if(!t.trim())throw new Error("\ucd94\ucd9c\ub41c \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const a=await async function(e){const t='\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc77d\uace0, \uae00\uc758 \uc8fc\uc81c\uc758\uc2dd\uc5d0 \uac00\uc7a5 \uc801\ud569\ud55c \uc81c\ubaa9(title) 1\uac1c\ub97c \uc120\uc815\ud574.\n\n\uc694\uad6c\uc0ac\ud56d:\n1. \uc815\ub2f5 \uc81c\ubaa9(\ubb38\uc7a5/\uad6c) + \uc624\ub2f5(\ube44\uc2b7\ud55c \uae38\uc774\uc758 \uc81c\ubaa9 4\uac1c, \uc758\ubbf8\ub294 \ub2e4\ub984) \ucd1d 5\uac1c\ub97c \uc0dd\uc131\n2. \uc815\ub2f5\uc758 \uc704\uce58\ub294 1~5\ubc88 \uc911 \ub79c\ub364\n3. \ubcf8\ubb38 \ud574\uc11d\ub3c4 \ud568\uaed8 \uc81c\uacf5\n4. \uac01 \uc635\uc158(1\ubc88~5\ubc88)\uc5d0 \ub300\ud55c \ud55c\uae00 \ud574\uc11d\uc744 \ubc18\ub4dc\uc2dc \uc81c\uacf5\n\n\uc544\ub798 JSON \ud615\uc2dd\uc73c\ub85c \uc815\ud655\ud788 \uc751\ub2f5\ud574\uc918:\n\n{\n  "passage": "\uc601\uc5b4 \ubcf8\ubb38 \ub0b4\uc6a9",\n  "options": ["\uccab\ubc88\uc9f8 \uc635\uc158 \uc81c\ubaa9", "\ub450\ubc88\uc9f8 \uc635\uc158 \uc81c\ubaa9", "\uc138\ubc88\uc9f8 \uc635\uc158 \uc81c\ubaa9", "\ub124\ubc88\uc9f8 \uc635\uc158 \uc81c\ubaa9", "\ub2e4\uc12f\ubc88\uc9f8 \uc635\uc158 \uc81c\ubaa9"],\n  "answerIndex": 2,\n  "translation": "\ubcf8\ubb38\uc758 \ud55c\uae00 \ud574\uc11d",\n  "answerTranslation": "\uc815\ub2f5 \uc81c\ubaa9\uc758 \ud55c\uae00 \ud574\uc11d",\n  "optionTranslations": ["\uccab\ubc88\uc9f8 \uc635\uc158\uc758 \ud55c\uae00 \ud574\uc11d", "\ub450\ubc88\uc9f8 \uc635\uc158\uc758 \ud55c\uae00 \ud574\uc11d", "\uc138\ubc88\uc9f8 \uc635\uc158\uc758 \ud55c\uae00 \ud574\uc11d", "\ub124\ubc88\uc9f8 \uc635\uc158\uc758 \ud55c\uae00 \ud574\uc11d", "\ub2e4\uc12f\ubc88\uc9f8 \uc635\uc158\uc758 \ud55c\uae00 \ud574\uc11d"]\n}\n\n\ubcf8\ubb38:\n'.concat(e,"\n\n\uc911\uc694: optionTranslations \ubc30\uc5f4\uc5d0\ub294 \ubc18\ub4dc\uc2dc 5\uac1c\uc758 \ud55c\uae00 \ud574\uc11d\uc774 \uc21c\uc11c\ub300\ub85c \ub4e4\uc5b4\uac00\uc57c \ud569\ub2c8\ub2e4. \uac01 \uc635\uc158\uc758 \uc81c\ubaa9\uc744 \ud55c\uad6d\uc5b4\ub85c \uc790\uc5f0\uc2a4\ub7fd\uac8c \ubc88\uc5ed\ud574\uc8fc\uc138\uc694."),n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:t}],max_tokens:2e3,temperature:.7})}),r=(await n.json()).choices[0].message.content.match(/\{[\s\S]*\}/);if(!r)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let s;try{s=JSON.parse(r[0])}catch(i){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!s.passage||!s.options||"number"!==typeof s.answerIndex||!s.translation)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");if("answerTranslation"in s&&null!=s.answerTranslation||(s.answerTranslation=""),"optionTranslations"in s&&Array.isArray(s.optionTranslations)||(s.optionTranslations=[]),s.optionTranslations.length!==s.options.length){const e=s.options.length-s.optionTranslations.length;for(let t=0;t<e;t++)s.optionTranslations.push("\ud574\uc11d \uc0dd\uc131 \uc911 \uc624\ub958 \ubc1c\uc0dd")}return s}(t);p(a)}catch(r){if(console.error("\uc81c\ubaa9 \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131 \uc624\ub958:",r),n>0&&null!==e&&void 0!==e&&e.uid)try{await(0,vo.Lw)(e.uid,n,"\uc81c\ubaa9 \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131",e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790","\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\ub85c \uc778\ud55c \ud3ec\uc778\ud2b8 \ud658\ubd88"),P(e=>e+n)}catch(i){console.error("\ud3ec\uc778\ud2b8 \ud658\ubd88 \uc624\ub958:",i)}alert(r.message||"\ubb38\uc81c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{y(!1)}},V=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),w("no-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),w("none")},1e3)},100)},q=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),w("with-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),w("none")},1e3)},100)},H=()=>{p(null),x(null),a(""),c(null),u(null),_(!1),f(!1),y(!1)};return h?(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("div",{className:"quiz-display no-print",children:[(0,Se.jsxs)("div",{className:"quiz-header",children:[(0,Se.jsx)("h2",{className:"no-print",children:"#08. \uc81c\ubaa9 \ucd94\ub860 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"quiz-header-buttons no-print",children:[(0,Se.jsx)("button",{onClick:H,className:"reset-button",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\uc0c8 \ubb38\uc81c \ub9cc\ub4e4\uae30"}),(0,Se.jsxs)("button",{onClick:V,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsx)("span",{children:"\uc778\uc1c4 (\ubb38\uc81c)"})]}),(0,Se.jsxs)("button",{onClick:q,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 6px rgba(240, 147, 251, 0.25)"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsxs)("span",{children:["\uc778\uc1c4 (",(0,Se.jsx)("span",{style:{color:"#FFD600"},children:"\uc815\ub2f5"}),")"]})]})]})]}),(0,Se.jsxs)("div",{className:"title-inference-section",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1.13rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"0.6rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \uc81c\ubaa9\uc73c\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#08"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{fontSize:"1.08rem",lineHeight:1.7,margin:"1.2rem 0",background:"#f7f8fc",borderRadius:"8px",padding:"1.2rem",fontFamily:"inherit"},children:h.passage}),(0,Se.jsx)("div",{className:"problem-options",style:{margin:"1.2rem 0"},children:h.options.map((e,t)=>(0,Se.jsxs)("label",{style:{display:"block",fontSize:"1.08rem",margin:"0.4rem 0",cursor:"pointer",fontWeight:v===t?700:400,color:v===t?"#6a5acd":"#222",fontFamily:"inherit"},children:[(0,Se.jsx)("input",{type:"radio",name:"title-quiz",checked:v===t,onChange:()=>x(t),style:{marginRight:"0.7rem"}}),"\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,null!==v&&h.answerIndex===t&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]},t))}),null!==v&&(0,Se.jsxs)("div",{className:"problem-answer no-print",style:{marginTop:"1.2rem",color:"#1976d2",fontWeight:700},children:["\uc815\ub2f5: ","\u2460\u2461\u2462\u2463\u2464"[h.answerIndex]||h.answerIndex+1," ",h.options[h.answerIndex],h.answerTranslation&&(0,Se.jsxs)("div",{style:{marginTop:"0.4em",color:"#388e3c",fontWeight:600},children:["\uc815\ub2f5 \ud574\uc11d: ",h.answerTranslation]})]})]})]}),"no-answer"===b&&(0,Se.jsx)("div",{className:"only-print",children:L()}),"with-answer"===b&&h&&(0,Se.jsx)("div",{className:"only-print print-answer-mode",children:M()})]}):(0,Se.jsxs)("div",{className:"quiz-generator",onPaste:async e=>{if("capture"!==s)return;const t=e.clipboardData.items;for(let r=0;r<t.length;r++)if(-1!==t[r].type.indexOf("image")){const s=t[r].getAsFile();if(s){c(s),u(URL.createObjectURL(s)),y(!0);try{const e=await U(s);a(e),setTimeout(()=>{j.current&&(j.current.style.height="auto",j.current.style.height=j.current.scrollHeight+"px")},0)}catch(n){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{y(!1)}}return void e.preventDefault()}e.preventDefault()},children:[(0,Se.jsxs)("div",{className:"generator-header",children:[(0,Se.jsx)("h2",{children:"[\uc720\ud615#08] \uc81c\ubaa9 \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131"}),(0,Se.jsx)("p",{children:"\uc601\uc5b4 \ubcf8\ubb38\uc758 \uc8fc\uc81c\uc758\uc2dd\uc5d0 \ub9de\ub294 \uc81c\ubaa9\uc744 AI\uac00 \ucd94\ub860\ud574 5\uc9c0\uc120\ub2e4 \uac1d\uad00\uc2dd \ubb38\uc81c\ub85c \ucd9c\uc81c\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"input-type-section",children:[(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"capture"===s,onChange:()=>B("capture")}),(0,Se.jsx)("span",{children:"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30"}),(0,Se.jsx)("button",{type:"button",className:"screenshot-help-btn",onClick:e=>{e.preventDefault(),C(!0)},title:"\ud654\uba74 \ucea1\ucc98 \ubc29\ubc95 \ubcf4\uae30",children:"?"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"image"===s,onChange:()=>B("image")}),(0,Se.jsx)("span",{children:"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \ud30c\uc77c \ucca8\ubd80"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"text"===s,onChange:()=>B("text")}),(0,Se.jsx)("span",{children:"\u270d\ufe0f \uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30"})]})]}),"capture"===s&&(0,Se.jsxs)("div",{className:"input-guide".concat(S?" paste-focused":""),tabIndex:0,onClick:()=>_(!0),onFocus:()=>_(!0),onBlur:()=>_(!1),children:[(0,Se.jsx)("div",{className:"drop-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("div",{className:"drop-text",children:"\uc5ec\uae30\uc5d0 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc73c\uc138\uc694"}),(0,Se.jsxs)("div",{className:"drop-desc",children:["\ud074\ub9ad \ub610\ub294 Tab \ud6c4 ",(0,Se.jsx)("b",{children:"Ctrl+V"}),"\ub85c \ucea1\ucc98 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),d&&(0,Se.jsx)("div",{className:"preview-row",children:(0,Se.jsx)("img",{src:d,alt:"\ucea1\ucc98 \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"})}),(m||g)&&(0,Se.jsx)("div",{style:{color:"#6a5acd",fontWeight:600,marginTop:"0.7rem"},children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),"image"===s&&(0,Se.jsx)("div",{className:"input-guide",children:(0,Se.jsxs)("div",{className:"file-upload-row",children:[(0,Se.jsxs)("label",{htmlFor:"title-inference-image",className:"file-upload-btn",children:["\ud30c\uc77c \uc120\ud0dd",(0,Se.jsx)("input",{id:"title-inference-image",type:"file",accept:"image/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){c(n),u(URL.createObjectURL(n)),y(!0);try{const e=await U(n);a(e),setTimeout(()=>{j.current&&(j.current.style.height="auto",j.current.style.height=j.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{y(!1)}}},style:{display:"none"}})]}),(0,Se.jsx)("span",{className:"file-upload-status",children:l?l.name:"\uc120\ud0dd\ub41c \ud30c\uc77c \uc5c6\uc74c"}),d&&(0,Se.jsx)("img",{src:d,alt:"\uc5c5\ub85c\ub4dc \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"}),(m||g)&&(0,Se.jsx)("div",{className:"loading-text",children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]})}),(0,Se.jsxs)("div",{className:"input-section",children:[(0,Se.jsxs)("div",{className:"input-label-row",children:[(0,Se.jsx)("label",{htmlFor:"title-inference-text",className:"input-label",children:"\uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30: (2,000\uc790 \ubbf8\ub9cc \uad8c\uc7a5)"}),o.length<100&&(0,Se.jsx)("span",{className:"warning",children:"\u26a0\ufe0f \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 \ub354 \uc88b\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("textarea",{id:"title-inference-text",ref:j,value:o,onChange:e=>{a(e.target.value),j.current&&(j.current.style.height="auto",j.current.style.height=j.current.scrollHeight+"px")},placeholder:"\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc9c1\uc811 \ubd99\uc5ec\ub123\uc5b4 \uc8fc\uc138\uc694. \ucd5c\uc18c 100\uc790 \uc774\uc0c1 \uad8c\uc7a5\ud569\ub2c8\ub2e4.",className:"text-input",rows:8,style:{overflow:"hidden",resize:"none"},disabled:"image"===s&&!o}),(0,Se.jsx)("div",{className:"text-info",children:(0,Se.jsxs)("span",{children:["\uae00\uc790 \uc218: ",o.length,"\uc790"]})})]}),(0,Se.jsx)("button",{onClick:async()=>{if(console.log("\ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778:",{userData:e,uid:null===e||void 0===e?void 0:e.uid,loading:n}),n)return void alert("\ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if(!e||!e.uid)return console.error("\ub85c\uadf8\uc778 \uc0c1\ud0dc \uc624\ub958:",{userData:e,loading:n}),void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.");const t=F.find(e=>"8"===e.id);if(!t)return void alert("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=t.points;O<r?alert("\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. \ud604\uc7ac ".concat(O.toLocaleString(),"P, \ud544\uc694 ").concat(r.toLocaleString(),"P")):(R(r),I(!0))},disabled:m||!o.trim(),className:"generate-button",children:"\uc81c\ubaa9 \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131\ud558\uae30"}),(m||g)&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("span",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:g?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":"\ud83d\udccb \ubb38\uc81c \uc0dd\uc131 \uc911..."})]})}),(0,Se.jsx)(yo,{isOpen:E,onClose:()=>I(!1),onConfirm:()=>{I(!1),W()},workTypeName:"\uc81c\ubaa9 \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131",pointsToDeduct:A,userCurrentPoints:O,remainingPoints:O-A}),(0,Se.jsx)(go,{isOpen:T,onClose:()=>C(!1)})]})};var el=n(950),tl=n.t(el,2);function nl(){return nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nl.apply(this,arguments)}function rl(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const sl=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch($c){}new Map;const il=s.startTransition;tl.flushSync,s.useId;function ol(e){let{basename:t,children:n,future:s,window:i}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:i,v5Compat:!0})&&(a={}),m(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return u("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:h(t)},null,a)));let l=o.current,[c,d]=r.useState({action:l.action,location:l.location}),{v7_startTransition:p}=s||{},f=r.useCallback(e=>{p&&il?il(()=>d(e)):d(e)},[d,p]);return r.useLayoutEffect(()=>l.listen(f),[l,f]),r.useEffect(()=>pe(s),[s]),r.createElement(ge,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:s})}const al="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ll=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cl=r.forwardRef(function(e,t){let n,{onClick:s,relative:i,reloadDocument:o,replace:a,state:c,target:d,to:u,preventScrollReset:p,viewTransition:m}=e,f=rl(e,sl),{basename:g}=r.useContext(K),y=!1;if("string"===typeof u&&ll.test(u)&&(n=u,al))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=A(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:y=!0}catch($c){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;G()||l(!1);let{basename:s,navigator:i}=r.useContext(K),{hash:o,pathname:a,search:c}=ee(e,{relative:n}),d=a;return"/"!==s&&(d="/"===a?s:D([s,a])),i.createHref({pathname:d,search:c,hash:o})}(u,{relative:i}),x=function(e,t){let{target:n,replace:s,state:i,preventScrollReset:o,relative:a,viewTransition:l}=void 0===t?{}:t,c=Z(),d=$(),u=ee(e,{relative:a});return r.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==s?s:h(d)===h(u);c(e,{replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:l})}},[d,c,u,s,i,n,e,o,a,l])}(u,{replace:a,state:c,target:d,preventScrollReset:p,relative:i,viewTransition:m});return r.createElement("a",nl({},f,{href:n||v,onClick:y||o?s:function(e){s&&s(e),e.defaultPrevented||x(e)},ref:t,target:d}))});var dl,ul;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(dl||(dl={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ul||(ul={}));const hl=e=>"admin"===(null===e||void 0===e?void 0:e.role),pl=[{label:"\ud83d\udce6 \ud328\ud0a4\uc9c0 \ud034\uc988 (01~14 \ud1b5\ud569)",path:"/package-quiz"},{label:"01. \ubb38\ub2e8 \uc21c\uc11c \ub9de\ucd94\uae30",path:"/work_01_article-order"},{label:"02. \uc720\uc0ac\ub2e8\uc5b4 \ub3c5\ud574",path:"/work_02_reading-comprehension"},{label:"03. \ube48\uce78(\ub2e8\uc5b4) \ucc3e\uae30",path:"/work_03_vocabulary-word"},{label:"04. \ube48\uce78(\uad6c) \ucc3e\uae30",path:"/work_04_blank-phrase-inference"},{label:"05. \ube48\uce78(\ubb38\uc7a5) \ucc3e\uae30",path:"/work_05_blank-sentence-inference"},{label:"06. \ubb38\uc7a5 \uc704\uce58 \ucc3e\uae30",path:"/work_06_sentence-position"},{label:"07. \uc8fc\uc81c \ucd94\ub860",path:"/work_07_main-idea-inference"},{label:"08. \uc81c\ubaa9 \ucd94\ub860",path:"/work_08_title-inference"},{label:"09. \uc5b4\ubc95 \uc624\ub958 \ucc3e\uae30",path:"/work_09_grammar-error"},{label:"10. \ub2e4\uc911 \uc5b4\ubc95 \uc624\ub958 \ucc3e\uae30",path:"/work_10_multi-grammar-error"},{label:"11. \ubcf8\ubb38 \ubb38\uc7a5\ubcc4 \ud574\uc11d",path:"/work_11_sentence-translation"},{label:"12. \ub2e8\uc5b4 \ud559\uc2b5",path:"/work_12_word-study"},{label:"13. \ube48\uce78 \ucc44\uc6b0\uae30 (\ub2e8\uc5b4-\uc8fc\uad00\uc2dd)",path:"/work_13_blank-fill-word"},{label:"14. \ube48\uce78 \ucc44\uc6b0\uae30 (\ubb38\uc7a5-\uc8fc\uad00\uc2dd)",path:"/work_14_blank-fill-sentence"}],ml=()=>{const{currentUser:e,userData:t,logout:n}=Te(),s=Z(),[i,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(!1),[c,d]=(r.useRef(null),(0,r.useState)(!1)),[u,h]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=()=>{m(window.innerWidth<=900)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);(0,r.useEffect)(()=>{if(!a)return;const e=e=>{const t=document.querySelector(".dropdown");t&&!t.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[a]);const f=async()=>{try{await n(),s("/")}catch(e){console.error("\ub85c\uadf8\uc544\uc6c3 \uc911 \uc624\ub958:",e)}},g=t=>{if(!e)return h(!0),l(!1),void d(!1);s(t),l(!1),d(!1)};return(0,Se.jsxs)("nav",{className:"navigation",children:[(0,Se.jsxs)(cl,{to:"/",className:"logo",children:[(0,Se.jsx)("img",{src:"/logo.png",alt:"Edge English Lab",className:"logo-image"}),(0,Se.jsx)("div",{className:"logo-text",children:(0,Se.jsxs)("h1",{children:["Edge English Lab",(0,Se.jsx)("span",{className:"tagline",children:"AI \uc601\uc5b4 \ubb38\uc81c \uc0dd\uc131 \ud50c\ub7ab\ud3fc"})]})})]}),p&&(0,Se.jsxs)("div",{className:"hamburger-menu",children:[(0,Se.jsx)("button",{className:"hamburger-btn",onClick:()=>d(e=>!e),children:"\u2630"}),c&&(0,Se.jsxs)("div",{className:"mobile-menu-content",children:[(0,Se.jsx)("button",{className:"mobile-menu-close",onClick:()=>d(!1),children:"\xd7"}),(0,Se.jsx)("button",{className:"mobile-menu-item mobile-single-item",onClick:()=>{d(!1)},children:"\ubb38\uc81c\uc0dd\uc131"}),pl.map(e=>(0,Se.jsx)("button",{className:"mobile-menu-item mobile-sub-item",onClick:()=>g(e.path),children:e.label},e.path)),(0,Se.jsx)("button",{className:"mobile-menu-item mobile-single-item",onClick:()=>{d(!1),s("/feedback")},children:"Feedback"}),e&&(0,Se.jsx)("button",{className:"mobile-menu-item mobile-single-item",onClick:()=>{d(!1),s("/profile")},children:"\ub0b4 \uc815\ubcf4"}),e&&hl(t)&&(0,Se.jsx)("button",{className:"mobile-menu-item mobile-single-item",onClick:()=>{d(!1),s("/admin")},children:"\uad00\ub9ac\uc790"}),e&&(0,Se.jsx)("button",{className:"mobile-menu-item mobile-single-item",onClick:()=>{d(!1),f()},children:"\ub85c\uadf8\uc544\uc6c3"}),!e&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("button",{className:"mobile-menu-item mobile-single-item",onClick:()=>{d(!1),s("/login")},children:"\ub85c\uadf8\uc778"}),(0,Se.jsx)("button",{className:"mobile-menu-item mobile-single-item",onClick:()=>{d(!1),s("/signup")},children:"\ud68c\uc6d0\uac00\uc785"})]})]})]}),(0,Se.jsxs)("div",{className:"nav-links",children:[!p&&(0,Se.jsxs)("div",{className:"dropdown",children:[(0,Se.jsx)("button",{className:"dropdown-btn",onClick:e=>{e.preventDefault(),l(e=>!e)},onMouseDown:e=>e.preventDefault(),"aria-expanded":a,"aria-haspopup":"true",children:"\ubb38\uc81c\uc0dd\uc131 \u25bc"}),a&&(0,Se.jsx)("div",{className:"dropdown-content",children:pl.map(e=>(0,Se.jsx)("button",{className:"dropdown-item",onClick:()=>g(e.path),children:e.label},e.path))})]}),!p&&(0,Se.jsx)(cl,{to:"/feedback",className:"nav-text-link feedback-link",children:"Feedback"}),e&&!p&&(0,Se.jsx)("button",{className:"nav-text-link profile-link",onClick:()=>{s("/profile")},children:"\ub0b4\uc815\ubcf4"}),e&&hl(t)&&!p&&(0,Se.jsx)(cl,{to:"/admin",className:"nav-text-link admin-link",children:"\uad00\ub9ac\uc790"}),e?(0,Se.jsx)(Se.Fragment,{children:!p&&(0,Se.jsx)("button",{onClick:f,className:"nav-text-link auth-link",children:"\ub85c\uadf8\uc544\uc6c3"})}):(0,Se.jsx)(Se.Fragment,{children:!p&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(cl,{to:"/signup",className:"nav-text-link auth-link",children:"\ud68c\uc6d0\uac00\uc785"}),(0,Se.jsx)(cl,{to:"/login",className:"nav-text-link auth-link",children:"\ub85c\uadf8\uc778"})]})})]}),(0,Se.jsx)(be(),{isOpen:u,onRequestClose:()=>h(!1),className:"auth-modal",overlayClassName:"auth-modal-overlay",ariaHideApp:!1,children:(0,Se.jsxs)("div",{style:{padding:"2rem",textAlign:"center"},children:[(0,Se.jsx)("h2",{children:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4"}),(0,Se.jsx)("p",{children:"\uc774 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\ub824\uba74 \ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."}),(0,Se.jsx)("button",{onClick:()=>{h(!1),s("/login")},className:"modal-login-btn",children:"\ub85c\uadf8\uc778 \ud558\ub7ec \uac00\uae30"})]})})]})},fl=()=>{const{userData:e,loading:t}=Te(),[n,s]=(0,r.useState)("text"),[i,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[x,b]=(0,r.useState)("none"),[w,j]=(0,r.useState)(!1),N=(0,r.useRef)(null),[k,S]=(0,r.useState)(!1),[_,T]=(0,r.useState)(!1),[C,E]=(0,r.useState)({needsSecondPage:!1,needsThirdPage:!1,page1Content:"",page2Content:"",page3Content:""}),I=754,A=1048,R=30,O=11,P=30,F=11;function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:38,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.7;const s=I-40,i=.55*n,o=Math.floor(s/i);return Math.ceil(e.length/o)*n*r+t}const[z,L]=(0,r.useState)(!1),[M,B]=(0,r.useState)(0),[U,W]=(0,r.useState)(0),[V,q]=(0,r.useState)([]);(0,r.useEffect)(()=>{t||(async()=>{try{var n;const r=await(0,vo.getWorkTypePoints)();q(r);const s=(null===(n=r.find(e=>"9"===e.id))||void 0===n?void 0:n.points)||0;if(B(s),!t&&e&&e.uid){const t=await(0,vo.MC)(e.uid);W(t)}}catch(r){console.error("\ud3ec\uc778\ud2b8 \ucd08\uae30\ud654 \uc624\ub958:",r)}})()},[null===e||void 0===e?void 0:e.uid,t]),(0,r.useEffect)(()=>{if(!u)return;const e=A,t=e-50,n=R+O+D(u.passage,16,16,1.7);let r=0;u.options.forEach(e=>{r+=D("".concat(e),11,16,1.3)});const s=r,i=P+F+D(u.translation,32,12.8,1.7),o=n+s+i;console.log("\ud83d\udccf \uc720\ud615#09 \ub3d9\uc801 \ud398\uc774\uc9c0 \ubd84\ud560 \uacc4\uc0b0:",{availableHeight:e.toFixed(2)+"px",sectionAHeight:n.toFixed(2)+"px",sectionBHeight:s.toFixed(2)+"px",sectionCHeight:i.toFixed(2)+"px",totalHeight:o.toFixed(2)+"px",effectiveAvailableHeight:t.toFixed(2)+"px",passageLength:u.passage.length,translationLength:u.translation.length}),console.log("\ud83d\udd0d \uc2e4\uc81c A4 \ud06c\uae30 \uae30\uc900 \uacc4\uc0b0:",{A4_SIZE:"210mm \xd7 297mm = 794px \xd7 1123px (96 DPI)",CONTENT_AREA:I+"px \xd7 "+A+"px",availableHeight:e+"px",safetyMargin:"50px",effectiveAvailableHeight:t+"px"}),o<=t?(E({needsSecondPage:!1,needsThirdPage:!1,page1Content:"A+B+C",page2Content:"",page3Content:""}),j(!1)):n+s<=t?(E(i<=t?{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A+B",page2Content:"C",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!0,page1Content:"A+B",page2Content:"C-part1",page3Content:"C-part2"}),j(!0)):n<=t?(E(s+i<=t?{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A",page2Content:"B+C",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!0,page1Content:"A",page2Content:"B",page3Content:"C"}),j(!0)):(E({needsSecondPage:!0,needsThirdPage:!0,page1Content:"A",page2Content:"B",page3Content:"C"}),j(!0))},[u]),(0,r.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,r.useEffect)(()=>{u&&window.scrollTo(0,0)},[u]);const H=e=>{s(e),o(""),l(null),d(null),h(null),v(null)};async function K(e){const t=await(n=e,new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)}));var n;const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"\uc601\uc5b4\ubb38\uc81c\ub85c \uc0ac\uc6a9\ub418\ub294 \ubcf8\ubb38\uc774\uc57c.\n\uc774 \uc774\ubbf8\uc9c0\uc758 \ub0b4\uc6a9\uc744 \uc218\uc791\uc5c5\uc73c\ub85c \uc815\ud655\ud788 \uc77d\uace0, \uc601\uc5b4 \ubcf8\ubb38\ub9cc \ucd94\ub824\ub0b4\uc11c \ubcf4\uc5ec\uc918.\n\uae00\uc790\ub294 \uc778\uc1c4\uae00\uc528\uccb4 \uc774\uc678\uc5d0 \uc190\uae00\uc528\ub098 \uc6d0, \ubc11\uc904 \ub4f1 \ud45c\uc2dc\ub418\uc5b4\uc788\ub294 \uac83\uc740 \ubb34\uc2dc\ud574. \n\ubcf8\ubb38\uc911\uc5d0 \uc6d0\ubb38\uc790 1, 2, 3... \ub4f1\uc73c\ub85c \ud45c\uc2dc\ub41c\uac74 \uc81c\uac70\ud574\uc918. \n\uc6d0\ubb38\uc790 \uc81c\uac70\ud6c4 \uc904\uc744 \ubc14\uafb8\uac70\ub098 \ubb38\ub2e8\uc744 \ubc14\uafb8\uc9c0\ub9d0\uace0, \uc804\uccb4\uac00 \ud55c \ubb38\ub2e8\uc73c\ub85c \uad6c\uc131\ud574\uc918. \n\uc601\uc5b4 \ubcf8\ubb38\ub9cc, \uc544\ubb34\ub7f0 \uc124\uba85\uc774\ub098 \uc548\ub0b4\ubb38 \uc5c6\uc774, \ud55c \ubb38\ub2e8\uc73c\ub85c\ub9cc \ucd9c\ub825\ud574\uc918."},{type:"image_url",image_url:{url:t}}]}],max_tokens:2048})});return(await r.json()).choices[0].message.content.trim()}function J(e){return e.replace(/\*\*(.+?)\*\*/g,"<u>$1</u>").replace(/__(.+?)__/g,"<u>$1</u>").replace(/_(.+?)_/g,"<u>$1</u>")}async function Y(e){try{const t=await async function(e){const t='\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uc5b4\ubc95(\ubb38\ubc95) \ubcc0\ud615\uc774 \uac00\ub2a5\ud55c \uc11c\ub85c \ub2e4\ub978 "\ub2e8\uc5b4" 5\uac1c\ub9cc \uc120\uc815\ud558\uc138\uc694.\n\n\uc911\uc694\ud55c \uaddc\uce59:\n- \ubc18\ub4dc\uc2dc "\ub2e8\uc5b4"\ub9cc \uc120\uc815\ud558\uc138\uc694. \uc5ec\ub7ec \ub2e8\uc5b4\ub85c \uc774\ub8e8\uc5b4\uc9c4 \uad6c(phrase)\ub294 \uc808\ub300 \uc120\uc815\ud558\uc9c0 \ub9c8\uc138\uc694.\n- \ub3d9\uc77c\ud55c \ub2e8\uc5b4\ub97c \ub450 \ubc88 \uc774\uc0c1 \uc120\ud0dd\ud558\uc9c0 \ub9c8\uc138\uc694.\n- \ubc18\ub4dc\uc2dc \uac01\uae30 \ub2e4\ub978 \ubb38\uc7a5\uc5d0\uc11c 1\uac1c\uc529\ub9cc \ub2e8\uc5b4\ub97c \uc120\uc815\ud558\uc138\uc694. (\uc989, \ud55c \ubb38\uc7a5\uc5d0 2\uac1c \uc774\uc0c1\uc758 \ub2e8\uc5b4\ub97c \uc120\ud0dd\ud558\uc9c0 \ub9c8\uc138\uc694.)\n- \uc5b4\ubc95(\ubb38\ubc95) \ubcc0\ud615\uc774 \uac00\ub2a5\ud55c \ub2e8\uc5b4\ub9cc \uc120\uc815\ud558\uc138\uc694 (\ub3d9\uc0ac, \uba85\uc0ac, \ud615\uc6a9\uc0ac, \ubd80\uc0ac \ub4f1).\n\n\uacb0\uacfc\ub294 \uc544\ub798 JSON \ubc30\uc5f4 \ud615\uc2dd\uc73c\ub85c\ub9cc \ubc18\ud658\ud558\uc138\uc694:\n["\ub2e8\uc5b41", "\ub2e8\uc5b42", "\ub2e8\uc5b43", "\ub2e8\uc5b44", "\ub2e8\uc5b45"]\n\n\ubcf8\ubb38:\n'.concat(e),n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"system",content:"You are a helpful assistant that only returns valid JSON arrays."},{role:"user",content:t}],temperature:.3,max_tokens:1e3})}),r=(await n.json()).choices[0].message.content.trim();let s=r;(r.includes("```Json")||r.includes("```json"))&&(s=r.replace(/```(?:Json|json)?\s*\n?/g,"").replace(/```\s*$/g,"").trim());try{const e=JSON.parse(s);if(!Array.isArray(e)||5!==e.length)throw new Error("Invalid word selection format");return e}catch(i){throw console.error("\ub2e8\uc5b4 \uc120\uc815 \uc2e4\ud328:",i),new Error("\ub2e8\uc5b4 \uc120\uc815\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}}(e),n=await async function(e){const t=["\uc2dc\uc81c","\uc870\ub3d9\uc0ac","\uc218\ub3d9\ud0dc","\uc900\ub3d9\uc0ac","\uac00\uc815\ubc95","\uad00\uacc4\uc0ac","\ud615/\ubd80","\uc218\uc77c\uce58/\uad00\uc0ac","\ube44\uad50","\ub3c4\uce58/\uac15\uc870"];for(let r=1;r<=3;r++){console.log("\uc5b4\ubc95 \ubcc0\ud615 \uc2dc\ub3c4 ".concat(r,"/").concat(3,"..."));const s="You must transform exactly ONE word from the list to create a grammar error for an English quiz.\n\nOriginal words: ".concat(JSON.stringify(e),"\nGrammar types: ").concat(t.join(", "),'\n\nCRITICAL REQUIREMENTS:\n1. Choose exactly ONE word randomly from the 5 words\n2. Transform that word incorrectly according to one grammar rule\n3. Keep the other 4 words exactly the same\n4. The transformed word must be grammatically WRONG\n\nExamples of transformations:\n- "individual" \u2192 "individuals" (wrong number)\n- "violent" \u2192 "violently" (wrong part of speech)\n- "depends" \u2192 "depend" (wrong subject-verb agreement)\n- "beautiful" \u2192 "beautifully" (adjective to adverb incorrectly)\n- "have" \u2192 "has" (wrong verb form)\n\nReturn ONLY this JSON format:\n{\n  "transformedWords": ["word1", "WRONG_WORD", "word3", "word4", "word5"],\n  "answerIndex": 1,\n  "original": "CORRECT_WORD",\n  "grammarType": "SELECTED_GRAMMAR_TYPE"\n}\n\nMake sure the transformed word is actually DIFFERENT and WRONG compared to the original!');try{const t=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"system",content:"You are a helpful assistant that only returns valid JSON objects."},{role:"user",content:s}],temperature:.7,max_tokens:1e3})}),n=(await t.json()).choices[0].message.content.trim();let i=n;(n.includes("```Json")||n.includes("```json"))&&(i=n.replace(/```(?:Json|json)?\s*\n?/g,"").replace(/```\s*$/g,"").trim());const o=JSON.parse(i);if(!Array.isArray(o.transformedWords)||5!==o.transformedWords.length||"number"!==typeof o.answerIndex||o.answerIndex<0||o.answerIndex>4||!o.original||!o.grammarType)throw new Error("Invalid transformation format");const a=e[o.answerIndex],l=o.transformedWords[o.answerIndex];if(a===l){if(console.error("\uc2dc\ub3c4 ".concat(r,": \ub2e8\uc5b4 \ubcc0\ud615 \uc2e4\ud328 - \ub3d9\uc77c\ud55c \ub2e8\uc5b4"),{originalWord:a,transformedWord:l,answerIndex:o.answerIndex}),3===r)throw new Error('\ub2e8\uc5b4\uac00 \uc2e4\uc81c\ub85c \ubcc0\ud615\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4: "'.concat(a,'" \u2192 "').concat(l,'"'));continue}if(o.original!==a){if(console.error("\uc2dc\ub3c4 ".concat(r,": \uc6d0\ubcf8 \ub2e8\uc5b4 \ubd88\uc77c\uce58"),{expected:a,received:o.original}),3===r)throw new Error('\uc6d0\ubcf8 \ub2e8\uc5b4\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4: \uc608\uc0c1 "'.concat(a,'", \uc2e4\uc81c "').concat(o.original,'"'));continue}return console.log("\uc2dc\ub3c4 ".concat(r,": \uc5b4\ubc95 \ubcc0\ud615 \uac80\uc99d \ud1b5\uacfc!"),{originalWord:a,transformedWord:l,answerIndex:o.answerIndex,grammarType:o.grammarType}),o}catch(n){if(console.error("\uc2dc\ub3c4 ".concat(r," \uc2e4\ud328:"),n),3===r)throw new Error("\uc5b4\ubc95 \ubcc0\ud615\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}}throw new Error("\ubaa8\ub4e0 \uc7ac\uc2dc\ub3c4\uac00 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}(t),r=function(e,t,n){let r=e;const s=[];t.forEach((e,t)=>{const i=n[t],o=new RegExp("\\b".concat(e,"\\b")),a=r.match(o);a&&void 0!==a.index&&s.push({word:e,transformedWord:i,index:t,position:a.index})}),s.sort((e,t)=>e.position-t.position),console.log("\ub2e8\uc5b4 \ub4f1\uc7a5 \uc21c\uc11c:",s.map((e,t)=>"".concat(t+1,'. "').concat(e.word,'" \u2192 "').concat(e.transformedWord,'" (\uc704\uce58: ').concat(e.position,")")));const i=new Set;s.reverse().forEach((e,t)=>{const n=s.length-1-t,o="\u2460\u2461\u2462\u2463\u2464"[n];if(i.has(e.word))return;const a=new RegExp("\\b".concat(e.word,"\\b"));a.test(r)&&(r=r.replace(a,"".concat(o,"<u>").concat(e.transformedWord,"</u>")),i.add(e.word),console.log('\ub2e8\uc5b4 \uad50\uccb4: "'.concat(e.word,'" \u2192 "').concat(e.transformedWord,'" (\ubc88\ud638: ').concat(n+1,")")))}),console.log("=== \ubc88\ud638 \ub9e4\ud551 \uac80\uc99d ==="),console.log("\ub2e8\uc5b4 \ub4f1\uc7a5 \uc21c\uc11c:",s.map((e,t)=>({"\uc21c\uc11c":t+1,"\ubc88\ud638":"\u2460\u2461\u2462\u2463\u2464"[t],"\uc6d0\ubcf8\ub2e8\uc5b4":e.word,"\ubcc0\ud615\ub2e8\uc5b4":e.transformedWord,"\uc6d0\ubcf8\uc778\ub371\uc2a4":e.index})));const o=(r.match(/[\u2460\u2461\u2462\u2463\u2464]/g)||[]).length,a=(r.match(/<u>.*?<\/u>/g)||[]).length;if(console.log("\ubc88\ud638/\ubc11\uc904 \uc801\uc6a9 \uacb0\uacfc: \ubc88\ud638 ".concat(o,"\uac1c, \ubc11\uc904 ").concat(a,"\uac1c")),5!==o||5!==a)throw new Error("\ubc88\ud638/\ubc11\uc904 \uc801\uc6a9 \uc2e4\ud328: \ubc88\ud638 ".concat(o,"\uac1c, \ubc11\uc904 ").concat(a,"\uac1c \uc801\uc6a9\ub428"));return r}(e,t,n.transformedWords),s=await async function(e){const t="\ub2e4\uc74c \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\ub85c \ubc88\uc5ed\ud558\uc138\uc694.\n\n\ubc88\uc5ed \uc694\uad6c\uc0ac\ud56d:\n- \uc790\uc5f0\uc2a4\ub7fd\uace0 \ub9e4\ub044\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\n- \uc6d0\ubb38\uc758 \uc758\ubbf8\ub97c \uc815\ud655\ud788 \uc804\ub2ec\n- \ubb38\ud559\uc801\uc774\uace0 \uc77d\uae30 \uc26c\uc6b4 \ubb38\uccb4\n\n\ubc88\uc5ed\ub9cc \ubc18\ud658\ud558\uc138\uc694 (\ub2e4\ub978 \ud14d\uc2a4\ud2b8 \uc5c6\uc774):\n\n".concat(e),n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a helpful assistant that provides natural Korean translations."},{role:"user",content:t}],temperature:.3,max_tokens:2e3})});return(await n.json()).choices[0].message.content.trim()}(e),i=n.transformedWords;console.log("\ud83c\udfaf \ucd5c\uc885 \uacb0\uacfc \uc870\ud569:"),console.log("\uc6d0\ubcf8 \ub2e8\uc5b4\ub4e4:",t),console.log("\ubcc0\ud615\ub41c \ub2e8\uc5b4\ub4e4:",n.transformedWords),console.log("\uac1d\uad00\uc2dd \uc635\uc158 (\uc21c\uc11c \uadf8\ub300\ub85c):",i),console.log("\uc6d0\ubcf8 \uc815\ub2f5 \uc778\ub371\uc2a4:",n.answerIndex),console.log("\uc815\ub2f5 \uc778\ub371\uc2a4 (\ubcc0\uacbd \uc5c6\uc74c):",n.answerIndex);const o={passage:r,options:i,answerIndex:n.answerIndex,original:n.original,translation:s};return console.log("\u2705 Work_09 \ubb38\uc81c \uc0dd\uc131 \uc644\ub8cc:",o),o}catch(t){throw new Error("\ubb38\uc81c \uc0dd\uc131\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(t instanceof Error?t.message:"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958"))}}const Q=async()=>{if(null===e||void 0===e||!e.uid)return;let t="";m(!0),h(null),v(null);let r=0;try{const s=V.find(e=>"9"===e.id);if(!s)throw new Error("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const o=await(0,vo.ev)(e.uid,"9",s.name,e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790");if(!o.success)throw new Error(o.error||"\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");if(r=o.deductedPoints,W(o.remainingPoints),"text"===n){if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}else if("image"===n&&a)t=await K(a);else{if("capture"!==n)throw new Error("\uc774\ubbf8\uc9c0\ub97c \ucca8\ubd80\ud574\uc8fc\uc138\uc694.");if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}if(!t.trim())throw new Error("\ucd94\ucd9c\ub41c \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const l=await Y(t);h(l)}catch(s){if(console.error("\ubb38\ubc95 \uc624\ub958 \ubb38\uc81c \uc0dd\uc131 \uc624\ub958:",s),r>0&&null!==e&&void 0!==e&&e.uid)try{await(0,vo.Lw)(e.uid,r,"\ubb38\ubc95 \uc624\ub958 \ubb38\uc81c \uc0dd\uc131",e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790","\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\ub85c \uc778\ud55c \ud3ec\uc778\ud2b8 \ud658\ubd88"),W(e=>e+r)}catch(o){console.error("\ud3ec\uc778\ud2b8 \ud658\ubd88 \uc624\ub958:",o)}alert(s.message||"\ubb38\uc81c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}},G=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),b("no-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),b("none")},1e3)},100)},$=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),b("with-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),b("none")},1e3)},100)},X=()=>{h(null),v(null),o(""),l(null),d(null),S(!1),m(!1),g(!1),E({needsSecondPage:!1,needsThirdPage:!1,page1Content:"",page2Content:"",page3Content:""})};if(u){const e=["\u2460","\u2461","\u2462","\u2463","\u2464"][u.answerIndex];return console.log("=== \uc815\ub2f5 \ud45c\uc2dc \uac80\uc99d ==="),console.log("\ud034\uc988 \ub370\uc774\ud130:",u),console.log("\uc815\ub2f5 \uc778\ub371\uc2a4:",u.answerIndex),console.log("\uc815\ub2f5 \ubc88\ud638:",e),console.log("\uc815\ub2f5 \ub2e8\uc5b4:",u.options[u.answerIndex]),console.log("\uc6d0\ub798 \ub2e8\uc5b4:",u.original),console.log("\uc120\ud0dd\uc9c0 \ubc30\uc5f4:",u.options),(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("div",{className:"quiz-display no-print",children:[(0,Se.jsxs)("div",{className:"quiz-header",children:[(0,Se.jsx)("h2",{className:"no-print",children:"#09. \uc5b4\ubc95 \ubcc0\ud615 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"quiz-header-buttons no-print",children:[(0,Se.jsx)("button",{onClick:X,className:"reset-button",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\uc0c8 \ubb38\uc81c \ub9cc\ub4e4\uae30"}),(0,Se.jsxs)("button",{onClick:G,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsx)("span",{children:"\uc778\uc1c4 (\ubb38\uc81c)"})]}),(0,Se.jsxs)("button",{onClick:$,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 6px rgba(240, 147, 251, 0.25)"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsxs)("span",{children:["\uc778\uc1c4 (",(0,Se.jsx)("span",{style:{color:"#FFD600"},children:"\uc815\ub2f5"}),")"]})]})]})]}),(0,Se.jsxs)("div",{className:"grammar-error-section",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1.13rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"0.6rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc740?"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#09"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{fontSize:"1.08rem",lineHeight:1.7,margin:"1.2rem 0",background:"#f7f8fc",borderRadius:"8px",padding:"1.2rem",fontFamily:"inherit"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:J(u.passage).replace(/\n/g,"<br/>")}})}),(0,Se.jsxs)("div",{className:"problem-answer no-print",style:{marginTop:"1.2rem",color:"#1976d2",fontWeight:700},children:["\uc815\ub2f5: ",e," ",u.options[u.answerIndex],(0,Se.jsxs)("div",{style:{marginTop:"0.7rem",color:"#1976d2",fontWeight:400,fontSize:"1rem"},children:["\uc815\ub2f5\uc758 \uc6d0\ub798(\uc815\uc0c1) \ub2e8\uc5b4/\uad6c: ",u.original]}),(0,Se.jsxs)("div",{className:"translation-section",style:{marginTop:"1.2rem"},children:[(0,Se.jsx)("h3",{style:{fontSize:"1.05rem",color:"#222",marginBottom:"0.5rem"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{style:{background:"#f1f8e9",padding:"1rem",borderRadius:"8px",border:"1.5px solid #c8e6c9",fontSize:"0.98rem",lineHeight:"1.6"},children:u.translation})]})]})]})]}),"no-answer"===x&&(0,Se.jsx)("div",{className:"only-print",children:w?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc740?"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#09"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:J(u.passage).replace(/\n/g,"<br/>")}})})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ub2e4\uc74c \uc911\uc5d0\uc11c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("div",{className:"problem-options",style:{margin:"1rem 0"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e]},t))})]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc740?"}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:J(u.passage).replace(/\n/g,"<br/>")}})}),(0,Se.jsx)("div",{className:"problem-options",style:{margin:"1rem 0"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e]},t))})]})})]})}),"with-answer"===x&&u&&(0,Se.jsxs)("div",{className:"only-print print-answer-mode",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(C.page1Content.includes("A")||"A"===C.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc740?"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#09"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.1rem",fontSize:"1rem !important",padding:"0.5rem 1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:J(u.passage).replace(/\n/g,"<br/>")}})})]}),(C.page1Content.includes("B")||"B"===C.page1Content)&&(0,Se.jsx)("div",{className:"problem-options",style:{margin:"0.2rem 0"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,u.answerIndex===t&&(0,Se.jsxs)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:["\uc815\ub2f5: \u2462 ",e," / \uc6d0\ub798(\uc815\uc0c1) \ub2e8\uc5b4/\uad6c: ",u.original]})]},t))}),(C.page1Content.includes("C")||"C"===C.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.2rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{fontSize:"0.8rem !important",lineHeight:1.7,margin:"0.1rem 0",background:"#f1f8e9",borderRadius:"8px",padding:"2rem 1rem",fontFamily:"inherit",color:"#222"},children:u.translation||"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})]})})]}),C.needsSecondPage&&(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(C.page2Content.includes("A")||"A"===C.page2Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc740?"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#09"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.1rem",fontSize:"1rem !important",padding:"0.5rem 1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:J(u.passage).replace(/\n/g,"<br/>")}})})]}),(C.page2Content.includes("B")||"B"===C.page2Content)&&(0,Se.jsx)("div",{className:"problem-options",style:{margin:"0.2rem 0"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,u.answerIndex===t&&(0,Se.jsxs)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:["\uc815\ub2f5: \u2462 ",e," / \uc6d0\ub798(\uc815\uc0c1) \ub2e8\uc5b4/\uad6c: ",u.original]})]},t))}),(C.page2Content.includes("C")||"C"===C.page2Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.2rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{fontSize:"0.8rem !important",lineHeight:1.7,margin:"0.1rem 0",background:"#f1f8e9",borderRadius:"8px",padding:"2rem 1rem",fontFamily:"inherit",color:"#222"},children:u.translation||"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})]})})]}),C.needsThirdPage&&(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(C.page3Content.includes("A")||"A"===C.page3Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc740?"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#09"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.1rem",fontSize:"1rem !important",padding:"0.5rem 1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:J(u.passage).replace(/\n/g,"<br/>")}})})]}),(C.page3Content.includes("B")||"B"===C.page3Content)&&(0,Se.jsx)("div",{className:"problem-options",style:{margin:"0.2rem 0"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,u.answerIndex===t&&(0,Se.jsxs)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:["\uc815\ub2f5: \u2462 ",e," / \uc6d0\ub798(\uc815\uc0c1) \ub2e8\uc5b4/\uad6c: ",u.original]})]},t))}),(C.page3Content.includes("C")||"C"===C.page3Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.2rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{fontSize:"0.8rem !important",lineHeight:1.7,margin:"0.1rem 0",background:"#f1f8e9",borderRadius:"8px",padding:"2rem 1rem",fontFamily:"inherit",color:"#222"},children:u.translation||"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})]})})]})]})]})}return(0,Se.jsxs)("div",{className:"quiz-generator",onPaste:async e=>{if("capture"!==n)return;const t=e.clipboardData.items;for(let n=0;n<t.length;n++)if(-1!==t[n].type.indexOf("image")){const s=t[n].getAsFile();if(s){l(s),d(URL.createObjectURL(s)),g(!0);try{const e=await K(s);o(e),setTimeout(()=>{N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}return void e.preventDefault()}e.preventDefault()},children:[(0,Se.jsxs)("div",{className:"generator-header",children:[(0,Se.jsx)("h2",{children:"[\uc720\ud615#09] \uc5b4\ubc95 \ubcc0\ud615 \uac1d\uad00\uc2dd \ubb38\uc81c \uc0dd\uc131"}),(0,Se.jsx)("p",{children:"\uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uc5b4\ubc95(\ubb38\ubc95) \ubcc0\ud615\uc774 \uac00\ub2a5\ud55c \ubd80\ubd84\uc744 AI\uac00 \uc120\uc815, 5\uc9c0\uc120\ub2e4 \uac1d\uad00\uc2dd \uc5b4\ubc95 \ubb38\uc81c\ub85c \ucd9c\uc81c\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"input-type-section",children:[(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"capture"===n,onChange:()=>H("capture")}),(0,Se.jsx)("span",{children:"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30"}),(0,Se.jsx)("button",{type:"button",className:"screenshot-help-btn",onClick:e=>{e.preventDefault(),T(!0)},title:"\ud654\uba74 \ucea1\ucc98 \ubc29\ubc95 \ubcf4\uae30",children:"?"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"image"===n,onChange:()=>H("image")}),(0,Se.jsx)("span",{children:"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \ud30c\uc77c \ucca8\ubd80"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"text"===n,onChange:()=>H("text")}),(0,Se.jsx)("span",{children:"\u270d\ufe0f \uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30"})]})]}),"capture"===n&&(0,Se.jsxs)("div",{className:"input-guide".concat(k?" paste-focused":""),tabIndex:0,onClick:()=>S(!0),onFocus:()=>S(!0),onBlur:()=>S(!1),children:[(0,Se.jsx)("div",{className:"drop-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("div",{className:"drop-text",children:"\uc5ec\uae30\uc5d0 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc73c\uc138\uc694"}),(0,Se.jsxs)("div",{className:"drop-desc",children:["\ud074\ub9ad \ub610\ub294 Tab \ud6c4 ",(0,Se.jsx)("b",{children:"Ctrl+V"}),"\ub85c \ucea1\ucc98 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),c&&(0,Se.jsx)("div",{className:"preview-row",children:(0,Se.jsx)("img",{src:c,alt:"\ucea1\ucc98 \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"})}),(p||f)&&(0,Se.jsx)("div",{style:{color:"#d32f2f",fontWeight:600,marginTop:"0.7rem"},children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),"image"===n&&(0,Se.jsx)("div",{className:"input-guide",children:(0,Se.jsxs)("div",{className:"file-upload-row",children:[(0,Se.jsxs)("label",{htmlFor:"grammar-error-image",className:"file-upload-btn",children:["\ud30c\uc77c \uc120\ud0dd",(0,Se.jsx)("input",{id:"grammar-error-image",type:"file",accept:"image/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){l(n),d(URL.createObjectURL(n)),g(!0);try{const e=await K(n);o(e),setTimeout(()=>{N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}},style:{display:"none"}})]}),(0,Se.jsx)("span",{className:"file-upload-status",children:a?a.name:"\uc120\ud0dd\ub41c \ud30c\uc77c \uc5c6\uc74c"}),c&&(0,Se.jsx)("img",{src:c,alt:"\uc5c5\ub85c\ub4dc \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"}),(p||f)&&(0,Se.jsx)("div",{className:"loading-text",children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]})}),(0,Se.jsxs)("div",{className:"input-section",children:[(0,Se.jsxs)("div",{className:"input-label-row",children:[(0,Se.jsx)("label",{htmlFor:"grammar-error-text",className:"input-label",children:"\uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30:"}),i.length<100&&(0,Se.jsx)("span",{className:"warning",children:"\u26a0\ufe0f \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 \ub354 \uc88b\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("textarea",{id:"grammar-error-text",ref:N,value:i,onChange:e=>{o(e.target.value),N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},placeholder:"\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc9c1\uc811 \ubd99\uc5ec\ub123\uc5b4 \uc8fc\uc138\uc694. \ucd5c\uc18c 100\uc790 \uc774\uc0c1 \uad8c\uc7a5\ud569\ub2c8\ub2e4.",className:"text-input",rows:8,style:{overflow:"hidden",resize:"none"},disabled:"image"===n&&!i}),(0,Se.jsx)("div",{className:"text-info",children:(0,Se.jsxs)("span",{children:["\uae00\uc790 \uc218: ",i.length,"\uc790"]})})]}),(0,Se.jsx)("button",{onClick:async()=>{if(console.log("\ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778:",{userData:e,uid:null===e||void 0===e?void 0:e.uid,loading:t}),t)return void alert("\ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if(!e||!e.uid)return console.error("\ub85c\uadf8\uc778 \uc0c1\ud0dc \uc624\ub958:",{userData:e,loading:t}),void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.");const n=V.find(e=>"9"===e.id);if(!n)return void alert("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=n.points;U<r?alert("\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. \ud604\uc7ac ".concat(U.toLocaleString(),"P, \ud544\uc694 ").concat(r.toLocaleString(),"P")):(B(r),L(!0))},disabled:p||!i.trim(),className:"generate-button",children:"\uc5b4\ubc95 \ubcc0\ud615 \ubb38\uc81c \uc0dd\uc131\ud558\uae30"}),(p||f)&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("span",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:f?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":"\ud83d\udccb \ubb38\uc81c \uc0dd\uc131 \uc911..."})]})}),(0,Se.jsx)(yo,{isOpen:z,onClose:()=>L(!1),onConfirm:()=>{L(!1),Q()},workTypeName:"\uc5b4\ubc95 \ubcc0\ud615 \ubb38\uc81c \uc0dd\uc131",pointsToDeduct:M,userCurrentPoints:U,remainingPoints:U-M}),(0,Se.jsx)(go,{isOpen:_,onClose:()=>T(!1)})]})},gl=()=>{const{userData:e,loading:t}=Te(),[n,s]=(0,r.useState)("text"),[i,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[x,b]=(0,r.useState)("none"),[w,j]=(0,r.useState)(!1),N=(0,r.useRef)(null),[k,S]=(0,r.useState)(!1),[_,T]=(0,r.useState)(!1),[C,E]=(0,r.useState)({needsSecondPage:!1,needsThirdPage:!1,page1Content:"",page2Content:"",page3Content:""}),I=754,A=1048,R=30,O=11,P=30,F=11;function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:38,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.7;const s=I-40,i=.55*n,o=Math.floor(s/i);return Math.ceil(e.length/o)*n*r+t}const[z,L]=(0,r.useState)(!1),[M,B]=(0,r.useState)(0),[U,W]=(0,r.useState)(0),[V,q]=(0,r.useState)([]);(0,r.useEffect)(()=>{t||(async()=>{try{var n;const r=await(0,vo.getWorkTypePoints)();q(r);const s=(null===(n=r.find(e=>"10"===e.id))||void 0===n?void 0:n.points)||0;if(B(s),!t&&e&&e.uid){const t=await(0,vo.MC)(e.uid);W(t)}}catch(r){console.error("\ud3ec\uc778\ud2b8 \ucd08\uae30\ud654 \uc624\ub958:",r)}})()},[null===e||void 0===e?void 0:e.uid,t]),(0,r.useEffect)(()=>{if(!u)return;const e=A,t=e-50,n=R+O+D(u.passage,16,16,1.7),r=D("".concat(u.options[u.answerIndex],"\uac1c (\uc815\ub2f5)"),11,16,1.3),s=P+F+D(u.translation,32,12.8,1.7),i=n+r+s;console.log("\ud83d\udccf \uc720\ud615#10 \ub3d9\uc801 \ud398\uc774\uc9c0 \ubd84\ud560 \uacc4\uc0b0:",{availableHeight:e.toFixed(2)+"px",sectionAHeight:n.toFixed(2)+"px",sectionBHeight:r.toFixed(2)+"px",sectionCHeight:s.toFixed(2)+"px",totalHeight:i.toFixed(2)+"px",effectiveAvailableHeight:t.toFixed(2)+"px",passageLength:u.passage.length,translationLength:u.translation.length}),console.log("\ud83d\udd0d \uc2e4\uc81c A4 \ud06c\uae30 \uae30\uc900 \uacc4\uc0b0:",{A4_SIZE:"210mm \xd7 297mm = 794px \xd7 1123px (96 DPI)",CONTENT_AREA:I+"px \xd7 "+A+"px",availableHeight:e+"px",safetyMargin:"50px",effectiveAvailableHeight:t+"px"}),i<=t?(E({needsSecondPage:!1,needsThirdPage:!1,page1Content:"A+B+C",page2Content:"",page3Content:""}),j(!1)):n+r<=t?(E(s<=t?{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A+B",page2Content:"C",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!0,page1Content:"A+B",page2Content:"C-part1",page3Content:"C-part2"}),j(!0)):n<=t?(E(r+s<=t?{needsSecondPage:!0,needsThirdPage:!1,page1Content:"A",page2Content:"B+C",page3Content:""}:{needsSecondPage:!0,needsThirdPage:!0,page1Content:"A",page2Content:"B",page3Content:"C"}),j(!0)):(E({needsSecondPage:!0,needsThirdPage:!0,page1Content:"A",page2Content:"B",page3Content:"C"}),j(!0))},[u]),(0,r.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,r.useEffect)(()=>{u&&window.scrollTo(0,0)},[u]);const H=e=>{s(e),o(""),l(null),d(null),h(null),v(null)};async function K(e){const t=await(n=e,new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)}));var n;const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"\uc601\uc5b4\ubb38\uc81c\ub85c \uc0ac\uc6a9\ub418\ub294 \ubcf8\ubb38\uc774\uc57c.\n\uc774 \uc774\ubbf8\uc9c0\uc758 \ub0b4\uc6a9\uc744 \uc218\uc791\uc5c5\uc73c\ub85c \uc815\ud655\ud788 \uc77d\uace0, \uc601\uc5b4 \ubcf8\ubb38\ub9cc \ucd94\ub824\ub0b4\uc11c \ubcf4\uc5ec\uc918.\n\uae00\uc790\ub294 \uc778\uc1c4\uae00\uc528\uccb4 \uc774\uc678\uc5d0 \uc190\uae00\uc528\ub098 \uc6d0, \ubc11\uc904 \ub4f1 \ud45c\uc2dc\ub418\uc5b4\uc788\ub294 \uac83\uc740 \ubb34\uc2dc\ud574. \n\ubcf8\ubb38\uc911\uc5d0 \uc6d0\ubb38\uc790 1, 2, 3... \ub4f1\uc73c\ub85c \ud45c\uc2dc\ub41c\uac74 \uc81c\uac70\ud574\uc918. \n\uc6d0\ubb38\uc790 \uc81c\uac70\ud6c4 \uc904\uc744 \ubc14\uafb8\uac70\ub098 \ubb38\ub2e8\uc744 \ubc14\uafb8\uc9c0\ub9d0\uace0, \uc804\uccb4\uac00 \ud55c \ubb38\ub2e8\uc73c\ub85c \uad6c\uc131\ud574\uc918. \n\uc601\uc5b4 \ubcf8\ubb38\ub9cc, \uc544\ubb34\ub7f0 \uc124\uba85\uc774\ub098 \uc548\ub0b4\ubb38 \uc5c6\uc774, \ud55c \ubb38\ub2e8\uc73c\ub85c\ub9cc \ucd9c\ub825\ud574\uc918."},{type:"image_url",image_url:{url:t}}]}],max_tokens:2048})});return(await r.json()).choices[0].message.content.trim()}function J(e,t,n,r){let s=e;const i=Array(t.length).fill(!1);return t.forEach((e,t)=>{if(i[t])return;const o=r.includes(t)?n[t]:e,a="".concat("\u2460\u2461\u2462\u2463\u2464\u2465\u2466\u2467"[t],"<u>").concat(o,"</u>"),l=new RegExp("\\b".concat(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"\\b"));s=s.replace(l,a),i[t]=!0}),s}const Y=async()=>{if(null===e||void 0===e||!e.uid)return;let t="";m(!0),h(null),v(null);let r=0;try{const s=V.find(e=>"10"===e.id);if(!s)throw new Error("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const o=await(0,vo.ev)(e.uid,"10",s.name,e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790");if(!o.success)throw new Error(o.error||"\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");if(r=o.deductedPoints,W(o.remainingPoints),"text"===n){if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}else if("image"===n&&a)t=await K(a);else{if("capture"!==n)throw new Error("\uc774\ubbf8\uc9c0\ub97c \ucca8\ubd80\ud574\uc8fc\uc138\uc694.");if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}if(!t.trim())throw new Error("\ucd94\ucd9c\ub41c \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const l=await async function(e){const t='\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uc5b4\ubc95(\ubb38\ubc95) \ubcc0\ud615\uc774 \uac00\ub2a5\ud55c \uc11c\ub85c \ub2e4\ub978 "\ub2e8\uc5b4" 8\uac1c\ub97c \uc120\uc815\ud558\uc138\uc694.\n\uc774 \uc911 1~5\uac1c(\ub79c\ub364)\ub9cc \uc5b4\ubc95\uc0c1 \ud2c0\ub9ac\uac8c \ubcc0\ud615\ud558\uace0, \ub098\uba38\uc9c0\ub294 \uc6d0\ud615\uc744 \uc720\uc9c0\ud558\uc138\uc694.\n\n\uc544\ub798 JSON \ud615\uc2dd\uc73c\ub85c\ub9cc \uc751\ub2f5\ud558\uc138\uc694:\n{\n  "originalWords": ["...", ...], // 8\uac1c \uc6d0\ubcf8 \ub2e8\uc5b4\n  "transformedWords": ["...", ...], // 8\uac1c \ubcc0\ud615(\ud2c0\ub9b0/\uc815\uc0c1) \ub2e8\uc5b4\n  "wrongIndexes": [0,2,5], // \ud2c0\ub9b0 \ub2e8\uc5b4\uc758 \uc778\ub371\uc2a4(0~7), \uac1c\uc218\ub294 1~5\uac1c\n  "translation": "..." // \ubcf8\ubb38 \ubc88\uc5ed\n}\n\ubcf8\ubb38:\n'.concat(e),n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:t}],max_tokens:2e3,temperature:.7})}),r=(await n.json()).choices[0].message.content.match(/\{[\s\S]*\}/);if(!r)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let s;try{s=JSON.parse(r[0])}catch(l){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!s.originalWords||!s.transformedWords||!Array.isArray(s.wrongIndexes)||!s.translation)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");const i=s.wrongIndexes.length,o=[1,2,3,4,5],a=o.indexOf(i);return{passage:e,options:o,answerIndex:a,translation:s.translation,originalWords:s.originalWords,transformedWords:s.transformedWords,wrongIndexes:s.wrongIndexes}}(t);h(l)}catch(s){if(console.error("\ubcf5\ud569 \ubb38\ubc95 \uc624\ub958 \ubb38\uc81c \uc0dd\uc131 \uc624\ub958:",s),r>0&&null!==e&&void 0!==e&&e.uid)try{await(0,vo.Lw)(e.uid,r,"\ubcf5\ud569 \ubb38\ubc95 \uc624\ub958 \ubb38\uc81c \uc0dd\uc131",e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790","\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\ub85c \uc778\ud55c \ud3ec\uc778\ud2b8 \ud658\ubd88"),W(e=>e+r)}catch(o){console.error("\ud3ec\uc778\ud2b8 \ud658\ubd88 \uc624\ub958:",o)}alert(s.message||"\ubb38\uc81c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}},Q=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),b("no-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),b("none")},1e3)},100)},G=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),b("with-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),b("none")},1e3)},100)},$=()=>{h(null),v(null),o(""),l(null),d(null),S(!1),m(!1),g(!1),E({needsSecondPage:!1,needsThirdPage:!1,page1Content:"",page2Content:"",page3Content:""})};if(u){const e=["\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467"];return(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("div",{className:"quiz-display no-print",children:[(0,Se.jsxs)("div",{className:"quiz-header",children:[(0,Se.jsx)("h2",{className:"no-print",children:"#10. \ub2e4\uc911 \uc5b4\ubc95 \uc624\ub958 \ucc3e\uae30 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"quiz-header-buttons no-print",children:[(0,Se.jsx)("button",{onClick:$,className:"reset-button",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\uc0c8 \ubb38\uc81c \ub9cc\ub4e4\uae30"}),(0,Se.jsxs)("button",{onClick:Q,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsx)("span",{children:"\uc778\uc1c4 (\ubb38\uc81c)"})]}),(0,Se.jsxs)("button",{onClick:G,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 6px rgba(240, 147, 251, 0.25)"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsxs)("span",{children:["\uc778\uc1c4 (",(0,Se.jsx)("span",{style:{color:"#FFD600"},children:"\uc815\ub2f5"}),")"]})]})]})]}),(0,Se.jsxs)("div",{className:"grammar-error-section",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1.13rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"0.6rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \ub2e8\uc5b4\uac00 \ucd1d \uba87 \uac1c\uc778\uc9c0 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#10"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{fontSize:"1.08rem",lineHeight:1.7,margin:"1.2rem 0",background:"#f7f8fc",borderRadius:"8px",padding:"1.2rem",fontFamily:"inherit"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:J(u.passage,u.originalWords,u.transformedWords,u.wrongIndexes).replace(/\n/g,"<br/>")}})}),(0,Se.jsx)("div",{className:"problem-options",style:{margin:"1.2rem 0"},children:u.options.map((e,t)=>(0,Se.jsxs)("label",{style:{display:"inline-block",fontSize:"1.08rem",margin:"0.4rem 1.2rem 0 0",cursor:"pointer",fontWeight:y===t?700:400,color:y===t?"#6a5acd":"#222",fontFamily:"inherit"},children:[(0,Se.jsx)("input",{type:"radio",name:"multi-grammar-quiz",checked:y===t,onChange:()=>v(t),style:{marginRight:"0.7rem"}}),e,"\uac1c",null!==y&&u.answerIndex===t&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]},t))}),null!==y&&(0,Se.jsxs)("div",{className:"problem-answer no-print",style:{marginTop:"1.2rem",color:"#1976d2",fontWeight:700},children:["\uc815\ub2f5: ",u.options[u.answerIndex],"\uac1c",(0,Se.jsxs)("div",{style:{marginTop:"0.7rem",color:"#1976d2",fontWeight:400,fontSize:"1rem"},children:["\uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \ub2e8\uc5b4: ",u.wrongIndexes.map(t=>"".concat(e[t]).concat(u.transformedWords[t]," \u2192 ").concat(u.originalWords[t])).join(", ")]}),(0,Se.jsxs)("div",{className:"translation-section",style:{marginTop:"1.2rem"},children:[(0,Se.jsx)("h3",{style:{fontSize:"1.05rem",color:"#1976d2",marginBottom:"0.5rem"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{style:{background:"#f1f8e9",padding:"1rem",borderRadius:"8px",border:"1.5px solid #c8e6c9",fontSize:"0.98rem",lineHeight:"1.6"},children:u.translation})]})]})]})]}),"no-answer"===x&&(0,Se.jsx)("div",{className:"only-print",children:w?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \ub2e8\uc5b4\uac00 \ucd1d \uba87 \uac1c\uc778\uc9c0 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#10"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:J(u.passage,u.originalWords,u.transformedWords,u.wrongIndexes).replace(/\n/g,"<br/>")}})})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ub2e4\uc74c \uc911\uc5d0\uc11c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("div",{className:"problem-options",style:{margin:"1rem 0"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,"\uac1c"]},t))})]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \ub2e8\uc5b4\uac00 \ucd1d \uba87 \uac1c\uc778\uc9c0 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:J(u.passage,u.originalWords,u.transformedWords,u.wrongIndexes).replace(/\n/g,"<br/>")}})}),(0,Se.jsx)("div",{className:"problem-options",style:{margin:"1rem 0"},children:u.options.map((e,t)=>(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e,"\uac1c"]},t))})]})})]})}),"with-answer"===x&&(0,Se.jsxs)("div",{className:"only-print print-answer-mode",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(C.page1Content.includes("A")||"A"===C.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \ub2e8\uc5b4\uac00 \ucd1d \uba87 \uac1c\uc778\uc9c0 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#10"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.1rem",fontSize:"1rem !important",padding:"0.5rem 1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:J(u.passage,u.originalWords,u.transformedWords,u.wrongIndexes).replace(/\n/g,"<br/>")}})})]}),(C.page1Content.includes("B")||"B"===C.page1Content)&&(0,Se.jsxs)("div",{className:"problem-options",style:{margin:"0.2rem 0"},children:[(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[u.answerIndex]||"".concat(u.answerIndex+1,".")," ",u.options[u.answerIndex],"\uac1c",(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]}),(0,Se.jsxs)("div",{style:{fontSize:"0.9rem !important",margin:"0.2rem 0 0 0",fontFamily:"inherit",color:"#1976d2",fontWeight:400},children:["\uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \ub2e8\uc5b4: ",u.wrongIndexes.map(t=>"".concat(e[t]).concat(u.transformedWords[t]," \u2192 ").concat(u.originalWords[t])).join(", ")]})]}),(C.page1Content.includes("C")||"C"===C.page1Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.2rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{fontSize:"0.8rem !important",lineHeight:1.7,margin:"0.1rem 0",background:"#f1f8e9",borderRadius:"8px",padding:"2rem 1rem",fontFamily:"inherit",color:"#222"},children:u.translation||"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})]})})]}),C.needsSecondPage&&(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(C.page2Content.includes("A")||"A"===C.page2Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \ub2e8\uc5b4\uac00 \ucd1d \uba87 \uac1c\uc778\uc9c0 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#10"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.1rem",fontSize:"1rem !important",padding:"0.5rem 1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:J(u.passage,u.originalWords,u.transformedWords,u.wrongIndexes).replace(/\n/g,"<br/>")}})})]}),(C.page2Content.includes("B")||"B"===C.page2Content)&&(0,Se.jsxs)("div",{className:"problem-options",style:{margin:"0.2rem 0"},children:[(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[u.answerIndex]||"".concat(u.answerIndex+1,".")," ",u.options[u.answerIndex],"\uac1c",(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]}),(0,Se.jsxs)("div",{style:{fontSize:"0.9rem !important",margin:"0.2rem 0 0 0",fontFamily:"inherit",color:"#1976d2",fontWeight:400},children:["\uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \ub2e8\uc5b4: ",u.wrongIndexes.map(t=>"".concat(e[t]).concat(u.transformedWords[t]," \u2192 ").concat(u.originalWords[t])).join(", ")]})]}),(C.page2Content.includes("C")||"C"===C.page2Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.2rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{fontSize:"0.8rem !important",lineHeight:1.7,margin:"0.1rem 0",background:"#f1f8e9",borderRadius:"8px",padding:"2rem 1rem",fontFamily:"inherit",color:"#222"},children:u.translation||"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})]})})]}),C.needsThirdPage&&(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(C.page3Content.includes("A")||"A"===C.page3Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \ub2e8\uc5b4\uac00 \ucd1d \uba87 \uac1c\uc778\uc9c0 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#10"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.1rem",fontSize:"1rem !important",padding:"0.5rem 1rem",background:"#fff3cd",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:J(u.passage,u.originalWords,u.transformedWords,u.wrongIndexes).replace(/\n/g,"<br/>")}})})]}),(C.page3Content.includes("B")||"B"===C.page3Content)&&(0,Se.jsxs)("div",{className:"problem-options",style:{margin:"0.2rem 0"},children:[(0,Se.jsxs)("div",{style:{fontSize:"1rem !important",margin:"0.3rem 0",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[u.answerIndex]||"".concat(u.answerIndex+1,".")," ",u.options[u.answerIndex],"\uac1c",(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:"(\uc815\ub2f5)"})]}),(0,Se.jsxs)("div",{style:{fontSize:"0.9rem !important",margin:"0.2rem 0 0 0",fontFamily:"inherit",color:"#1976d2",fontWeight:400},children:["\uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \ub2e8\uc5b4: ",u.wrongIndexes.map(t=>"".concat(e[t]).concat(u.transformedWords[t]," \u2192 ").concat(u.originalWords[t])).join(", ")]})]}),(C.page3Content.includes("C")||"C"===C.page3Content)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.2rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{fontSize:"0.8rem !important",lineHeight:1.7,margin:"0.1rem 0",background:"#f1f8e9",borderRadius:"8px",padding:"2rem 1rem",fontFamily:"inherit",color:"#222"},children:u.translation||"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})]})})]})]})]})}return(0,Se.jsxs)("div",{className:"quiz-generator",onPaste:async e=>{if("capture"!==n)return;const t=e.clipboardData.items;for(let n=0;n<t.length;n++)if(-1!==t[n].type.indexOf("image")){const s=t[n].getAsFile();if(s){l(s),d(URL.createObjectURL(s)),g(!0);try{const e=await K(s);o(e),setTimeout(()=>{N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}return void e.preventDefault()}e.preventDefault()},children:[(0,Se.jsxs)("div",{className:"generator-header",children:[(0,Se.jsx)("h2",{children:"[\uc720\ud615#10] \ub2e4\uc911 \uc5b4\ubc95 \uc624\ub958 \ucc3e\uae30 \ubb38\uc81c \uc0dd\uc131"}),(0,Se.jsx)("p",{children:"\uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uc5b4\ubc95(\ubb38\ubc95) \ubcc0\ud615\uc774 \uac00\ub2a5\ud55c 8\uac1c \ub2e8\uc5b4\ub97c \uc120\uc815, 1~5\uac1c\ub9cc \uc5b4\ubc95\uc0c1 \ud2c0\ub9ac\uac8c \ubcc0\ud615\ud558\uc5ec \ucd1d \uba87 \uac1c\uac00 \ud2c0\ub838\ub294\uc9c0 \uace0\ub974\ub294 \ubb38\uc81c\ub97c \ucd9c\uc81c\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"input-type-section",children:[(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"capture"===n,onChange:()=>H("capture")}),(0,Se.jsx)("span",{children:"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30"}),(0,Se.jsx)("button",{type:"button",className:"screenshot-help-btn",onClick:e=>{e.preventDefault(),T(!0)},title:"\ud654\uba74 \ucea1\ucc98 \ubc29\ubc95 \ubcf4\uae30",children:"?"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"image"===n,onChange:()=>H("image")}),(0,Se.jsx)("span",{children:"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \ud30c\uc77c \ucca8\ubd80"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"text"===n,onChange:()=>H("text")}),(0,Se.jsx)("span",{children:"\u270d\ufe0f \uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30"})]})]}),"capture"===n&&(0,Se.jsxs)("div",{className:"input-guide".concat(k?" paste-focused":""),tabIndex:0,onClick:()=>S(!0),onFocus:()=>S(!0),onBlur:()=>S(!1),children:[(0,Se.jsx)("div",{className:"drop-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("div",{className:"drop-text",children:"\uc5ec\uae30\uc5d0 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc73c\uc138\uc694"}),(0,Se.jsxs)("div",{className:"drop-desc",children:["\ud074\ub9ad \ub610\ub294 Tab \ud6c4 ",(0,Se.jsx)("b",{children:"Ctrl+V"}),"\ub85c \ucea1\ucc98 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),c&&(0,Se.jsx)("div",{className:"preview-row",children:(0,Se.jsx)("img",{src:c,alt:"\ucea1\ucc98 \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"})}),(p||f)&&(0,Se.jsx)("div",{style:{color:"#d32f2f",fontWeight:600,marginTop:"0.7rem"},children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),"image"===n&&(0,Se.jsx)("div",{className:"input-guide",children:(0,Se.jsxs)("div",{className:"file-upload-row",children:[(0,Se.jsxs)("label",{htmlFor:"multi-grammar-error-image",className:"file-upload-btn",children:["\ud30c\uc77c \uc120\ud0dd",(0,Se.jsx)("input",{id:"multi-grammar-error-image",type:"file",accept:"image/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){l(n),d(URL.createObjectURL(n)),g(!0);try{const e=await K(n);o(e),setTimeout(()=>{N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}},style:{display:"none"}})]}),(0,Se.jsx)("span",{className:"file-upload-status",children:a?a.name:"\uc120\ud0dd\ub41c \ud30c\uc77c \uc5c6\uc74c"}),c&&(0,Se.jsx)("img",{src:c,alt:"\uc5c5\ub85c\ub4dc \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"}),(p||f)&&(0,Se.jsx)("div",{className:"loading-text",children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]})}),(0,Se.jsxs)("div",{className:"input-section",children:[(0,Se.jsxs)("div",{className:"input-label-row",children:[(0,Se.jsx)("label",{htmlFor:"multi-grammar-error-text",className:"input-label",children:"\uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30:"}),i.length<100&&(0,Se.jsx)("span",{className:"warning",children:"\u26a0\ufe0f \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 \ub354 \uc88b\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("textarea",{id:"multi-grammar-error-text",ref:N,value:i,onChange:e=>{o(e.target.value),N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},placeholder:"\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc9c1\uc811 \ubd99\uc5ec\ub123\uc5b4 \uc8fc\uc138\uc694. \ucd5c\uc18c 100\uc790 \uc774\uc0c1 \uad8c\uc7a5\ud569\ub2c8\ub2e4.",className:"text-input",rows:8,style:{overflow:"hidden",resize:"none"},disabled:"image"===n&&!i}),(0,Se.jsx)("div",{className:"text-info",children:(0,Se.jsxs)("span",{children:["\uae00\uc790 \uc218: ",i.length,"\uc790"]})})]}),(0,Se.jsx)("button",{onClick:async()=>{if(console.log("\ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778:",{userData:e,uid:null===e||void 0===e?void 0:e.uid,loading:t}),t)return void alert("\ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if(!e||!e.uid)return console.error("\ub85c\uadf8\uc778 \uc0c1\ud0dc \uc624\ub958:",{userData:e,loading:t}),void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.");const n=V.find(e=>"10"===e.id);if(!n)return void alert("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=n.points;U<r?alert("\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. \ud604\uc7ac ".concat(U.toLocaleString(),"P, \ud544\uc694 ").concat(r.toLocaleString(),"P")):(B(r),L(!0))},disabled:p||!i.trim(),className:"generate-button",children:"\ub2e4\uc911 \uc5b4\ubc95 \uc624\ub958 \ubb38\uc81c \uc0dd\uc131\ud558\uae30"}),(p||f)&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("span",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:f?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":"\ud83d\udccb \ubb38\uc81c \uc0dd\uc131 \uc911..."})]})}),(0,Se.jsx)(yo,{isOpen:z,onClose:()=>L(!1),onConfirm:()=>{L(!1),Y()},workTypeName:"\ub2e4\uc911 \uc5b4\ubc95 \uc624\ub958 \ubb38\uc81c \uc0dd\uc131",pointsToDeduct:M,userCurrentPoints:U,remainingPoints:U-M}),(0,Se.jsx)(go,{isOpen:_,onClose:()=>T(!1)})]})},yl=21,vl=1,xl=1,bl=.5,wl=.5,jl=2,Nl=.4,kl=1.5,Sl=.25,_l=.4;function Tl(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yl-vl-xl-2*bl;const n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?Sl:_l,r=Nl*kl,s=Math.floor(t/n),i=Math.ceil(e.length/s);return Math.max(1,i)*r}function Cl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];let n=26.2;if(t){n-=1}return console.log("\ud83d\udccf \ud398\uc774\uc9c0 ".concat(e," \uc0ac\uc6a9 \uac00\ub2a5 \ub192\uc774 \uacc4\uc0b0:"),{A4_HEIGHT:29.7,HEADER_HEIGHT:1.5,INSTRUCTION_HEIGHT:1,BOTTOM_MARGIN:1,includeAnswer:t,safetyMargin:t?"1.0cm":"0cm",availableHeight:n.toFixed(2)+"cm"}),n}function El(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map((e,r)=>{const s={sentence:e,translation:t[r]||"",index:r},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{sentence:n,translation:r}=e;if(t){let t=bl+wl;return t+=Tl("".concat(e.index+1,". ").concat(n),!0),t+=.5*Nl,t+=Tl("\ud574\uc11d: ".concat(r),!1),t+=.3*Nl,Math.max(t,jl)}{let t=bl+wl;return t+=Tl("".concat(e.index+1,". ").concat(n),!0),t+=.3*Nl,t+=1*Nl,Math.max(t,jl)}}(s,n);return{data:s,height:i,width:yl-vl-xl-2*bl}})}function Il(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[];let r=[...e],s=1;for(console.log("\ud83d\ude80 \ub3d9\uc801 \ud398\uc774\uc9c0\ub124\uc774\uc158 \uc2dc\uc791:",{totalContainers:e.length,includeAnswer:t,availableHeightPerPage:Cl(1,t)});r.length>0;){const e=Cl(s,t),i=[];let o=0;console.log("\ud83d\udcc4 \ud398\uc774\uc9c0 ".concat(s," \uc0dd\uc131 \uc911:"),{availableHeight:e,remainingContainers:r.length});for(let t=0;t<r.length;t++){const n=r[t];if(!(o+n.height<=e)){console.log("  \u274c \ucee8\ud14c\uc774\ub108 ".concat(n.data.index+1," \uc81c\uc678:"),{containerHeight:n.height,currentPageHeight:o,wouldExceedBy:o+n.height-e});break}i.push(n),o+=n.height,console.log("  \u2705 \ucee8\ud14c\uc774\ub108 ".concat(n.data.index+1," \ucd94\uac00:"),{containerHeight:n.height,currentPageHeight:o,availableHeight:e,remaining:e-o})}if(i.length>0){const a={pageNumber:s,containers:i,totalHeight:o,availableHeight:e,isFull:o>=e*(t?.8:.85)};n.push(a),r=r.slice(i.length),console.log("\u2705 \ud398\uc774\uc9c0 ".concat(s," \uc644\uc131:"),{containersCount:i.length,totalHeight:o,isFull:a.isFull,remainingContainers:r.length}),s++}else{console.warn("\u26a0\ufe0f \ud398\uc774\uc9c0 ".concat(s,"\uc5d0 \ucee8\ud14c\uc774\ub108\ub97c \ubc30\uce58\ud560 \uc218 \uc5c6\uc74c. \ub0a8\uc740 \ucee8\ud14c\uc774\ub108\ub97c \uac15\uc81c\ub85c \ubc30\uce58\ud569\ub2c8\ub2e4."));const t=r[0],i={pageNumber:s,containers:[t],totalHeight:t.height,availableHeight:e,isFull:!0};n.push(i),r=r.slice(1),s++}}const i={pages:n,totalPages:n.length,totalContainers:e.length,averageContainersPerPage:e.length/n.length};return console.log("\ud83c\udf89 \ub3d9\uc801 \ud398\uc774\uc9c0\ub124\uc774\uc158 \uc644\ub8cc:",{totalPages:i.totalPages,totalContainers:i.totalContainers,averageContainersPerPage:i.averageContainersPerPage,pageDistribution:n.map(e=>"\ud398\uc774\uc9c0".concat(e.pageNumber,": ").concat(e.containers.length,"\uac1c \ucee8\ud14c\uc774\ub108 (").concat(e.totalHeight.toFixed(2),"cm)"))}),i}(El(e,t,n),n)}const Al=e=>{let{sentences:t,translations:n,includeAnswer:r,printMode:s,customHeader:i}=e;console.log("\ud83d\udda8\ufe0f Work11DynamicPrintPages \ub80c\ub354\ub9c1:",{sentencesCount:t.length,translationsCount:n.length,includeAnswer:r,printMode:s});const o=function(e){const{pages:t}=e,n=[];console.log("\ud83d\udd27 \ud398\uc774\uc9c0 \ub808\uc774\uc544\uc6c3 \ucd5c\uc801\ud654 \uc2dc\uc791");for(let s=0;s<t.length;s++){const e=t[s],r=t[s+1];if(r&&r.containers.length>0){const t=e.availableHeight-e.totalHeight,n=r.containers[0];t>=n.height&&(console.log("\ud83d\udd04 \ud398\uc774\uc9c0 ".concat(e.pageNumber,"\uc5d0 \ucee8\ud14c\uc774\ub108 ").concat(n.data.index+1," \uc774\ub3d9")),e.containers.push(n),e.totalHeight+=n.height,e.isFull=e.totalHeight>=.95*e.availableHeight,r.containers.shift(),r.totalHeight-=n.height)}n.push(e)}const r={pages:n,totalPages:n.length,totalContainers:e.totalContainers,averageContainersPerPage:e.totalContainers/n.length};return console.log("\u2705 \ud398\uc774\uc9c0 \ub808\uc774\uc544\uc6c3 \ucd5c\uc801\ud654 \uc644\ub8cc"),r}(Il(t,n,r)),a=function(e){const t=[],n=[],r=e.pages.reduce((e,t)=>e+t.containers.length,0);return r!==e.totalContainers&&t.push("\ucee8\ud14c\uc774\ub108 \uc218 \ubd88\uc77c\uce58: \ud398\uc774\uc9c0 \ud569\uacc4 ".concat(r,", \uc804\uccb4 ").concat(e.totalContainers)),e.pages.forEach((e,r)=>{e.totalHeight>e.availableHeight&&t.push("\ud398\uc774\uc9c0 ".concat(e.pageNumber," \ub192\uc774 \ucd08\uacfc: ").concat(e.totalHeight.toFixed(2),"cm > ").concat(e.availableHeight.toFixed(2),"cm")),0===e.containers.length&&n.push("\ud398\uc774\uc9c0 ".concat(e.pageNumber,"\uc774 \ube44\uc5b4\uc788\uc74c"));const s=e.totalHeight/e.availableHeight;s<.3&&n.push("\ud398\uc774\uc9c0 ".concat(e.pageNumber," \ud65c\uc6a9\ub3c4 \ub0ae\uc74c: ").concat((100*s).toFixed(1),"%"))}),{isValid:0===t.length,errors:t,warnings:n}}(o);a.isValid||console.error("\u274c \ud398\uc774\uc9c0\ub124\uc774\uc158 \uac80\uc99d \uc2e4\ud328:",a.errors),a.warnings.length>0&&console.warn("\u26a0\ufe0f \ud398\uc774\uc9c0\ub124\uc774\uc158 \uacbd\uace0:",a.warnings),console.log("\ud83d\udcca \ucd5c\uc885 \ud398\uc774\uc9c0\ub124\uc774\uc158 \uacb0\uacfc:",{totalPages:o.totalPages,totalContainers:o.totalContainers,averageContainersPerPage:o.averageContainersPerPage,validation:{isValid:a.isValid,errors:a.errors.length,warnings:a.warnings.length}});const l=(e,t)=>{const{pageNumber:n,containers:s,totalHeight:o,availableHeight:a,isFull:l}=e;return console.log("\ud83d\udcc4 \ud398\uc774\uc9c0 ".concat(n," \ub80c\ub354\ub9c1:"),{containersCount:s.length,totalHeight:o.toFixed(2)+"cm",availableHeight:a.toFixed(2)+"cm",utilization:(o/a*100).toFixed(1)+"%",isFull:l,remainingSpace:(a-o).toFixed(2)+"cm"}),(0,Se.jsxs)("div",{className:"a4-page-template work11-dynamic-page-template",style:{width:"21cm",height:"29.7cm",margin:"0",padding:"0",background:"white",boxSizing:"border-box",pageBreakInside:"avoid",position:"relative",display:"flex",flexDirection:"column",border:"none"},children:[(0,Se.jsx)("div",{className:"a4-page-header",style:{width:"100%",height:"1.5cm",flexShrink:0,padding:"0.5cm 0.3cm 0 0.3cm",boxSizing:"border-box"},children:i||(0,Se.jsx)(fo,{})}),(0,Se.jsxs)("div",{className:"a4-page-content",style:{width:"100%",flex:1,padding:"0 1cm 1cm 1cm",boxSizing:"border-box",overflow:"visible"},children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:1===n?"\ub2e4\uc74c \ubcf8\ubb38\uc758 \uac01 \ubb38\uc7a5\uc744 \ud55c\uad6d\uc5b4\ub85c \ud574\uc11d\ud558\uc138\uc694.":"\ubc88\uc5ed\ud560 \ubb38\uc7a5\ub4e4 (\uacc4\uc18d) - ".concat(n,"\ud398\uc774\uc9c0")}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#11"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem"},children:s.map(e=>((e,t)=>{const{data:n}=e,{sentence:s,translation:i,index:o}=n,a={marginBottom:"1rem",padding:"0.5rem 1rem 0 1rem",borderRadius:"8px",pageBreakInside:"avoid",breakInside:"avoid",display:"flex",flexDirection:"column"};return r?(a.backgroundColor="#F1F8E9",a.border="1px solid #e3f2fd"):(a.backgroundColor="#FFF3CD",a.border="1px solid #e3f2fd"),(0,Se.jsxs)("div",{className:r?"work11-print-answer-sentence":"work11-print-problem-sentence",style:a,children:[(0,Se.jsxs)("div",{style:{fontSize:"1rem",lineHeight:"1.6",color:"#000",marginBottom:"0.5rem"},children:[(0,Se.jsxs)("span",{style:{fontWeight:"bold",color:"#333"},children:[o+1,"."]}),s]}),r?(0,Se.jsxs)("div",{style:{fontSize:"1rem",lineHeight:"1.6",color:"#1976d2",fontWeight:"500",marginTop:"0.3rem",paddingBottom:"0.5rem",border:"none !important",borderTop:"none !important",borderBottom:"none !important",borderLeft:"none !important",borderRight:"none !important"},children:[(0,Se.jsx)("span",{style:{fontWeight:"bold",color:"#1976d2"},children:"\ud574\uc11d:"}),i]}):(0,Se.jsx)("div",{style:{height:"".concat(24,"px"),marginTop:"0.3rem"}})]},"page-".concat(t,"-container-").concat(o))})(e,n))}),(0,Se.jsxs)("div",{style:{position:"absolute",bottom:"0.5cm",right:"1cm",fontSize:"0.7rem",color:"#999",background:"rgba(255,255,255,0.8)",padding:"0.2rem 0.5rem",borderRadius:"4px",display:"none"},children:["\ud398\uc774\uc9c0 ",n," | \ucee8\ud14c\uc774\ub108 ",s.length,"\uac1c | \uc0ac\uc6a9\ub960 ",(o/a*100).toFixed(1),"%"]})]})]},"dynamic-page-".concat(n))};return(0,Se.jsx)("div",{className:"work11-dynamic-print-container",children:o.pages.map((e,t)=>l(e))})};async function Rl(e,t){try{if(console.log("\ud83c\udf10 \ubc88\uc5ed \uc2dc\uc791:",e.substring(0,50)+"..."),!t)throw new Error("API \ud0a4\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");const n="\ub2e4\uc74c \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\ub85c \ubc88\uc5ed\ud558\uc138\uc694.\n\n\ubc88\uc5ed \uc694\uad6c\uc0ac\ud56d:\n- \uc790\uc5f0\uc2a4\ub7fd\uace0 \ub9e4\ub044\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\n- \uc6d0\ubb38\uc758 \uc758\ubbf8\ub97c \uc815\ud655\ud788 \uc804\ub2ec\n- \ubb38\ud559\uc801\uc774\uace0 \uc77d\uae30 \uc26c\uc6b4 \ubb38\uccb4\n\n\ubc88\uc5ed\ub9cc \ubc18\ud658\ud558\uc138\uc694 (\ub2e4\ub978 \ud14d\uc2a4\ud2b8 \uc5c6\uc774):\n\n".concat(e),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a helpful assistant that provides natural Korean translations."},{role:"user",content:n}],max_tokens:2048})});if(!r.ok)throw new Error("\ubc88\uc5ed API \ud638\ucd9c \uc2e4\ud328: ".concat(r.status));const s=(await r.json()).choices[0].message.content.trim();return console.log("\ud83c\udf10 \ubc88\uc5ed \uc644\ub8cc:",s.substring(0,50)+"..."),s}catch(n){throw console.error("\ubc88\uc5ed \uc624\ub958:",n),n}}const Ol=e=>{var t,n;let{onQuizGenerated:s}=e;const{user:i}=Te(),[o,a]=(0,r.useState)("text"),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(null),[h,p]=(0,r.useState)(""),[m,f]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[v,x]=(0,r.useState)(!1),[b,w]=(0,r.useState)(""),[j,N]=(0,r.useState)("none"),[k,S]=(0,r.useState)(!1),[_,T]=(0,r.useState)(null),[C,E]=(0,r.useState)(null),[I,A]=(0,r.useState)(!1),[R,O]=(0,r.useState)([]),[P,F]=(0,r.useState)(0),[D,z]=(0,r.useState)(!1),[L,M]=(0,r.useState)(!1),[B,U]=(0,r.useState)(!1),[W,V]=(0,r.useState)(!1),q=((0,r.useRef)(null),(0,r.useRef)(null));(0,r.useEffect)(()=>{(async()=>{if(i)try{console.log("\ud83d\udd0d \uc0ac\uc6a9\uc790 \uc815\ubcf4 \ub85c\ub4dc \uc2dc\uc791:",i.uid);const e=await(0,vo.MC)(i.uid);console.log("\ud83d\udcb0 \uc0ac\uc6a9\uc790 \ud604\uc7ac \ud3ec\uc778\ud2b8:",e),F(e),console.log("\ud83d\udccb getWorkTypePoints \ud568\uc218 \ud638\ucd9c \uc2dc\uc791");const t=await(0,vo.getWorkTypePoints)();if(console.log("\ud83d\udccb \uc804\uccb4 \uc720\ud615\ubcc4 \ud3ec\uc778\ud2b8:",t),console.log("\ud83d\udccb workPoints \ud0c0\uc785:",typeof t),console.log("\ud83d\udccb workPoints \uae38\uc774:",Array.isArray(t)?t.length:"\ubc30\uc5f4\uc774 \uc544\ub2d8"),Array.isArray(t)){const e=t.find(e=>"11"===e.id);console.log("\ud83c\udfaf \uc720\ud615#11 \ud3ec\uc778\ud2b8 \uc124\uc815:",e),e?(O(t),console.log("\u2705 \uc720\ud615#11 \ud3ec\uc778\ud2b8 \uc124\uc815 \uc644\ub8cc:",e.points)):(console.error("\u274c \uc720\ud615#11 \ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc74c"),console.log("\ud83d\udd0d \uc0ac\uc6a9 \uac00\ub2a5\ud55c \uc720\ud615\ub4e4:",t.map(e=>({id:e.id,name:e.name}))),O([]))}else console.error("\u274c workPoints\uac00 \ubc30\uc5f4\uc774 \uc544\ub2d8:",t),O([]);E({uid:i.uid,points:e,workPoints:t})}catch(b){console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \ub85c\ub4dc \uc2e4\ud328:",b),console.error("\uc5d0\ub7ec \uc0c1\uc138:",b),O([])}else console.log("\u274c \uc0ac\uc6a9\uc790 \uc815\ubcf4\uac00 \uc5c6\uc74c")})()},[i]),(0,r.useEffect)(()=>{S(l.length>=2e3)},[l]),(0,r.useEffect)(()=>{if(q.current){const e=q.current;e.style.height="auto";const t=e.scrollHeight,n=Math.max(120,Math.min(800,t));e.style.height=n+"px",e.style.overflow=t<=800?"hidden":"auto"}},[l]),(0,r.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,r.useEffect)(()=>{_&&window.scrollTo(0,0)},[_]);const H=async e=>{try{const t="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";if(!t)throw new Error("OpenAI API \ud0a4\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");const n=await function(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=()=>n(r.error),r.readAsDataURL(e)})}(e),r=await async function(e,t,n){if(!n)throw new Error("API Key\uac00 \ube44\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. .env \ud30c\uc77c\uacfc \uac1c\ubc1c \uc11c\ubc84 \uc7ac\uc2dc\uc791\uc744 \ud655\uc778\ud558\uc138\uc694.");const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:t},{type:"image_url",image_url:{url:e}}]}],max_tokens:2048})});if(!r.ok){const e=await r.text();throw console.error("OpenAI Vision API \uc751\ub2f5:",e),new Error("OpenAI Vision API \ud638\ucd9c \uc2e4\ud328: "+e)}return(await r.json()).choices[0].message.content}(n,'\uc601\uc5b4\ubb38\uc81c\ub85c \uc0ac\uc6a9\ub418\ub294 \ubcf8\ubb38\uc774\uc57c.\n\uc774 \uc774\ubbf8\uc9c0\uc758 \ub0b4\uc6a9\uc744 \uc218\uc791\uc5c5\uc73c\ub85c \uc815\ud655\ud788 \uc77d\uace0, \uc601\uc5b4 \ubcf8\ubb38\ub9cc \ucd94\ub824\ub0b4\uc11c \ubcf4\uc5ec\uc918.\n\n\uc911\uc694\ud55c \uc9c0\uce68:\n1. \uae00\uc790\ub294 \uc778\uc1c4\uae00\uc528\uccb4 \uc774\uc678\uc5d0 \uc190\uae00\uc528\ub098 \uc6d0, \ubc11\uc904 \ub4f1 \ud45c\uc2dc\ub418\uc5b4\uc788\ub294 \uac83\uc740 \ubb34\uc2dc\ud574.\n2. \ubcf8\ubb38\uc911\uc5d0 \uc6d0\ubb38\uc790 \u2460, \u2461, \u2462... \ub4f1\uc73c\ub85c \ud45c\uc2dc\ub41c\uac74 \uc81c\uac70\ud574\uc918.\n3. \uad6c\ub450\uc810(\ub9c8\uce68\ud45c, \uc27c\ud45c, \uc138\ubbf8\ucf5c\ub860, \ucf5c\ub860)\uc744 \ub9e4\uc6b0 \uc815\ud655\ud558\uac8c \uc778\uc2dd\ud574\uc918. \ud2b9\ud788 \ub9c8\uce68\ud45c(.)\uc640 \uc27c\ud45c(,)\ub97c \uad6c\ubd84\ud574\uc11c \uc815\ud655\ud788 \ucd94\ucd9c\ud574\uc918.\n4. \uc778\uc6a9\ubb38\uc758 \uc2dc\uc791\uacfc \ub05d\uc744 \uc815\ud655\ud788 \uc778\uc2dd\ud558\uace0, \uc778\uc6a9\ubd80\ud638("")\ub97c \uc62c\ubc14\ub974\uac8c \ud45c\uc2dc\ud574\uc918.\n5. \ubb38\uc7a5\uc758 \ub05d\uc740 \ub9c8\uce68\ud45c(.)\ub85c, \ub098\uc5f4\uc774\ub098 \uc5f0\uacb0\uc740 \uc27c\ud45c(,)\ub85c \uc815\ud655\ud788 \uad6c\ubd84\ud574\uc918.\n6. \uc6d0\ubb38\uc790 \uc81c\uac70\ud6c4 \uc904\uc744 \ubc14\uafb8\uac70\ub098 \ubb38\ub2e8\uc744 \ubc14\uafb8\uc9c0\ub9d0\uace0, \uc804\uccb4\uac00 \ud55c \ubb38\ub2e8\uc73c\ub85c \uad6c\uc131\ud574\uc918.\n7. \uc601\uc5b4 \ubcf8\ubb38\ub9cc, \uc544\ubb34\ub7f0 \uc124\uba85\uc774\ub098 \uc548\ub0b4\ubb38 \uc5c6\uc774, \ud55c \ubb38\ub2e8\uc73c\ub85c\ub9cc \ucd9c\ub825\ud574\uc918.',t);return function(e){let t=e.replace(/^(Sure!|Here is|Here are|Here's|Here's)[^\n:]*[:\uff1a]?\s*/i,"").trim();return t=t.replace(/wrote,(\s*")/g,"wrote.$1"),t=t.replace(/([a-z])(,)(\s*)([A-Z])/g,(e,n,r,s,i)=>(t.substring(0,t.indexOf(e)).match(/"/g)||[]).length%2===0?n+"."+s+i:e),t}(r)}catch(b){throw console.error("\uc774\ubbf8\uc9c0 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc2e4\ud328:",b),b}},K=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),N("no-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),N("none")},1e3)},100)},J=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),N("with-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),N("none")},1e3)},100)},Y=()=>{c(""),u(null),p(""),T(null),N("none"),w(""),z(!1),M(!1)};return _?(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("div",{className:"quiz-display no-print",children:[(0,Se.jsxs)("div",{className:"quiz-header",children:[(0,Se.jsx)("h2",{className:"no-print",children:"#11. \ubcf8\ubb38 \ubb38\uc7a5\ubcc4 \ud574\uc11d \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"quiz-header-buttons no-print",children:[(0,Se.jsx)("button",{onClick:Y,className:"reset-button",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\uc0c8 \ubb38\uc81c \ub9cc\ub4e4\uae30"}),(0,Se.jsx)("button",{onClick:K,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\ud83d\udda8\ufe0f \uc778\uc1c4 (\ubb38\uc81c)"}),(0,Se.jsx)("button",{onClick:J,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 6px rgba(240, 147, 251, 0.25)"},children:"\ud83d\udda8\ufe0f \uc778\uc1c4 (\uc815\ub2f5)"})]})]}),(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1.13rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"0.6rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ubcf8\ubb38\uc758 \uac01 \ubb38\uc7a5\uc744 \ud55c\uad6d\uc5b4\ub85c \ud574\uc11d\ud558\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#11"})]}),(0,Se.jsx)("div",{className:"sentences-container",children:null===_||void 0===_?void 0:_.sentences.map((e,t)=>(0,Se.jsxs)("div",{className:"sentence-item",children:[(0,Se.jsxs)("div",{className:"sentence-header",children:[(0,Se.jsxs)("span",{className:"sentence-number",children:[t+1,"."]}),(0,Se.jsx)("span",{className:"sentence-content",children:e})]}),(0,Se.jsx)("div",{className:"translation-container",children:(0,Se.jsx)("span",{className:"translation-label",children:"\ud574\uc11d:"})})]},t))})]})]}),"no-answer"===j&&(0,Se.jsx)("div",{className:"only-print",children:(0,Se.jsx)(Al,{sentences:(null===_||void 0===_?void 0:_.sentences)||[],translations:(null===_||void 0===_?void 0:_.translations)||[],includeAnswer:!1,printMode:"no-answer"})}),"with-answer"===j&&(0,Se.jsx)("div",{className:"only-print print-answer-mode",children:(0,Se.jsx)(Al,{sentences:(null===_||void 0===_?void 0:_.sentences)||[],translations:(null===_||void 0===_?void 0:_.translations)||[],includeAnswer:!0,printMode:"with-answer"})})]}):(0,Se.jsxs)("div",{className:"quiz-generator",onPaste:async e=>{if("capture"!==o)return;const t=e.clipboardData.items;for(let r=0;r<t.length;r++)if(-1!==t[r].type.indexOf("image")){const s=t[r].getAsFile();if(s){u(s),p(URL.createObjectURL(s)),x(!0);try{const e=await H(s);c(e),console.log("\ud83d\udcf8 \ucea1\ucc98 \uc774\ubbf8\uc9c0\uc5d0\uc11c \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc644\ub8cc:",e.substring(0,100)+"...")}catch(n){console.error("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4:",n),w("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{x(!1)}}return void e.preventDefault()}e.preventDefault()},children:[(0,Se.jsxs)("div",{className:"generator-header",children:[(0,Se.jsx)("h2",{children:"[\uc720\ud615#11] \ubcf8\ubb38 \ubb38\uc7a5\ubcc4 \ud574\uc11d \ubb38\uc81c \uc0dd\uc131"}),(0,Se.jsx)("p",{children:"\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 \uac01 \ubb38\uc7a5\ubcc4\ub85c \ud574\uc11d\uc744 \uc791\uc131\ud560 \uc218 \uc788\ub294 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"input-type-section",children:[(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"capture"===o,onChange:()=>a("capture")}),(0,Se.jsx)("span",{children:"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30"}),(0,Se.jsx)("button",{type:"button",className:"screenshot-help-btn",onClick:e=>{e.preventDefault(),V(!0)},title:"\ud654\uba74 \ucea1\ucc98 \ubc29\ubc95 \ubcf4\uae30",children:"?"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"file"===o,onChange:()=>a("file")}),(0,Se.jsx)("span",{children:"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \ud30c\uc77c \ucca8\ubd80"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"text"===o,onChange:()=>a("text")}),(0,Se.jsx)("span",{children:"\u270d\ufe0f \uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30"})]})]}),"capture"===o&&(0,Se.jsxs)("div",{className:"input-guide".concat(B?" paste-focused":""),tabIndex:0,onClick:()=>U(!0),onFocus:()=>U(!0),onBlur:()=>U(!1),children:[(0,Se.jsx)("div",{className:"drop-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("div",{className:"drop-text",children:"\uc5ec\uae30\uc5d0 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc73c\uc138\uc694"}),(0,Se.jsxs)("div",{className:"drop-desc",children:["\ud074\ub9ad \ub610\ub294 Tab \ud6c4 ",(0,Se.jsx)("b",{children:"Ctrl+V"}),"\ub85c \ucea1\ucc98 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),h&&(0,Se.jsx)("div",{className:"preview-row",children:(0,Se.jsx)("img",{src:h,alt:"\ucea1\ucc98 \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"})}),m&&(0,Se.jsx)("div",{style:{color:"#d32f2f",fontWeight:600,marginTop:"0.7rem"},children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),"file"===o&&(0,Se.jsx)("div",{className:"input-guide",children:(0,Se.jsxs)("div",{className:"file-upload-row",children:[(0,Se.jsxs)("label",{htmlFor:"sentence-translation-image",className:"file-upload-btn",children:["\ud30c\uc77c \uc120\ud0dd",(0,Se.jsx)("input",{id:"sentence-translation-image",type:"file",accept:"image/*",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){u(n);const e=new FileReader;e.onload=e=>{var t;p(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(n)}},style:{display:"none"}})]}),(0,Se.jsx)("span",{className:"file-upload-status",children:d?d.name:"\uc120\ud0dd\ub41c \ud30c\uc77c \uc5c6\uc74c"}),h&&(0,Se.jsx)("img",{src:h,alt:"\uc5c5\ub85c\ub4dc \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"}),m&&(0,Se.jsx)("div",{className:"loading-text",children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]})}),(0,Se.jsxs)("div",{className:"input-section",children:[(0,Se.jsxs)("div",{className:"input-label-row",children:[(0,Se.jsx)("label",{htmlFor:"sentence-translation-text",className:"input-label",children:"\uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30:"}),l.length<100&&(0,Se.jsx)("span",{className:"warning",children:"\u26a0\ufe0f \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 \ub354 \uc88b\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("textarea",{id:"sentence-translation-text",ref:q,value:l,onChange:e=>{c(e.target.value);const t=e.target;t.style.height="auto";const n=t.scrollHeight,r=Math.max(120,Math.min(800,n));t.style.height=r+"px",t.style.overflow=n<=800?"hidden":"auto"},placeholder:"\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc9c1\uc811 \ubd99\uc5ec\ub123\uc5b4 \uc8fc\uc138\uc694. \ucd5c\uc18c 100\uc790 \uc774\uc0c1 \uad8c\uc7a5\ud569\ub2c8\ub2e4.",className:"text-input",rows:5,style:{overflow:"hidden",resize:"none",minHeight:"120px",maxHeight:"800px"},disabled:"file"===o&&!l}),(0,Se.jsx)("div",{className:"text-info",children:(0,Se.jsxs)("span",{children:["\uae00\uc790 \uc218: ",l.length,"\uc790"]})})]}),(0,Se.jsx)("button",{onClick:async()=>{l.trim()?i?(console.log("\ud83d\ude80 \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791"),console.log("\ud83d\udcb0 \ud604\uc7ac \ud3ec\uc778\ud2b8:",P),A(!0)):w("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."):w("\ud14d\uc2a4\ud2b8\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},disabled:m||!l.trim(),className:"generate-button",children:"\ubcf8\ubb38 \ubb38\uc7a5\ubcc4 \ud574\uc11d \ubb38\uc81c \uc0dd\uc131\ud558\uae30"}),(m||v)&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("span",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:v?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":"\ud83d\udccb \ubb38\uc81c \uc0dd\uc131 \uc911..."})]})}),g&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("span",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:v?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":"\ud83d\udccb \ubb38\uc81c \uc0dd\uc131 \uc911..."}),(0,Se.jsx)("div",{className:"loading-subtext",children:"\uc7a0\uc2dc\ub9cc \uae30\ub2e4\ub824\uc8fc\uc138\uc694..."})]})}),b&&(0,Se.jsx)("div",{className:"error-message",children:b}),(0,Se.jsx)(go,{isOpen:W,onClose:()=>V(!1)}),(0,Se.jsx)(yo,{isOpen:I,onClose:()=>{A(!1)},onConfirm:async()=>{var e;if(!l.trim())return void w("\ud14d\uc2a4\ud2b8\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(!i)return void w("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");console.log("\ud83d\ude80 \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791"),console.log("\ud83d\udcb0 \ud604\uc7ac \ud3ec\uc778\ud2b8:",P);const t=(null===(e=R.find(e=>"11"===e.id))||void 0===e?void 0:e.points)||0;if(console.log("\ud83c\udfaf \ud544\uc694 \ud3ec\uc778\ud2b8:",t),P<t)w("\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. \ud3ec\uc778\ud2b8\ub97c \ucda9\uc804\ud574\uc8fc\uc138\uc694.");else{A(!1),y(!0),w("");try{const e="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";if(!e)throw new Error("OpenAI API \ud0a4\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");console.log("\ud83d\udcb3 \ud3ec\uc778\ud2b8 \ucc28\uac10 \uc2dc\uc791:",t);const n=await(0,vo.ev)(i.uid,"11","\ubcf8\ubb38 \ubb38\uc7a5\ubcc4 \ud574\uc11d",i.displayName||"\uc0ac\uc6a9\uc790",i.displayName||"\uc0ac\uc6a9\uc790");if(!n.success)throw new Error(n.error||"\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");z(!0),F(n.remainingPoints),console.log("\u2705 Firebase \ud3ec\uc778\ud2b8 \ucc28\uac10 \uc644\ub8cc");const r=await async function(e,t){try{console.log("\ud83d\udcdd \ubb38\uc7a5\ubcc4 \ud574\uc11d \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791");let n=e;["e.g.","i.e.","etc.","vs.","Dr.","Mr.","Mrs.","Ms.","Prof.","U.S.","U.K.","U.S.A.","Ph.D.","B.A.","M.A.","Inc.","Corp.","Ltd.","Co.","St.","Ave.","Blvd.","Rd.","Jr.","Sr.","A.D.","B.C.","C.E.","B.C.E."].forEach(e=>{const t=new RegExp(e.replace(".","\\."),"gi");n=n.replace(t,e.replace(/\./g,"\xa7\xa7\xa7"))}),n=n.replace(/\b\d+\.\d+\b/g,e=>e.replace(/\./g,"\xa7\xa7\xa7"));const r=[];let s="",i=!1,o=0;for(let e=0;e<n.length;e++){const t=n[e],a=n[e+1];'"'===t?(o++,i=o%2===1,s+=t):/[.!?]/.test(t)?(s+=t,i?'"'===a&&(s+=a,e++,s.trim().length>0&&r.push(s.trim()),s="",i=!1):(s.trim().length>0&&r.push(s.trim()),s="")):s+=t}s.trim().length>0&&r.push(s.trim());const a=r.filter(e=>e.length>0).map(e=>{const t=e.replace(/\xa7\xa7\xa7/g,".");return t+(t.endsWith(".")||t.endsWith("!")||t.endsWith("?")?"":".")});console.log("\ud83d\udcdd \ubd84\ub9ac\ub41c \ubb38\uc7a5 \uc218:",a.length);const l=[];for(let e=0;e<a.length;e++){const n=a[e];if(n.trim().length>0)try{const r=await Rl(n,t);l.push(r),console.log("\ud83d\udcdd \ubb38\uc7a5 ".concat(e+1," \ubc88\uc5ed \uc644\ub8cc:"),r.substring(0,30)+"...")}catch(b){console.error("\ubb38\uc7a5 ".concat(e+1," \ubc88\uc5ed \uc2e4\ud328:"),b),l.push("[\ubc88\uc5ed \uc2e4\ud328: ".concat(n,"]"))}}let c="\ubcf8\ubb38 \ubb38\uc7a5\ubcc4 \ud574\uc11d\n\n";return a.forEach((e,t)=>{e.trim().length>0&&(c+="".concat(t+1,". ").concat(e,"\n"),c+="   \ud574\uc11d: _________________________________________________\n\n")}),{sentences:a,translations:l,quizText:c}}catch(b){throw console.error("\ubb38\uc7a5\ubcc4 \ud574\uc11d \ubb38\uc81c \uc0dd\uc131 \uc624\ub958:",b),b}}(l,e);T(r),console.log("\u2705 \ubb38\uc7a5\ubcc4 \ud574\uc11d \ubb38\uc81c \uc0dd\uc131 \uc644\ub8cc")}catch(b){if(console.error("\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328:",b),w("\ubb38\uc81c \uc0dd\uc131\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: "+b.message),D)try{console.log("\ud83d\udd04 \ud3ec\uc778\ud2b8 \ud658\ubd88 \uc2dc\uc791"),await(0,vo.Lw)(i.uid,t,"\ubcf8\ubb38 \ubb38\uc7a5\ubcc4 \ud574\uc11d",i.displayName||"\uc0ac\uc6a9\uc790",i.displayName||"\uc0ac\uc6a9\uc790","\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\ub85c \uc778\ud55c \ud3ec\uc778\ud2b8 \ud658\ubd88"),M(!0),F(e=>e+t),console.log("\u2705 \ud3ec\uc778\ud2b8 \ud658\ubd88 \uc644\ub8cc")}catch(n){console.error("\ud3ec\uc778\ud2b8 \ud658\ubd88 \uc2e4\ud328:",n)}}finally{y(!1)}}},workTypeName:"\ubcf8\ubb38 \ubb38\uc7a5\ubcc4 \ud574\uc11d",pointsToDeduct:(null===(t=R.find(e=>"11"===e.id))||void 0===t?void 0:t.points)||0,userCurrentPoints:P,remainingPoints:P-((null===(n=R.find(e=>"11"===e.id))||void 0===n?void 0:n.points)||0)})]})},Pl=()=>(0,Se.jsx)("div",{className:"print-header-work12",children:(0,Se.jsx)("div",{className:"print-header-text-work12",children:"EdgeEnglishLab | AI \uc601\uc5b4 \ubb38\uc81c \uc0dd\uc131 \ud50c\ub7ab\ud3fc"})}),Fl=e=>{let{children:t,className:n=""}=e;return(0,Se.jsx)("div",{className:"problem-instruction-work12 ".concat(n),children:t})},Dl=e=>{let{children:t,className:n=""}=e;return(0,Se.jsx)("div",{className:"word-quiz-container-work12 ".concat(n),children:t})},zl=e=>{let{words:t,showDifficulty:n=!1,showAnswers:r=!1,quizType:s="english-to-korean"}=e;const i=Math.ceil(t.length/2),o=t.slice(0,i),a=t.slice(i),l=(e,t)=>(0,Se.jsxs)("table",{className:"word-list-table-work12",children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"No."}),(0,Se.jsx)("th",{children:"english-to-korean"===s?"\uc601\uc5b4 \ub2e8\uc5b4":"\ud55c\uad6d\uc5b4"}),(0,Se.jsx)("th",{children:"english-to-korean"===s?"\ud55c\uae00 \ub73b":"\uc601\uc5b4"}),n&&(0,Se.jsx)("th",{children:"\ub09c\uc774\ub3c4"})]})}),(0,Se.jsx)("tbody",{children:e.map((e,i)=>(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{children:t+i+1}),(0,Se.jsx)("td",{children:"english-to-korean"===s?e.english:e.korean}),(0,Se.jsx)("td",{className:r?"answer-cell":"",children:r?"english-to-korean"===s?e.korean:e.english:(e.korean.includes("_")||e.english.includes("_"),"")}),n&&(0,Se.jsxs)("td",{children:["easy"===e.difficulty&&"\uc26c\uc6c0","medium"===e.difficulty&&"\ubcf4\ud1b5","hard"===e.difficulty&&"\uc5b4\ub824\uc6c0"]})]},t+i))})]});return(0,Se.jsxs)("div",{className:"word-list-container-work12",children:[(0,Se.jsx)("div",{className:"word-list-column-work12",children:l(o,0)}),(0,Se.jsx)("div",{className:"word-list-column-work12",children:l(a,i)})]})},Ll=()=>{const{userData:e,loading:n}=Te(),[s,i]=(0,r.useState)("text"),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[h,p]=(0,r.useState)(null),[m,f]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[v,x]=(0,r.useState)({}),[b,w]=(0,r.useState)("none"),[j,N]=(0,r.useState)("english-to-korean"),[k,S]=(0,r.useState)([]),_=(0,r.useRef)(null),[T,C]=(0,r.useState)(!1),[E,I]=(0,r.useState)(!1),[A,R]=(0,r.useState)(!1),[O,P]=(0,r.useState)(0),[F,D]=(0,r.useState)(0),[z,L]=(0,r.useState)([]);(0,r.useEffect)(()=>{n||(async()=>{try{var t;const r=await(0,vo.getWorkTypePoints)();L(r);const s=(null===(t=r.find(e=>"12"===e.id))||void 0===t?void 0:t.points)||0;if(P(s),!n&&e&&e.uid){const t=await(0,vo.MC)(e.uid);D(t)}}catch(r){console.error("\ud3ec\uc778\ud2b8 \ucd08\uae30\ud654 \uc624\ub958:",r)}})()},[null===e||void 0===e?void 0:e.uid,n]),(0,r.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,r.useEffect)(()=>{h&&window.scrollTo(0,0)},[h]);const M=e=>{i(e),a(""),c(null),u(null),p(null),x({}),S([])};async function B(e){const t=await(n=e,new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)}));var n;const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:'\uc774 \uc774\ubbf8\uc9c0\ub294 \uc601\uc5b4 \ub2e8\uc5b4 \ud559\uc2b5\uc6a9 \uc6cc\ud06c\uc2dc\ud2b8\uc785\ub2c8\ub2e4. \uc774\ubbf8\uc9c0\uc5d0 \ud45c\uc2dc\ub41c \ubaa8\ub4e0 \uc601\uc5b4 \ub2e8\uc5b4\uc640 \uadf8\uc5d0 \ub300\uc751\ud558\ub294 \ud55c\uae00 \ub73b\uc744 \uc644\uc804\ud788 \ucd94\ucd9c\ud574\uc8fc\uc138\uc694.\n\n\uc911\uc694\ud55c \uc9c0\uce68:\n1. \uc774\ubbf8\uc9c0\uc5d0 \uc788\ub294 \ubaa8\ub4e0 \uc601\uc5b4 \ub2e8\uc5b4\ub97c \ube60\uc9d0\uc5c6\uc774 \ucc3e\uc544\uc8fc\uc138\uc694 (\uc77c\ubd80\ub9cc \ucd94\ucd9c\ud558\uc9c0 \ub9c8\uc138\uc694)\n2. \uac01 \uc601\uc5b4 \ub2e8\uc5b4\uc5d0 \ub300\uc751\ud558\ub294 \ud55c\uae00 \ub73b\uc744 \uc815\ud655\ud788 \ub9e4\uce6d\ud574\uc8fc\uc138\uc694\n3. \ub2e8\uc5b4 \ubaa9\ub85d\uc774 \uc5ec\ub7ec \uc5f4\uc774\ub098 \ud589\uc73c\ub85c \ub098\ub258\uc5b4 \uc788\uc5b4\ub3c4 \ubaa8\ub450 \ucd94\ucd9c\ud574\uc8fc\uc138\uc694\n4. \ubc88\ud638\uac00 \uc788\ub294 \uacbd\uc6b0 \ubc88\ud638\ub294 \uc81c\uc678\ud558\uace0 \uc601\uc5b4 \ub2e8\uc5b4\uc640 \ud55c\uae00 \ub73b\ub9cc \ucd94\ucd9c\ud574\uc8fc\uc138\uc694\n5. \ucd5c\uc18c 10\uac1c \uc774\uc0c1\uc758 \ub2e8\uc5b4\ub97c \ucd94\ucd9c\ud574\uc8fc\uc138\uc694 (\uac00\ub2a5\ud55c \ud55c \ub9ce\uc774)\n\n\uc751\ub2f5 \ud615\uc2dd (JSON \ubc30\uc5f4):\n[\n  {"english": "asset", "korean": "\uc790\uc0b0"},\n  {"english": "independent", "korean": "\ub3c5\ub9bd\uc801\uc778"},\n  {"english": "continuity", "korean": "\uc5f0\uc18d\uc131"}\n]\n\n\uc8fc\uc758\uc0ac\ud56d:\n- \uc601\uc5b4 \ub2e8\uc5b4\uc640 \ud55c\uae00 \ub73b\ub9cc \ucd94\ucd9c\ud558\uace0, \ub2e4\ub978 \uc124\uba85\uc774\ub098 \ubc88\ud638\ub294 \ud3ec\ud568\ud558\uc9c0 \ub9c8\uc138\uc694\n- \ubaa8\ub4e0 \ub2e8\uc5b4\ub97c \ube60\uc9d0\uc5c6\uc774 \ucd94\ucd9c\ud574\uc8fc\uc138\uc694\n- JSON \ud615\uc2dd\uc73c\ub85c\ub9cc \uc751\ub2f5\ud574\uc8fc\uc138\uc694'},{type:"image_url",image_url:{url:t}}]}],max_tokens:4096})}),s=(await r.json()).choices[0].message.content.trim();try{console.log("AI \uc751\ub2f5 \ub0b4\uc6a9:",s);let e=s.match(/\[[\s\S]*\]/);if(e){const t=JSON.parse(e[0]).filter(e=>e.english&&e.korean);return console.log("\ucd94\ucd9c\ub41c \ub2e8\uc5b4 \uc218:",t.length),t}console.log("JSON \ud615\uc2dd\uc774 \uc5c6\uc5b4\uc11c \ud14d\uc2a4\ud2b8 \ud30c\uc2f1 \uc2dc\ub3c4");const t=s.split("\n").filter(e=>e.trim()),n=[];for(const r of t){const e=r.match(/^(.+?)\s*[:\uff1a-]\s*(.+)$/);if(e){const t=e[1].trim().replace(/^\d+\.?\s*/,""),r=e[2].trim();t&&r&&/^[a-zA-Z\s]+$/.test(t)&&/^[\uac00-\ud7a3\s]+$/.test(r)&&n.push({english:t,korean:r})}}if(n.length>0)return console.log("\ud14d\uc2a4\ud2b8 \ud30c\uc2f1\uc73c\ub85c \ucd94\ucd9c\ub41c \ub2e8\uc5b4 \uc218:",n.length),n;throw new Error("JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}catch(i){throw console.error("\ub2e8\uc5b4 \ucd94\ucd9c \ud30c\uc2f1 \uc624\ub958:",i),console.error("\uc6d0\ubcf8 \uc751\ub2f5:",s),new Error("\ub2e8\uc5b4 \ucd94\ucd9c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \uc774\ubbf8\uc9c0\ub97c \ub2e4\uc2dc \ud655\uc778\ud574\uc8fc\uc138\uc694.")}}function U(e){const t=["in the face of","on the other hand","at the end of","in the middle of","in front of","in back of","in spite of","in case of","in terms of","in order to","in addition to","in relation to","in accordance with","on the basis of","on the part of","on the side of","on the way to","at the beginning of","at the expense of","at the mercy of","at the risk of","by means of","by way of","by virtue of","by reason of","for the sake of","for the purpose of","for the benefit of","with regard to","with respect to","with reference to","with the exception of","relative to","reluctant to do","in order to","in front of","in back of","in spite of","in case of","in terms of","in addition to","in relation to","on the other hand","at the end of","at the beginning of","at the expense of","at the mercy of","by means of","by way of","by virtue of","for the sake of","with regard to","with respect to","with reference to","turn into","reflect on","in order","in front","in back","in spite","in case","in terms","in addition","in relation","on the","at the","by means","by way","by virtue","for the","with regard","with respect","with reference","such as","as well","as soon","as long","as far","as much","more than","less than","rather than","other than","except for","due to","owing to","according to","thanks to","prior to","up to","down to","out of","into","onto","upon","within","without","throughout","along with","together with","alongside","instead of","regardless of","irrespective of","apart from","as for","as to","as of","as in","as if","as though","give up","look up","look for","look after","look into","look forward to","get up","get on","get off","get in","get out","get over","get through","put on","put off","put up","put down","put away","put out","take on","take off","take up","take down","take away","take out","come up","come on","come off","come in","come out","come over","go on","go off","go up","go down","go in","go out","go over","turn on","turn off","turn up","turn down","turn around","turn out","break up","break down","break in","break out","break off","make up","make out","make off","make for","make over","set up","set off","set out","set in","set down","run up","run down","run in","run out","run over","run into","carry on","carry out","carry off","carry over","bring up","bring down","bring in","bring out","bring about","call up","call off","call in","call out","call for","pick up","pick out","pick on","pick off","drop off","drop in","drop out","drop by","show up","show off","show in","show out","work out","work on","work in","work up","find out","find in","find out about","figure out","figure in","figure on","point out","point to","point at","deal with","deal in","deal out","care for","care about","care to","wait for","wait on","wait up","stand up","stand for","stand by","stand out","sit down","sit up","sit in","sit out","lie down","lie in","lie about","lie to","wake up","wake up to","fall down","fall off","fall in","fall out","fall over","move on","move in","move out","move over","pass by","pass on","pass out","pass over","live on","live in","live up to","live with","die down","die out","die off","grow up","grow in","grow out of","cut up","cut down","cut in","cut out","cut off","pull up","pull down","pull in","pull out","pull off","push up","push down","push in","push out","push off","hold up","hold down","hold in","hold out","hold off","keep up","keep down","keep in","keep out","keep off","let up","let down","let in","let out","let off","give in","give out","give off","give away","send up","send down","send in","send out","send off","throw up","throw down","throw in","throw out","throw off","catch up","catch on","catch in","catch out","reach out","reach for","reach in","touch on","touch up","touch down","stick to","stick up","stick out","stick around","hang up","hang on","hang out","hang around","tie up","tie down","tie in","tie off","wrap up","wrap in","wrap around","fill up","fill in","fill out","fill up with","empty out","empty into","clean up","clean out","clean off","wash up","wash out","wash off","dry up","dry out","dry off","heat up","heat through","cool down","cool off","warm up","warm through","slow down","slow up","speed up","speed through","hurry up","hurry along","calm down","calm up","settle down","settle in","settle up","settle for","start up","start out","start off","start over","stop by","stop in","stop off","stop over","end up","end in","end with","finish up","finish off","finish with","complete with","complete in","continue on","continue with","carry on with","carry on about","go on with","go on about","keep on with","keep on about","stay on","stay in","stay out","stay up","stay with","remain in","remain out","remain up","remain with","leave out","leave in","leave off","leave behind","arrive at","arrive in","arrive on","depart from","depart for","return to","return from","come back","go back","get back","give back","take back","bring back","send back","call back","look back","think back","turn back","move back","step back","walk back","run back","drive back","fly back","head back","make back","find back","reluctant to","willing to","able to","ready to","likely to","unlikely to","bound to","sure to","certain to","guaranteed to","promised to","expected to","supposed to","meant to","trying to","attempting to","planning to","hoping to","wishing to","wanting to","needing to","having to","going to","used to","accustomed to","addicted to","devoted to","committed to","dedicated to","opposed to","object to","react to","respond to","reply to","answer to","listen to","speak to","talk to","write to","read to","show to","give to","send to","bring to","take to","get to","come to","go to","move to","travel to","return to","come back to","go back to","get back to","turn back to","look back to"].sort((e,t)=>t.length-e.length),n=[];let r=e.toLowerCase().trim();for(;r.length>0;){let e=!1;for(const s of t)if(r.startsWith(s+" ")||r===s){n.push(s),r=r.substring(s.length).trim(),e=!0;break}if(!e){const e=r.split(/\s+/);if(!(e.length>0))break;{const t=e[0].trim();if(!t)break;n.push(t),r=r.substring(t.length).trim()}}}return n.filter(e=>e.trim().length>0)}function W(e){const t=e.split("\n").filter(e=>e.trim()),n=[],r=[];for(const s of t){const e=s.trim();if(!e)continue;let t="",i="",o=e.match(/^(.+?)\s*[:\uff1a]\s*(.+)$/);if(o&&(t=o[1].trim(),i=o[2].trim()),o||(o=e.match(/^(.+?)\s*-\s*(.+)$/),o&&(t=o[1].trim(),i=o[2].trim())),!o){const n=e.split(/\s+/);if(n.length>=2){const e=n[0].trim(),r=n.slice(1).join(" ").trim();/^[a-zA-Z]+$/.test(e)&&/^[\uac00-\ud7a3\s]+$/.test(r)&&(t=e,i=r)}}if(!o&&!t&&!i&&/^[a-zA-Z\s\-']+$/.test(e)&&!/^[\uac00-\ud7a3]/.test(e)){const t=U(e);r.push(...t)}t&&i&&t!==i&&n.push({english:t,korean:i})}return r.length>0?(console.log("\uc601\uc5b4 \ub2e8\uc5b4\ub9cc \ubc1c\uacac\ub428:",r),{words:n,englishOnlyWords:r}):n}function V(e,t){const n=[e],r=t.filter(t=>t!==e).sort(()=>Math.random()-.5);for(let s=0;s<3&&s<r.length;s++)n.push(r[s]);for(;n.length<4;){const e=["\uc120\ud0dd\uc9c01","\uc120\ud0dd\uc9c02","\uc120\ud0dd\uc9c03","\uc120\ud0dd\uc9c04"][n.length-1];if(n.includes(e))break;n.push(e)}return n.sort(()=>Math.random()-.5)}async function q(e,n){let r;console.log("\ud83d\udcdd \ub2e8\uc5b4 \ud034\uc988 \uc0dd\uc131 \uc2dc\uc791:",{wordsCount:e.length,quizType:n}),r="english-to-korean"===n?function(e){return e.map(t=>{const n=V(t.korean,e.map(e=>e.korean));return{question:t.english,options:n,answerIndex:0,correctAnswer:t.korean,wordItem:t}})}(e):function(e){return e.map(t=>{const n=V(t.english,e.map(e=>e.english));return{question:t.korean,options:n,answerIndex:0,correctAnswer:t.english,wordItem:t}})}(e),r=r.map(e=>{const n=e.options.indexOf(e.correctAnswer);return(0,t.A)((0,t.A)({},e),{},{answerIndex:n})});const s={words:e,quizType:n,questions:r,totalQuestions:r.length};return console.log("\u2705 \ub2e8\uc5b4 \ud034\uc988 \uc0dd\uc131 \uc644\ub8cc:",s),s}const H=async()=>{if(null===e||void 0===e||!e.uid)return;let t=[];f(!0),p(null),x({});let n=0;try{const r=z.find(e=>"12"===e.id);if(!r)throw new Error("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const i=await(0,vo.ev)(e.uid,"12",r.name,e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790");if(!i.success)throw new Error(i.error||"\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");if(n=i.deductedPoints,D(i.remainingPoints),"text"===s){if(!o.trim())throw new Error("\uc601\uc5b4 \ub2e8\uc5b4 \ud14d\uc2a4\ud2b8\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");const e=W(o.trim());if("object"===typeof e&&"englishOnlyWords"in e){const{words:n,englishOnlyWords:r}=e;if(n.length>0)t=n;else{if(!(r.length>0))throw new Error("\uc720\ud6a8\ud55c \ub2e8\uc5b4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");console.log("\uc601\uc5b4 \ub2e8\uc5b4\ub9cc \ubc1c\uacac\ub428, \ud55c\uae00\ub73b \uc0dd\uc131 \uc911..."),t=await async function(e){const t="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",n="\ub2e4\uc74c \uc601\uc5b4 \ub2e8\uc5b4\ub4e4\uc758 \ud55c\uad6d\uc5b4 \ub73b\uc744 \uc815\ud655\ud558\uac8c \ubc88\uc5ed\ud574\uc8fc\uc138\uc694. \uac01 \ub2e8\uc5b4\uc758 \uac00\uc7a5 \uc77c\ubc18\uc801\uc774\uace0 \uc801\uc808\ud55c \ud55c\uad6d\uc5b4 \ub73b\uc744 \uc81c\uacf5\ud574\uc8fc\uc138\uc694.\n\n\uc601\uc5b4 \ub2e8\uc5b4 \ubaa9\ub85d:\n".concat(e.join(", "),'\n\n\uc751\ub2f5 \ud615\uc2dd (JSON \ubc30\uc5f4):\n[\n  {"english": "word1", "korean": "\ud55c\uae00\ub73b1"},\n  {"english": "word2", "korean": "\ud55c\uae00\ub73b2"},\n  ...\n]\n\n\uc8fc\uc758\uc0ac\ud56d:\n- \uac01 \uc601\uc5b4 \ub2e8\uc5b4\uc5d0 \ub300\ud574 \uac00\uc7a5 \uc801\uc808\ud55c \ud55c\uad6d\uc5b4 \ub73b\uc744 \uc81c\uacf5\ud574\uc8fc\uc138\uc694\n- \ubcf5\ud569\uc5b4\ub098 \uad6c\ubb38\uc774 \uc544\ub2cc \ub2e8\uc77c \ub2e8\uc5b4\uc758 \ub73b\uc744 \uc81c\uacf5\ud574\uc8fc\uc138\uc694\n- JSON \ud615\uc2dd\uc73c\ub85c\ub9cc \uc751\ub2f5\ud574\uc8fc\uc138\uc694'),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:n}],max_tokens:2048})}),s=(await r.json()).choices[0].message.content.trim();try{console.log("\ud55c\uae00\ub73b \uc0dd\uc131 AI \uc751\ub2f5:",s);let e=s.match(/\[[\s\S]*\]/);if(e){const t=JSON.parse(e[0]).filter(e=>e.english&&e.korean);return console.log("\uc0dd\uc131\ub41c \ud55c\uae00\ub73b \uc218:",t.length),t}throw new Error("JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}catch(i){throw console.error("\ud55c\uae00\ub73b \uc0dd\uc131 \ud30c\uc2f1 \uc624\ub958:",i),console.error("\uc6d0\ubcf8 \uc751\ub2f5:",s),new Error("\ud55c\uae00\ub73b \uc0dd\uc131\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}}(r)}}else t=e}else if("image"===s&&l)t=await B(l);else{if("capture"!==s)throw new Error("\uc774\ubbf8\uc9c0\ub97c \ucca8\ubd80\ud574\uc8fc\uc138\uc694.");{if(!o.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");const e=W(o.trim());t=Array.isArray(e)?e:e.words}}if(0===t.length)throw new Error("\ucd94\ucd9c\ub41c \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");if(t.length<3)throw new Error("\ucd5c\uc18c 3\uac1c \uc774\uc0c1\uc758 \ub2e8\uc5b4\uac00 \ud544\uc694\ud569\ub2c8\ub2e4.");const a=await q(t,j);console.log("\uc0dd\uc131\ub41c \ub2e8\uc5b4 \ud034\uc988:",a),p(a)}catch(r){if(console.error("\ub2e8\uc5b4 \ubb38\uc81c \uc0dd\uc131 \uc624\ub958:",r),n>0&&null!==e&&void 0!==e&&e.uid)try{await(0,vo.Lw)(e.uid,n,"\ub2e8\uc5b4 \ud559\uc2b5 \ubb38\uc81c \uc0dd\uc131",e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790","\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\ub85c \uc778\ud55c \ud3ec\uc778\ud2b8 \ud658\ubd88"),D(e=>e+n)}catch(i){console.error("\ud3ec\uc778\ud2b8 \ud658\ubd88 \uc624\ub958:",i)}alert(r.message||"\ubb38\uc81c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{y(!1)}},K=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        .only-print-work12 {\n          display: block !important;\n        }\n        .a4-page-template-work12 {\n          display: block !important;\n        }\n        .print-header-work12 {\n          display: flex !important;\n        }\n      }\n    ",document.head.appendChild(e),w("no-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),w("none")},1e3)},100)},J=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        .only-print-work12 {\n          display: block !important;\n        }\n        .print-answer-mode-work12 {\n          display: block !important;\n        }\n        .a4-page-template-work12 {\n          display: block !important;\n        }\n        .print-header-work12 {\n          display: flex !important;\n        }\n      }\n    ",document.head.appendChild(e),w("with-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),w("none")},1e3)},100)},Y=()=>{p(null),x({}),a(""),c(null),u(null),C(!1),S([]),f(!1),y(!1)};return h?(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("div",{className:"quiz-display no-print",children:[(0,Se.jsxs)("div",{className:"quiz-header",children:[(0,Se.jsx)("h2",{className:"no-print",children:"#12.\ub2e8\uc5b4 \ud559\uc2b5 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"quiz-header-buttons no-print",children:[(0,Se.jsx)("button",{onClick:Y,className:"reset-button",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\uc0c8 \ubb38\uc81c \ub9cc\ub4e4\uae30"}),(0,Se.jsxs)("button",{onClick:K,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsx)("span",{children:"\uc778\uc1c4 (\ubb38\uc81c)"})]}),(0,Se.jsxs)("button",{onClick:J,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 6px rgba(240, 147, 251, 0.25)"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsxs)("span",{children:["\uc778\uc1c4 (",(0,Se.jsx)("span",{style:{color:"#FFD600"},children:"\uc815\ub2f5"}),")"]})]})]})]}),(0,Se.jsxs)("div",{className:"quiz-section",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1.18rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"english-to-korean"===h.quizType?"\ub2e4\uc74c \uc601\uc5b4 \ub2e8\uc5b4\uc758 \ud55c\uae00 \ub73b\uc744 \uace0\ub974\uc2dc\uc624.":"\ub2e4\uc74c \ud55c\uae00 \ub73b\uc5d0 \ud574\ub2f9\ud558\ub294 \uc601\uc5b4 \ub2e8\uc5b4\ub97c \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#12"})]}),(0,Se.jsxs)("div",{style:{display:"grid",gridTemplateColumns:h.words.length>10?"1fr 1fr":"1fr",gap:"2rem",marginTop:"1rem"},children:[(0,Se.jsx)("div",{style:{background:"#ffffff",border:"2px solid #000000",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:(0,Se.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{style:{background:"#e3f2fd"},children:[(0,Se.jsx)("th",{style:{border:"1px solid #000000",padding:"0.8rem",fontSize:"1rem",fontWeight:"700",color:"#000000",width:"15%"},children:"No."}),(0,Se.jsx)("th",{style:{border:"1px solid #000000",padding:"0.8rem",fontSize:"1rem",fontWeight:"700",color:"#000000",width:"english-to-korean"===h.quizType?"42.5%":"57.5%"},children:"english-to-korean"===h.quizType?"\uc601\uc5b4 \ub2e8\uc5b4":"\ud55c\uae00 \ub73b"}),(0,Se.jsx)("th",{style:{border:"1px solid #000000",padding:"0.8rem",fontSize:"1rem",fontWeight:"700",color:"#000000",width:"english-to-korean"===h.quizType?"42.5%":"27.5%"},children:"english-to-korean"===h.quizType?"\ud55c\uae00 \ub73b":"\uc601\uc5b4 \ub2e8\uc5b4"})]})}),(0,Se.jsx)("tbody",{children:h.words.slice(0,Math.ceil(h.words.length/2)).map((e,t)=>(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{style:{border:"1px solid #000000",padding:"0.8rem",textAlign:"center",fontSize:"1rem",fontWeight:"500",color:"#000000"},children:t+1}),(0,Se.jsx)("td",{style:{border:"1px solid #000000",padding:"0.8rem",fontSize:"1rem",fontWeight:"500",color:"#000000"},children:"english-to-korean"===h.quizType?e.english:e.korean}),(0,Se.jsx)("td",{style:{border:"1px solid #000000",padding:"0.8rem",fontSize:"1rem",color:"#000000"}})]},t))})]})}),h.words.length>10&&(0,Se.jsx)("div",{style:{background:"#ffffff",border:"2px solid #000000",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:(0,Se.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{style:{background:"#e3f2fd"},children:[(0,Se.jsx)("th",{style:{border:"1px solid #000000",padding:"0.8rem",fontSize:"1rem",fontWeight:"700",color:"#000000",width:"15%"},children:"No."}),(0,Se.jsx)("th",{style:{border:"1px solid #000000",padding:"0.8rem",fontSize:"1rem",fontWeight:"700",color:"#000000",width:"english-to-korean"===h.quizType?"42.5%":"57.5%"},children:"english-to-korean"===h.quizType?"\uc601\uc5b4 \ub2e8\uc5b4":"\ud55c\uae00 \ub73b"}),(0,Se.jsx)("th",{style:{border:"1px solid #000000",padding:"0.8rem",fontSize:"1rem",fontWeight:"700",color:"#000000",width:"english-to-korean"===h.quizType?"42.5%":"27.5%"},children:"english-to-korean"===h.quizType?"\ud55c\uae00 \ub73b":"\uc601\uc5b4 \ub2e8\uc5b4"})]})}),(0,Se.jsx)("tbody",{children:h.words.slice(Math.ceil(h.words.length/2)).map((e,t)=>(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{style:{border:"1px solid #000000",padding:"0.8rem",textAlign:"center",fontSize:"1rem",fontWeight:"500",color:"#000000"},children:t+Math.ceil(h.words.length/2)+1}),(0,Se.jsx)("td",{style:{border:"1px solid #000000",padding:"0.8rem",fontSize:"1rem",fontWeight:"500",color:"#000000"},children:"english-to-korean"===h.quizType?e.english:e.korean}),(0,Se.jsx)("td",{style:{border:"1px solid #000000",padding:"0.8rem",fontSize:"1rem",color:"#000000"}})]},t+Math.ceil(h.words.length/2)))})]})})]})]})]}),"no-answer"===b&&h&&(0,Se.jsx)("div",{className:"only-print-work12",children:(0,Se.jsxs)("div",{className:"a4-page-template-work12",children:[(0,Se.jsx)("div",{className:"a4-page-header-work12",children:(0,Se.jsx)(Pl,{})}),(0,Se.jsx)("div",{className:"a4-page-content-work12",children:(0,Se.jsxs)("div",{className:"quiz-content-work12",children:[(0,Se.jsx)(Fl,{children:"english-to-korean"===h.quizType?"\ub2e4\uc74c \uc601\uc5b4 \ub2e8\uc5b4\uc758 \ud55c\uae00 \ub73b\uc744 \uace0\ub974\uc2dc\uc624.":"\ub2e4\uc74c \ud55c\uae00 \ub73b\uc5d0 \ud574\ub2f9\ud558\ub294 \uc601\uc5b4 \ub2e8\uc5b4\ub97c \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)(Dl,{children:(0,Se.jsx)(zl,{words:h.words,showAnswers:!1,quizType:h.quizType})})]})})]})}),"with-answer"===b&&h&&(0,Se.jsx)("div",{className:"only-print-work12 print-answer-mode-work12",children:(0,Se.jsxs)("div",{className:"a4-page-template-work12",children:[(0,Se.jsx)("div",{className:"a4-page-header-work12",children:(0,Se.jsx)(Pl,{})}),(0,Se.jsx)("div",{className:"a4-page-content-work12",children:(0,Se.jsxs)("div",{className:"quiz-content-work12",children:[(0,Se.jsx)(Fl,{children:"english-to-korean"===h.quizType?"\ub2e4\uc74c \uc601\uc5b4 \ub2e8\uc5b4\uc758 \ud55c\uae00 \ub73b\uc744 \uace0\ub974\uc2dc\uc624.":"\ub2e4\uc74c \ud55c\uae00 \ub73b\uc5d0 \ud574\ub2f9\ud558\ub294 \uc601\uc5b4 \ub2e8\uc5b4\ub97c \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)(Dl,{children:(0,Se.jsx)(zl,{words:h.words,showAnswers:!0,quizType:h.quizType})})]})})]})})]}):(0,Se.jsxs)("div",{className:"quiz-generator",onPaste:async e=>{if("capture"!==s)return;const t=e.clipboardData.items;for(let r=0;r<t.length;r++)if(-1!==t[r].type.indexOf("image")){const s=t[r].getAsFile();if(s){c(s),u(URL.createObjectURL(s)),f(!0);try{const e=await B(s);S(e);const t=e.map(e=>"".concat(e.english,": ").concat(e.korean)).join("\n");a(t),setTimeout(()=>{_.current&&(_.current.style.height="auto",_.current.style.height=_.current.scrollHeight+"px")},0)}catch(n){alert("\ub2e8\uc5b4 \ucd94\ucd9c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{y(!1)}}return void e.preventDefault()}e.preventDefault()},children:[(0,Se.jsxs)("div",{className:"generator-header",children:[(0,Se.jsx)("h2",{children:"[\uc720\ud615#12] \uc601\uc5b4 \ub2e8\uc5b4 \ud559\uc2b5 \ubb38\uc81c \uc0dd\uc131"}),(0,Se.jsx)("p",{children:"\uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uc911\uc694\ud55c \ub2e8\uc5b4\ub4e4\uc744 \ucd94\ucd9c\ud558\uc5ec \ub2e8\uc5b4 \ud559\uc2b5 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"input-type-section",children:[(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"capture"===s,onChange:()=>M("capture")}),(0,Se.jsx)("span",{children:"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30"}),(0,Se.jsx)("button",{type:"button",className:"screenshot-help-btn",onClick:e=>{e.preventDefault(),I(!0)},title:"\ud654\uba74 \ucea1\ucc98 \ubc29\ubc95 \ubcf4\uae30",children:"?"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"image"===s,onChange:()=>M("image")}),(0,Se.jsx)("span",{children:"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \ud30c\uc77c \ucca8\ubd80"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"text"===s,onChange:()=>M("text")}),(0,Se.jsx)("span",{children:"\u270d\ufe0f \uc601\uc5b4 \ub2e8\uc5b4 \ud14d\uc2a4\ud2b8 \ubd99\uc5ec\ub123\uae30"})]})]}),(0,Se.jsxs)("div",{className:"quiz-type-section",style:{margin:"1.5rem 0",padding:"1rem",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},children:[(0,Se.jsx)("h3",{style:{margin:"0 0 1rem 0",fontSize:"1.1rem",color:"#495057"},children:"\ubb38\uc81c \uc720\ud615 \uc120\ud0dd"}),(0,Se.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,Se.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",padding:"0.5rem",borderRadius:"6px",background:"english-to-korean"===j?"#e3f2fd":"transparent",border:"english-to-korean"===j?"2px solid #1976d2":"2px solid #e0e0e0"},children:[(0,Se.jsx)("input",{type:"radio",name:"quizType",value:"english-to-korean",checked:"english-to-korean"===j,onChange:e=>N(e.target.value),style:{marginRight:"0.5rem"}}),(0,Se.jsx)("span",{style:{fontWeight:"english-to-korean"===j?"600":"400",color:"english-to-korean"===j?"#1976d2":"#495057"},children:"\ud83c\uddfa\ud83c\uddf8 \uc601\uc5b4 \u2192 \ud83c\uddf0\ud83c\uddf7 \ud55c\uae00"})]}),(0,Se.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",padding:"0.5rem",borderRadius:"6px",background:"korean-to-english"===j?"#e3f2fd":"transparent",border:"korean-to-english"===j?"2px solid #1976d2":"2px solid #e0e0e0"},children:[(0,Se.jsx)("input",{type:"radio",name:"quizType",value:"korean-to-english",checked:"korean-to-english"===j,onChange:e=>N(e.target.value),style:{marginRight:"0.5rem"}}),(0,Se.jsx)("span",{style:{fontWeight:"korean-to-english"===j?"600":"400",color:"korean-to-english"===j?"#1976d2":"#495057"},children:"\ud83c\uddf0\ud83c\uddf7 \ud55c\uae00 \u2192 \ud83c\uddfa\ud83c\uddf8 \uc601\uc5b4"})]})]})]}),"capture"===s&&(0,Se.jsxs)("div",{className:"input-guide".concat(T?" paste-focused":""),tabIndex:0,onClick:()=>C(!0),onFocus:()=>C(!0),onBlur:()=>C(!1),children:[(0,Se.jsx)("div",{className:"drop-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("div",{className:"drop-text",children:"\uc5ec\uae30\uc5d0 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc73c\uc138\uc694"}),(0,Se.jsxs)("div",{className:"drop-desc",children:["\ud074\ub9ad \ub610\ub294 Tab \ud6c4 ",(0,Se.jsx)("b",{children:"Ctrl+V"}),"\ub85c \ucea1\ucc98 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),d&&(0,Se.jsx)("div",{className:"preview-row",children:(0,Se.jsx)("img",{src:d,alt:"\ucea1\ucc98 \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"})}),(m||g)&&(0,Se.jsx)("div",{style:{color:"#6a5acd",fontWeight:600,marginTop:"0.7rem"},children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),"image"===s&&(0,Se.jsx)("div",{className:"input-guide",children:(0,Se.jsxs)("div",{className:"file-upload-row",children:[(0,Se.jsxs)("label",{htmlFor:"blank-quiz-image",className:"file-upload-btn",children:["\ud30c\uc77c \uc120\ud0dd",(0,Se.jsx)("input",{id:"blank-quiz-image",type:"file",accept:"image/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){c(n),u(URL.createObjectURL(n)),f(!0);try{const e=await B(n);S(e);const t=e.map(e=>"".concat(e.english,": ").concat(e.korean)).join("\n");a(t),setTimeout(()=>{_.current&&(_.current.style.height="auto",_.current.style.height=_.current.scrollHeight+"px")},0)}catch(r){alert("\ub2e8\uc5b4 \ucd94\ucd9c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{y(!1)}}},style:{display:"none"}})]}),(0,Se.jsx)("span",{className:"file-upload-status",children:l?l.name:"\uc120\ud0dd\ub41c \ud30c\uc77c \uc5c6\uc74c"}),d&&(0,Se.jsx)("img",{src:d,alt:"\uc5c5\ub85c\ub4dc \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"}),(m||g)&&(0,Se.jsx)("div",{className:"loading-text",children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]})}),(0,Se.jsxs)("div",{className:"input-section",children:[(0,Se.jsxs)("div",{className:"input-label-row",children:[(0,Se.jsx)("label",{htmlFor:"word-study-text",className:"input-label",children:"text"===s?"\uc601\uc5b4 \ub2e8\uc5b4 \ud14d\uc2a4\ud2b8 \ubd99\uc5ec\ub123\uae30: 50\ub2e8\uc5b4 \ubbf8\ub9cc \uc785\ub825 \uac00\ub2a5":(0,Se.jsxs)(Se.Fragment,{children:["\ucd94\ucd9c\ub41c \ub2e8\uc5b4 \ubaa9\ub85d: ",(0,Se.jsx)("span",{style:{color:"red"},children:"(\ubb38\uc81c \ucd9c\uc81c\ub294 50\uac1c \ub2e8\uc5b4\uae4c\uc9c0 \uac00\ub2a5\ud569\ub2c8\ub2e4.)"})]})}),"text"===s&&o.length<50&&(0,Se.jsx)("span",{className:"warning",children:"\u26a0\ufe0f \ub354 \ub9ce\uc740 \ub2e8\uc5b4\ub97c \uc785\ub825\ud558\uba74 \ub354 \uc88b\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("textarea",{id:"word-study-text",ref:_,value:o,onChange:e=>{a(e.target.value),_.current&&(_.current.style.height="auto",_.current.style.height=_.current.scrollHeight+"px")},placeholder:"text"===s?"\uc601\uc5b4 \ub2e8\uc5b4\uc640 \ud55c\uae00 \ub73b\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.\n\n\uc9c0\uc6d0\ud558\ub294 \ud615\uc2dd:\napple: \uc0ac\uacfc\nbook - \ucc45\ncomputer \ucef4\ud4e8\ud130\nhappy : \ud589\ubcf5\ud55c\nstudy - \uacf5\ubd80\ud558\ub2e4\nin the face of: ~\uc5d0 \uc9c1\uba74\ud558\uc5ec\ngive up: \ud3ec\uae30\ud558\ub2e4\nreluctant to do: ~\ud558\uae30\ub97c \uaebc\ub9ac\ub2e4\n\n\ub610\ub294 \uc601\uc5b4 \ub2e8\uc5b4\ub9cc \uc785\ub825\ud574\ub3c4 \ub429\ub2c8\ub2e4:\napple\nbook\ncomputer\nhappy\nstudy\nin the face of\ngive up\nreluctant to do\nreflect on\nturn into":"\uc774\ubbf8\uc9c0\uc5d0\uc11c \ucd94\ucd9c\ub41c \ub2e8\uc5b4\ub4e4\uc774 \uc5ec\uae30\uc5d0 \ud45c\uc2dc\ub429\ub2c8\ub2e4.",className:"text-input",rows:8,style:{overflow:"hidden",resize:"none"},disabled:"image"===s&&!o}),(0,Se.jsxs)("div",{className:"text-info",children:[(0,Se.jsxs)("span",{children:["\uae00\uc790 \uc218: ",o.length,"\uc790"]}),k.length>0&&(0,Se.jsxs)("span",{style:{marginLeft:"1rem",color:"#1976d2",fontWeight:"600"},children:["\ucd94\ucd9c\ub41c \ub2e8\uc5b4: ",k.length,"\uac1c"]})]})]}),(0,Se.jsx)("button",{onClick:async()=>{if(console.log("\ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778:",{userData:e,uid:null===e||void 0===e?void 0:e.uid,loading:n}),n)return void alert("\ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if(!e||!e.uid)return console.error("\ub85c\uadf8\uc778 \uc0c1\ud0dc \uc624\ub958:",{userData:e,loading:n}),void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.");const t=z.find(e=>"12"===e.id);if(!t)return void alert("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=t.points;F<r?alert("\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. \ud604\uc7ac ".concat(F.toLocaleString(),"P, \ud544\uc694 ").concat(r.toLocaleString(),"P")):(P(r),R(!0))},disabled:m||!o.trim(),className:"generate-button",children:"\uc601\uc5b4 \ub2e8\uc5b4 \ubb38\uc81c \uc0dd\uc131\ud558\uae30"}),(m||g)&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("span",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:g?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":"\ud83d\udccb \ubb38\uc81c \uc0dd\uc131 \uc911..."})]})}),(0,Se.jsx)(yo,{isOpen:A,onClose:()=>R(!1),onConfirm:()=>{R(!1),H()},workTypeName:"\ub2e8\uc5b4 \ud559\uc2b5 \ubb38\uc81c \uc0dd\uc131",pointsToDeduct:O,userCurrentPoints:F,remainingPoints:F-O}),(0,Se.jsx)(go,{isOpen:E,onClose:()=>I(!1)})]})};const Ml=new class{constructor(){this.proxyUrl=void 0,this.timeout=void 0,this.proxyUrl="https://edgeenglish.net/secure-api-proxy.php",this.timeout=6e4}async callOpenAI(e){try{console.log("\ud83e\udd16 OpenAI \ud504\ub85d\uc2dc \uc11c\ubc84 \ud638\ucd9c \uc911...");const t=new AbortController,n=setTimeout(()=>t.abort(),this.timeout),r=await fetch(this.proxyUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),signal:t.signal});if(clearTimeout(n),!r.ok){const e=await r.text();throw console.error("\u274c API \ud504\ub85d\uc2dc \uc11c\ubc84 \uc624\ub958:",r.status,e),new Error("API \ud504\ub85d\uc2dc \uc11c\ubc84 \uc624\ub958: ".concat(r.status," - ").concat(e))}const s=await r.json();return console.log("\u2705 OpenAI \ud504\ub85d\uc2dc \uc11c\ubc84 \uc751\ub2f5 \uc131\uacf5"),s}catch(t){if(console.error("\u274c OpenAI \ud504\ub85d\uc2dc \uc11c\ubc84 \ud638\ucd9c \uc2e4\ud328:",t),"AbortError"===t.name)throw new Error("\uc694\uccad \uc2dc\uac04 \ucd08\uacfc (60\ucd08)");throw t}}async generateBlankFillQuiz(e){const t=e.split(/[.!?]+/).filter(e=>e.trim().length>0),n={model:"gpt-4o",messages:[{role:"system",content:"You are an expert English teacher creating blank-fill problems.\n\nCRITICAL RULES:\n1. Respond ONLY in valid JSON format\n2. Select exactly ONE word from EACH sentence provided\n3. Never skip any sentence - process ALL sentences\n4. Choose meaningful words (nouns, verbs, adjectives) not function words\n5. The number of selected words must equal the number of sentences\n\nYou will receive a list of sentences. Process each sentence in order and select the most important word from each one."},{role:"user",content:"\n\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c\ub97c \uc0dd\uc131\ud574\uc8fc\uc138\uc694.\n\n\uaddc\uce59:\n- \uac01 \ubb38\uc7a5\uc5d0\uc11c 1\uac1c\uc529 \ub2e8\uc5b4\ub97c \uc120\ud0dd (\ucd1d ".concat(t.length,"\uac1c)\n- \ubaa8\ub4e0 \ubb38\uc7a5\uc5d0\uc11c 1\uac1c\uc529 \uc120\ud0dd (\uac74\ub108\ub6f0\uc9c0 \ub9d0 \uac83)\n- JSON \ud615\uc2dd\uc73c\ub85c\ub9cc \uc751\ub2f5\n\n\uc785\ub825\ub41c \uc601\uc5b4 \ubcf8\ubb38:\n").concat(e)}],max_tokens:2e3,temperature:.1},r=(await this.callOpenAI(n)).choices[0].message.content.match(/\{[\s\S]*\}/);if(!r)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let s;try{s=JSON.parse(r[0])}catch(i){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!s.blankedText||!s.correctAnswers||!Array.isArray(s.correctAnswers))throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");return s}async generateMainIdeaQuiz(e){const t={model:"gpt-4o",messages:[{role:"user",content:"\n\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc758 \uc8fc\uc81c\ub97c \ud30c\uc545\ud558\uace0 \uac1d\uad00\uc2dd \ubb38\uc81c\ub97c \ub9cc\ub4e4\uc5b4\uc8fc\uc138\uc694.\n\n".concat(e,'\n\n\uc911\uc694 \uaddc\uce59:\n- answerIndex\ub294 0~4 \uc0ac\uc774\uc758 \uc22b\uc790 (\ubc30\uc5f4 \uc778\ub371\uc2a4)\n- answerTranslation\uc740 \ubc18\ub4dc\uc2dc options[answerIndex]\uc758 \uc815\ud655\ud55c \ubc88\uc5ed\n- optionTranslations\ub294 \ubaa8\ub4e0 \uc120\ud0dd\uc9c0\uc758 \ud574\uc11d \ubc30\uc5f4 (options\uc640 \ub3d9\uc77c\ud55c \uc21c\uc11c)\n- \uc608\uc2dc: answerIndex=1, options[1]="The future is uncertain but promising." \u2192 answerTranslation="\ubbf8\ub798\ub294 \ubd88\ud655\uc2e4\ud558\uc9c0\ub9cc \ud76c\ub9dd\uc801\uc785\ub2c8\ub2e4."\n- optionTranslations[1]\ub3c4 "\ubbf8\ub798\ub294 \ubd88\ud655\uc2e4\ud558\uc9c0\ub9cc \ud76c\ub9dd\uc801\uc785\ub2c8\ub2e4."\uac00 \ub418\uc5b4\uc57c \ud568\n- \ubaa8\ub4e0 \ud574\uc11d\uc774 \uc815\ud655\ud788 \uc77c\uce58\ud574\uc57c \ud568')}],max_tokens:2e3,temperature:.3},n=(await this.callOpenAI(t)).choices[0].message.content.match(/\{[\s\S]*\}/);if(!n)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let r;try{r=JSON.parse(n[0])}catch(s){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!r.passage||!r.options||"number"!==typeof r.answerIndex||!r.translation||!r.answerTranslation||!r.optionTranslations)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");return r}async generateVocabularyQuiz(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n={model:"gpt-4o",messages:[{role:"user",content:"\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uae00\uc758 \uc8fc\uc81c\uc640 \uac00\uc7a5 \ubc00\uc811\ud55c, \uc758\ubbf8 \uc788\ub294 \ub2e8\uc5b4(\uba85\uc0ac, \ud0a4\uc6cc\ub4dc \ub4f1) 1\uac1c\ub97c \uc120\uc815\ud574.\n\n1. \ubc18\ub4dc\uc2dc \ubcf8\ubb38\uc5d0 \uc2e4\uc81c\ub85c \ub4f1\uc7a5\ud55c \ub2e8\uc5b4(\ucca0\uc790, \ud615\ud0dc, \ub300\uc18c\ubb38\uc790\uae4c\uc9c0 \ub3d9\uc77c)\ub97c \uc815\ub2f5\uc73c\ub85c \uc120\uc815\ud574\uc57c \ud574. \ubcc0\ud615, \ub300\uccb4, \ub3d9\uc758\uc5b4, \uc5b4\ud615 \ubcc0\ud654 \uc5c6\uc774 \ubcf8\ubb38\uc5d0 \uc788\ub358 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud574\uc57c \ud574.\n\n2. \ubb38\uc81c\uc758 \ubcf8\ubb38(\ube48\uce78 \ud3ec\ud568)\uc740 \ubc18\ub4dc\uc2dc \uc0ac\uc6a9\uc790\uac00 \uc785\ub825\ud55c \uc804\uccb4 \ubcf8\ubb38\uacfc \uc644\uc804\ud788 \ub3d9\uc77c\ud574\uc57c \ud558\uba70, \uc77c\ubd80 \ubb38\uc7a5\ub9cc \ucd94\ucd9c\ud558\uac70\ub098, \ubb38\uc7a5 \uc21c\uc11c\ub97c \ubc14\uafb8\uac70\ub098, \ubcf8\ubb38\uc744 \uc694\uc57d/\ubcc0\ud615\ud574\uc11c\ub294 \uc548 \ub3fc. \uc624\uc9c1 \uc815\ub2f5 \ub2e8\uc5b4\ub9cc ()\ub85c \uce58\ud658\ud574.\n\n3. \uc785\ub825\ub41c \ubcf8\ubb38\uc5d0 \uc774\ubbf8 ()\ub85c \ubb36\uc778 \ub2e8\uc5b4\ub098 \uad6c\uac00 \uc788\ub2e4\uba74, \uadf8 \ubd80\ubd84\uc740 \uc808\ub300 \ube48\uce78 \ucc98\ub9ac \ub300\uc0c1\uc73c\ub85c \uc0bc\uc9c0 \ub9c8\uc138\uc694. \ubc18\ub4dc\uc2dc \uad04\ud638 \ubc16\uc5d0 \uc788\ub294 \ub2e8\uc5b4\ub9cc \ube48\uce78 \ud6c4\ubcf4\ub85c \uc120\uc815\ud558\uc138\uc694.\n\n4. \uc544\ub798 \ub2e8\uc5b4/\uad6c\ub294 \uc808\ub300 \ube48\uce78 \ucc98\ub9ac\ud558\uc9c0 \ub9c8\uc138\uc694: ".concat(t.length>0?t.join(", "):"\uc5c6\uc74c",'\n\n5. \uc815\ub2f5(\ud575\uc2ec\ub2e8\uc5b4) + \uc624\ub2f5(\ube44\uc2b7\ud55c \ud488\uc0ac\uc758 \ub2e8\uc5b4 4\uac1c, \uc758\ubbf8\ub294 \ub2e4\ub984) \ucd1d 5\uac1c\ub97c \uc0dd\uc131\ud574.\n\n6. \uc815\ub2f5\uc758 \uc704\uce58\ub294 1~5\ubc88 \uc911 \ub79c\ub364.\n\n7. JSON \ud615\uc2dd\uc73c\ub85c \uc751\ub2f5\ud558\uc138\uc694:\n\n{\n  "options": ["\uc120\ud0dd\uc9c01", "\uc120\ud0dd\uc9c02", "\uc120\ud0dd\uc9c03", "\uc120\ud0dd\uc9c04", "\uc120\ud0dd\uc9c05"],\n  "answerIndex": 0\n}\n\n\uc785\ub825\ub41c \uc601\uc5b4 \ubcf8\ubb38:\n').concat(e)}],max_tokens:1200,temperature:.7},r=(await this.callOpenAI(n)).choices[0].message.content.match(/\{[\s\S]*\}/);if(!r)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let s;try{s=JSON.parse(r[0])}catch(i){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}return s}},Bl=e=>e.trim().split(/\s+/).filter(e=>e.length>0).length,Ul=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(e=>{let t=e.split(/[.!?]+/).map(e=>e.trim()).filter(e=>e.length>0);if(t.length<2&&(t=e.split(";").map(e=>e.trim()).filter(e=>e.length>0)),t.length<2)return[e.trim()];const n=e.split(";").map(e=>e.trim()).filter(e=>e.length>0);return n.length>t.length&&(t=n),t.map(e=>e.match(/[.!?]$/)?e:e+".")})(e),{validSentences:r,skippedSentences:s}=(e=>{const t=[],n=[];return e.forEach(e=>{const r=Bl(e);r>=5&&r<=50?t.push(e):n.push(e)}),{validSentences:t,skippedSentences:n}})(n);console.log("\ubb38\uc7a5 \ubd84\uc11d (AI \ud638\ucd9c \uc804):",{"\uc804\uccb4\ubb38\uc7a5\uc218":n.length,"\uc720\ud6a8\ubb38\uc7a5\uc218":r.length,"\uc81c\uc678\ubb38\uc7a5\uc218":s.length,"\uc81c\uc678\ub41c\ubb38\uc7a5\ub4e4":s.map(e=>"".concat(e.substring(0,30),"... (").concat(Bl(e),"\uac1c \ub2e8\uc5b4)"))});const i=r.map((e,t)=>"\ubb38\uc7a5 ".concat(t+1,': "').concat(e,'"')).join("\n\n"),o="\ub2e4\uc74c ".concat(r.length,"\uac1c \ubb38\uc7a5\uc5d0\uc11c \uac01 \ubb38\uc7a5\ub9c8\ub2e4 \ud575\uc2ec \ub2e8\uc5b4 1\uac1c\uc529\uc744 \uc120\ud0dd\ud558\uc138\uc694.\n\n**\ubb38\uc7a5 \ubaa9\ub85d:**\n").concat(i,"\n\n**\uc791\uc5c5 \ubc29\ubc95:**\n1. \ubb38\uc7a5 1\uc744 \uc77d\uace0 \u2192 \ud575\uc2ec \ub2e8\uc5b4 1\uac1c \uc120\ud0dd\n2. \ubb38\uc7a5 2\ub97c \uc77d\uace0 \u2192 \ud575\uc2ec \ub2e8\uc5b4 1\uac1c \uc120\ud0dd\n3. ... \ubaa8\ub4e0 \ubb38\uc7a5 \ucc98\ub9ac\n\n**\uc911\uc694 \uaddc\uce59:**\n- \uac01 \ubb38\uc7a5\uc5d0\uc11c \uc815\ud655\ud788 1\uac1c\uc529\ub9cc \uc120\ud0dd\n- \ubaa8\ub4e0 \ubb38\uc7a5\uc744 \ucc98\ub9ac (\uac74\ub108\ub6f0\uc9c0 \uc54a\uc74c)\n- JSON \ud615\uc2dd\uc73c\ub85c\ub9cc \uc751\ub2f5\n\n\uc785\ub825\ub41c \uc601\uc5b4 \ubcf8\ubb38:\n").concat(e);try{const n={model:"gpt-4o",messages:[{role:"system",content:"You are an expert English teacher creating blank-fill problems.\n\nCRITICAL RULES:\n1. You will receive ".concat(r.length," sentences\n2. Select exactly ONE word from each sentence\n3. Process ALL ").concat(r.length," sentences - no skipping\n4. Return exactly ").concat(r.length,' words total\n\nPROCESSING METHOD:\n- Read each sentence carefully\n- Select the most important word (noun, verb, or adjective)\n- Avoid articles (a, an, the), prepositions (in, on, at), conjunctions (and, or, but)\n- Each sentence must contribute exactly 1 word\n\nOUTPUT FORMAT:\nReturn JSON only:\n{\n  "blankedText": "text with (_______________) for selected words",\n  "correctAnswers": ["word1", "word2", ...]\n}\n\nRemember: ').concat(r.length," sentences = exactly ").concat(r.length," words!")},{role:"user",content:o}],max_tokens:2e3,temperature:.01},s=await Ml.callOpenAI(n);console.log("AI \uc751\ub2f5 \uc804\uccb4:",s),console.log("AI \uc751\ub2f5 \ub0b4\uc6a9:",s.choices[0].message.content);const i=s.choices[0].message.content.match(/\{[\s\S]*\}/);if(!i)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let d;console.log("\ucd94\ucd9c\ub41c JSON:",i[0]);try{d=JSON.parse(i[0]),console.log("\ud30c\uc2f1\ub41c \uacb0\uacfc:",d)}catch(l){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!d.blankedText||!d.correctAnswers||!Array.isArray(d.correctAnswers))throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");const u=d.correctAnswers.length;if(console.log("\ubb38\uc7a5 \uc218 \uac80\uc99d:",{validSentencesCount:r.length,selectedWordsCount:u,"\uc77c\uce58\uc5ec\ubd80":r.length===u}),r.length!==u){if(console.warn("\u26a0\ufe0f \ubb38\uc7a5 \uc218 \ubd88\uc77c\uce58: ".concat(r.length,"\uac1c \ubb38\uc7a5\uc5d0\uc11c ").concat(u,"\uac1c \ub2e8\uc5b4 \uc120\ud0dd\ub428")),!(t<3))throw new Error("\u274c \uc2ec\uac01\ud55c \uc624\ub958: AI\uac00 ".concat(r.length,"\uac1c \ubb38\uc7a5 \uc911 ").concat(u,"\uac1c\ub9cc \ucc98\ub9ac\ud588\uc2b5\ub2c8\ub2e4. \n        \n        \ubb38\uc7a5 \ubaa9\ub85d:\n        ").concat(r.map((e,t)=>"".concat(t+1,". ").concat(e)).join("\n"),"\n        \n        \uc120\ud0dd\ub41c \ub2e8\uc5b4: ").concat(d.correctAnswers.join(", "),"\n        \n        \ubaa8\ub4e0 \ubb38\uc7a5\uc5d0\uc11c \ub2e8\uc5b4\ub97c \uc120\ud0dd\ud574\uc57c \ud569\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."));{console.log("\ud83d\udd04 \uc7ac\uc2dc\ub3c4 ".concat(t+1,"/3..."));const n="\ub2e4\uc2dc \uc2dc\ub3c4: \ub2e4\uc74c ".concat(r.length,"\uac1c \ubb38\uc7a5\uc5d0\uc11c \uac01 \ubb38\uc7a5\ub9c8\ub2e4 \uc815\ud655\ud788 1\uac1c\uc529 \ub2e8\uc5b4\ub97c \uc120\ud0dd\ud558\uc138\uc694.\n\n\ubb38\uc7a5 \ubaa9\ub85d:\n").concat(r.map((e,t)=>"".concat(t+1,". ").concat(e)).join("\n"),'\n\nJSON \ud615\uc2dd\uc73c\ub85c \uc751\ub2f5:\n{\n  "blankedText": "\ube48\uce78\uc774 \ud3ec\ud568\ub41c \uc804\uccb4 \ubcf8\ubb38",\n  "correctAnswers": ["\ub2e8\uc5b41", "\ub2e8\uc5b42", ...]\n}\n\n\uc785\ub825\ub41c \uc601\uc5b4 \ubcf8\ubb38:\n').concat(e),s={model:"gpt-4o",messages:[{role:"system",content:"You are an expert English teacher. Select exactly ONE word from each sentence. Process all ".concat(r.length," sentences. Return JSON format only.")},{role:"user",content:n}],max_tokens:2e3,temperature:.01},i=(await Ml.callOpenAI(s)).choices[0].message.content.match(/\{[\s\S]*\}/);if(!i)return Ul(e,t+1);try{const e=JSON.parse(i[0]);if(!(e.blankedText&&e.correctAnswers&&Array.isArray(e.correctAnswers)&&e.correctAnswers.length===r.length))throw new Error("\uc7ac\uc2dc\ub3c4 \uacb0\uacfc\uac00 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");console.log("\u2705 \uc7ac\uc2dc\ub3c4 \uc131\uacf5 - \ubaa8\ub4e0 \ubb38\uc7a5\uc5d0\uc11c \ub2e8\uc5b4 \uc120\ud0dd \uc644\ub8cc"),d=e}catch(c){return console.error("\uc7ac\uc2dc\ub3c4 JSON \ud30c\uc2f1 \uc624\ub958:",c),Ul(e,t+1)}}}console.log("\ud83d\udd0d 2\ub2e8\uacc4: \ubb38\uc7a5\ubcc4 \ub2e8\uc5b4 \ub9e4\ud551 \uac80\uc99d");const h=d.correctAnswers,p=[];for(let e=0;e<r.length;e++){var a;const t=r[e],n=t.toLowerCase().split(/\s+/),s=h.map(e=>({word:e,found:n.some(t=>t.includes(e.toLowerCase())||e.toLowerCase().includes(t))})),i=null===(a=s.find(e=>e.found))||void 0===a?void 0:a.word;p.push({sentenceIndex:e,sentence:t,matchedWord:i,allWordsInSentence:n,searchResults:s})}console.log("\ud83d\udcca \ubb38\uc7a5-\ub2e8\uc5b4 \ub9e4\ud551 \uacb0\uacfc:"),p.forEach(e=>{console.log("\ubb38\uc7a5 ".concat(e.sentenceIndex+1,': "').concat(e.sentence,'"')),console.log("  \uc120\ud0dd\ub41c \ub2e8\uc5b4: ".concat(e.matchedWord||"\uc5c6\uc74c")),console.log("  \uac80\uc0c9 \uacb0\uacfc:",e.searchResults)});const m=p.filter(e=>!e.matchedWord);if(m.length>0){if(console.warn("\u26a0\ufe0f ".concat(m.length,"\uac1c \ubb38\uc7a5\uc5d0\uc11c \ub2e8\uc5b4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c")),t<3)return console.log("\ud83d\udd04 \ub9e4\ud551 \uc2e4\ud328\ub85c \uc778\ud55c \uc7ac\uc2dc\ub3c4..."),Ul(e,t+1);throw new Error("\u274c \ub9e4\ud551 \uc2e4\ud328: ".concat(m.length,"\uac1c \ubb38\uc7a5\uc5d0\uc11c \uc120\ud0dd\ub41c \ub2e8\uc5b4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."))}console.log("\ud83d\udd0d 3\ub2e8\uacc4: \ube48\uce78 \ubcf8\ubb38 \uac80\uc99d");const f=e.toLowerCase(),g=d.blankedText.toLowerCase(),y=d.correctAnswers.every(e=>{const t=e.toLowerCase();if(!f.includes(t)){console.warn('\u274c \uc815\ub2f5 "'.concat(e,'"\uc774 \uc6d0\ubcf8\uc5d0 \uc5c6\uc74c'));if(!new RegExp("\\b".concat(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"\\b")).test(f))return console.warn('\u274c \ub2e8\uc5b4 \uacbd\uacc4 \uac80\uc0c9\uc73c\ub85c\ub3c4 "'.concat(e,'"\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c')),!1}return!0});if(!y)throw new Error("\uc120\ud0dd\ub41c \ub2e8\uc5b4 \uc911 \uc77c\ubd80\uac00 \uc6d0\ubcf8 \ubcf8\ubb38\uc5d0 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");const v=f.replace(/[^\w\s]/g,"").replace(/\s+/g," "),x=g.replace(/\(_______________\)/g,"").replace(/[^\w\s]/g,"").replace(/\s+/g," ");if(x!==v){if(console.warn("\u26a0\ufe0f \ube48\uce78 \ubcf8\ubb38\uc774 \uc6d0\ubcf8\uacfc \uc77c\uce58\ud558\uc9c0 \uc54a\uc74c"),console.log("\uc6d0\ubcf8:",v.substring(0,100)),console.log("\ube48\uce78:",x.substring(0,100)),!y||!d.blankedText.includes("(_______________)"))throw new Error("\ube48\uce78 \ubcf8\ubb38\uc774 \uc6d0\ubcf8 \ubcf8\ubb38\uacfc \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. AI \uc751\ub2f5 \uc624\ub958\uc785\ub2c8\ub2e4.");console.log("\u2705 \uc815\ub2f5\uc740 \ubaa8\ub450 \uc874\uc7ac\ud558\uace0 \ube48\uce78 \ud45c\uc2dc\ub3c4 \uc788\uc74c - \ud5c8\uc6a9")}console.log("\ubc88\uc5ed \uc2dc\uc791...");const b=await(async e=>{try{console.log("\ud83c\udf10 \ubc88\uc5ed \uc2dc\uc791:",e.substring(0,50)+"...");const t={model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a helpful assistant that provides natural Korean translations."},{role:"user",content:"\ub2e4\uc74c \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\ub85c \ubc88\uc5ed\ud558\uc138\uc694.\n\n\ubc88\uc5ed \uc694\uad6c\uc0ac\ud56d:\n- \uc790\uc5f0\uc2a4\ub7fd\uace0 \ub9e4\ub044\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\n- \uc6d0\ubb38\uc758 \uc758\ubbf8\ub97c \uc815\ud655\ud788 \uc804\ub2ec\n- \ubb38\ud559\uc801\uc774\uace0 \uc77d\uae30 \uc26c\uc6b4 \ubb38\uccb4\n\n\ubc88\uc5ed\ub9cc \ubc18\ud658\ud558\uc138\uc694 (\ub2e4\ub978 \ud14d\uc2a4\ud2b8 \uc5c6\uc774):\n\n".concat(e)}],temperature:.3,max_tokens:800},n=await Ml.callOpenAI(t);if(console.log("\u2705 \ubc88\uc5ed \uc644\ub8cc"),!n.choices||!n.choices[0]||!n.choices[0].message)throw new Error("API \uc751\ub2f5 \ud615\uc2dd \uc624\ub958");return n.choices[0].message.content.trim()}catch(t){throw console.error("\u274c \ubc88\uc5ed \uc624\ub958:",t),t}})(e);if(d.translation=b,console.log("\ucd5c\uc885 \uac80\uc99d \uc804 \uacb0\uacfc:",{blankedText:d.blankedText,correctAnswers:d.correctAnswers,translation:d.translation}),!d.blankedText||!d.correctAnswers||!d.translation)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");return console.log("AI \uc751\ub2f5 \uac80\uc99d \uc644\ub8cc, \ubc18\ud658\ud560 \uacb0\uacfc:",d),d}catch(d){throw console.error("AI \ubb38\uc81c \uc0dd\uc131 \uc624\ub958:",d),d}},Wl=async e=>{var t;const n={model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"\uc601\uc5b4\ubb38\uc81c\ub85c \uc0ac\uc6a9\ub418\ub294 \ubcf8\ubb38\uc774\uc57c.\n\uc774 \uc774\ubbf8\uc9c0\uc758 \ub0b4\uc6a9\uc744 \uc218\uc791\uc5c5\uc73c\ub85c \uc815\ud655\ud788 \uc77d\uace0, \uc601\uc5b4 \ubcf8\ubb38\ub9cc \ucd94\ub824\ub0b4\uc11c \ubcf4\uc5ec\uc918.\n\uae00\uc790\ub294 \uc778\uc1c4\uae00\uc528\uccb4 \uc774\uc678\uc5d0 \uc190\uae00\uc528\ub098 \uc6d0, \ubc11\uc904 \ub4f1 \ud45c\uc2dc\ub418\uc5b4\uc788\ub294 \uac83\uc740 \ubb34\uc2dc\ud574. \n\ubcf8\ubb38\uc911\uc5d0 \uc6d0\ubb38\uc790 1, 2, 3... \ub4f1\uc73c\ub85c \ud45c\uc2dc\ub41c\uac74 \uc81c\uac70\ud574\uc918. \n\uc6d0\ubb38\uc790 \uc81c\uac70\ud6c4 \uc904\uc744 \ubc14\uafb8\uac70\ub098 \ubb38\ub2e8\uc744 \ubc14\uafb8\uc9c0\ub9d0\uace0, \uc804\uccb4\uac00 \ud55c \ubb38\ub2e8\uc73c\ub85c \uad6c\uc131\ud574\uc918. \n\uc601\uc5b4 \ubcf8\ubb38\ub9cc, \uc544\ubb34\ub7f0 \uc124\uba85\uc774\ub098 \uc548\ub0b4\ubb38 \uc5c6\uc774, \ud55c \ubb38\ub2e8\uc73c\ub85c\ub9cc \ucd9c\ub825\ud574\uc918."},{type:"image_url",image_url:{url:await(t=e,new Promise((e,n)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=n,r.readAsDataURL(t)}))}}]}],max_tokens:2048};return(await Ml.callOpenAI(n)).choices[0].message.content.trim()},Vl=29.7,ql=.5,Hl=1,Kl=.8,Jl=.3,Yl=.8,Ql=.3;function Gl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;if(!e||0===e.length)return.3;const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.7,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;if(!e||0===e.length)return 0;const s=Math.floor(r/.25);return Math.ceil(e.length/s)*(t*n/37.8)}(e,n,1.7);return r+16*t/37.8/2}const $l=()=>{const{userData:e,loading:t}=Te(),[n,s]=(0,r.useState)("text"),[i,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(""),[x,b]=(0,r.useState)(!1),[w,j]=(0,r.useState)("none"),N=!!u&&function(e){if(!e)return!1;const t=Vl-ql-Hl,n=Kl+Jl,r=Gl(e.blankedText,1,16),s=Yl+Ql,i=Gl(e.translation||"",1,16),o=n+r+s+i,a=o>t-3;return console.log("\ud83d\udccf \uc720\ud615#13 \ub3d9\uc801 \ud398\uc774\uc9c0 \ubd84\ud560 \uacc4\uc0b0:",{availableHeight:t.toFixed(2)+"cm",instructionHeight:n.toFixed(2)+"cm",passageHeight:r.toFixed(2)+"cm",translationHeaderHeight:s.toFixed(2)+"cm",translationHeight:i.toFixed(2)+"cm",totalHeight:o.toFixed(2)+"cm",safetyMargin:3..toFixed(2)+"cm",effectiveAvailableHeight:(t-3).toFixed(2)+"cm",shouldSplit:a}),a}(u),k=(0,r.useRef)(null),[S,_]=(0,r.useState)(!1),[T,C]=(0,r.useState)(!1),[E,I]=(0,r.useState)(!1),[A,R]=(0,r.useState)(0),[O,P]=(0,r.useState)(0),[F,D]=(0,r.useState)([]);(0,r.useEffect)(()=>{t||(async()=>{try{var n;const r=await(0,vo.getWorkTypePoints)();D(r);const s=(null===(n=r.find(e=>"13"===e.id))||void 0===n?void 0:n.points)||0;if(R(s),!t&&e&&e.uid){const t=await(0,vo.MC)(e.uid);P(t)}}catch(r){console.error("\ud3ec\uc778\ud2b8 \ucd08\uae30\ud654 \uc624\ub958:",r)}})()},[null===e||void 0===e?void 0:e.uid,t]),(0,r.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,r.useEffect)(()=>{u&&window.scrollTo(0,0)},[u]);const z=e=>{s(e),o(""),l(null),d(null),h(null),v(""),b(!1)},L=[],M=/\(([^)]+)\)/g;let B;for(;null!==(B=M.exec(i));)L.push(B[1].trim());const U=async()=>{if(null===e||void 0===e||!e.uid)return;let t="";m(!0),h(null),v(""),b(!1);let r=0;try{const s=F.find(e=>"13"===e.id);if(!s)throw new Error("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const o=await(0,vo.ev)(e.uid,"13",s.name,e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790");if(!o.success)throw new Error(o.error||"\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");if(r=o.deductedPoints,P(o.remainingPoints),"text"===n){if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}else if("image"===n&&a)t=await Wl(a);else{if("capture"!==n)throw new Error("\uc774\ubbf8\uc9c0\ub97c \ucca8\ubd80\ud574\uc8fc\uc138\uc694.");if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}if(!t.trim())throw new Error("\ucd94\ucd9c\ub41c \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const l=await Ul(t);console.log("\uc0dd\uc131\ub41c \ud034\uc988 \ub370\uc774\ud130:",l),console.log("quizData.translation:",l.translation),h(l)}catch(s){if(console.error("\ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c \uc0dd\uc131 \uc624\ub958:",s),r>0&&null!==e&&void 0!==e&&e.uid)try{await(0,vo.Lw)(e.uid,r,"\ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c \uc0dd\uc131",e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790","\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\ub85c \uc778\ud55c \ud3ec\uc778\ud2b8 \ud658\ubd88"),P(e=>e+r)}catch(o){console.error("\ud3ec\uc778\ud2b8 \ud658\ubd88 \uc624\ub958:",o)}alert(s.message||"\ubb38\uc81c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}},W=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),j("no-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),j("none")},1e3)},100)},V=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),j("with-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),j("none")},1e3)},100)},q=()=>{h(null),v(""),b(!1),o(""),l(null),d(null),_(!1),m(!1),g(!1),j("none"),I(!1),R(0),window.scrollTo(0,0)};var H,K;return u?(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("div",{className:"quiz-display no-print",children:[(0,Se.jsxs)("div",{className:"quiz-header",children:[(0,Se.jsx)("h2",{className:"no-print",children:"#13. \ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c (\ub2e8\uc5b4-\uc8fc\uad00\uc2dd)"}),(0,Se.jsxs)("div",{className:"quiz-header-buttons no-print",children:[(0,Se.jsx)("button",{onClick:q,className:"reset-button",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\uc0c8 \ubb38\uc81c \ub9cc\ub4e4\uae30"}),(0,Se.jsxs)("button",{onClick:W,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsx)("span",{children:"\uc778\uc1c4 (\ubb38\uc81c)"})]}),(0,Se.jsxs)("button",{onClick:V,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 6px rgba(240, 147, 251, 0.25)"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsxs)("span",{children:["\uc778\uc1c4 (",(0,Se.jsx)("span",{style:{color:"#FFD600"},children:"\uc815\ub2f5"}),")"]})]})]})]}),(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1.18rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"0",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ub2e8\uc5b4\ub97c \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#13"})]}),(0,Se.jsx)("div",{className:"problem-text",style:{fontSize:"1.08rem",lineHeight:1.7,margin:"1.2rem 0",borderRadius:"8px",padding:"1.2rem",fontFamily:"inherit"},children:u.blankedText}),x&&(0,Se.jsx)("div",{className:"problem-answer no-print",style:{marginTop:"1.2rem",color:"#1976d2",fontWeight:700},children:u.isCorrect?(0,Se.jsxs)("span",{style:{color:"#1976d2"},children:["\u2705 \uc815\ub2f5\uc785\ub2c8\ub2e4! \uc815\ub2f5: ",(null===(H=u.correctAnswers)||void 0===H?void 0:H.join(", "))||"\uc815\ub2f5 \uc5c6\uc74c"]}):(0,Se.jsxs)("span",{style:{color:"#e74c3c"},children:["\u274c \ud2c0\ub838\uc2b5\ub2c8\ub2e4. \uc815\ub2f5: ",(0,Se.jsx)("span",{className:"correct-answer",children:(null===(K=u.correctAnswers)||void 0===K?void 0:K.join(", "))||"\uc815\ub2f5 \uc5c6\uc74c"})]})})]}),"no-answer"===w&&(0,Se.jsx)("div",{className:"only-print",children:N?(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ub2e8\uc5b4\ub97c \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#13"})]}),(0,Se.jsx)("div",{className:"work13-print-problem-text",style:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:u.blankedText})]})})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0",display:"block",width:"100%"},children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ub2e8\uc5b4\ub97c \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("div",{className:"work13-print-problem-text",style:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:u.blankedText})]})})]})}),"        ","with-answer"===w&&u&&(0,Se.jsx)("div",{className:"only-print print-answer-mode",children:N?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ub2e8\uc5b4\ub97c \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#13"})]}),(0,Se.jsx)("div",{className:"work13-print-answer-text",style:{marginTop:"0.9rem",marginBottom:"0",fontSize:"1rem !important",padding:"1rem",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(()=>{const e=u.blankedText.split(/(\(_{15}\))/);let t=0;return e.map((e,n)=>{if("(_______________)"===e){var r;const e=(null===(r=u.correctAnswers)||void 0===r?void 0:r[t])||"\uc815\ub2f5 \uc5c6\uc74c";return t++,(0,Se.jsxs)("span",{style:{color:"#1976d2",fontWeight:"bold"},children:["(",e,")"]},n)}return e})})()})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"work13-print-translation",style:{fontSize:"1rem !important",padding:"1rem",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7",marginTop:"0"},children:u.translation})]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ub2e8\uc5b4\ub97c \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#13"})]}),(0,Se.jsx)("div",{className:"work13-print-answer-text",style:{marginTop:"0.9rem",marginBottom:"1.5rem",fontSize:"1rem !important",padding:"1rem",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(()=>{const e=u.blankedText.split(/(\(_{15}\))/);let t=0;return e.map((e,n)=>{if("(_______________)"===e){var r;const e=(null===(r=u.correctAnswers)||void 0===r?void 0:r[t])||"\uc815\ub2f5 \uc5c6\uc74c";return t++,(0,Se.jsxs)("span",{style:{color:"#1976d2",fontWeight:"bold"},children:["(",e,")"]},n)}return e})})()}),(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginTop:"0",marginBottom:"3rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"work13-print-translation",style:{fontSize:"1rem !important",padding:"1rem",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7",marginTop:"1rem"},children:u.translation})]})})]})})]}):(0,Se.jsxs)("div",{className:"quiz-generator",onPaste:async e=>{if("capture"!==n)return;const t=e.clipboardData.items;for(let n=0;n<t.length;n++)if(-1!==t[n].type.indexOf("image")){const s=t[n].getAsFile();if(s){l(s),d(URL.createObjectURL(s)),g(!0);try{const e=await Wl(s);o(e),setTimeout(()=>{k.current&&(k.current.style.height="auto",k.current.style.height=k.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}return void e.preventDefault()}e.preventDefault()},children:[(0,Se.jsxs)("div",{className:"generator-header",children:[(0,Se.jsx)("h2",{children:"[\uc720\ud615#13] \ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c (\ub2e8\uc5b4-\uc8fc\uad00\uc2dd) \uc0dd\uc131"}),(0,Se.jsx)("p",{children:"\uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \ubb38\uc7a5\ubcc4\ub85c \uc758\ubbf8\uc788\ub294 \ub2e8\uc5b4\ub97c \ube48\uce78\uc73c\ub85c \ubc14\uafb8\uace0, \uc8fc\uad00\uc2dd\uc73c\ub85c \ub2f5\uc744 \ucc44\uc6b0\ub294 \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"input-type-section",children:[(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"capture"===n,onChange:()=>z("capture")}),(0,Se.jsx)("span",{children:"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30"}),(0,Se.jsx)("button",{type:"button",className:"screenshot-help-btn",onClick:e=>{e.preventDefault(),C(!0)},title:"\ud654\uba74 \ucea1\ucc98 \ubc29\ubc95 \ubcf4\uae30",children:"?"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"image"===n,onChange:()=>z("image")}),(0,Se.jsx)("span",{children:"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \ud30c\uc77c \ucca8\ubd80"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"text"===n,onChange:()=>z("text")}),(0,Se.jsx)("span",{children:"\u270d\ufe0f \uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30"})]})]}),"capture"===n&&(0,Se.jsxs)("div",{className:"input-guide".concat(S?" paste-focused":""),tabIndex:0,onClick:()=>_(!0),onFocus:()=>_(!0),onBlur:()=>_(!1),children:[(0,Se.jsx)("div",{className:"drop-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("div",{className:"drop-text",children:"\uc5ec\uae30\uc5d0 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc73c\uc138\uc694"}),(0,Se.jsxs)("div",{className:"drop-desc",children:["\ud074\ub9ad \ub610\ub294 Tab \ud6c4 ",(0,Se.jsx)("b",{children:"Ctrl+V"}),"\ub85c \ucea1\ucc98 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),c&&(0,Se.jsx)("div",{className:"preview-row",children:(0,Se.jsx)("img",{src:c,alt:"\ucea1\ucc98 \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"})}),(p||f)&&(0,Se.jsx)("div",{style:{color:"#6a5acd",fontWeight:600,marginTop:"0.7rem"},children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),"image"===n&&(0,Se.jsx)("div",{className:"input-guide",children:(0,Se.jsxs)("div",{className:"file-upload-row",children:[(0,Se.jsxs)("label",{htmlFor:"blank-fill-image",className:"file-upload-btn",children:["\ud30c\uc77c \uc120\ud0dd",(0,Se.jsx)("input",{id:"blank-fill-image",type:"file",accept:"image/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){l(n),d(URL.createObjectURL(n)),g(!0);try{const e=await Wl(n);o(e),setTimeout(()=>{k.current&&(k.current.style.height="auto",k.current.style.height=k.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}},style:{display:"none"}})]}),(0,Se.jsx)("span",{className:"file-upload-status",children:a?a.name:"\uc120\ud0dd\ub41c \ud30c\uc77c \uc5c6\uc74c"}),c&&(0,Se.jsx)("img",{src:c,alt:"\uc5c5\ub85c\ub4dc \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"}),(p||f)&&(0,Se.jsx)("div",{className:"loading-text",children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]})}),(0,Se.jsxs)("div",{className:"input-section",children:[(0,Se.jsxs)("div",{className:"input-label-row",children:[(0,Se.jsx)("label",{htmlFor:"blank-fill-text",className:"input-label",children:"\uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30:"}),i.length<100&&(0,Se.jsx)("span",{className:"warning",children:"\u26a0\ufe0f \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 \ub354 \uc88b\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("textarea",{id:"blank-fill-text",ref:k,value:i,onChange:e=>{o(e.target.value),k.current&&(k.current.style.height="auto",k.current.style.height=k.current.scrollHeight+"px")},placeholder:"\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc9c1\uc811 \ubd99\uc5ec\ub123\uc5b4 \uc8fc\uc138\uc694. \ucd5c\uc18c 100\uc790 \uc774\uc0c1 \uad8c\uc7a5\ud569\ub2c8\ub2e4.",className:"text-input",rows:8,style:{overflow:"hidden",resize:"none"},disabled:"image"===n&&!i}),(0,Se.jsx)("div",{className:"text-info",children:(0,Se.jsxs)("span",{children:["\uae00\uc790 \uc218: ",i.length,"\uc790"]})})]}),(0,Se.jsx)("button",{onClick:async()=>{if(console.log("\ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778:",{userData:e,uid:null===e||void 0===e?void 0:e.uid,loading:t}),t)return void alert("\ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if(!e||!e.uid)return console.error("\ub85c\uadf8\uc778 \uc0c1\ud0dc \uc624\ub958:",{userData:e,loading:t}),void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.");const n=F.find(e=>"13"===e.id);if(!n)return void alert("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=n.points;O<r?alert("\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. \ud604\uc7ac ".concat(O.toLocaleString(),"P, \ud544\uc694 ").concat(r.toLocaleString(),"P")):(R(r),I(!0))},disabled:p||!i.trim(),className:"generate-button",children:"\ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c \uc0dd\uc131\ud558\uae30"}),(p||f)&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("span",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:f?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":"\ud83d\udccb \ubb38\uc81c \uc0dd\uc131 \uc911..."})]})}),(0,Se.jsx)(yo,{isOpen:E,onClose:()=>I(!1),onConfirm:()=>{I(!1),U()},workTypeName:"\ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c \uc0dd\uc131",pointsToDeduct:A,userCurrentPoints:O,remainingPoints:O-A}),(0,Se.jsx)(go,{isOpen:T,onClose:()=>C(!1)})]})},Xl=async e=>{let t;t=e instanceof File?await new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e)},r.onerror=n,r.readAsDataURL(e)}):e;const n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"\uc774 \uc774\ubbf8\uc9c0\uc5d0\uc11c \uc601\uc5b4 \ud14d\uc2a4\ud2b8\ub97c \ucd94\ucd9c\ud574\uc8fc\uc138\uc694. \ud14d\uc2a4\ud2b8\ub9cc \ubc18\ud658\ud558\uace0 \ub2e4\ub978 \uc124\uba85\uc740 \ud558\uc9c0 \ub9c8\uc138\uc694."},{type:"image_url",image_url:{url:t}}]}],max_tokens:2e3,temperature:.1})});return(await n.json()).choices[0].message.content.trim()},Zl=e=>{console.log("=== \ubb38\uc7a5 \ubd84\ud560 \uc2dc\uc791 ==="),console.log("\uc785\ub825 \ud14d\uc2a4\ud2b8:",e);let t=e;t=t.replace(/"([^"]+?\.)"/g,(e,t)=>'"'.concat(t.replace(/\./g,"[DOT]"),'"')),t=t.replace(/\b([A-Z])\./g,"$1[DOT]"),t=t.replace(/\b([A-Z])\.[ ]?([A-Z])\./g,"$1[DOT]$2[DOT]"),t=t.replace(/(\d)\.(\d)/g,"$1[DOT]$2");const n=t.split(/(?<=[.?!])\s+(?=[A-Z"\u201c\u2018])/).map(e=>e.replace(/\[DOT\]/g,".").trim()).filter(Boolean);return console.log("\ubd84\ud560\ub41c \ubb38\uc7a5\ub4e4:",n),console.log("\ubb38\uc7a5 \uac1c\uc218:",n.length),n},ec=e=>e.trim().split(/\s+/).filter(e=>e.length>0).length,tc=e=>{const t=[],n=[];return e.forEach(e=>{ec(e)>=5?t.push(e):n.push(e)}),{validSentences:t,skippedSentences:n}},nc=async e=>{const t="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",n=Zl(e),{validSentences:r,skippedSentences:s}=tc(n);if(console.log("=== \ubb38\uc7a5 \ubd84\ud560 \ub514\ubc84\uae45 ==="),console.log("\uc6d0\ubcf8 \ud14d\uc2a4\ud2b8:",e),console.log("\ubd84\ud560\ub41c \ubb38\uc7a5\ub4e4:",n),console.log("\ubb38\uc7a5 \ubd84\uc11d \uacb0\uacfc:",{"\uc804\uccb4\ubb38\uc7a5\uc218":n.length,"\uc720\ud6a8\ubb38\uc7a5\uc218":r.length,"\uc81c\uc678\ubb38\uc7a5\uc218":s.length,"\uc81c\uc678\ub41c\ubb38\uc7a5\ub4e4":s.map(e=>"".concat(e.substring(0,30),"... (").concat(ec(e),"\uac1c \ub2e8\uc5b4)"))}),r.length<2)throw new Error("\uc720\ud6a8\ud55c \ubb38\uc7a5\uc774 2\uac1c \ubbf8\ub9cc\uc785\ub2c8\ub2e4. \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");let i=[],o=[];try{const e=await sc(r,t);i=e.selectedIndices,o=e.selectedSentences,console.log("=== AI \ubb38\uc7a5 \uc120\ud0dd \uc131\uacf5 ==="),console.log("AI \uc120\ud0dd \uacb0\uacfc:",{selectedIndices:i,selectedSentences:o})}catch(d){console.error("=== AI \ubb38\uc7a5 \uc120\ud0dd \uc2e4\ud328 (\uc758\ub3c4\uc801) ===",d),console.log("\ub85c\uceec \ub85c\uc9c1\uc73c\ub85c \ub300\uccb4...");const e=r.length>=10?5:r.length>=8?4:r.length>=6||r.length>=4?3:r.length>=2?2:1;if(console.log("\ub85c\uceec \ube48\uce78 \uac1c\uc218:",e),console.log("\uc720\ud6a8\ud55c \ubb38\uc7a5\ub4e4:",r),i=[],o=[],e>=1&&r[0]&&(i.push(0),o.push(r[0]),console.log("\ub85c\uceec 1\ubc88\uc9f8 \ubb38\uc7a5 \uc120\ud0dd:",r[0])),e>=2){const e=Math.min(2,r.length-1);r[e]&&(i.push(e),o.push(r[e]),console.log("\ub85c\uceec 2\ubc88\uc9f8 \ubb38\uc7a5 \uc120\ud0dd (\uc778\ub371\uc2a4 ".concat(e,"):"),r[e]))}if(e>=3){const e=Math.min(4,r.length-1);if(r[e]&&!i.includes(e))i.push(e),o.push(r[e]),console.log("\ub85c\uceec 3\ubc88\uc9f8 \ubb38\uc7a5 \uc120\ud0dd (\uc778\ub371\uc2a4 ".concat(e,"):"),r[e]);else if(r.length>2){const e=r.length-1;i.includes(e)||(i.push(e),o.push(r[e]),console.log("\ub85c\uceec 3\ubc88\uc9f8 \ubb38\uc7a5 \uc120\ud0dd (\ub9c8\uc9c0\ub9c9 \uc778\ub371\uc2a4 ".concat(e,"):"),r[e]))}}if(e>=4){const e=Math.min(6,r.length-1);if(r[e]&&!i.includes(e))i.push(e),o.push(r[e]),console.log("\ub85c\uceec 4\ubc88\uc9f8 \ubb38\uc7a5 \uc120\ud0dd (\uc778\ub371\uc2a4 ".concat(e,"):"),r[e]);else for(let t=0;t<r.length;t++)if(!i.includes(t)){i.push(t),o.push(r[t]),console.log("\ub85c\uceec 4\ubc88\uc9f8 \ubb38\uc7a5 \uc120\ud0dd (\ub300\uc548 \uc778\ub371\uc2a4 ".concat(t,"):"),r[t]);break}}if(e>=5){const e=Math.min(8,r.length-1);if(r[e]&&!i.includes(e))i.push(e),o.push(r[e]),console.log("\ub85c\uceec 5\ubc88\uc9f8 \ubb38\uc7a5 \uc120\ud0dd (\uc778\ub371\uc2a4 ".concat(e,"):"),r[e]);else for(let t=r.length-1;t>=0;t--)if(!i.includes(t)){i.push(t),o.push(r[t]),console.log("\ub85c\uceec 5\ubc88\uc9f8 \ubb38\uc7a5 \uc120\ud0dd (\ub300\uc548 \uc778\ub371\uc2a4 ".concat(t,"):"),r[t]);break}}console.log("\ub85c\uceec \uc120\ud0dd \uacb0\uacfc:",{selectedIndices:i,selectedSentences:o})}console.log("=== \ubb38\uc7a5 \uc120\ud0dd \ub514\ubc84\uae45 ==="),console.log("\uc120\ud0dd\ub41c \uc778\ub371\uc2a4:",i),console.log("\uc120\ud0dd\ub41c \ubb38\uc7a5\ub4e4:",o);let a=e;o.length>0?o.forEach((e,t)=>{if(console.log("\ube48\uce78 ".concat(t+1," \uc0dd\uc131 \uc2dc\ub3c4:"),e),e&&e.trim().length>0){const n=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=new RegExp(n,"g"),s=a,i=["A","B","C","D","E"][t]||String.fromCharCode(65+t),o="(____________________".concat(i,"____________________)");a=a.replace(r,o),console.log("\ube48\uce78 ".concat(t+1," \uc0dd\uc131 \uacb0\uacfc:"),{"\uc6d0\ubcf8\ubb38\uc7a5":e,"\uad50\uccb4\uc804":s.substring(0,100)+"...","\uad50\uccb4\ud6c4":a.substring(0,100)+"...","\uad50\uccb4\ub428":s!==a})}else console.warn("\ube48\uce78 ".concat(t+1," \uc0dd\uc131 \uc2e4\ud328: \ube48 \ubb38\uc7a5"))}):console.error("\uc120\ud0dd\ub41c \ubb38\uc7a5\uc774 \uc5c6\uc5b4\uc11c \ube48\uce78\uc744 \uc0dd\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4!"),console.log("\ube48\uce78 \uc0dd\uc131 \uacb0\uacfc:",{"\uc6d0\ubcf8\ud14d\uc2a4\ud2b8":e.substring(0,200)+"...","\ube48\uce78\ud14d\uc2a4\ud2b8":a.substring(0,200)+"...","\uc120\ud0dd\ub41c\ubb38\uc7a5\uc218":o.length,"\uc120\ud0dd\ub41c\ubb38\uc7a5\ub4e4":o}),console.log("\ubc88\uc5ed \uc2dc\uc791...");const l=await rc(e,t),c={blankedText:a,correctAnswers:o,translation:l,userAnswers:[],isCorrect:null,selectedSentences:o};return console.log("\ucd5c\uc885 \uacb0\uacfc:",c),c},rc=async(e,t)=>{try{const n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"user",content:"\ub2e4\uc74c \uc601\uc5b4 \ud14d\uc2a4\ud2b8\ub97c \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\ub85c \ubc88\uc5ed\ud574\uc8fc\uc138\uc694:\n\n".concat(e)}],max_tokens:2e3,temperature:.3})});return(await n.json()).choices[0].message.content.trim()}catch(n){throw console.error("\u274c \ubc88\uc5ed \uc624\ub958:",n),n}},sc=async(e,t)=>{const n=e.length,r=n>=10?5:n>=8?4:n>=6||n>=4?3:n>=2?2:1;if(console.log("=== AI \ubb38\uc7a5 \uc120\ud0dd \ub85c\uc9c1 \uc2dc\uc791 ==="),console.log("\uc804\uccb4 \ubb38\uc7a5 \uc218: ".concat(n)),console.log("\ube48\uce78 \uac1c\uc218: ".concat(r)),n<r)throw new Error("\ubb38\uc7a5 \uc218(".concat(n,")\uac00 \ud544\uc694\ud55c \ube48\uce78 \uc218(").concat(r,")\ubcf4\ub2e4 \uc801\uc2b5\ub2c8\ub2e4."));const s="You are an English exam generator. Read the following ".concat(n," sentences.\n\nYour task is to:\n1. Select ").concat(r,' important sentences for blank-fill questions.\n2. These sentences should be replaced with blank lines: "(____________________A____________________)", "(____________________B____________________)", etc.\n3. Return the selected sentence indices and the sentences themselves.\n\nRules:\n- Select exactly ').concat(r,' sentences.\n- Choose sentences that are educationally valuable and contextually important.\n- Do NOT select adjacent sentences (e.g., if sentences 1,2,3,4,5,6 exist, do not select 1&2, or 2&3, etc.).\n- Prioritize sentences with clear meaning and appropriate length.\n- Choose sentences that are not too complex structurally.\n\nOutput format (JSON only, no other text):\n{\n  "selectedIndices": [selected_sentence_indices],\n  "selectedSentences": [selected_sentences]\n}\n\nSentences:\n').concat(e.map((e,t)=>"".concat(t+1,". ").concat(e)).join("\n"));try{const n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:s}],max_tokens:1e3,temperature:.3})}),i=await n.json();console.log("=== AI \uc6d0\ubcf8 \uc751\ub2f5 ==="),console.log("AI \uc751\ub2f5:",i.choices[0].message.content);const o=i.choices[0].message.content.match(/\{[\s\S]*\}/);if(!o)throw console.error("JSON \ub9e4\uce6d \uc2e4\ud328. AI \uc751\ub2f5:",i.choices[0].message.content),new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");console.log("\ucd94\ucd9c\ub41c JSON:",o[0]);const a=JSON.parse(o[0]);if(console.log("\ud30c\uc2f1\ub41c \uacb0\uacfc:",a),!a.selectedIndices||!a.selectedSentences||!Array.isArray(a.selectedIndices)||!Array.isArray(a.selectedSentences))throw new Error("AI \uc751\ub2f5 \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");if(a.selectedIndices.length!==r)throw new Error("AI\uac00 ".concat(r,"\uac1c \ubb38\uc7a5\uc744 \uc120\ud0dd\ud558\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."));return a.selectedIndices.sort((e,t)=>e-t),a.selectedSentences.sort((t,n)=>a.selectedIndices.indexOf(e.indexOf(t))-a.selectedIndices.indexOf(e.indexOf(n))),console.log("=== AI \ubb38\uc7a5 \uc120\ud0dd \uc644\ub8cc ==="),console.log("\uc120\ud0dd\ub41c \uc778\ub371\uc2a4: [".concat(a.selectedIndices.join(", "),"]")),console.log("\uc120\ud0dd\ub41c \ubb38\uc7a5 \uc218: ".concat(a.selectedSentences.length)),console.log("\uc120\ud0dd\ub41c \ubb38\uc7a5\ub4e4:",a.selectedSentences),a}catch(i){console.error("AI \ubb38\uc7a5 \uc120\ud0dd \uc2e4\ud328, \ub85c\uceec \ub85c\uc9c1\uc73c\ub85c \ub300\uccb4:",i);const t=[],n=[];return t.push(0),n.push(e[0]),r>=2&&(t.push(2),n.push(e[2])),r>=3&&(t.push(4),n.push(e[4])),{selectedIndices:t,selectedSentences:n}}},ic=e=>{const t=e.match(/\(_{20,}[A-Z]_{20,}\)/g);return t?t.length:0},oc=29.7,ac=.5,lc=1,cc=.8,dc=.3,uc=.8,hc=.3;function pc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;if(!e||0===e.length)return.3;const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.7,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;if(!e||0===e.length)return 0;const s=Math.floor(r/.25);return Math.ceil(e.length/s)*(t*n/37.8)}(e,n,1.7);return r+16*t/37.8/2}const mc=()=>{const{userData:e,loading:t}=Te(),[n,s]=(0,r.useState)("text"),[i,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[x,b]=(0,r.useState)("none"),[w,j]=(0,r.useState)([]),N=!!u&&function(e){if(!e)return!1;const t=oc-ac-lc,n=cc+dc,r=pc(e.blankedText,1,16),s=uc+hc,i=pc(e.translation||"",1,14),o=n+r+s+i,a=o>t-3;return console.log("\ud83d\udccf \uc720\ud615#14 \ub3d9\uc801 \ud398\uc774\uc9c0 \ubd84\ud560 \uacc4\uc0b0:",{availableHeight:t.toFixed(2)+"cm",instructionHeight:n.toFixed(2)+"cm",passageHeight:r.toFixed(2)+"cm",translationHeaderHeight:s.toFixed(2)+"cm",translationHeight:i.toFixed(2)+"cm",totalHeight:o.toFixed(2)+"cm",safetyMargin:3..toFixed(2)+"cm",effectiveAvailableHeight:(t-3).toFixed(2)+"cm",shouldSplit:a}),a}(u),k=(0,r.useRef)(null),[S,_]=(0,r.useState)(!1),[T,C]=(0,r.useState)(!1),E=(e,t)=>{let n=e,r=0;return n=n.replace(/\(_{20,}[A-Z]_{20,}\)/g,()=>{if(r<t.length){const e=t[r++];return'(<span style="color: #1976d2; font-weight: bold;">'.concat(e,"</span>)")}return"(____________________A____________________)"}),n},[I,A]=(0,r.useState)(!1),[R,O]=(0,r.useState)(0),[P,F]=(0,r.useState)(0),[D,z]=(0,r.useState)([]);(0,r.useEffect)(()=>{t||(async()=>{try{var n;const r=await(0,vo.getWorkTypePoints)();z(r);const s=(null===(n=r.find(e=>"14"===e.id))||void 0===n?void 0:n.points)||0;if(O(s),!t&&e&&e.uid){const t=await(0,vo.MC)(e.uid);F(t)}}catch(r){console.error("\ud3ec\uc778\ud2b8 \ucd08\uae30\ud654 \uc624\ub958:",r)}})()},[null===e||void 0===e?void 0:e.uid,t]),(0,r.useEffect)(()=>{window.scrollTo(0,0)},[]),(0,r.useEffect)(()=>{u&&window.scrollTo(0,0)},[u]);const L=e=>{s(e),o(""),l(null),d(null),h(null),v(null)},M=async e=>{if(console.log("\ud83d\udccb \ubd99\uc5ec\ub123\uae30 \uc774\ubca4\ud2b8 \ubc1c\uc0dd:",{inputMode:n,clipboardItems:e.clipboardData.items.length}),"capture"!==n)return void console.log("\u274c \ucea1\ucc98 \ubaa8\ub4dc\uac00 \uc544\ub2d8:",n);const t=e.clipboardData.items;console.log("\ud83d\udccb \ud074\ub9bd\ubcf4\ub4dc \uc544\uc774\ud15c \uc218:",t.length);for(let n=0;n<t.length;n++){const s=t[n];if(console.log("\ud83d\udccb \uc544\uc774\ud15c ".concat(n,":"),{type:s.type,kind:s.kind}),-1!==s.type.indexOf("image")){console.log("\u2705 \uc774\ubbf8\uc9c0 \ubc1c\uacac!");const t=s.getAsFile();if(t){console.log("\u2705 \ud30c\uc77c \uc0dd\uc131 \uc131\uacf5:",{name:t.name,size:t.size,type:t.type}),l(t),d(URL.createObjectURL(t)),m(!0);try{console.log("\ud83d\udd04 OCR \ucc98\ub9ac \uc2dc\uc791...");const e=await Xl(t);console.log("\u2705 OCR \ucc98\ub9ac \uc644\ub8cc:",e.substring(0,100)+"..."),o(e),setTimeout(()=>{k.current&&(k.current.style.height="auto",k.current.style.height=k.current.scrollHeight+"px")},0)}catch(r){console.error("\u274c OCR \ucc98\ub9ac \uc624\ub958:",r),alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}else console.error("\u274c \ud30c\uc77c \uc0dd\uc131 \uc2e4\ud328");return void e.preventDefault()}}console.log("\u274c \uc774\ubbf8\uc9c0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c"),e.preventDefault()},B=[],U=/\(([^)]+)\)/g;let W;for(;null!==(W=U.exec(i));)B.push(W[1].trim());const V=async()=>{if(null===e||void 0===e||!e.uid)return;let t="";m(!0),h(null),v(null);let r=0;try{const s=D.find(e=>"14"===e.id);if(!s)throw new Error("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const o=await(0,vo.ev)(e.uid,"14",s.name,e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790");if(!o.success)throw new Error(o.error||"\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");if(r=o.deductedPoints,F(o.remainingPoints),"text"===n){if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}else if("image"===n&&a)t=await Xl(a);else{if("capture"!==n)throw new Error("\uc774\ubbf8\uc9c0\ub97c \ucca8\ubd80\ud574\uc8fc\uc138\uc694.");if(!i.trim())throw new Error("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");t=i.trim()}if(!t.trim())throw new Error("\ucd94\ucd9c\ub41c \ud14d\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const l=await nc(t);console.log("\uc0dd\uc131\ub41c \ud034\uc988 \ub370\uc774\ud130:",l),console.log("quizData.translation:",l.translation),h(l);const c=ic(l.blankedText);console.log("\ub2f5\uc548 \ucd08\uae30\ud654 - \ube48\uce78 \uac1c\uc218:",c),j(new Array(c).fill(""))}catch(s){if(console.error("\ubb38\uc7a5 \ube48\uce78 \ubb38\uc81c \uc0dd\uc131 \uc624\ub958:",s),r>0&&null!==e&&void 0!==e&&e.uid)try{await(0,vo.Lw)(e.uid,r,"\ubb38\uc7a5 \ube48\uce78 \ubb38\uc81c \uc0dd\uc131",e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790","\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\ub85c \uc778\ud55c \ud3ec\uc778\ud2b8 \ud658\ubd88"),F(e=>e+r)}catch(o){console.error("\ud3ec\uc778\ud2b8 \ud658\ubd88 \uc624\ub958:",o)}alert(s.message||"\ubb38\uc81c \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}},q=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),b("no-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),b("none")},1e3)},100)},H=()=>{const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n      }\n    ",document.head.appendChild(e),b("with-answer"),setTimeout(()=>{window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),b("none")},1e3)},100)},K=()=>{h(null),v(null),j([]),o(""),l(null),d(null),_(!1),m(!1),g(!1)},J=(0,r.useMemo)(()=>null!==u&&void 0!==u&&u.blankedText?u.blankedText:"",[null===u||void 0===u?void 0:u.blankedText]),Y=(0,r.useMemo)(()=>{if(null===u||void 0===u||!u.blankedText)return"";console.log("=== displayProblemText \ub514\ubc84\uae45 ==="),console.log("quiz.blankedText:",u.blankedText),console.log("quiz.correctAnswers:",u.correctAnswers);let e=u.blankedText;if(u.correctAnswers&&u.correctAnswers.length>0){const t=["A","B","C","D","E"];u.correctAnswers.forEach((n,r)=>{const s=t[r]||String.fromCharCode(65+r),i="(____________________".concat(s,"____________________)");console.log("\ube48\uce78 ".concat(r+1," \ubcc0\ud658 \uc2dc\ub3c4:"),{"\uc6d0\ubcf8\ub2f5\uc548":n,"\ube48\uce78\ub77c\ubca8":s,"\ube48\uce78\ud14d\uc2a4\ud2b8":i});const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),a=new RegExp("\\(".concat(o,"\\)"),"g"),l=e;if(e=e.replace(a,i),console.log("\ubc29\ubc95 1 \uacb0\uacfc:",{"\uad50\uccb4\uc804":l!==e,"\uad50\uccb4\ud6c4":e}),l===e){const t=new RegExp(o,"g"),n=e;e=e.replace(t,i),console.log("\ubc29\ubc95 2 \uacb0\uacfc:",{"\uad50\uccb4\uc804":n!==e,"\uad50\uccb4\ud6c4":e})}})}return console.log("\ucd5c\uc885 problemText:",e),e},[null===u||void 0===u?void 0:u.blankedText,null===u||void 0===u?void 0:u.correctAnswers]);if(u){var Q,G,$;console.log("quiz.selectedSentences:",u.selectedSentences),console.log("quiz.blankedText:",null===(Q=u.blankedText)||void 0===Q?void 0:Q.substring(0,100));const e=(e=>e.correctAnswers.map((e,t)=>"".concat(t+1,". ").concat(e)).join("\n"))(u);return console.log("answerText:",null===e||void 0===e?void 0:e.substring(0,200)),(0,Se.jsxs)("div",{children:[(0,Se.jsxs)("div",{className:"quiz-display no-print",children:[(0,Se.jsxs)("div",{className:"quiz-header",children:[(0,Se.jsx)("h2",{className:"no-print",children:"#14. \ubb38\uc7a5 \ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"quiz-header-buttons no-print",children:[(0,Se.jsx)("button",{onClick:K,className:"reset-button",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\uc0c8 \ubb38\uc81c \ub9cc\ub4e4\uae30"}),(0,Se.jsxs)("button",{onClick:q,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsx)("span",{children:"\uc778\uc1c4 (\ubb38\uc81c)"})]}),(0,Se.jsxs)("button",{onClick:H,className:"print-button styled-print",style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 6px rgba(240, 147, 251, 0.25)"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsxs)("span",{children:["\uc778\uc1c4 (",(0,Se.jsx)("span",{style:{color:"#FFD600"},children:"\uc815\ub2f5"}),")"]})]})]})]}),(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1.18rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ubb38\uc7a5\uc744 \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#14"})]}),(0,Se.jsx)("div",{style:{fontSize:"1.08rem",lineHeight:1.7,margin:"1.2rem 0",background:"#FFF3CD",borderRadius:"8px",padding:"1.2rem",fontFamily:"inherit",whiteSpace:"pre-wrap"},children:J}),(0,Se.jsx)("div",{className:"problem-answers",style:{margin:"1.2rem 0"},children:(e=>{const t=ic(u.blankedText);return console.log("\uc2e4\uc81c \ube48\uce78 \uac1c\uc218:",t),console.log("selectedSentences \uac1c\uc218:",null===(e=u.selectedSentences)||void 0===e?void 0:e.length),Array.from({length:t},(e,t)=>(0,Se.jsxs)("div",{style:{margin:"1rem 0",padding:"1rem",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},children:[(0,Se.jsxs)("div",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.5rem",color:"#495057"},children:["\ube48\uce78 ",String.fromCharCode(65+t),"\ubc88 \ub2f5\uc548 (\ubb38\uc7a5):"]}),(0,Se.jsx)("textarea",{value:w[t]||"",onChange:e=>((e,t)=>{const n=[...w];n[e]=t,j(n)})(t,e.target.value),placeholder:"\uc5ec\uae30\uc5d0 \ubb38\uc7a5\uc744 \uc785\ub825\ud558\uc138\uc694...",style:{width:"100%",minHeight:"120px",padding:"0.75rem",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"1rem",fontFamily:"inherit",resize:"vertical"}})]},t))})()})]}),"no-answer"===x&&(0,Se.jsx)("div",{className:"only-print",children:N?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ubb38\uc7a5\uc744 \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#14"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7",border:"1px solid #e3e6f0",whiteSpace:"pre-wrap"},children:Y})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ubb38\uc7a5\uc744 \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("div",{className:"problem-answers",style:{margin:"1rem 0"},children:null===(G=u.selectedSentences)||void 0===G?void 0:G.map((e,t)=>(0,Se.jsxs)("div",{style:{margin:"0.8rem 0",padding:"0.8rem",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e9ecef"},children:[(0,Se.jsxs)("div",{style:{fontSize:"0.9rem",fontWeight:"600",marginBottom:"0.4rem",color:"#495057"},children:["\ube48\uce78 ",String.fromCharCode(65+t),"\ubc88 \ub2f5\uc548 (\ubb38\uc7a5):"]}),(0,Se.jsx)("div",{style:{height:"60px",border:"1px solid #ced4da",borderRadius:"4px",background:"#fff"}})]},t))})]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ubb38\uc7a5\uc744 \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7",border:"1px solid #e3e6f0",whiteSpace:"pre-wrap"},children:Y}),(0,Se.jsx)("div",{className:"problem-answers",style:{margin:"1rem 0"},children:null===($=u.selectedSentences)||void 0===$?void 0:$.map((e,t)=>(0,Se.jsxs)("div",{style:{margin:"0.8rem 0",padding:"0.8rem",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e9ecef"},children:[(0,Se.jsxs)("div",{style:{fontSize:"0.9rem",fontWeight:"600",marginBottom:"0.4rem",color:"#495057"},children:["\ube48\uce78 ",t+1,"\ubc88 \ub2f5\uc548 (\ub2e8\uc5b4):"]}),(0,Se.jsx)("div",{style:{height:"60px",border:"1px solid #ced4da",borderRadius:"4px",background:"#fff"}})]},t))})]})})]})}),"with-answer"===x&&u&&(0,Se.jsx)("div",{className:"only-print print-answer-mode",children:N?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ubb38\uc7a5\uc744 \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#14"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7",border:"1px solid #e3e6f0",whiteSpace:"pre-wrap"},children:Y})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"0.875rem !important",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7",border:"1px solid #e3e6f0"},children:u.translation?(0,Se.jsx)("div",{children:u.translation}):"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(fo,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ubb38\uc7a5\uc744 \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#14"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7",border:"1px solid #e3e6f0",whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:E(u.blankedText,u.correctAnswers)}}),(0,Se.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem !important",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"0.875rem !important",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7",border:"1px solid #e3e6f0"},children:u.translation?(0,Se.jsx)("div",{style:{fontSize:"0.875rem !important",fontFamily:"inherit",color:"#222"},children:u.translation}):(0,Se.jsx)("span",{style:{fontSize:"0.875rem !important",fontFamily:"inherit",color:"#222"},children:"\ubcf8\ubb38 \ud574\uc11d\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})})]})]})})]})})]})}return(0,Se.jsxs)("div",{className:"quiz-generator",onPaste:M,children:[(0,Se.jsxs)("div",{className:"generator-header",children:[(0,Se.jsx)("h2",{children:"[\uc720\ud615#14] \ubb38\uc7a5 \ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c (\uc8fc\uad00\uc2dd) \uc0dd\uc131"}),(0,Se.jsxs)("p",{children:["\uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c 2~3\uac1c\uc758 \ubb38\uc7a5\uc744 \ube48\uce78\uc73c\ub85c \ubc14\uafb8\uace0, \ube48\uce78\uc5d0 \uc6d0\ub798 \ubb38\uc7a5\uc744 \ucc44\uc6b0\ub294 \uc8fc\uad00\uc2dd \ubb38\uc81c\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.",(0,Se.jsx)("br",{}),"\uc2dc\ud5d8\ub300\ube44 \ud6a8\uacfc\uc801\uc778 \ubcf8\ubb38 \uc554\uae30\ub97c \uc704\ud55c \ubb38\uc81c \uc0dd\uc131\uc744 \uc704\ud55c \ud234\uc785\ub2c8\ub2e4."]})]}),(0,Se.jsxs)("div",{className:"input-type-section",children:[(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"capture"===n,onChange:()=>L("capture")}),(0,Se.jsx)("span",{children:"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30"}),(0,Se.jsx)("button",{type:"button",className:"screenshot-help-btn",onClick:e=>{e.preventDefault(),C(!0)},title:"\ud654\uba74 \ucea1\ucc98 \ubc29\ubc95 \ubcf4\uae30",children:"?"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"image"===n,onChange:()=>L("image")}),(0,Se.jsx)("span",{children:"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \ud30c\uc77c \ucca8\ubd80"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"text"===n,onChange:()=>L("text")}),(0,Se.jsx)("span",{children:"\u270d\ufe0f \uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30"})]})]}),"capture"===n&&(0,Se.jsxs)("div",{className:"input-guide".concat(S?" paste-focused":""),tabIndex:0,onClick:()=>_(!0),onFocus:()=>_(!0),onBlur:()=>_(!1),onPaste:M,children:[(0,Se.jsx)("div",{className:"drop-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("div",{className:"drop-text",children:"\uc5ec\uae30\uc5d0 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc73c\uc138\uc694"}),(0,Se.jsxs)("div",{className:"drop-desc",children:["\ud074\ub9ad \ub610\ub294 Tab \ud6c4 ",(0,Se.jsx)("b",{children:"Ctrl+V"}),"\ub85c \ucea1\ucc98 \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),(0,Se.jsxs)("div",{style:{fontSize:"0.9rem",color:"#666",marginTop:"0.5rem"},children:["\ud83d\udca1 ",(0,Se.jsx)("b",{children:"\ud301:"})," \ud654\uba74 \ucea1\ucc98 \ud6c4 Ctrl+V\ub85c \ubd99\uc5ec\ub123\uae30"]}),c&&(0,Se.jsx)("div",{className:"preview-row",children:(0,Se.jsx)("img",{src:c,alt:"\ucea1\ucc98 \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"})}),(p||f)&&(0,Se.jsx)("div",{style:{color:"#6a5acd",fontWeight:600,marginTop:"0.7rem"},children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),"image"===n&&(0,Se.jsx)("div",{className:"input-guide",children:(0,Se.jsxs)("div",{className:"file-upload-row",children:[(0,Se.jsxs)("label",{htmlFor:"blank-quiz-image",className:"file-upload-btn",children:["\ud30c\uc77c \uc120\ud0dd",(0,Se.jsx)("input",{id:"blank-quiz-image",type:"file",accept:"image/*",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){l(n),d(URL.createObjectURL(n)),g(!0);try{const e=await Xl(n);o(e),setTimeout(()=>{k.current&&(k.current.style.height="auto",k.current.style.height=k.current.scrollHeight+"px")},0)}catch(r){alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}},style:{display:"none"}})]}),(0,Se.jsx)("span",{className:"file-upload-status",children:a?a.name:"\uc120\ud0dd\ub41c \ud30c\uc77c \uc5c6\uc74c"}),c&&(0,Se.jsx)("img",{src:c,alt:"\uc5c5\ub85c\ub4dc \ubbf8\ub9ac\ubcf4\uae30",className:"preview-img"}),(p||f)&&(0,Se.jsx)("div",{className:"loading-text",children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]})}),(0,Se.jsxs)("div",{className:"input-section",children:[(0,Se.jsxs)("div",{className:"input-label-row",children:[(0,Se.jsx)("label",{htmlFor:"blank-quiz-text",className:"input-label",children:"\uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30:"}),i.length<100&&(0,Se.jsx)("span",{className:"warning",children:"\u26a0\ufe0f \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 \ub354 \uc88b\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("textarea",{id:"blank-quiz-text",ref:k,value:i,onChange:e=>{o(e.target.value),k.current&&(k.current.style.height="auto",k.current.style.height=k.current.scrollHeight+"px")},placeholder:"\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc9c1\uc811 \ubd99\uc5ec\ub123\uc5b4 \uc8fc\uc138\uc694. \ucd5c\uc18c 100\uc790 \uc774\uc0c1 \uad8c\uc7a5\ud569\ub2c8\ub2e4.",className:"text-input",rows:8,style:{overflow:"hidden",resize:"none"},disabled:"image"===n&&!i}),(0,Se.jsx)("div",{className:"text-info",children:(0,Se.jsxs)("span",{children:["\uae00\uc790 \uc218: ",i.length,"\uc790"]})})]}),(0,Se.jsx)("button",{onClick:async()=>{if(console.log("\ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778:",{userData:e,uid:null===e||void 0===e?void 0:e.uid,loading:t}),t)return void alert("\ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if(!e||!e.uid)return console.error("\ub85c\uadf8\uc778 \uc0c1\ud0dc \uc624\ub958:",{userData:e,loading:t}),void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.");const n=D.find(e=>"14"===e.id);if(!n)return void alert("\ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const r=n.points;P<r?alert("\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. \ud604\uc7ac ".concat(P.toLocaleString(),"P, \ud544\uc694 ").concat(r.toLocaleString(),"P")):(O(r),A(!0))},disabled:p||!i.trim(),className:"generate-button",children:"\ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c \uc0dd\uc131\ud558\uae30"}),(p||f)&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("span",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:f?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":"\ud83d\udccb \ubb38\uc81c \uc0dd\uc131 \uc911..."})]})}),(0,Se.jsx)(yo,{isOpen:I,onClose:()=>A(!1),onConfirm:()=>{A(!1),V()},workTypeName:"\ubb38\uc7a5 \ube48\uce78 \ubb38\uc81c \uc0dd\uc131",pointsToDeduct:R,userCurrentPoints:P,remainingPoints:P-R}),(0,Se.jsx)(go,{isOpen:T,onClose:()=>C(!1)})]})};async function fc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const s=r.length>0?"\n\nALREADY USED WORDS (do not select these): ".concat(r.join(", ")):"",i="You are selecting one important word from sentence #".concat(t+1," below.\n\nRULES:\n1. Only ONE word should be selected. Never more than one.\n2. Select a word that is NOT already used in previous sentences.\n3. Choose a meaningful word that would be good for vocabulary learning.\n\nIMPORTANT: Return ONLY valid JSON. No explanations, no markdown, no code blocks.\n\nSentence #").concat(t+1,": ").concat(e).concat(s,'\n\nRequired JSON format:\n{\n  "index": 5,\n  "original": "important"\n}'),o=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:i}],max_tokens:200,temperature:0})});if(!o.ok)throw new Error("API \uc694\uccad \uc2e4\ud328: ".concat(o.status));const a=await o.json();if(!a.choices||!a.choices[0]||!a.choices[0].message)throw new Error("AI\ub85c\ubd80\ud130 \uc62c\ubc14\ub978 \uc751\ub2f5\uc744 \ubc1b\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");const l=a.choices[0].message.content.match(/\{[\s\S]*\}/);if(!l)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");try{let e=l[0].replace(/```json/g,"").replace(/```/g,"").replace(/\n/g," ").trim();const t=JSON.parse(e);if("number"!==typeof t.index||"string"!==typeof t.original)throw new Error("AI \uc751\ub2f5\uc5d0 \uc62c\ubc14\ub978 index\uc640 original\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");return t}catch(c){throw new Error("JSON \ud30c\uc2f1 \uc2e4\ud328: ".concat(c))}}async function gc(e,t,n,r){const s="You will replace one word in a sentence with a synonym.\n\nRULES:\n1. Replace the word at index ".concat(t," with a synonym.\n2. The synonym should be appropriate for the context.\n3. Provide Korean meanings for both words.\n\nIMPORTANT: Return ONLY valid JSON. No explanations, no markdown, no code blocks.\n\nSentence: ").concat(e,'\nWord to replace: "').concat(n,'" (at index ').concat(t,')\n\nRequired JSON format:\n{\n  "replacement": "significant",\n  "originalMeaning": "\uc911\uc694\ud55c",\n  "replacementMeaning": "\uc911\uc694\ud55c, \uc758\ubbf8\uc788\ub294"\n}'),i=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:s}],max_tokens:300,temperature:0})});if(!i.ok)throw new Error("API \uc694\uccad \uc2e4\ud328: ".concat(i.status));const o=await i.json();if(!o.choices||!o.choices[0]||!o.choices[0].message)throw new Error("AI\ub85c\ubd80\ud130 \uc62c\ubc14\ub978 \uc751\ub2f5\uc744 \ubc1b\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");const a=o.choices[0].message.content.match(/\{[\s\S]*\}/);if(!a)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");try{let e=a[0].replace(/```json/g,"").replace(/```/g,"").replace(/\n/g," ").trim();const t=JSON.parse(e);if("string"!==typeof t.replacement||"string"!==typeof t.originalMeaning||"string"!==typeof t.replacementMeaning)throw new Error("AI \uc751\ub2f5\uc5d0 \uc62c\ubc14\ub978 replacement, originalMeaning, replacementMeaning\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");return t}catch(l){throw new Error("JSON \ud30c\uc2f1 \uc2e4\ud328: ".concat(l))}}async function yc(e){const t="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";try{console.log("\ud83d\udd0d Work_02 \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791..."),console.log("\ud83d\udcdd Step 1: \ubb38\uc7a5 \ubd84\ub9ac \uc911...");const n=await async function(e,t){const n="You will receive an English passage. Split it into individual sentences.\nUse the following rules:\n- End of sentence is marked by '.', '?', or '!' followed by a space or newline.\n- Keep sentence punctuation.\n- Do not merge or break sentences.\n\nIMPORTANT: Return ONLY valid JSON. No explanations, no markdown, no code blocks.\n\nPassage:\n".concat(e,'\n\nRequired JSON format:\n{\n  "sentences": ["Sentence 1.", "Sentence 2?", "Sentence 3!"]\n}'),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:n}],max_tokens:1e3,temperature:0})});if(!r.ok)throw new Error("API \uc694\uccad \uc2e4\ud328: ".concat(r.status));const s=await r.json();if(!s.choices||!s.choices[0]||!s.choices[0].message)throw new Error("AI\ub85c\ubd80\ud130 \uc62c\ubc14\ub978 \uc751\ub2f5\uc744 \ubc1b\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");const i=s.choices[0].message.content.match(/\{[\s\S]*\}/);if(!i)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");try{let e=i[0].replace(/```json/g,"").replace(/```/g,"").replace(/\n/g," ").trim();const t=JSON.parse(e);if(!t.sentences||!Array.isArray(t.sentences))throw new Error("AI \uc751\ub2f5\uc5d0 sentences \ubc30\uc5f4\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");return t.sentences}catch(o){throw new Error("JSON \ud30c\uc2f1 \uc2e4\ud328: ".concat(o))}}(e,t);console.log("\u2705 ".concat(n.length,"\uac1c \ubb38\uc7a5\uc73c\ub85c \ubd84\ub9ac \uc644\ub8cc")),console.log("\ud83d\udd0d Step 2: \ub2e8\uc5b4 \uc120\ud0dd \uc911...");const r=[],s=[];for(let e=0;e<n.length;e++){const i=await fc(n[e],e,t,s);r.push(i),s.push(i.original.toLowerCase()),console.log("\u2705 \ubb38\uc7a5 ".concat(e+1,': "').concat(i.original,'" \uc120\ud0dd'))}console.log("\ud83d\udd04 Step 3: \ub2e8\uc5b4 \uad50\uccb4 \uc911...");const i=[];for(let e=0;e<n.length;e++){const s=n[e],o=r[e],a=await gc(s,o.index,o.original,t);i.push({original:o.original,replacement:a.replacement,originalMeaning:a.originalMeaning,replacementMeaning:a.replacementMeaning}),console.log("\u2705 \ubb38\uc7a5 ".concat(e+1,': "').concat(o.original,'" \u2192 "').concat(a.replacement,'"'))}console.log("\ud83d\udd04 Step 4: \ubcf8\ubb38\uc5d0\uc11c \ub2e8\uc5b4 \uad50\uccb4 \uc911...");const o=function(e,t,n){let r=e,s=0;for(let i=0;i<t.length;i++){const e=t[i],o=n[i];if(!o)continue;const a=r.indexOf(e,s);if(-1===a){console.warn("\ubb38\uc7a5 ".concat(i+1,'\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc74c: "').concat(e.substring(0,50),'..."'));continue}const l=a+e.length,c=r.substring(a,l),d=o.original.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),u=new RegExp("\\b".concat(d,"\\b"),"gi"),h=c,p=c.replace(u,o.replacement);h!==p?(console.log("\ubb38\uc7a5 ".concat(i+1,' \uad50\uccb4 \uc131\uacf5: "').concat(o.original,'" \u2192 "').concat(o.replacement,'"')),r=r.substring(0,a)+p+r.substring(l)):console.warn("\ubb38\uc7a5 ".concat(i+1,' \uad50\uccb4 \uc2e4\ud328: "').concat(o.original,'"\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c')),s=a+p.length}return r}(e,n,i);console.log("\ud83c\udf10 Step 5: \ubcf8\ubb38 \ubc88\uc5ed \uc911...");const a=await async function(e,t){const n="Translate the following English passage to Korean. Provide a natural, fluent Korean translation.\n\nPassage:\n".concat(e,"\n\nIMPORTANT: Return ONLY the Korean translation. No explanations, no markdown, no code blocks."),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:n}],max_tokens:2e3,temperature:0})});if(!r.ok)throw new Error("API \uc694\uccad \uc2e4\ud328: ".concat(r.status));const s=await r.json();if(!s.choices||!s.choices[0]||!s.choices[0].message)throw new Error("AI\ub85c\ubd80\ud130 \uc62c\ubc14\ub978 \uc751\ub2f5\uc744 \ubc1b\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");return s.choices[0].message.content.trim()}(e,t);console.log("\u2705 \ubc88\uc5ed \uc644\ub8cc");const l={title:"\ub3c5\ud574 \ubb38\uc81c",originalText:e,modifiedText:o,replacements:i,translation:a};return console.log("\ud83c\udf89 Work_02 \ud034\uc988 \uc0dd\uc131 \uc644\ub8cc:",l),l}catch(n){throw console.error("\u274c Work_02 \ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328:",n),n}}const vc=()=>(0,Se.jsx)("div",{className:"print-header-package02",children:(0,Se.jsx)("div",{className:"print-header-text-package02",children:"EdgeEnglishLab | AI \uc601\uc5b4 \ubb38\uc81c \uc0dd\uc131 \ud50c\ub7ab\ud3fc"})}),xc=e=>{let{work02Data:t,translatedText:n,printMode:r}=e;const s=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||0===t.length)return e;const r=e.split(/(?<=[.!?])\s+/).filter(e=>e.trim().length>0);let s="",i=0;for(let o=0;o<r.length;o++){const a=r[o],l=t[o];if(!l){s+=a,i+=a.length;continue}const c=e.indexOf(a,i);if(-1===c){s+=a,i+=a.length;continue}const d=c+a.length,u=(n?l.original:l.replacement).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),h=new RegExp("\\b".concat(u,"\\b"),"gi");s+=a.replace(h,'<u><strong style="color: #1976d2;">$&</strong></u>'),i=d}return s},i=(e=>{if(!e)return{needsSecondPage:!1,needsThirdPage:!1,firstPageIncludesReplacements:!0};const t=document.createElement("div");t.style.cssText="\n      position: absolute;\n      top: -9999px;\n      left: -9999px;\n      width: 100%;\n      max-width: 100%;\n      font-family: 'Noto Sans KR', 'IBM Plex Sans KR', Arial, sans-serif;\n      visibility: hidden;\n      pointer-events: none;\n    ",document.body.appendChild(t);const n=document.createElement("div");n.style.cssText="\n      font-weight: 800;\n      font-size: 0.9rem;\n      background: #222;\n      color: #fff;\n      padding: 0.7rem 0.5rem;\n      border-radius: 8px;\n      margin-bottom: 0.8rem;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      width: 100%;\n      box-sizing: border-box;\n    ",n.innerHTML='<span>\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694</span><span style="font-size:0.9rem; font-weight:700; color:#FFD700;">\uc720\ud615#02</span>';const r=document.createElement("div");r.style.cssText="\n      margin-top: 0.9rem;\n      font-size: 0.9rem;\n      padding: 1rem;\n      background: #FFF3CD;\n      border-radius: 8px;\n      border: 1.5px solid #e3f2fd;\n      font-family: inherit;\n      color: #222;\n      line-height: 1.7;\n      box-sizing: border-box;\n      word-wrap: break-word;\n      width: 100%;\n      max-width: 100%;\n      overflow-wrap: break-word;\n      white-space: normal;\n      margin: 0;\n    ",r.textContent=e.modifiedText||"",t.appendChild(n),t.appendChild(r);const s=n.scrollHeight+r.scrollHeight+20,i=document.createElement("div");i.style.cssText="\n      font-weight: 800;\n      font-size: 0.9rem;\n      background: #222;\n      color: #fff;\n      padding: 0.7rem 0.5rem;\n      border-radius: 8px;\n      margin-bottom: 0rem;\n      display: block;\n      width: 100%;\n      box-sizing: border-box;\n    ",i.textContent="\uad50\uccb4\ub41c \ub2e8\uc5b4\ub4e4";const o=document.createElement("div");o.style.cssText="\n      width: 100%;\n      border-collapse: collapse;\n      margin: 1rem 0;\n      font-size: 1rem;\n      table-layout: fixed;\n      box-sizing: border-box;\n    ";let a='<table style="width: 100%; border-collapse: collapse; background: white; border: 1px solid #ddd;">';a+="<thead><tr><th>\uc6d0\ub798 \ub2e8\uc5b4</th><th>\uad50\uccb4\ub41c \ub2e8\uc5b4</th><th>\uc6d0\ub798 \ub2e8\uc5b4</th><th>\uad50\uccb4\ub41c \ub2e8\uc5b4</th></tr></thead><tbody>";const l=Math.ceil(e.replacements.length/2);for(let g=0;g<l;g++){const t=e.replacements[2*g],n=e.replacements[2*g+1];a+="<tr>",a+="<td>".concat(t?"".concat(t.original," (").concat(t.originalMeaning,")"):"","</td>"),a+="<td>".concat(t?"".concat(t.replacement," (").concat(t.replacementMeaning,")"):"","</td>"),a+="<td>".concat(n?"".concat(n.original," (").concat(n.originalMeaning,")"):"","</td>"),a+="<td>".concat(n?"".concat(n.replacement," (").concat(n.replacementMeaning,")"):"","</td>"),a+="</tr>"}a+="</tbody></table>",o.innerHTML=a,t.appendChild(i),t.appendChild(o);const c=i.scrollHeight+o.scrollHeight+20,d=document.createElement("div");d.style.cssText="\n      font-size: 16px;\n      padding: 16px;\n      background: #F1F8E9;\n      border-radius: 8px;\n      font-family: inherit;\n      color: #222;\n      line-height: 1.7;\n      box-sizing: border-box;\n      word-wrap: break-word;\n      width: 100%;\n      max-width: 100%;\n      overflow-wrap: break-word;\n      white-space: normal;\n      margin: 0;\n    ",d.textContent=e.translation||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911...",t.appendChild(d);const u=d.scrollHeight+20;document.body.removeChild(t);const h=950;let p=!1,m=!1,f=!0;return s+c+u<=h?(p=!1,m=!1,f=!0):s+c<=h?(p=!0,m=!1,f=!0):s<=h&&c+u<=h?(p=!0,m=!1,f=!1):(p=!0,m=!0,f=!1),{needsSecondPage:p,needsThirdPage:m,firstPageIncludesReplacements:f}})(t),o=i.needsSecondPage,a=i.needsThirdPage,l=i.firstPageIncludesReplacements;return"no-answer"===r?(0,Se.jsx)("div",{className:"only-print",children:(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#02"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",border:"1.5px solid #e3f2fd",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},dangerouslySetInnerHTML:{__html:s(t.modifiedText,t.replacements,!1)}})]})})]})}):"with-answer"===r?o?o&&!a?l?(0,Se.jsxs)("div",{className:"only-print print-answer-mode",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#02"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",border:"1.5px solid #e3f2fd",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},dangerouslySetInnerHTML:{__html:s(t.modifiedText,t.replacements,!1)}}),(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0rem",display:"block",width:"100%"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\ub4e4"}),t.replacements&&t.replacements.length>0?(0,Se.jsx)("div",{style:{marginTop:"0rem"},children:(()=>{const e=t.replacements.length,n=Math.ceil(e/2);return(0,Se.jsxs)("table",{className:"replacements-table",children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"\uc6d0\ub798 \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uc6d0\ub798 \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4"})]})}),(0,Se.jsx)("tbody",{children:Array.from({length:n},(e,n)=>{const r=t.replacements[2*n],s=t.replacements[2*n+1];return(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{children:r&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"original-word",children:r.original}),(0,Se.jsxs)("span",{className:"original-meaning",children:[" (",r.originalMeaning,")"]})]})}),(0,Se.jsx)("td",{children:r&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"replacement-word",children:r.replacement}),(0,Se.jsxs)("span",{className:"replacement-meaning",children:[" (",r.replacementMeaning,")"]})]})}),(0,Se.jsx)("td",{children:s&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"original-word",children:s.original}),(0,Se.jsxs)("span",{className:"original-meaning",children:[" (",s.originalMeaning,")"]})]})}),(0,Se.jsx)("td",{children:s&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"replacement-word",children:s.replacement}),(0,Se.jsxs)("span",{className:"replacement-meaning",children:[" (",s.replacementMeaning,")"]})]})})]},n)})})]})})()}):(0,Se.jsx)("div",{style:{textAlign:"center",color:"#666",fontStyle:"italic"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{marginTop:"0.63rem",fontSize:"1rem !important",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:t.translation||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."})]})})]})]}):(0,Se.jsxs)("div",{className:"only-print print-answer-mode",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#02"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",border:"1.5px solid #e3f2fd",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},dangerouslySetInnerHTML:{__html:s(t.modifiedText,t.replacements,!1)}})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0rem",display:"block",width:"100%"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\ub4e4"}),t.replacements&&t.replacements.length>0?(0,Se.jsx)("div",{style:{marginTop:"0rem"},children:(()=>{const e=t.replacements.length,n=Math.ceil(e/2);return(0,Se.jsxs)("table",{className:"replacements-table",children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"\uc6d0\ub798 \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uc6d0\ub798 \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4"})]})}),(0,Se.jsx)("tbody",{children:Array.from({length:n},(e,n)=>{const r=t.replacements[2*n],s=t.replacements[2*n+1];return(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{children:r&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"original-word",children:r.original}),(0,Se.jsxs)("span",{className:"original-meaning",children:[" (",r.originalMeaning,")"]})]})}),(0,Se.jsx)("td",{children:r&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"replacement-word",children:r.replacement}),(0,Se.jsxs)("span",{className:"replacement-meaning",children:[" (",r.replacementMeaning,")"]})]})}),(0,Se.jsx)("td",{children:s&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"original-word",children:s.original}),(0,Se.jsxs)("span",{className:"original-meaning",children:[" (",s.originalMeaning,")"]})]})}),(0,Se.jsx)("td",{children:s&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"replacement-word",children:s.replacement}),(0,Se.jsxs)("span",{className:"replacement-meaning",children:[" (",s.replacementMeaning,")"]})]})})]},n)})})]})})()}):(0,Se.jsx)("div",{style:{textAlign:"center",color:"#666",fontStyle:"italic"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%",marginTop:"1.5rem"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{marginTop:"0.63rem",fontSize:"1rem !important",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:t.translation||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."})]})})]})]}):(0,Se.jsxs)("div",{className:"only-print print-answer-mode",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#02"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",border:"1.5px solid #e3f2fd",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},dangerouslySetInnerHTML:{__html:s(t.modifiedText,t.replacements,!1)}})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0rem",display:"block",width:"100%"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\ub4e4"}),t.replacements&&t.replacements.length>0?(0,Se.jsx)("div",{style:{marginTop:"0rem"},children:(()=>{const e=t.replacements.length,n=Math.ceil(e/2);return(0,Se.jsxs)("table",{className:"replacements-table",children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"\uc6d0\ub798 \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uc6d0\ub798 \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4"})]})}),(0,Se.jsx)("tbody",{children:Array.from({length:n},(e,n)=>{const r=t.replacements[2*n],s=t.replacements[2*n+1];return(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{children:r&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"original-word",children:r.original}),(0,Se.jsxs)("span",{className:"original-meaning",children:[" (",r.originalMeaning,")"]})]})}),(0,Se.jsx)("td",{children:r&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"replacement-word",children:r.replacement}),(0,Se.jsxs)("span",{className:"replacement-meaning",children:[" (",r.replacementMeaning,")"]})]})}),(0,Se.jsx)("td",{children:s&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"original-word",children:s.original}),(0,Se.jsxs)("span",{className:"original-meaning",children:[" (",s.originalMeaning,")"]})]})}),(0,Se.jsx)("td",{children:s&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"replacement-word",children:s.replacement}),(0,Se.jsxs)("span",{className:"replacement-meaning",children:[" (",s.replacementMeaning,")"]})]})})]},n)})})]})})()}):(0,Se.jsx)("div",{style:{textAlign:"center",color:"#666",fontStyle:"italic"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{marginTop:"0.63rem",fontSize:"1rem !important",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:t.translation||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."})]})})]})]}):(0,Se.jsx)("div",{className:"only-print print-answer-mode",children:(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#02"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",border:"1.5px solid #e3f2fd",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},dangerouslySetInnerHTML:{__html:s(t.modifiedText,t.replacements,!1)}}),(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0rem",display:"block",width:"100%"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\ub4e4"}),t.replacements&&t.replacements.length>0?(0,Se.jsx)("div",{style:{marginTop:"0rem"},children:(()=>{const e=t.replacements.length,n=Math.ceil(e/2);return(0,Se.jsxs)("table",{className:"replacements-table",children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"\uc6d0\ub798 \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uc6d0\ub798 \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4"})]})}),(0,Se.jsx)("tbody",{children:Array.from({length:n},(e,n)=>{const r=t.replacements[2*n],s=t.replacements[2*n+1];return(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{children:r&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"original-word",children:r.original}),(0,Se.jsxs)("span",{className:"original-meaning",children:[" (",r.originalMeaning,")"]})]})}),(0,Se.jsx)("td",{children:r&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"replacement-word",children:r.replacement}),(0,Se.jsxs)("span",{className:"replacement-meaning",children:[" (",r.replacementMeaning,")"]})]})}),(0,Se.jsx)("td",{children:s&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"original-word",children:s.original}),(0,Se.jsxs)("span",{className:"original-meaning",children:[" (",s.originalMeaning,")"]})]})}),(0,Se.jsx)("td",{children:s&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"replacement-word",children:s.replacement}),(0,Se.jsxs)("span",{className:"replacement-meaning",children:[" (",s.replacementMeaning,")"]})]})})]},n)})})]})})()}):(0,Se.jsx)("div",{style:{textAlign:"center",color:"#666",fontStyle:"italic"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%",marginTop:"1.5rem"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{marginTop:"0.63rem",fontSize:"1rem !important",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:t.translation||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."})]})})]})}):null},bc=e=>{let{work03Data:t,translatedText:n,printMode:r}=e;if("no-answer"===r){const e=t.blankedText.length>=2e3;return(0,Se.jsx)("div",{className:"only-print",children:e?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uac00\uc7a5 \uc801\uc808\ud55c \ub2e8\uc5b4\ub97c \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#03"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#f7f8fc",borderRadius:"8px",border:"1.5px solid #e3e6f0",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:t.blankedText})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uac00\uc7a5 \uc801\uc808\ud55c \ub2e8\uc5b4\ub97c \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#03"})]}),t.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[["\u2460","\u2461","\u2462","\u2463","\u2464"][t]," ",e]},t))]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uac00\uc7a5 \uc801\uc808\ud55c \ub2e8\uc5b4\ub97c \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#03"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#f7f8fc",borderRadius:"8px",border:"1.5px solid #e3e6f0",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:t.blankedText}),t.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[["\u2460","\u2461","\u2462","\u2463","\u2464"][t]," ",e]},t))]})})]})})}return"with-answer"===r?(0,Se.jsxs)("div",{className:"only-print print-answer-mode",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uac00\uc7a5 \uc801\uc808\ud55c \ub2e8\uc5b4\ub97c \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#03"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#f7f8fc",borderRadius:"8px",border:"1.5px solid #e3e6f0",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:t.blankedText}),(0,Se.jsxs)("div",{className:"option option-print",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[["\u2460","\u2461","\u2462","\u2463","\u2464"][t.answerIndex]," ",t.options[t.answerIndex]]}),(0,Se.jsxs)("div",{className:"answer-section",style:{textAlign:"left",color:"#1976d2",fontWeight:700,fontSize:"1rem",margin:"0",padding:"0"},children:["\uc815\ub2f5: ",["\u2460","\u2461","\u2462","\u2463","\u2464"][t.answerIndex]]})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{marginTop:"0.9rem",fontSize:"1rem",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",border:"1.5px solid #c8e6c9",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:n||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."})]})})]})]}):null},wc=e=>{let{work04Data:t,translatedText:n,printMode:r}=e;if("no-answer"===r){const e=t.blankedText.length>=2e3;return(0,Se.jsx)("div",{className:"only-print",children:e?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uad6c(phrase)\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#04"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#f7f8fc",borderRadius:"8px",border:"1.5px solid #e3e6f0",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:t.blankedText})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uad6c(phrase)\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#04"})]}),t.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[["\u2460","\u2461","\u2462","\u2463","\u2464"][t]," ",e]},t))]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uad6c(phrase)\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#04"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#f7f8fc",borderRadius:"8px",border:"1.5px solid #e3e6f0",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:t.blankedText}),t.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[["\u2460","\u2461","\u2462","\u2463","\u2464"][t]," ",e]},t))]})})]})})}return"with-answer"===r?(0,Se.jsxs)("div",{className:"only-print print-answer-mode",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uad6c(phrase)\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#04"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#f7f8fc",borderRadius:"8px",border:"1.5px solid #e3e6f0",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:t.blankedText}),(0,Se.jsxs)("div",{className:"option option-print",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[["\u2460","\u2461","\u2462","\u2463","\u2464"][t.answerIndex]," ",t.options[t.answerIndex]]}),(0,Se.jsxs)("div",{className:"answer-section",style:{textAlign:"left",color:"#1976d2",fontWeight:700,fontSize:"1rem",margin:"0",padding:"0"},children:["\uc815\ub2f5: ",["\u2460","\u2461","\u2462","\u2463","\u2464"][t.answerIndex]]})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{marginTop:"0.9rem",fontSize:"1rem",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",border:"1.5px solid #c8e6c9",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:n||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."})]})})]})]}):null},jc=e=>{let{work05Data:t,translatedText:n,printMode:r}=e;if("no-answer"===r){const e=t.blankedText.length>=2e3;return(0,Se.jsx)("div",{className:"only-print work-05-print",children:e?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uac00\uc7a5 \uc801\uc808\ud55c \ubb38\uc7a5\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#05"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#f7f8fc",borderRadius:"8px",border:"1.5px solid #e3e6f0",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:t.blankedText})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uac00\uc7a5 \uc801\uc808\ud55c \ubb38\uc7a5\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#05"})]}),t.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option option-print",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[["\u2460","\u2461","\u2462","\u2463","\u2464"][t]," ",e]},t))]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uac00\uc7a5 \uc801\uc808\ud55c \ubb38\uc7a5\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#05"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#f7f8fc",borderRadius:"8px",border:"1.5px solid #e3e6f0",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:t.blankedText}),t.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option option-print",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[["\u2460","\u2461","\u2462","\u2463","\u2464"][t]," ",e]},t))]})})]})})}return"with-answer"===r?(0,Se.jsxs)("div",{className:"only-print work-05-print",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uac00\uc7a5 \uc801\uc808\ud55c \ubb38\uc7a5\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#05"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#f7f8fc",borderRadius:"8px",border:"1.5px solid #e3e6f0",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:t.blankedText}),(0,Se.jsx)("div",{className:"problem-options",style:{margin:"1rem 0"},children:t.options.map((e,n)=>(0,Se.jsxs)("div",{style:{margin:"0.8rem 0",fontFamily:"inherit"},children:[(0,Se.jsxs)("div",{className:"option-english",style:{fontSize:"0.9rem",color:"#222",lineHeight:"1.3",margin:"0",padding:"0"},children:[["\u2460","\u2461","\u2462","\u2463","\u2464"][n]," ",e,t.answerIndex===n&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:" (\uc815\ub2f5)"})]}),t.optionTranslations&&t.optionTranslations[n]&&(0,Se.jsx)("div",{className:"option-translation",style:{fontSize:"0.8rem",color:"#666",marginTop:"0.2rem",marginLeft:"1rem",fontStyle:"italic",lineHeight:"1.2",padding:"0"},children:t.optionTranslations[n]})]},n))})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction work05-print-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginTop:"1.2rem",marginBottom:"0.8rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation work05-print-translation",style:{marginTop:"0.9rem",fontSize:"1rem",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",border:"1.5px solid #c8e6c9",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:n||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."})]})})]})]}):null},Nc=e=>{let{work06Data:t,translatedText:n,printMode:r}=e;return"no-answer"===r?(0,Se.jsx)("div",{className:"only-print work-06-print",children:(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \uc544\ub798 \ubcf8\ubb38\uc5d0\uc11c \ube60\uc9c4 \uc8fc\uc81c \ubb38\uc7a5\uc744 \uac00\uc7a5 \uc801\uc808\ud55c \uc704\uce58\uc5d0 \ub123\uc73c\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#06"})]}),(0,Se.jsxs)("div",{className:"missing-sentence-box",style:{border:"2px solid #222",borderRadius:"6px",background:"#f7f8fc",padding:"0.8em 1.2em",marginTop:"1rem",marginBottom:"1rem",fontWeight:700,fontSize:"0.9rem"},children:[(0,Se.jsx)("span",{style:{color:"#222"},children:"\uc8fc\uc694 \ubb38\uc7a5:"})," ",(0,Se.jsx)("span",{style:{color:"#6a5acd"},children:t.missingSentence})]}),(0,Se.jsx)("div",{style:{fontSize:"1rem",lineHeight:"1.7",margin:"0.3rem 0",background:"#FFF3CD",border:"1.5px solid #e3e6f0",borderRadius:"8px",padding:"1rem",fontFamily:"inherit",color:"#222",whiteSpace:"pre-line"},children:t.numberedPassage})]})})]})}):"with-answer"===r?(0,Se.jsxs)("div",{className:"only-print work-06-print",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \uc544\ub798 \ubcf8\ubb38\uc5d0\uc11c \ube60\uc9c4 \uc8fc\uc81c \ubb38\uc7a5\uc744 \uac00\uc7a5 \uc801\uc808\ud55c \uc704\uce58\uc5d0 \ub123\uc73c\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#06"})]}),(0,Se.jsxs)("div",{className:"missing-sentence-box",style:{border:"2px solid #222",borderRadius:"6px",background:"#f7f8fc",padding:"0.8em 1.2em",marginTop:"1rem",marginBottom:"1rem",fontWeight:700,fontSize:"0.9rem"},children:[(0,Se.jsx)("span",{style:{color:"#222"},children:"\uc8fc\uc694 \ubb38\uc7a5:"})," ",(0,Se.jsx)("span",{style:{color:"#6a5acd"},children:t.missingSentence})]}),(0,Se.jsx)("div",{style:{fontSize:"1rem",lineHeight:"1.7",margin:"0.3rem 0",background:"#FFF3CD",border:"1.5px solid #e3e6f0",borderRadius:"8px",padding:"1rem",fontFamily:"inherit",color:"#222",whiteSpace:"pre-line"},children:t.numberedPassage}),(0,Se.jsxs)("div",{className:"problem-answer",style:{marginTop:"1.2rem",color:"#1976d2",fontWeight:700,fontSize:"0.9rem"},children:["\uc815\ub2f5: ","\u2460\u2461\u2462\u2463\u2464"[t.answerIndex]||t.answerIndex+1]})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{marginTop:"0.9rem",fontSize:"1rem",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",border:"1.5px solid #c8e6c9",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:n||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."})]})})]})]}):null},kc=e=>{var t,n;let{work07Data:r,translatedText:s,printMode:i}=e;if(console.log("\ud83d\udda8\ufe0f PrintFormatPackage01Work07 \ub80c\ub354\ub9c1:",{printMode:i,hasWork07Data:!!r,hasTranslatedText:!!s,work07DataKeys:r?Object.keys(r):null,work07DataContent:r?{passage:(null===(t=r.passage)||void 0===t?void 0:t.substring(0,100))+"...",optionsCount:null===(n=r.options)||void 0===n?void 0:n.length,answerIndex:r.answerIndex}:null}),!r)return console.error("\u274c work07Data\uac00 \uc5c6\uc2b5\ub2c8\ub2e4!"),(0,Se.jsx)("div",{children:"Work_07 \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."});if(!r.passage)return console.error("\u274c work07Data.passage\uac00 \uc5c6\uc2b5\ub2c8\ub2e4!"),(0,Se.jsx)("div",{children:"Work_07 passage\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."});if(!r.options||0===r.options.length)return console.error("\u274c work07Data.options\uac00 \uc5c6\uc2b5\ub2c8\ub2e4!"),(0,Se.jsx)("div",{children:"Work_07 options\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."});if("no-answer"===i){const e=r.passage.length>=2e3;return(0,Se.jsx)("div",{className:"only-print work-07-print",children:e?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",marginTop:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc758 \uc8fc\uc81c\ub97c \uac00\uc7a5 \uc798 \ub098\ud0c0\ub0b4\ub294 \ubb38\uc7a5\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#07"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem"},children:r.passage})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",marginTop:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc758 \uc8fc\uc81c\ub97c \uac00\uc7a5 \uc798 \ub098\ud0c0\ub0b4\ub294 \ubb38\uc7a5\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#07"})]}),r.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[String.fromCharCode(65+t),". ",e]},t))]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",marginTop:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc758 \uc8fc\uc81c\ub97c \uac00\uc7a5 \uc798 \ub098\ud0c0\ub0b4\ub294 \ubb38\uc7a5\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#07"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem"},children:r.passage}),r.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[String.fromCharCode(65+t),". ",e]},t))]})})]})})}if("with-answer"===i){return(()=>(r.passage?r.passage.length:0)+(r.options?r.options.reduce((e,t)=>e+t.length,0):0)+(s?s.length:0))()>=4e3?(0,Se.jsxs)("div",{className:"only-print work-07-print",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.5rem 0.4rem",borderRadius:"8px",marginBottom:"0.8rem",marginTop:"0.3rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc758 \uc8fc\uc81c\ub97c \uac00\uc7a5 \uc798 \ub098\ud0c0\ub0b4\ub294 \ubb38\uc7a5\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#07"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.6rem",fontSize:"0.9rem"},children:r.passage}),r.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.3rem",paddingLeft:"0.4rem",paddingRight:"0.4rem"},children:[String.fromCharCode(65+t),". ",e,t===r.answerIndex?" (\uc815\ub2f5)":""]},t))]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:"800",fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",marginTop:"0.5rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"translation-content",style:{fontSize:"0.9rem",lineHeight:"1.6",padding:"1rem",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#f1f8e9",marginTop:"1.5rem"},children:s})]})})]})]}):(0,Se.jsx)("div",{className:"only-print work-07-print",children:(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.5rem 0.4rem",borderRadius:"8px",marginBottom:"0.8rem",marginTop:"0.3rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc758 \uc8fc\uc81c\ub97c \uac00\uc7a5 \uc798 \ub098\ud0c0\ub0b4\ub294 \ubb38\uc7a5\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#07"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.6rem",fontSize:"0.9rem"},children:r.passage}),r.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.3rem",paddingLeft:"0.4rem",paddingRight:"0.4rem"},children:[String.fromCharCode(65+t),". ",e,t===r.answerIndex?" (\uc815\ub2f5)":""]},t)),(0,Se.jsxs)("div",{className:"translation-section",style:{marginTop:"0.8rem"},children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:"800",fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.5rem 0.4rem",borderRadius:"8px",marginBottom:"0.6rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"translation-content",style:{fontSize:"0.9rem",lineHeight:"1.5",padding:"0.8rem",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#F1F8E9"},children:s})]})]})})]})})}return null},Sc=e=>{var t,n;let{work08Data:r,translatedText:s,printMode:i}=e;if(console.log("\ud83d\udda8\ufe0f PrintFormatPackage01Work08 \ub80c\ub354\ub9c1:",{printMode:i,hasWork08Data:!!r,hasTranslatedText:!!s,work08DataKeys:r?Object.keys(r):null,work08DataContent:r?{passage:(null===(t=r.passage)||void 0===t?void 0:t.substring(0,100))+"...",optionsCount:null===(n=r.options)||void 0===n?void 0:n.length,answerIndex:r.answerIndex}:null}),!r)return console.error("\u274c work08Data\uac00 \uc5c6\uc2b5\ub2c8\ub2e4!"),(0,Se.jsx)("div",{children:"Work_08 \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."});if(!r.passage)return console.error("\u274c work08Data.passage\uac00 \uc5c6\uc2b5\ub2c8\ub2e4!"),(0,Se.jsx)("div",{children:"Work_08 passage\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."});if(!r.options||0===r.options.length)return console.error("\u274c work08Data.options\uac00 \uc5c6\uc2b5\ub2c8\ub2e4!"),(0,Se.jsx)("div",{children:"Work_08 options\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."});if("no-answer"===i){const e=r.passage.length>=2e3;return(0,Se.jsx)("div",{className:"only-print work-08-print",children:e?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",marginTop:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc5d0 \uac00\uc7a5 \uc801\ud569\ud55c \uc81c\ubaa9\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#08"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem"},children:r.passage})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",marginTop:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc5d0 \uac00\uc7a5 \uc801\ud569\ud55c \uc81c\ubaa9\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#08"})]}),r.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[String.fromCharCode(65+t),". ",e]},t))]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",marginTop:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc5d0 \uac00\uc7a5 \uc801\ud569\ud55c \uc81c\ubaa9\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#08"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem"},children:r.passage}),r.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[String.fromCharCode(65+t),". ",e]},t))]})})]})})}if("with-answer"===i){return(()=>(r.passage?r.passage.length:0)+(r.options?r.options.reduce((e,t)=>e+t.length,0):0)+(s?s.length:0))()>=2e3?(0,Se.jsxs)("div",{className:"only-print work-08-print",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",marginTop:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc5d0 \uac00\uc7a5 \uc801\ud569\ud55c \uc81c\ubaa9\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#08"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem"},children:r.passage}),r.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[String.fromCharCode(65+t),". ",e]},t)),(0,Se.jsxs)("div",{className:"answer-section",style:{textAlign:"left",color:"#1976d2",fontWeight:700,fontSize:"1rem",margin:"1rem 0",padding:"0"},children:["\uc815\ub2f5: ",String.fromCharCode(65+r.answerIndex),". ",r.options[r.answerIndex]]})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:"800",fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",marginTop:"0.5rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"translation-content",style:{fontSize:"0.9rem",lineHeight:"1.6",padding:"1rem",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#f1f8e9",marginTop:"1.5rem"},children:s})]})})]})]}):(0,Se.jsx)("div",{className:"only-print work-08-print",children:(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",marginTop:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc5d0 \uac00\uc7a5 \uc801\ud569\ud55c \uc81c\ubaa9\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#08"})]}),(0,Se.jsx)("div",{className:"problem-passage",style:{marginTop:"0.9rem",fontSize:"0.9rem"},children:r.passage}),r.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[String.fromCharCode(65+t),". ",e]},t)),(0,Se.jsxs)("div",{className:"answer-section",style:{textAlign:"left",color:"#1976d2",fontWeight:700,fontSize:"1rem",margin:"1rem 0",padding:"0"},children:["\uc815\ub2f5: ",String.fromCharCode(65+r.answerIndex),". ",r.options[r.answerIndex]]}),(0,Se.jsxs)("div",{className:"translation-section",style:{marginTop:"1.5rem"},children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:"800",fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"translation-content",style:{fontSize:"0.9rem",lineHeight:"1.6",padding:"1rem",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#F1F8E9"},children:s})]})]})})]})})}return null},_c=e=>{let{work09Data:t,translatedText:n,printMode:r}=e;if(console.log("\ud83d\udda8\ufe0f PrintFormatPackage01Work09 \ub80c\ub354\ub9c1:",{hasWork09Data:!!t,printMode:r,work09Data:t,translatedText:n}),!t)return console.error("\u274c Work_09 \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4:",{work09Data:t}),null;if(!t.passage)return console.error("\u274c Work_09 passage\uac00 \uc5c6\uc2b5\ub2c8\ub2e4:",{work09Data:t}),null;if(!t.options)return console.error("\u274c Work_09 options\uac00 \uc5c6\uc2b5\ub2c8\ub2e4:",{work09Data:t}),null;const s=e=>e.replace(/<u>(.*?)<\/u>/g,"<u>$1</u>"),i="\u2460\u2461\u2462\u2463\u2464"[t.answerIndex]||"".concat(t.answerIndex+1);if("no-answer"===r){const e=t.passage.length>=2e3;return(0,Se.jsx)("div",{className:"only-print work-09-print",children:e?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc740?"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#09"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",border:"1.5px solid #e3e6f0",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:s(t.passage).replace(/\n/g,"<br/>")}})})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc740?"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#09"})]}),t.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e]},t))]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc740?"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#09"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",border:"1.5px solid #e3e6f0",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:s(t.passage).replace(/\n/g,"<br/>")}})}),t.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")," ",e]},t))]})})]})})}return"with-answer"===r?(0,Se.jsxs)("div",{className:"only-print work-09-print",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc740?"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#09"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:s(t.passage).replace(/\n/g,"<br/>")}})}),t.options.map((e,n)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[n]||"".concat(n+1,".")," ",e,t.answerIndex===n&&(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:800,marginLeft:8},children:" (\uc815\ub2f5)"})]},n)),(0,Se.jsxs)("div",{className:"problem-answer",style:{marginTop:"1.2rem",color:"#1976d2",fontWeight:700,fontSize:"0.9rem"},children:["\uc815\ub2f5: ",i," ",t.options[t.answerIndex]," (\uc815\uc0c1 \ub2e8\uc5b4/\uad6c: ",t.original,")"]})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{marginTop:"0.9rem",fontSize:"1rem",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",border:"1.5px solid #c8e6c9",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:n||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."})]})})]})]}):null},Tc=e=>{let{work10Data:t,translatedText:n,printMode:r}=e;const s=e=>e.replace(/<u>(.*?)<\/u>/g,"<u>$1</u>");t.passage.length,n.length;if("no-answer"===r){const e=t.passage.length>=2e3;return(0,Se.jsx)("div",{className:"only-print work-10-print",children:e?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc758 \uac1c\uc218\ub294?"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#10"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:s(t.passage).replace(/\n/g,"<br/>")}})})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc758 \uac1c\uc218\ub294?"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#10"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:s(t.passage).replace(/\n/g,"<br/>")}})}),t.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"1rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1)," ",e,"\uac1c"]},t))]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc758 \uac1c\uc218\ub294?"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#10"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:s(t.passage).replace(/\n/g,"<br/>")}})}),t.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"1rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1)," ",e,"\uac1c"]},t))]})})]})})}if(!0)return(0,Se.jsxs)("div",{className:"only-print work-10-print",children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc758 \uac1c\uc218\ub294?"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#10"})]}),(0,Se.jsx)("div",{style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:s(t.passage).replace(/\n/g,"<br/>")}})}),t.options.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"1rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem",fontFamily:"inherit",color:"#222"},children:["\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1)," ",e,"\uac1c"]},t)),(0,Se.jsxs)("div",{className:"problem-answer",style:{marginTop:"1.2rem",color:"#1976d2",fontWeight:700,fontSize:"0.9rem"},children:["\uc815\ub2f5: ","\u2460\u2461\u2462\u2463\u2464"[t.answerIndex]||"".concat(t.answerIndex+1)," ",t.options[t.answerIndex]," (\uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \ub2e8\uc5b4: ",t.wrongIndexes.map(e=>"".concat("\u2460\u2461\u2462\u2463\u2464\u2465\u2466\u2467"[e]).concat(t.transformedWords[e]," \u2192 ").concat(t.originalWords[e])).join(", "),")"]})]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsx)("div",{className:"quiz-content",children:(0,Se.jsxs)("div",{className:"translation-section",style:{marginTop:"0.5rem",pageBreakBefore:"auto",pageBreakInside:"avoid"},children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"problem-passage translation",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#F1F8E9",borderRadius:"8px",border:"1.5px solid #c8e6c9",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:n||"\ubc88\uc5ed\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."})]})})})]})]});return null},Cc=e=>{let{work11Data:t,printMode:n}=e;return t?(0,Se.jsx)("div",{className:"only-print work-11-print",children:(0,Se.jsx)(Al,{sentences:t.sentences,translations:t.translations,includeAnswer:"with-answer"===n,printMode:n,customHeader:(0,Se.jsx)(vc,{})})}):null},Ec=e=>{let{work13Data:t,printMode:n}=e;if(!t)return null;t.blankedText&&t.blankedText.length;return"no-answer"===n?(0,Se.jsx)("div",{className:"only-print work-13-print",children:(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ub2e8\uc5b4\ub97c \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#13"})]}),(0,Se.jsx)("div",{className:"package01-work13-problem-text",style:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7",border:"2px solid #e3e6f0"},children:t.blankedText})]})})]})}):"with-answer"===n?(0,Se.jsx)("div",{className:"only-print work-13-print",children:(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ub2e8\uc5b4\ub97c \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#13"})]}),(0,Se.jsx)("div",{className:"package01-work13-answer-text",style:{marginTop:"0.9rem",marginBottom:"1.5rem",fontSize:"1rem !important",padding:"1rem",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7",border:"2px solid #e3e6f0"},children:(()=>{const e=t.blankedText.split(/(\(_{15}\))/);let n=0;return e.map((e,r)=>{if("(_______________)"===e){var s;const e=(null===(s=t.correctAnswers)||void 0===s?void 0:s[n])||"\uc815\ub2f5 \uc5c6\uc74c";return n++,(0,Se.jsxs)("span",{style:{color:"#1976d2",fontWeight:"bold"},children:["(",e,")"]},r)}return e})})()}),(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginTop:"2.5rem",marginBottom:"1rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"package01-work13-translation",style:{fontSize:"1rem !important",padding:"1rem",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7",border:"2px solid #e3e6f0",marginTop:"1rem"},children:t.translation})]})})]})}):null},Ic=e=>{let{work14Data:t,printMode:n}=e;if(!t)return null;const r=(e,t)=>{let n=e,r=0;return n=n.replace(/\(_{20,}[A-Z]_{20,}\)/g,()=>{if(r<t.length){const e=t[r++];return'(<span style="color: #1976d2; font-weight: bold;">'.concat(e,"</span>)")}return"(____________________A____________________)"}),n};return"no-answer"===n?(0,Se.jsx)("div",{className:"only-print work-14-print",children:(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ubb38\uc7a5\uc744 \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#14"})]}),(0,Se.jsx)("div",{className:"package01-work14-problem-text",style:{marginTop:"0.9rem",fontSize:"1rem !important",padding:"1rem",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7",border:"2px solid #e3e6f0"},children:t.blankedText})]})})]})}):"with-answer"===n?(0,Se.jsx)("div",{className:"only-print work-14-print",children:(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ubb38\uc7a5\uc744 \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#14"})]}),(0,Se.jsx)("div",{className:"package01-work14-answer-text",style:{marginTop:"0.9rem",marginBottom:"1.5rem",fontSize:"1rem !important",padding:"1rem",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7",border:"2px solid #e3e6f0"},dangerouslySetInnerHTML:{__html:t.correctAnswers?r(t.blankedText,t.correctAnswers):t.selectedSentences?r(t.blankedText,t.selectedSentences):t.blankedText}}),(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginTop:"1.5rem",marginBottom:"1rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{className:"package01-work14-translation",style:{fontSize:"1rem !important",padding:"1rem",borderRadius:"8px",fontFamily:"inherit",color:"#222",lineHeight:"1.7",border:"2px solid #e3e6f0",marginTop:"1rem"},children:t.translation})]})})]})}):null},Ac=e=>{let{quiz:t,translatedText:n,printMode:r}=e;const s=t.shuffledParagraphs.reduce((e,t)=>e+t.content.length,0)>=2e3,i=(()=>{const e=t.choices[t.answerIndex],n=t.shuffledParagraphs&&t.shuffledParagraphs.length>0&&t.shuffledParagraphs[0].content?t.shuffledParagraphs:t.paragraphs||[];return e.reduce((e,t)=>{const r=n.find(e=>e.label===t);return r&&r.content?e+r.content.length:e},0)>=2e3})();return"no-answer"===r?(0,Se.jsx)("div",{className:"only-print",children:s?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",marginTop:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ub2e8\ub77d\ub4e4\uc744 \uc6d0\ub798 \uc21c\uc11c\ub300\ub85c \ubc30\uc5f4\ud55c \uac83\uc744 \uace0\ub974\uc138\uc694"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#01"})]}),t.shuffledParagraphs.map((e,t)=>(0,Se.jsxs)("div",{className:"shuffled-paragraph",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",border:"1.5px solid #e3f2fd",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:[(0,Se.jsxs)("strong",{children:[e.label,":"]})," ",e.content]},e.id))]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",marginTop:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ub2e8\ub77d\ub4e4\uc744 \uc6d0\ub798 \uc21c\uc11c\ub300\ub85c \ubc30\uc5f4\ud55c \uac83\uc744 \uace0\ub974\uc138\uc694"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#01"})]}),t.shuffledParagraphs.slice(3).map((e,t)=>(0,Se.jsxs)("div",{className:"shuffled-paragraph",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",border:"1.5px solid #e3f2fd",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:[(0,Se.jsxs)("strong",{children:[e.label,":"]})," ",e.content]},e.id)),t.choices.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[["\u2460","\u2461","\u2462","\u2463"][t]," ",e.join(" \u2192 ")]},t))]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",marginTop:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ub2e8\ub77d\ub4e4\uc744 \uc6d0\ub798 \uc21c\uc11c\ub300\ub85c \ubc30\uc5f4\ud55c \uac83\uc744 \uace0\ub974\uc138\uc694"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#01"})]}),t.shuffledParagraphs.map((e,t)=>(0,Se.jsxs)("div",{className:"shuffled-paragraph",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",border:"1.5px solid #e3f2fd",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:[(0,Se.jsxs)("strong",{children:[e.label,":"]})," ",e.content]},e.id)),t.choices.map((e,t)=>(0,Se.jsxs)("div",{className:"option",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[["\u2460","\u2461","\u2462","\u2463"][t]," ",e.join(" \u2192 ")]},t))]})})]})}):"with-answer"===r?(0,Se.jsx)("div",{className:"only-print work-01-print",children:i?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",marginTop:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ub2e8\ub77d\ub4e4\uc744 \uc6d0\ub798 \uc21c\uc11c\ub300\ub85c \ubc30\uc5f4\ud55c \uac83\uc744 \uace0\ub974\uc138\uc694"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#01"})]}),(()=>{const e=t.choices[t.answerIndex],n=t.shuffledParagraphs&&t.shuffledParagraphs.length>0&&t.shuffledParagraphs[0].content?t.shuffledParagraphs:t.paragraphs||[];return e.slice(0,3).map((e,t)=>{const r=n.find(t=>t.label===e);return r&&r.content?(0,Se.jsxs)("div",{className:"shuffled-paragraph",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",border:"1.5px solid #e3f2fd",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:[(0,Se.jsxs)("strong",{children:[r.label,":"]})," ",r.content]},r.id):null})})()]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(()=>{const e=t.choices[t.answerIndex],n=t.shuffledParagraphs&&t.shuffledParagraphs.length>0&&t.shuffledParagraphs[0].content?t.shuffledParagraphs:t.paragraphs||[],r=e[3],s=n.find(e=>e.label===r);return s&&s.content?(0,Se.jsxs)("div",{className:"shuffled-paragraph",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",border:"1.5px solid #e3f2fd",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:[(0,Se.jsxs)("strong",{children:[s.label,":"]})," ",s.content]},s.id):null})(),(0,Se.jsxs)("div",{className:"option option-print",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[(0,Se.jsxs)("span",{style:{color:"#000000",fontWeight:"bold"},children:[["\u2460","\u2461","\u2462","\u2463"][t.answerIndex]," ",t.choices[t.answerIndex].join(" \u2192 ")]}),"\xa0",(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:"bold"},children:"(\uc815\ub2f5)"})]})]})})]}),i?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:"800",fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",marginTop:"0.5rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(()=>{const e=t.choices[t.answerIndex],r=t.shuffledParagraphs&&t.shuffledParagraphs.length>0&&t.shuffledParagraphs[0].content?t.shuffledParagraphs:t.paragraphs||[];return e.slice(0,3).map((e,t)=>{const s=r.find(t=>t.label===e);return s&&s.content?(0,Se.jsxs)("div",{className:"paragraph-simple",style:{marginBottom:"1.5rem"},children:[(0,Se.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"1rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[(0,Se.jsxs)("strong",{style:{fontSize:"1rem",color:"#333"},children:[s.label,":"]})," ",s.content]}),(0,Se.jsx)("div",{style:{width:"100%",minHeight:"60px",border:"1px solid #ccc",backgroundColor:"#F1F8E9",marginTop:"0.5rem",padding:"0.6rem",fontSize:"1rem",lineHeight:"1.4",color:"#333"},children:n?(()=>{const e=n.length,r=Math.floor(e/4),s=t*r,i=(t+1)*r;return n.substring(s,i).trim()})():"\ubc88\uc5ed \uc911..."})]},e):null})})()]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:"800",fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",marginTop:"0.5rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d (\uacc4\uc18d)"}),(()=>{const e=t.choices[t.answerIndex],r=t.shuffledParagraphs&&t.shuffledParagraphs.length>0&&t.shuffledParagraphs[0].content?t.shuffledParagraphs:t.paragraphs||[],s=e[3],i=r.find(e=>e.label===s);return i&&i.content?(0,Se.jsxs)("div",{className:"paragraph-simple",style:{marginBottom:"1.5rem"},children:[(0,Se.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"1rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[(0,Se.jsxs)("strong",{style:{fontSize:"1rem",color:"#333"},children:[i.label,":"]})," ",i.content]}),(0,Se.jsx)("div",{style:{width:"100%",minHeight:"60px",border:"1px solid #ccc",backgroundColor:"#F1F8E9",marginTop:"0.5rem",padding:"0.6rem",fontSize:"1rem",lineHeight:"1.4",color:"#333"},children:n?(()=>{const e=n.length,t=3*Math.floor(e/4),r=e;return n.substring(t,r).trim()})():"\ubc88\uc5ed \uc911..."})]}):null})()]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:"800",fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",marginTop:"0.5rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(()=>{const e=t.choices[t.answerIndex],r=t.shuffledParagraphs&&t.shuffledParagraphs.length>0&&t.shuffledParagraphs[0].content?t.shuffledParagraphs:t.paragraphs||[];return e.map((e,t)=>{const s=r.find(t=>t.label===e);return s&&s.content?(0,Se.jsxs)("div",{className:"paragraph-simple",style:{marginBottom:"1.5rem"},children:[(0,Se.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"1rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[(0,Se.jsxs)("strong",{style:{fontSize:"1rem",color:"#333"},children:[s.label,":"]})," ",s.content]}),(0,Se.jsx)("div",{style:{width:"100%",minHeight:"60px",border:"1px solid #ccc",backgroundColor:"#F1F8E9",marginTop:"0.5rem",padding:"0.6rem",fontSize:"1rem",lineHeight:"1.4",color:"#333"},children:n?(()=>{const e=n.length,r=Math.floor(e/4),s=t*r,i=3===t?e:(t+1)*r;return n.substring(s,i).trim()})():"\ubc88\uc5ed \uc911..."})]},e):null})})()]})})]})]}):(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsxs)("div",{className:"problem-instruction",style:{fontWeight:800,fontSize:"0.9rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"0.8rem",marginTop:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ub2e8\ub77d\ub4e4\uc744 \uc6d0\ub798 \uc21c\uc11c\ub300\ub85c \ubc30\uc5f4\ud55c \uac83\uc744 \uace0\ub974\uc138\uc694"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#01"})]}),t.shuffledParagraphs.map((e,t)=>(0,Se.jsxs)("div",{className:"shuffled-paragraph",style:{marginTop:"0.9rem",fontSize:"0.9rem",padding:"1rem",background:"#FFF3CD",borderRadius:"8px",border:"1.5px solid #e3f2fd",fontFamily:"inherit",color:"#222",lineHeight:"1.7"},children:[(0,Se.jsxs)("strong",{children:[e.label,":"]})," ",e.content]},e.id)),(0,Se.jsxs)("div",{className:"option option-print",style:{fontSize:"0.9rem",marginTop:"0.5rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[(0,Se.jsxs)("span",{style:{color:"#000000",fontWeight:"bold"},children:[["\u2460","\u2461","\u2462","\u2463"][t.answerIndex]," ",t.choices[t.answerIndex].join(" \u2192 ")]}),"\xa0",(0,Se.jsx)("span",{style:{color:"#1976d2",fontWeight:"bold"},children:"(\uc815\ub2f5)"})]})]})})]}),i?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:"800",fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",marginTop:"0.5rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(()=>{const e=t.choices[t.answerIndex],r=t.shuffledParagraphs&&t.shuffledParagraphs.length>0&&t.shuffledParagraphs[0].content?t.shuffledParagraphs:t.paragraphs||[];return e.slice(0,3).map((e,t)=>{const s=r.find(t=>t.label===e);return s&&s.content?(0,Se.jsxs)("div",{className:"paragraph-simple",style:{marginBottom:"1.5rem"},children:[(0,Se.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"1rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[(0,Se.jsxs)("strong",{style:{fontSize:"1rem",color:"#333"},children:[s.label,":"]})," ",s.content]}),(0,Se.jsx)("div",{style:{width:"100%",minHeight:"60px",border:"1px solid #ccc",backgroundColor:"#F1F8E9",marginTop:"0.5rem",padding:"0.6rem",fontSize:"1rem",lineHeight:"1.4",color:"#333"},children:n?(()=>{const e=n.length,r=Math.floor(e/4),s=t*r,i=(t+1)*r;return n.substring(s,i).trim()})():"\ubc88\uc5ed \uc911..."})]},e):null})})()]})})]}),(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:"800",fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",marginTop:"0.5rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d (\uacc4\uc18d)"}),(()=>{const e=t.choices[t.answerIndex],r=t.shuffledParagraphs&&t.shuffledParagraphs.length>0&&t.shuffledParagraphs[0].content?t.shuffledParagraphs:t.paragraphs||[],s=e[3],i=r.find(e=>e.label===s);return i&&i.content?(0,Se.jsxs)("div",{className:"paragraph-simple",style:{marginBottom:"1.5rem"},children:[(0,Se.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"1rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[(0,Se.jsxs)("strong",{style:{fontSize:"1rem",color:"#333"},children:[i.label,":"]})," ",i.content]}),(0,Se.jsx)("div",{style:{width:"100%",minHeight:"60px",border:"1px solid #ccc",backgroundColor:"#F1F8E9",marginTop:"0.5rem",padding:"0.6rem",fontSize:"1rem",lineHeight:"1.4",color:"#333"},children:n?(()=>{const e=n.length,t=3*Math.floor(e/4),r=e;return n.substring(t,r).trim()})():"\ubc88\uc5ed \uc911..."})]}):null})()]})})]})]}):(0,Se.jsxs)("div",{className:"a4-page-template",children:[(0,Se.jsx)("div",{className:"a4-page-header",children:(0,Se.jsx)(vc,{})}),(0,Se.jsx)("div",{className:"a4-page-content",children:(0,Se.jsxs)("div",{className:"quiz-content",children:[(0,Se.jsx)("div",{className:"problem-instruction",style:{fontWeight:"800",fontSize:"1rem",background:"#222",color:"#fff",padding:"0.7rem 0.5rem",borderRadius:"8px",marginBottom:"1.2rem",marginTop:"0.5rem",display:"block",width:"100%"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(()=>{const e=t.choices[t.answerIndex],r=t.shuffledParagraphs&&t.shuffledParagraphs.length>0&&t.shuffledParagraphs[0].content?t.shuffledParagraphs:t.paragraphs||[];return e.map((e,t)=>{const s=r.find(t=>t.label===e);return s&&s.content?(0,Se.jsxs)("div",{className:"paragraph-simple",style:{marginBottom:"1.5rem"},children:[(0,Se.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"1rem",paddingLeft:"0.6rem",paddingRight:"0.6rem"},children:[(0,Se.jsxs)("strong",{style:{fontSize:"1rem",color:"#333"},children:[s.label,":"]})," ",s.content]}),(0,Se.jsx)("div",{style:{width:"100%",minHeight:"60px",border:"1px solid #ccc",backgroundColor:"#F1F8E9",marginTop:"0.5rem",padding:"0.6rem",fontSize:"1rem",lineHeight:"1.4",color:"#333"},children:n?(()=>{const e=n.length,r=Math.floor(e/4),s=t*r,i=3===t?e:(t+1)*r;return n.substring(s,i).trim()})():"\ubc88\uc5ed \uc911..."})]},e):null})})()]})})]})]})}):null};async function Rc(e,t){try{if(console.log("\ud83c\udf10 \ubc88\uc5ed \uc2dc\uc791:",e.substring(0,50)+"..."),!t)throw new Error("API \ud0a4\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");const n="\ub2e4\uc74c \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\ub85c \ubc88\uc5ed\ud558\uc138\uc694.\n\n\ubc88\uc5ed \uc694\uad6c\uc0ac\ud56d:\n- \uc790\uc5f0\uc2a4\ub7fd\uace0 \ub9e4\ub044\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\n- \uc6d0\ubb38\uc758 \uc758\ubbf8\ub97c \uc815\ud655\ud788 \uc804\ub2ec\n- \ubb38\ud559\uc801\uc774\uace0 \uc77d\uae30 \uc26c\uc6b4 \ubb38\uccb4\n\n\ubc88\uc5ed\ub9cc \ubc18\ud658\ud558\uc138\uc694 (\ub2e4\ub978 \ud14d\uc2a4\ud2b8 \uc5c6\uc774):\n\n".concat(e),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a helpful assistant that provides natural Korean translations."},{role:"user",content:n}],temperature:.3,max_tokens:800})});if(!r.ok){const e=await r.text();throw console.error("\u274c API \uc624\ub958:",r.status,e),new Error("API \ud638\ucd9c \uc2e4\ud328: ".concat(r.status))}const s=await r.json();if(console.log("\u2705 \ubc88\uc5ed \uc644\ub8cc"),!s.choices||!s.choices[0]||!s.choices[0].message)throw new Error("API \uc751\ub2f5 \ud615\uc2dd \uc624\ub958");return s.choices[0].message.content.trim()}catch(n){throw console.error("\u274c \ubc88\uc5ed \uc624\ub958:",n),n}}async function Oc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n="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",r=Zl(e),{validSentences:s,skippedSentences:i}=tc(r);console.log("\ubb38\uc7a5 \ubd84\uc11d (AI \ud638\ucd9c \uc804):",{"\uc804\uccb4\ubb38\uc7a5\uc218":r.length,"\uc720\ud6a8\ubb38\uc7a5\uc218":s.length,"\uc81c\uc678\ubb38\uc7a5\uc218":i.length,"\uc81c\uc678\ub41c\ubb38\uc7a5\ub4e4":i.map(e=>"".concat(e.substring(0,30),"... (").concat(ec(e),"\uac1c \ub2e8\uc5b4)"))});const o="\ub2e4\uc74c ".concat(s.length,"\uac1c \ubb38\uc7a5\uc5d0\uc11c \uac01 \ubb38\uc7a5\ub9c8\ub2e4 \ud575\uc2ec \ub2e8\uc5b4 1\uac1c\uc529\uc744 \uc120\ud0dd\ud558\uc5ec \ube48\uce78 \ubb38\uc81c\ub97c \ub9cc\ub4e4\uc5b4\uc8fc\uc138\uc694.\n\n**\ubb38\uc7a5 \ubaa9\ub85d:**\n").concat(s.map((e,t)=>"".concat(t+1,". ").concat(e)).join("\n"),"\n\n**\uc791\uc5c5:**\n- \uac01 \ubb38\uc7a5\uc5d0\uc11c \uac00\uc7a5 \uc911\uc694\ud55c \ub2e8\uc5b4 1\uac1c\ub97c \uc120\ud0dd\n- \uc120\ud0dd\ud55c \ub2e8\uc5b4\ub97c (_______________)\ub85c \uad50\uccb4\n- \ucd1d ").concat(s.length,"\uac1c \ubb38\uc7a5 = ").concat(s.length,'\uac1c \ub2e8\uc5b4 \uc120\ud0dd\n\n**\ub2e8\uc5b4 \uc120\ud0dd \uae30\uc900:**\n- \ubb38\uc7a5\uc758 \ud575\uc2ec \uc758\ubbf8\ub97c \ub098\ud0c0\ub0b4\ub294 \ub2e8\uc5b4 (\ub3d9\uc0ac, \uba85\uc0ac, \ud615\uc6a9\uc0ac)\n- \uad00\uc0ac, \uc804\uce58\uc0ac, \uc811\uc18d\uc0ac\ub294 \uc81c\uc678\n- \ubb38\uc7a5\uc758 \uccab \ubc88\uc9f8\ub098 \ub9c8\uc9c0\ub9c9 \ub2e8\uc5b4\ub97c \ubb34\uc791\uc815 \uc120\ud0dd\ud558\uc9c0 \ub9d0 \uac83\n\n**\ucd9c\ub825 \ud615\uc2dd (JSON\ub9cc):**\n{\n  "blankedText": "\ube48\uce78\uc774 \ud3ec\ud568\ub41c \uc804\uccb4 \ubcf8\ubb38",\n  "correctAnswers": ["\ub2e8\uc5b41", "\ub2e8\uc5b42", "\ub2e8\uc5b43", ...]\n}\n\n**\uc911\uc694:**\n- \ubc18\ub4dc\uc2dc ').concat(s.length,"\uac1c\uc758 \ub2e8\uc5b4\ub97c \uc120\ud0dd\ud574\uc57c \ud568\n- \ubaa8\ub4e0 \ubb38\uc7a5\uc5d0\uc11c 1\uac1c\uc529 \uc120\ud0dd (\uac74\ub108\ub6f0\uc9c0 \ub9d0 \uac83)\n- JSON \ud615\uc2dd\uc73c\ub85c\ub9cc \uc751\ub2f5\n\n\uc785\ub825\ub41c \uc601\uc5b4 \ubcf8\ubb38:\n").concat(e);try{const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"system",content:"You are an expert English teacher creating blank-fill problems. \n\nCRITICAL RULES:\n1. Respond ONLY in valid JSON format\n2. Select exactly ONE word from EACH sentence provided\n3. Never skip any sentence - process ALL sentences\n4. Choose meaningful words (nouns, verbs, adjectives) not function words\n5. The number of selected words must equal the number of sentences\n\nYou will receive a list of sentences. Process each sentence in order and select the most important word from each one."},{role:"user",content:o}],max_tokens:2e3,temperature:.1})});if(!r.ok)throw new Error("API \ud638\ucd9c \uc2e4\ud328: ".concat(r.status));const i=await r.json();console.log("AI \uc751\ub2f5 \uc804\uccb4:",i),console.log("AI \uc751\ub2f5 \ub0b4\uc6a9:",i.choices[0].message.content);const l=i.choices[0].message.content.match(/\{[\s\S]*\}/);if(!l)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let c;console.log("\ucd94\ucd9c\ub41c JSON:",l[0]);try{c=JSON.parse(l[0]),console.log("\ud30c\uc2f1\ub41c \uacb0\uacfc:",c)}catch(a){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!c.blankedText||!c.correctAnswers||!Array.isArray(c.correctAnswers))throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");const d=c.correctAnswers.length;if(console.log("\ubb38\uc7a5 \uc218 \uac80\uc99d:",{validSentencesCount:s.length,selectedWordsCount:d,validSentences:s.map(e=>e.substring(0,50)+"...")}),console.log("\ud83d\udd22 1\ub2e8\uacc4: \uac1c\uc218 \uac80\uc99d"),s.length!==d){if(console.error("\u274c \uac1c\uc218 \ubd88\uc77c\uce58 \uc0c1\uc138:",{"\uc720\ud6a8\ubb38\uc7a5\uc218":s.length,"\uc120\ud0dd\ub41c\ub2e8\uc5b4\uc218":d,"\ucc28\uc774":s.length-d,"\ube44\uc728":"".concat(d,"/").concat(s.length," (").concat(Math.round(d/s.length*100),"%)")}),t<2)return console.log("\ud83d\udd04 \uc7ac\uc2dc\ub3c4 ".concat(t+1,"/2 - \ub354 \uac15\ud654\ub41c \ud504\ub86c\ud504\ud2b8\ub85c \uc7ac\uc2dc\ub3c4")),Oc(e,t+1);throw new Error("AI\uac00 ".concat(s.length,"\uac1c \ubb38\uc7a5 \uc911 ").concat(d,"\uac1c\ub9cc \ucc98\ub9ac\ud588\uc2b5\ub2c8\ub2e4. \ubaa8\ub4e0 \ubb38\uc7a5\uc5d0\uc11c \ub2e8\uc5b4\ub97c \uc120\ud0dd\ud574\uc57c \ud569\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."))}console.log("\ud83d\udd0d 2\ub2e8\uacc4: \ubb38\uc7a5\ubcc4 \ub2e8\uc5b4 \uc874\uc7ac \uac80\uc99d");const u=c.correctAnswers,h=[];for(let e=0;e<s.length;e++){const t=s[e],n=[];let r;for(const e of u){if(n.push('"'.concat(e,'" \uac80\uc0c9 \uc2dc\ub3c4')),t.toLowerCase().includes(e.toLowerCase())){r=e,n.push('\u2705 "'.concat(e,'" \ubc1c\uacac!'));break}n.push('\u274c "'.concat(e,'" \uc5c6\uc74c'))}h.push({index:e+1,sentence:t.substring(0,80)+(t.length>80?"...":""),hasWord:!!r,foundWord:r,searchAttempts:n}),console.log("  \ubb38\uc7a5 ".concat(e+1,": ").concat(r?"\u2705":"\u274c"," ").concat(r?'"'.concat(r,'"'):"\ub2e8\uc5b4 \uc5c6\uc74c"))}const p=h.filter(e=>!e.hasWord);if(p.length>0){if(console.error("\u274c \ub204\ub77d\ub41c \ubb38\uc7a5\ub4e4 \uc0c1\uc138 \ubd84\uc11d:"),p.forEach(e=>{console.error("  \ubb38\uc7a5 ".concat(e.index,': "').concat(e.sentence,'"')),console.error("  \uac80\uc0c9 \uc2dc\ub3c4\ub4e4:",e.searchAttempts)}),console.error("\u274c \uc120\ud0dd\ub41c \ub2e8\uc5b4\ub4e4 \uc804\uccb4:",u),console.error("\u274c \uc804\uccb4 \ubb38\uc7a5-\ub2e8\uc5b4 \ub9e4\ud551:",h),t<2)return console.log("\ud83d\udd04 \uc7ac\uc2dc\ub3c4 ".concat(t+1,"/2 - \ub204\ub77d\ub41c \ubb38\uc7a5 \ubb38\uc81c\ub85c \uc7ac\uc2dc\ub3c4")),Oc(e,t+1);throw new Error("AI\uac00 ".concat(p.length,"\uac1c \ubb38\uc7a5\uc5d0\uc11c \ub2e8\uc5b4\ub97c \uc120\ud0dd\ud558\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \ubaa8\ub4e0 \ubb38\uc7a5\uc5d0\uc11c \ub2e8\uc5b4\ub97c \uc120\ud0dd\ud574\uc57c \ud569\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."))}console.log("\u2705 \ubaa8\ub4e0 \ubb38\uc7a5\uc5d0\uc11c \ub2e8\uc5b4 \uc120\ud0dd \uc644\ub8cc - \uac80\uc99d \ud1b5\uacfc"),console.log("\ud83d\udd0d === AI \uc751\ub2f5 \uc0c1\uc138 \ubd84\uc11d \uc644\ub8cc ===");const m=c.correctAnswers,f=e.toLowerCase();console.log("\uac80\uc99d \uc815\ubcf4:",{originalPassage:e.substring(0,100)+"...",correctAnswers:m,passageLower:f.substring(0,100)+"..."});for(let t=0;t<m.length;t++){const n=m[t].toLowerCase();if(!f.includes(n)){if(!new RegExp("\\b".concat(n,"\\b")).test(f))throw console.error("\uc815\ub2f5 \ub2e8\uc5b4 \uac80\uc99d \uc2e4\ud328:",{correctAnswer:m[t],passage:e.substring(0,200)}),new Error('\uc815\ub2f5 \ub2e8\uc5b4 "'.concat(m[t],'"\uac00 \ubcf8\ubb38\uc5d0 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. AI \uc751\ub2f5 \uc624\ub958\uc785\ub2c8\ub2e4.'))}}let g=c.blankedText;for(let e=0;e<m.length;e++)g=g.replace(/\(_{15}\)/,m[e]);const y=e=>e.trim().replace(/\s+/g," ").replace(/[.,!?;:]/g,"").toLowerCase(),v=y(e),x=y(g);if(console.log("\ube48\uce78 \ubcf8\ubb38 \uac80\uc99d:",{original:v.substring(0,100),restored:x.substring(0,100),blankedText:c.blankedText.substring(0,100),match:x===v}),x!==v){console.warn("\ube48\uce78 \ubcf8\ubb38 \uac80\uc99d \uc2e4\ud328 - \uc0c1\uc138 \uc815\ubcf4:",{original:e.substring(0,300),blankedText:c.blankedText.substring(0,300),restored:g.substring(0,300),correctAnswers:m});if(!m.every(e=>f.includes(e.toLowerCase()))||!c.blankedText.includes("(_______________)"))throw new Error("\ube48\uce78 \ubcf8\ubb38\uc774 \uc6d0\ubcf8 \ubcf8\ubb38\uacfc \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. AI \uc751\ub2f5 \uc624\ub958\uc785\ub2c8\ub2e4.");console.log("\uc815\ub2f5 \ub2e8\uc5b4\uac00 \ubcf8\ubb38\uc5d0 \uc874\uc7ac\ud558\uace0 \ube48\uce78\uc774 \uc801\uc808\ud788 \ubc30\uce58\ub418\uc5b4 \uc788\uc5b4 \ud1b5\uacfc\ud569\ub2c8\ub2e4.")}console.log("\ubc88\uc5ed \uc2dc\uc791...");const b=await Rc(e,n);if(c.translation=b,console.log("\ucd5c\uc885 \uac80\uc99d \uc804 \uacb0\uacfc:",{blankedText:c.blankedText,correctAnswers:c.correctAnswers,translation:c.translation}),!c.blankedText||!c.correctAnswers||!c.translation)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");return console.log("AI \uc751\ub2f5 \uac80\uc99d \uc644\ub8cc, \ubc18\ud658\ud560 \uacb0\uacfc:",c),c}catch(l){throw console.error("AI \ubb38\uc81c \uc0dd\uc131 \uc624\ub958:",l),l}}const Pc=[{id:"01",name:"\ubb38\ub2e8 \uc21c\uc11c \ub9de\ucd94\uae30",path:"/work_01_article-order"},{id:"02",name:"\ub3c5\ud574 \ubb38\uc81c",path:"/work_02_reading-comprehension"},{id:"03",name:"\ube48\uce78(\ub2e8\uc5b4) \ubb38\uc81c",path:"/work_03_vocabulary-word"},{id:"04",name:"\ube48\uce78(\uad6c) \ubb38\uc81c",path:"/work_04_blank-phrase-inference"},{id:"05",name:"\ube48\uce78(\ubb38\uc7a5) \ubb38\uc81c",path:"/work_05_blank-sentence-inference"},{id:"06",name:"\ubb38\uc7a5 \uc704\uce58 \ucc3e\uae30",path:"/work_06_sentence-position"},{id:"07",name:"\uc8fc\uc81c \ucd94\ub860",path:"/work_07_main-idea-inference"},{id:"08",name:"\uc81c\ubaa9 \ucd94\ub860",path:"/work_08_title-inference"},{id:"09",name:"\uc5b4\ubc95 \uc624\ub958 \ubb38\uc81c",path:"/work_09_grammar-error"},{id:"10",name:"\ub2e4\uc911 \uc5b4\ubc95 \uc624\ub958 \ubb38\uc81c",path:"/work_10_multi-grammar-error"},{id:"11",name:"\ubcf8\ubb38 \ubb38\uc7a5\ubcc4 \ud574\uc11d",path:"/work_11_sentence-translation"},{id:"13",name:"\ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c (\ub2e8\uc5b4-\uc8fc\uad00\uc2dd)",path:"/work_13_blank-fill-word"},{id:"14",name:"\ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c (\ubb38\uc7a5-\uc8fc\uad00\uc2dd)",path:"/work_14_fill-sentence"}],Fc={"01":"1","02":"2","03":"3","04":"4","05":"5","06":"6","07":"7","08":"8","09":"9",10:"10",11:"11",13:"13",14:"14"},Dc=()=>{const{userData:e,loading:n}=Te(),[s,i]=(0,r.useState)("text"),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[h,p]=(0,r.useState)(!1),[m,f]=(0,r.useState)(!1),[g,y]=(0,r.useState)("none"),[v]=(0,r.useState)(!1),[x,b]=(0,r.useState)({completed:0,total:0,currentType:"",currentTypeId:""}),w=(0,r.useRef)(null),[j,N]=(0,r.useState)(!1),[k,S]=(0,r.useState)(!1),[_,T]=(0,r.useState)(!1),[C,E]=(0,r.useState)(""),[I,A]=(0,r.useState)(()=>{const e={};return Pc.forEach(t=>{e[t.id]=!0}),e}),[R,O]=(0,r.useState)(!1),[P,F]=(0,r.useState)(0),[D,z]=(0,r.useState)(0),[L,M]=(0,r.useState)([]),B=()=>Pc.filter(e=>I[e.id]).reduce((e,t)=>{var n;const r=Fc[t.id];return e+((null===(n=L.find(e=>e.id===r))||void 0===n?void 0:n.points)||0)},0);(0,r.useEffect)(()=>{e&&(async()=>{try{const[t,n]=await Promise.all([(0,vo.MC)((null===e||void 0===e?void 0:e.uid)||""),(0,vo.getWorkTypePoints)()]);z(t),M(n)}catch(t){console.error("\ud3ec\uc778\ud2b8 \uc815\ubcf4 \ub85c\ub4dc \uc2e4\ud328:",t)}})()},[e]);const U=e=>{i(e),a(""),c(null),u(null)},W=async e=>{if(console.log("\ud83d\udccb \ubd99\uc5ec\ub123\uae30 \uc774\ubca4\ud2b8 \ubc1c\uc0dd:",{inputMode:s,clipboardItems:e.clipboardData.items.length}),"capture"!==s)return void console.log("\u274c \ucea1\ucc98 \ubaa8\ub4dc\uac00 \uc544\ub2d8:",s);const t=e.clipboardData.items;console.log("\ud83d\udccb \ud074\ub9bd\ubcf4\ub4dc \uc544\uc774\ud15c \uc218:",t.length);for(let r=0;r<t.length;r++){const l=t[r];if(console.log("\ud83d\udccb \uc544\uc774\ud15c ".concat(r,":"),{type:l.type,kind:l.kind}),-1!==l.type.indexOf("image")){console.log("\u2705 \uc774\ubbf8\uc9c0 \ubc1c\uacac!");const t=l.getAsFile();if(t){console.log("\u2705 \ud30c\uc77c \uc0dd\uc131 \uc131\uacf5:",{name:t.name,size:t.size,type:t.type}),c(t),f(!0);try{console.log("\ud83d\udd04 OCR \ucc98\ub9ac \uc2dc\uc791..."),console.log("\ud83d\udcc1 \ud30c\uc77c \uc815\ubcf4:",{name:t.name,size:t.size,type:t.type});const e=await Xl(t);console.log("\u2705 OCR \ucc98\ub9ac \uc644\ub8cc:",e.substring(0,100)+"..."),console.log("\ud83d\udcdd \ucd94\ucd9c\ub41c \ud14d\uc2a4\ud2b8 \uae38\uc774:",e.length),e&&e.trim().length>0?(console.log("\ud83d\udd04 setInputText \ud638\ucd9c \uc804 - \ud604\uc7ac inputText:",o),console.log("\ud83d\udd04 setInputText \ud638\ucd9c \uc804 - ocrText \uae38\uc774:",e.length),a(e),i("text"),console.log("\u2705 setInputText \ud638\ucd9c \uc644\ub8cc \ubc0f inputMode\ub97c text\ub85c \ubcc0\uacbd"),setTimeout(()=>{console.log("\ud83d\udd04 setInputText \ud638\ucd9c \ud6c4 - inputText \uc0c1\ud0dc:",o),console.log("\ud83d\udd04 setInputText \ud638\ucd9c \ud6c4 - inputText \uae38\uc774:",(null===o||void 0===o?void 0:o.length)||0),console.log("\ud83d\udd04 \ud604\uc7ac inputMode:",s)},100)):(console.warn("\u26a0\ufe0f \ucd94\ucd9c\ub41c \ud14d\uc2a4\ud2b8\uac00 \ube44\uc5b4\uc788\uc74c"),alert("\uc774\ubbf8\uc9c0\uc5d0\uc11c \ud14d\uc2a4\ud2b8\ub97c \ucd94\ucd9c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\ub978 \uc774\ubbf8\uc9c0\ub97c \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."))}catch(n){console.error("\u274c OCR \ucc98\ub9ac \uc624\ub958 \uc0c1\uc138:",n),console.error("\u274c \uc624\ub958 \ud0c0\uc785:",typeof n),console.error("\u274c \uc624\ub958 \uba54\uc2dc\uc9c0:",n instanceof Error?n.message:String(n)),console.error("\u274c \uc624\ub958 \uc2a4\ud0dd:",n instanceof Error?n.stack:"No stack trace"),alert("OCR \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat(n instanceof Error?n.message:String(n)))}finally{f(!1)}}else console.error("\u274c \ud30c\uc77c \uc0dd\uc131 \uc2e4\ud328");return void e.preventDefault()}}console.log("\u274c \uc774\ubbf8\uc9c0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c"),e.preventDefault()},V=(e,t)=>{const n=e.toLowerCase(),r=t.toLowerCase(),s=[{english:"future",korean:["\ubbf8\ub798","\uc55e\uc73c\ub85c","\uc55e\ub0a0","\uc7a5\ub798"]},{english:"uncertain",korean:["\ubd88\ud655\uc2e4","\uc560\ub9e4","\ubaa8\ud638"]},{english:"promising",korean:["\ud76c\ub9dd\uc801","\uc720\ub9dd","\uae30\ub300"]},{english:"believe",korean:["\ubbff","\uc2e0\ub8b0"]},{english:"ability",korean:["\ub2a5\ub825","\uc7ac\ub2a5"]},{english:"change",korean:["\ubcc0\ud654","\ubc14\ub01c"]},{english:"justice",korean:["\uc815\uc758","\uacf5\uc815"]},{english:"equality",korean:["\ud3c9\ub4f1","\ub3d9\ub4f1"]},{english:"resilience",korean:["\ud68c\ubcf5\ub825","\ud0c4\ub825"]},{english:"hope",korean:["\ud76c\ub9dd","\uc18c\ub9dd"]},{english:"overcome",korean:["\uadf9\ubcf5","\uc774\uaca8\ub0b4"]},{english:"challenge",korean:["\ub3c4\uc804","\ub09c\uc81c"]}];for(const i of s)if(n.includes(i.english)){if(!i.korean.some(e=>r.includes(e)))return console.log('\ud0a4\uc6cc\ub4dc \ubd88\uc77c\uce58: "'.concat(i.english,'" \u2192 \ud574\uc11d\uc5d0 "').concat(i.korean.join(", "),'" \uc5c6\uc74c')),!0}return!(!n.includes("future")||r.includes("\ubbf8\ub798")||r.includes("\uc55e\uc73c\ub85c")||r.includes("\uc55e\ub0a0"))||!(!n.includes("believe")||r.includes("\ubbff"))},q=async(e,t)=>{if(t>3)throw new Error("\ucd5c\ub300 \uc7ac\uc2dc\ub3c4 \ud69f\uc218\ub97c \ucd08\uacfc\ud588\uc2b5\ub2c8\ub2e4.");const n='\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc77d\uace0, \uae00\uc758 \uc8fc\uc81c\ub97c \uac00\uc7a5 \uc798 \uc694\uc57d\ud558\ub294 \ubb38\uc7a5/\uad6c 1\uac1c\ub97c \uc120\uc815\ud574.\n\n\ub2e8\uacc4\ubcc4 \uc791\uc5c5:\n1\ub2e8\uacc4: \ubcf8\ubb38\uc744 \uc77d\uace0 \uc8fc\uc81c\ub97c \ud30c\uc545\n2\ub2e8\uacc4: \uc8fc\uc81c\ub97c \uc694\uc57d\ud558\ub294 \uc815\ub2f5 \ubb38\uc7a5 1\uac1c \uc0dd\uc131\n3\ub2e8\uacc4: \uc815\ub2f5\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc \ub2e4\ub978 \uc758\ubbf8\uc758 \uc624\ub2f5 4\uac1c \uc0dd\uc131\n4\ub2e8\uacc4: 5\uac1c \uc120\ud0dd\uc9c0\ub97c \ubc30\uc5f4\uc5d0 \ubc30\uce58 (\uc815\ub2f5 \uc704\uce58\ub294 \ub79c\ub364)\n5\ub2e8\uacc4: \ubcf8\ubb38 \uc804\uccb4\ub97c \ud55c\uae00\ub85c \ubc88\uc5ed\n6\ub2e8\uacc4: \uc815\ub2f5 \uc120\ud0dd\uc9c0\ub9cc \uc815\ud655\ud788 \ud55c\uae00\ub85c \ubc88\uc5ed\n7\ub2e8\uacc4: \ubaa8\ub4e0 \uc120\ud0dd\uc9c0(1~5\ubc88)\ub97c \uac01\uac01 \ud55c\uae00\ub85c \ubc88\uc5ed\n\n\uc544\ub798 JSON \ud615\uc2dd\uc73c\ub85c \uc751\ub2f5:\n{\n  "passage": "\uc6d0\ubcf8 \uc601\uc5b4 \ubcf8\ubb38",\n  "options": ["\uc120\ud0dd\uc9c01", "\uc120\ud0dd\uc9c02", "\uc120\ud0dd\uc9c03", "\uc120\ud0dd\uc9c04", "\uc120\ud0dd\uc9c05"],\n  "answerIndex": 0,\n  "translation": "\ubcf8\ubb38 \uc804\uccb4\uc758 \ud55c\uae00 \ud574\uc11d",\n  "answerTranslation": "\uc815\ub2f5 \uc120\ud0dd\uc9c0\uc758 \uc815\ud655\ud55c \ud55c\uae00 \ud574\uc11d",\n  "optionTranslations": ["\uc120\ud0dd\uc9c01 \ud574\uc11d", "\uc120\ud0dd\uc9c02 \ud574\uc11d", "\uc120\ud0dd\uc9c03 \ud574\uc11d", "\uc120\ud0dd\uc9c04 \ud574\uc11d", "\uc120\ud0dd\uc9c05 \ud574\uc11d"]\n}\n\n\ubcf8\ubb38:\n'.concat(e,'\n\n\uc911\uc694 \uaddc\uce59:\n- answerIndex\ub294 0~4 \uc0ac\uc774\uc758 \uc22b\uc790 (\ubc30\uc5f4 \uc778\ub371\uc2a4)\n- answerTranslation\uc740 \ubc18\ub4dc\uc2dc options[answerIndex]\uc758 \uc815\ud655\ud55c \ubc88\uc5ed\n- optionTranslations\ub294 \ubaa8\ub4e0 \uc120\ud0dd\uc9c0\uc758 \ud574\uc11d \ubc30\uc5f4 (options\uc640 \ub3d9\uc77c\ud55c \uc21c\uc11c)\n- \uc608\uc2dc: answerIndex=1, options[1]="The future is uncertain but promising." \u2192 answerTranslation="\ubbf8\ub798\ub294 \ubd88\ud655\uc2e4\ud558\uc9c0\ub9cc \ud76c\ub9dd\uc801\uc785\ub2c8\ub2e4."\n- optionTranslations[1]\ub3c4 "\ubbf8\ub798\ub294 \ubd88\ud655\uc2e4\ud558\uc9c0\ub9cc \ud76c\ub9dd\uc801\uc785\ub2c8\ub2e4."\uac00 \ub418\uc5b4\uc57c \ud568\n- \ubaa8\ub4e0 \ud574\uc11d\uc774 \uc815\ud655\ud788 \uc77c\uce58\ud574\uc57c \ud568'),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:n}],max_tokens:2e3,temperature:.3})}),s=(await r.json()).choices[0].message.content.match(/\{[\s\S]*\}/);if(!s)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let i;try{i=JSON.parse(s[0])}catch(o){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!i.passage||!i.options||"number"!==typeof i.answerIndex||!i.translation||!i.answerTranslation||!i.optionTranslations)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");return V(i.options[i.answerIndex],i.answerTranslation)?(console.warn("\uc815\ub2f5 \ud574\uc11d\uc774 \uc815\ub2f5\uacfc \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc7ac\uc2dc\ub3c4 ".concat(t+1,"/3")),await q(e,t+1)):i},H=async e=>{console.log("\ud83d\udd0d Work_09 \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791...");try{const t=await(async e=>{const t='\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uc5b4\ubc95(\ubb38\ubc95) \ubcc0\ud615\uc774 \uac00\ub2a5\ud55c \uc11c\ub85c \ub2e4\ub978 "\ub2e8\uc5b4" 5\uac1c\ub9cc \uc120\uc815\ud558\uc138\uc694.\n\n\uc911\uc694\ud55c \uaddc\uce59:\n- \ubc18\ub4dc\uc2dc "\ub2e8\uc5b4"\ub9cc \uc120\uc815\ud558\uc138\uc694. \uc5ec\ub7ec \ub2e8\uc5b4\ub85c \uc774\ub8e8\uc5b4\uc9c4 \uad6c(phrase)\ub294 \uc808\ub300 \uc120\uc815\ud558\uc9c0 \ub9c8\uc138\uc694.\n- \ub3d9\uc77c\ud55c \ub2e8\uc5b4\ub97c \ub450 \ubc88 \uc774\uc0c1 \uc120\ud0dd\ud558\uc9c0 \ub9c8\uc138\uc694.\n- \ubc18\ub4dc\uc2dc \uac01\uae30 \ub2e4\ub978 \ubb38\uc7a5\uc5d0\uc11c 1\uac1c\uc529\ub9cc \ub2e8\uc5b4\ub97c \uc120\uc815\ud558\uc138\uc694. (\uc989, \ud55c \ubb38\uc7a5\uc5d0 2\uac1c \uc774\uc0c1\uc758 \ub2e8\uc5b4\ub97c \uc120\ud0dd\ud558\uc9c0 \ub9c8\uc138\uc694.)\n- \uc5b4\ubc95(\ubb38\ubc95) \ubcc0\ud615\uc774 \uac00\ub2a5\ud55c \ub2e8\uc5b4\ub9cc \uc120\uc815\ud558\uc138\uc694 (\ub3d9\uc0ac, \uba85\uc0ac, \ud615\uc6a9\uc0ac, \ubd80\uc0ac \ub4f1).\n\n\uacb0\uacfc\ub294 \uc544\ub798 JSON \ubc30\uc5f4 \ud615\uc2dd\uc73c\ub85c\ub9cc \ubc18\ud658\ud558\uc138\uc694:\n["\ub2e8\uc5b41", "\ub2e8\uc5b42", "\ub2e8\uc5b43", "\ub2e8\uc5b44", "\ub2e8\uc5b45"]\n\n\ubcf8\ubb38:\n'.concat(e),n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"system",content:"You are a helpful assistant that only returns valid JSON arrays."},{role:"user",content:t}],max_tokens:1e3,temperature:.3})});if(!n.ok)throw new Error("API \uc694\uccad \uc2e4\ud328: ".concat(n.status));const r=await n.json(),s=r.choices[0].message.content.trim();console.log("\ub2e8\uc5b4 \uc120\uc815 AI \uc751\ub2f5 \uc804\uccb4:",r),console.log("\ub2e8\uc5b4 \uc120\uc815 AI \uc751\ub2f5 \ub0b4\uc6a9:",s);let i=s;(s.includes("```Json")||s.includes("```json"))&&(i=s.replace(/```(?:Json|json)?\s*\n?/g,"").replace(/```\s*$/g,"").trim()),console.log("\uc815\ub9ac\ub41c JSON:",i);try{const e=JSON.parse(i);if(console.log("\ud30c\uc2f1\ub41c \ub2e8\uc5b4 \ubc30\uc5f4:",e),!Array.isArray(e)||5!==e.length)throw new Error("Invalid word selection format");return e}catch(o){throw console.error("\ub2e8\uc5b4 \uc120\uc815 \uc2e4\ud328:",o),new Error("\ub2e8\uc5b4 \uc120\uc815\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}})(e),n=await(async e=>{const t=["\uc2dc\uc81c","\uc870\ub3d9\uc0ac","\uc218\ub3d9\ud0dc","\uc900\ub3d9\uc0ac","\uac00\uc815\ubc95","\uad00\uacc4\uc0ac","\ud615/\ubd80","\uc218\uc77c\uce58/\uad00\uc0ac","\ube44\uad50","\ub3c4\uce58/\uac15\uc870"];for(let r=1;r<=3;r++){console.log("\uc5b4\ubc95 \ubcc0\ud615 \uc2dc\ub3c4 ".concat(r,"/").concat(3,"..."));const s="You must transform exactly ONE word from the list to create a grammar error for an English quiz.\n\nOriginal words: ".concat(JSON.stringify(e),"\nGrammar types: ").concat(t.join(", "),'\n\nCRITICAL REQUIREMENTS:\n1. Choose exactly ONE word randomly from the 5 words\n2. Transform that word incorrectly according to one grammar rule\n3. Keep the other 4 words exactly the same\n4. The transformed word must be grammatically WRONG\n\nExamples of transformations:\n- "individual" \u2192 "individuals" (wrong number)\n- "violent" \u2192 "violently" (wrong part of speech)\n- "depends" \u2192 "depend" (wrong subject-verb agreement)\n- "beautiful" \u2192 "beautifully" (adjective to adverb incorrectly)\n- "have" \u2192 "has" (wrong verb form)\n\nReturn ONLY this JSON format:\n{\n  "transformedWords": ["word1", "WRONG_WORD", "word3", "word4", "word5"],\n  "answerIndex": 1,\n  "original": "CORRECT_WORD",\n  "grammarType": "SELECTED_GRAMMAR_TYPE"\n}\n\nMake sure the transformed word is actually DIFFERENT and WRONG compared to the original!'),i=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"system",content:"You are a helpful assistant that only returns valid JSON objects."},{role:"user",content:s}],max_tokens:1e3,temperature:.7})});if(!i.ok)throw new Error("API \uc694\uccad \uc2e4\ud328: ".concat(i.status));const o=await i.json(),a=o.choices[0].message.content.trim();console.log("AI \uc751\ub2f5 \uc804\uccb4:",o),console.log("AI \uc751\ub2f5 \ub0b4\uc6a9:",a);let l=a;(a.includes("```Json")||a.includes("```json"))&&(l=a.replace(/```(?:Json|json)?\s*\n?/g,"").replace(/```\s*$/g,"").trim()),console.log("\uc815\ub9ac\ub41c JSON:",l);try{const t=JSON.parse(l);if(console.log("\ud30c\uc2f1\ub41c \uacb0\uacfc:",t),!Array.isArray(t.transformedWords)||5!==t.transformedWords.length||"number"!==typeof t.answerIndex||t.answerIndex<0||t.answerIndex>4||!t.original||!t.grammarType)throw new Error("Invalid transformation format");const n=e[t.answerIndex],s=t.transformedWords[t.answerIndex];if(n===s){if(console.error("\uc2dc\ub3c4 ".concat(r,": \ub2e8\uc5b4 \ubcc0\ud615 \uc2e4\ud328 - \ub3d9\uc77c\ud55c \ub2e8\uc5b4"),{originalWord:n,transformedWord:s,answerIndex:t.answerIndex}),3===r)throw new Error('\ub2e8\uc5b4\uac00 \uc2e4\uc81c\ub85c \ubcc0\ud615\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4: "'.concat(n,'" \u2192 "').concat(s,'"'));continue}if(t.original!==n){if(console.error("\uc2dc\ub3c4 ".concat(r,": \uc6d0\ubcf8 \ub2e8\uc5b4 \ubd88\uc77c\uce58"),{expected:n,received:t.original}),3===r)throw new Error('\uc6d0\ubcf8 \ub2e8\uc5b4\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4: \uc608\uc0c1 "'.concat(n,'", \ubc1b\uc740 "').concat(t.original,'"'));continue}return console.log("\u2705 \uc5b4\ubc95 \ubcc0\ud615 \uc131\uacf5 (\uc2dc\ub3c4 ".concat(r,"):"),t),t}catch(n){if(console.log("\u274c \uc5b4\ubc95 \ubcc0\ud615 \uc2e4\ud328 (\uc2dc\ub3c4 ".concat(r,"):"),n),3===r)throw new Error("\uc5b4\ubc95 \ubcc0\ud615\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(n instanceof Error?n.message:"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958"))}}throw new Error("\uc5b4\ubc95 \ubcc0\ud615\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})(t),r=((e,t,n)=>{let r=e;console.log("\ud83d\udd0d applyNumberAndUnderline \uc2dc\uc791"),console.log("\uc6d0\ubcf8 \ub2e8\uc5b4\ub4e4:",t),console.log("\ubcc0\ud615\ub41c \ub2e8\uc5b4\ub4e4:",n);const s=[];t.forEach((e,t)=>{const i=n[t],o=new RegExp("\\b".concat(e,"\\b")),a=r.match(o);a&&void 0!==a.index?(s.push({word:e,transformedWord:i,index:t,position:a.index}),console.log('\ub2e8\uc5b4 "'.concat(e,'" \uc704\uce58 \ucc3e\uc74c: ').concat(a.index))):console.warn('\ub2e8\uc5b4 "'.concat(e,'"\ub97c \ubcf8\ubb38\uc5d0\uc11c \ucc3e\uc744 \uc218 \uc5c6\uc74c'))}),s.sort((e,t)=>e.position-t.position),console.log("\ub2e8\uc5b4 \ub4f1\uc7a5 \uc21c\uc11c:",s.map((e,t)=>"".concat(t+1,'. "').concat(e.word,'" \u2192 "').concat(e.transformedWord,'" (\uc704\uce58: ').concat(e.position,")")));const i=new Set;s.reverse().forEach((e,t)=>{const n=s.length-1-t,o="\u2460\u2461\u2462\u2463\u2464"[n];if(i.has(e.word))return;const a=new RegExp("\\b".concat(e.word,"\\b"));a.test(r)&&(r=r.replace(a,"".concat(o,"<u>").concat(e.transformedWord,"</u>")),i.add(e.word),console.log('\ub2e8\uc5b4 \uad50\uccb4: "'.concat(e.word,'" \u2192 "').concat(e.transformedWord,'" (\ubc88\ud638: ').concat(n+1,")")))}),console.log("=== \ubc88\ud638 \ub9e4\ud551 \uac80\uc99d ==="),console.log("\ub2e8\uc5b4 \ub4f1\uc7a5 \uc21c\uc11c:",s.map((e,t)=>({"\uc21c\uc11c":t+1,"\ubc88\ud638":"\u2460\u2461\u2462\u2463\u2464"[t],"\uc6d0\ubcf8\ub2e8\uc5b4":e.word,"\ubcc0\ud615\ub2e8\uc5b4":e.transformedWord,"\uc6d0\ubcf8\uc778\ub371\uc2a4":e.index})));const o=(r.match(/[\u2460\u2461\u2462\u2463\u2464]/g)||[]).length,a=(r.match(/<u>.*?<\/u>/g)||[]).length;if(console.log("\ubc88\ud638/\ubc11\uc904 \uc801\uc6a9 \uacb0\uacfc: \ubc88\ud638 ".concat(o,"\uac1c, \ubc11\uc904 ").concat(a,"\uac1c")),5!==o||5!==a)throw new Error("\ubc88\ud638/\ubc11\uc904 \uc801\uc6a9 \uc2e4\ud328: \ubc88\ud638 ".concat(o,"\uac1c, \ubc11\uc904 ").concat(a,"\uac1c \uc801\uc6a9\ub428"));return r})(e,t,n.transformedWords),s=await(async e=>{const t="\ub2e4\uc74c \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\ub85c \ubc88\uc5ed\ud558\uc138\uc694.\n\n\ubc88\uc5ed \uc694\uad6c\uc0ac\ud56d:\n- \uc790\uc5f0\uc2a4\ub7fd\uace0 \ub9e4\ub044\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\n- \uc6d0\ubb38\uc758 \uc758\ubbf8\ub97c \uc815\ud655\ud788 \uc804\ub2ec\n- \ubb38\ud559\uc801\uc774\uace0 \uc77d\uae30 \uc26c\uc6b4 \ubb38\uccb4\n\n\ubc88\uc5ed\ub9cc \ubc18\ud658\ud558\uc138\uc694 (\ub2e4\ub978 \ud14d\uc2a4\ud2b8 \uc5c6\uc774):\n\n".concat(e),n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a helpful assistant that provides natural Korean translations."},{role:"user",content:t}],max_tokens:2e3,temperature:.3})});if(!n.ok)throw new Error("\ubc88\uc5ed API \uc694\uccad \uc2e4\ud328: ".concat(n.status));return(await n.json()).choices[0].message.content.trim()})(e),i=n.transformedWords;console.log("\ud83c\udfaf \ucd5c\uc885 \uacb0\uacfc \uc870\ud569:"),console.log("\uc6d0\ubcf8 \ub2e8\uc5b4\ub4e4:",t),console.log("\ubcc0\ud615\ub41c \ub2e8\uc5b4\ub4e4:",n.transformedWords),console.log("\uac1d\uad00\uc2dd \uc635\uc158 (\uc21c\uc11c \uadf8\ub300\ub85c):",i),console.log("\uc6d0\ubcf8 \uc815\ub2f5 \uc778\ub371\uc2a4:",n.answerIndex),console.log("\uc815\ub2f5 \uc778\ub371\uc2a4 (\ubcc0\uacbd \uc5c6\uc74c):",n.answerIndex);const o={passage:r,options:i,answerIndex:n.answerIndex,original:n.original,translation:s};return console.log("\u2705 Work_09 \ubb38\uc81c \uc0dd\uc131 \uc644\ub8cc:",o),o}catch(t){throw new Error("Work_09 \ubb38\uc81c \uc0dd\uc131\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(t instanceof Error?t.message:"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958"))}},K=(e,t,n,r)=>{let s=e;const i=Array(t.length).fill(!1);return t.forEach((e,t)=>{if(i[t])return;const o=r.includes(t)?n[t]:e,a="".concat("\u2460\u2461\u2462\u2463\u2464\u2465\u2466\u2467"[t],"<u>").concat(o,"</u>"),l=new RegExp("\\b".concat(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"\\b"));s=s.replace(l,a),i[t]=!0}),s},J=async e=>{const t=e.join(" "),n='\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uac00\uc7a5 \uc911\uc694\ud55c \uc8fc\uc81c \ubb38\uc7a5 1\uac1c\ub97c \ucc3e\uc544\uc11c \uc81c\uac70\ud574\uc8fc\uc138\uc694.\n\n**\uc791\uc5c5 \uc694\uad6c\uc0ac\ud56d:**\n1. \ubcf8\ubb38\uc5d0\uc11c \uac00\uc7a5 \uc911\uc694\ud55c \uc8fc\uc81c \ubb38\uc7a5(\ud575\uc2ec \ubb38\uc7a5) 1\uac1c\ub97c \ucc3e\uc544\uc8fc\uc138\uc694.\n2. \uc81c\uac70\ub41c \uc8fc\uc81c \ubb38\uc7a5\uc774 \uc6d0\ub798 \uc788\ub358 \uc704\uce58(0\ubd80\ud130 \uc2dc\uc791\ud558\ub294 \uc778\ub371\uc2a4)\ub97c \uc54c\ub824\uc8fc\uc138\uc694.\n\n**\uc751\ub2f5 \ud615\uc2dd:**\n{\n  "missingSentence": "\uc81c\uac70\ub41c \uc8fc\uc81c \ubb38\uc7a5",\n  "topicSentenceIndex": 2\n}\n\n**\uc911\uc694:** \n- \uc81c\uac70\ub41c \uc8fc\uc81c \ubb38\uc7a5\uc740 \ubc18\ub4dc\uc2dc \uc6d0\ubcf8 \ubcf8\ubb38\uc5d0 \uc788\ub358 \ubb38\uc7a5\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.\n- topicSentenceIndex\ub294 \uc81c\uac70\ub41c \ubb38\uc7a5\uc774 \uc6d0\ub798 \uc788\ub358 \uc704\uce58\uc785\ub2c8\ub2e4.\n\n\ubcf8\ubb38:\n'.concat(t),r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:n}],max_tokens:2e3,temperature:.7})}),s=(await r.json()).choices[0].message.content.match(/\{[\s\S]*\}/);if(!s)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const i=JSON.parse(s[0]);if(!i.missingSentence||"number"!==typeof i.topicSentenceIndex)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");const o=i.missingSentence.trim();let a=-1;for(let l=0;l<e.length;l++)if(e[l].trim()===o){a=l;break}if(-1===a)for(let l=0;l<e.length;l++){if(Y(e[l].trim(),o)>.75){a=l,i.missingSentence=e[l].trim();break}}if(-1===a)throw new Error("\uc81c\uac70\ub41c \uc8fc\uc81c \ubb38\uc7a5\uc774 \uc6d0\ubcf8 \ubcf8\ubb38\uc5d0 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");return i.topicSentenceIndex=a,i},Y=(e,t)=>{const n=e.toLowerCase().split(/\s+/),r=t.toLowerCase().split(/\s+/),s=n.filter(e=>r.includes(e)),i=Math.max(n.length,r.length);return s.length/i},Q=e=>{if(e[0].length<=20&&e.length>1){const t=1,n=e[t];return console.log("\uc9e7\uc740 \uccab \ubb38\uc7a5\uc73c\ub85c \uc778\ud574 \ub450 \ubc88\uc9f8 \ubb38\uc7a5 \uc120\ud0dd:",n),{missingSentence:n,topicSentenceIndex:t}}const t=e[0].toLowerCase();if(t.startsWith("here are")||t.startsWith("this is")||t.startsWith("there are")||t.startsWith("the following")||t.includes("facts about")||t.includes("information about")){const t=0,n=e[t];return console.log("\uc8fc\uc81c \ubb38\uc7a5 \ud328\ud134\uc73c\ub85c \uccab \ubc88\uc9f8 \ubb38\uc7a5 \uc120\ud0dd:",n),{missingSentence:n,topicSentenceIndex:t}}const n=e[0];return console.log("\uae30\ubcf8\uac12\uc73c\ub85c \uccab \ubc88\uc9f8 \ubb38\uc7a5 \uc120\ud0dd:",n),{missingSentence:n,topicSentenceIndex:0}},G=(e,t)=>{const n=["\u2460","\u2461","\u2462","\u2463","\u2464"],r=e.length;if(console.log("\ubc88\ud638 \ubd80\uc5ec \uc2dc\uc791:",{totalSentences:r,originalTopicIndex:t}),r<=5){let s="";for(let t=0;t<r;t++)s+=n[t]+" "+e[t].trim(),t<r-1&&(s+=" ");const i=Math.min(t,r-1);return console.log("5\uac1c \uc774\ud558 \ucc98\ub9ac \uc644\ub8cc:",{answerIndex:i}),{numberedPassage:s.trim(),answerIndex:i}}const s=$(r,t);console.log("\uc120\ud0dd\ub41c \uc704\uce58\ub4e4:",s);let i="",o=0;for(let d=0;d<r;d++)s.includes(d)?(i+=n[o]+" "+e[d].trim(),o++):i+=e[d].trim(),d<r-1&&(i+=" ");const a=s.indexOf(t),l=i.match(/[\u2460\u2461\u2462\u2463\u2464]/g)||[],c=Array.from(new Set(l));if(console.log("\ubc88\ud638 \ubd80\uc5ec \uac80\uc99d:",{usedNumbers:l,uniqueNumbers:c,count:l.length,answerIndex:a,selectedIndices:s}),5!==l.length||5!==c.length)throw console.error("\uc6d0\ubb38\uc790 \uc911\ubcf5 \ub610\ub294 \uac1c\uc218 \uc624\ub958!",{usedNumbers:l,uniqueNumbers:c,count:l.length}),new Error("\uc6d0\ubb38\uc790 \ubc88\ud638 \ubd80\uc5ec\uc5d0 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.");return{numberedPassage:i.trim(),answerIndex:a}},$=(e,t)=>{const n=[];n.push(t);const r=Math.floor(e/5),s=[];for(let a=0;a<e;a+=r)a!==t&&s.length<4&&s.push(a);for(let a=0;a<e&&s.length<4;a++)n.includes(a)||s.includes(a)||s.push(a);const i=[...n,...s],o=Array.from(new Set(i)).sort((e,t)=>e-t).slice(0,5);return console.log("\uc704\uce58 \uc120\ud0dd \uacfc\uc815:",{totalSentences:e,topicIndex:t,step:r,additionalPositions:s,finalPositions:o}),o},X=async(e,n)=>{try{let r;console.log("\ud83d\udd04 ".concat(e.name," (\uc720\ud615#").concat(e.id,") \uc0dd\uc131 \uc2dc\uc791..."));let s="";switch(e.id){case"01":r=await async function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("\ud83d\udd0d Work_01 \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791..."),console.log("\ud83d\udcdd \uc785\ub825 \ud14d\uc2a4\ud2b8 \uae38\uc774:",e.length),console.log("\ud83e\udd16 AI \uc0ac\uc6a9 \uc5ec\ubd80:",n);try{const s=await Do(e,n);console.log("\ud83d\udd0d \uc11e\uae30 \uacb0\uacfc \uac80\uc99d...");const i=s.shuffledParagraphs.map(e=>e.label),o=s.correctOrder;console.log("\ud83d\udcca \uc11e\uae30 \uacb0\uacfc \ubd84\uc11d:"),console.log("- \uc11e\uc778 \uc21c\uc11c (\ub77c\ubca8):",i),console.log("- \uc6d0\ubcf8 \uc21c\uc11c (\ub77c\ubca8):",o),console.log("\ud83c\udf10 \uc804\uccb4 \ud14d\uc2a4\ud2b8 \ubc88\uc5ed \uc2dc\uc791...");let a="";try{const t="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";if(t){const n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a professional English to Korean translator. Translate the given English text into natural Korean. Maintain the original paragraph structure and formatting."},{role:"user",content:e}],max_tokens:2e3,temperature:.3})});n.ok?(a=(await n.json()).choices[0].message.content,console.log("\u2705 \ubc88\uc5ed \uc644\ub8cc")):(console.error("\u274c \ubc88\uc5ed API \uc624\ub958:",n.status),a="\ubc88\uc5ed \uc2e4\ud328")}else console.warn("\u26a0\ufe0f OpenAI API \ud0a4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),a="\ubc88\uc5ed \ubd88\uac00 (API \ud0a4 \uc5c6\uc74c)"}catch(r){console.error("\u274c \ubc88\uc5ed \uc2e4\ud328:",r),a="\ubc88\uc5ed \uc2e4\ud328"}return console.log("\u2705 Work_01 \ud034\uc988 \uc0dd\uc131 \uc644\ub8cc:",{originalText:s.originalText,shuffledParagraphs:s.shuffledParagraphs,correctOrder:s.correctOrder,choices:s.choices,answerIndex:s.answerIndex,translation:a}),(0,t.A)((0,t.A)({},s),{},{translation:a})}catch(r){throw console.error("\u274c Work_01 \ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328:",r),r}}(n,v),s="";break;case"02":r=await yc(n),s=r.translation;break;case"03":r=await(async e=>{console.log("\ud83d\udd0d Work_03 \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791..."),console.log("\ud83d\udcdd \uc785\ub825 \ud14d\uc2a4\ud2b8 \uae38\uc774:",e.length);const t="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";try{const r=[],s="\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uae00\uc758 \uc8fc\uc81c\uc640 \uac00\uc7a5 \ubc00\uc811\ud55c, \uc758\ubbf8 \uc788\ub294 \ub2e8\uc5b4(\uba85\uc0ac, \ud0a4\uc6cc\ub4dc \ub4f1) 1\uac1c\ub97c \uc120\uc815\ud574.\n\n1. \ubc18\ub4dc\uc2dc \ubcf8\ubb38\uc5d0 \uc2e4\uc81c\ub85c \ub4f1\uc7a5\ud55c \ub2e8\uc5b4(\ucca0\uc790, \ud615\ud0dc, \ub300\uc18c\ubb38\uc790\uae4c\uc9c0 \ub3d9\uc77c)\ub97c \uc815\ub2f5\uc73c\ub85c \uc120\uc815\ud574\uc57c \ud574. \ubcc0\ud615, \ub300\uccb4, \ub3d9\uc758\uc5b4, \uc5b4\ud615 \ubcc0\ud654 \uc5c6\uc774 \ubcf8\ubb38\uc5d0 \uc788\ub358 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud574\uc57c \ud574.\n\n2. \ubb38\uc81c\uc758 \ubcf8\ubb38(\ube48\uce78 \ud3ec\ud568)\uc740 \ubc18\ub4dc\uc2dc \uc0ac\uc6a9\uc790\uac00 \uc785\ub825\ud55c \uc804\uccb4 \ubcf8\ubb38\uacfc \uc644\uc804\ud788 \ub3d9\uc77c\ud574\uc57c \ud558\uba70, \uc77c\ubd80 \ubb38\uc7a5\ub9cc \ucd94\ucd9c\ud558\uac70\ub098, \ubb38\uc7a5 \uc21c\uc11c\ub97c \ubc14\uafb8\uac70\ub098, \ubcf8\ubb38\uc744 \uc694\uc57d/\ubcc0\ud615\ud574\uc11c\ub294 \uc548 \ub3fc. \uc624\uc9c1 \uc815\ub2f5 \ub2e8\uc5b4\ub9cc ()\ub85c \uce58\ud658\ud574.\n\n3. \uc785\ub825\ub41c \ubcf8\ubb38\uc5d0 \uc774\ubbf8 ()\ub85c \ubb36\uc778 \ub2e8\uc5b4\ub098 \uad6c\uac00 \uc788\ub2e4\uba74, \uadf8 \ubd80\ubd84\uc740 \uc808\ub300 \ube48\uce78 \ucc98\ub9ac \ub300\uc0c1\uc73c\ub85c \uc0bc\uc9c0 \ub9c8\uc138\uc694. \ubc18\ub4dc\uc2dc \uad04\ud638 \ubc16\uc5d0 \uc788\ub294 \ub2e8\uc5b4\ub9cc \ube48\uce78 \ud6c4\ubcf4\ub85c \uc120\uc815\ud558\uc138\uc694.\n\n4. \uc544\ub798 \ub2e8\uc5b4/\uad6c\ub294 \uc808\ub300 \ube48\uce78 \ucc98\ub9ac\ud558\uc9c0 \ub9c8\uc138\uc694: ".concat(r.length>0?r.join(", "):"\uc5c6\uc74c",'\n\n5. \uc815\ub2f5(\ud575\uc2ec\ub2e8\uc5b4) + \uc624\ub2f5(\ube44\uc2b7\ud55c \ud488\uc0ac\uc758 \ub2e8\uc5b4 4\uac1c, \uc758\ubbf8\ub294 \ub2e4\ub984) \ucd1d 5\uac1c\ub97c \uc0dd\uc131\ud574.\n\n6. \uc815\ub2f5\uc758 \uc704\uce58\ub294 1~5\ubc88 \uc911 \ub79c\ub364.\n\n7. JSON \ud615\uc2dd\uc73c\ub85c \uc751\ub2f5\ud558\uc138\uc694:\n\n{\n  "options": ["\uc120\ud0dd\uc9c01", "\uc120\ud0dd\uc9c02", "\uc120\ud0dd\uc9c03", "\uc120\ud0dd\uc9c04", "\uc120\ud0dd\uc9c05"],\n  "answerIndex": 0\n}\n\n\uc785\ub825\ub41c \uc601\uc5b4 \ubcf8\ubb38:\n').concat(e),i=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:s}],max_tokens:1200,temperature:.7})}),o=await i.json();console.log("AI \uc751\ub2f5 \uc804\uccb4:",o),console.log("AI \uc751\ub2f5 \ub0b4\uc6a9:",o.choices[0].message.content);const a=o.choices[0].message.content.match(/\{[\s\S]*\}/);if(!a)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let l;console.log("\ucd94\ucd9c\ub41c JSON:",a[0]);try{l=JSON.parse(a[0]),console.log("\ud30c\uc2f1\ub41c \uacb0\uacfc:",l)}catch(n){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!e.includes(l.options[l.answerIndex]))throw new Error("\uc815\ub2f5 \ub2e8\uc5b4\uac00 \ubcf8\ubb38\uc5d0 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. AI \uc751\ub2f5 \uc624\ub958\uc785\ub2c8\ub2e4.");const c=(e,t)=>{let n=!1;const r=e.split(/([()])/);let s=!1;for(let o=0;o<r.length;o++)if("("!==r[o])if(")"!==r[o]){if(!s&&!n){const e=new RegExp("\\b".concat(t,"\\b"));e.test(r[o])&&(r[o]=r[o].replace(e,"(__________)"),n=!0)}}else s=!1;else s=!0;let i="";s=!1;for(let o=0;o<r.length;o++)"("!==r[o]?")"!==r[o]?i+=r[o]:(s=!1,i+=")"):(s=!0,i+="(");return i},d=c(e,l.options[l.answerIndex]);console.log("\ube48\uce78 \ucc98\ub9ac\ub41c \ud14d\uc2a4\ud2b8:",d);const u=await Rc(e,t),h={blankedText:d,options:l.options,answerIndex:l.answerIndex,translation:u};return console.log("\u2705 Work_03 \ud034\uc988 \uc0dd\uc131 \uc644\ub8cc:",h),h}catch(r){throw console.error("\u274c Work_03 \ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328:",r),r}})(n),s=r.translation;break;case"04":r=await(async e=>{console.log("\ud83d\udd0d Work_04 \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791..."),console.log("\ud83d\udcdd \uc785\ub825 \ud14d\uc2a4\ud2b8 \uae38\uc774:",e.length);const t="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";try{const r=[],s=/\(([^)]+)\)/g;let i;for(;null!==(i=s.exec(e));)r.push(i[1].trim());const o="\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uae00\uc758 \uc8fc\uc81c\uc640 \uac00\uc7a5 \ubc00\uc811\ud55c, \uc758\ubbf8 \uc788\ub294 \uad6c(phrase, 3~10\ub2e8\uc5b4 \uc774\ub0b4) 1\uac1c\ub97c \uc120\uc815\ud574.\n\n1. \ubc18\ub4dc\uc2dc \ubcf8\ubb38\uc5d0 \uc2e4\uc81c\ub85c \ub4f1\uc7a5\ud55c \uad6c(\ucca0\uc790, \ud615\ud0dc, \ub300\uc18c\ubb38\uc790\uae4c\uc9c0 \ub3d9\uc77c)\ub97c \uc815\ub2f5\uc73c\ub85c \uc120\uc815\ud574\uc57c \ud574. \ubcc0\ud615, \ub300\uccb4, \ub3d9\uc758\uc5b4, \uc5b4\ud615 \ubcc0\ud654 \uc5c6\uc774 \ubcf8\ubb38\uc5d0 \uc788\ub358 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud574\uc57c \ud574.\n\n2. \ubb38\uc81c\uc758 \ubcf8\ubb38(\ube48\uce78 \ud3ec\ud568)\uc740 \ubc18\ub4dc\uc2dc \uc0ac\uc6a9\uc790\uac00 \uc785\ub825\ud55c \uc804\uccb4 \ubcf8\ubb38\uacfc \uc644\uc804\ud788 \ub3d9\uc77c\ud574\uc57c \ud558\uba70, \uc77c\ubd80 \ubb38\uc7a5\ub9cc \ucd94\ucd9c\ud558\uac70\ub098, \ubb38\uc7a5 \uc21c\uc11c\ub97c \ubc14\uafb8\uac70\ub098, \ubcf8\ubb38\uc744 \uc694\uc57d/\ubcc0\ud615\ud574\uc11c\ub294 \uc548 \ub3fc. \uc624\uc9c1 \uc815\ub2f5 \uad6c\ub9cc ()\ub85c \uce58\ud658\ud574.\n\n3. \uc785\ub825\ub41c \ubcf8\ubb38\uc5d0 \uc774\ubbf8 ()\ub85c \ubb36\uc778 \ub2e8\uc5b4\ub098 \uad6c\uac00 \uc788\ub2e4\uba74, \uadf8 \ubd80\ubd84\uc740 \uc808\ub300 \ube48\uce78 \ucc98\ub9ac \ub300\uc0c1\uc73c\ub85c \uc0bc\uc9c0 \ub9c8\uc138\uc694. \ubc18\ub4dc\uc2dc \uad04\ud638 \ubc16\uc5d0 \uc788\ub294 \uad6c\ub9cc \ube48\uce78 \ud6c4\ubcf4\ub85c \uc120\uc815\ud558\uc138\uc694.\n\n4. \uc544\ub798 \uad6c\ub294 \uc808\ub300 \ube48\uce78 \ucc98\ub9ac\ud558\uc9c0 \ub9c8\uc138\uc694: ".concat(r.length>0?r.join(", "):"\uc5c6\uc74c",'\n\n5. \uc815\ub2f5(\uad6c) + \uc624\ub2f5(\ube44\uc2b7\ud55c \uae38\uc774\uc758 \uad6c 4\uac1c, \uc758\ubbf8\ub294 \ub2e4\ub984) \ucd1d 5\uac1c\ub97c \uc0dd\uc131\ud574.\n\n6. \uc815\ub2f5\uc758 \uc704\uce58\ub294 1~5\ubc88 \uc911 \ub79c\ub364.\n\n7. \ubcf8\ubb38 \ud574\uc11d\ub3c4 \ud568\uaed8 \uc81c\uacf5.\n\n8. \uc544\ub798 JSON \ud615\uc2dd\uc73c\ub85c \uc751\ub2f5:\n\n{\n  "options": ["...", ...],\n  "answerIndex": 2, // 0~4\n  "translation": "..."\n}\n\n\uc8fc\uc758: options\uc758 \uc815\ub2f5(\uc815\ub2f5 \uc778\ub371\uc2a4\uc5d0 \ud574\ub2f9\ud558\ub294 \uad6c)\ub294 \ubc18\ub4dc\uc2dc \ubcf8\ubb38\uc5d0 \uc788\ub358 \uad6c\uc640 \uc644\uc804\ud788 \uc77c\uce58\ud574\uc57c \ud558\uba70, \ubcc0\ud615/\ub300\uccb4/\ub3d9\uc758\uc5b4/\uc5b4\ud615 \ubcc0\ud654\uac00 \uc788\uc73c\uba74 \uc548 \ub428. \ubb38\uc81c\uc758 \ubcf8\ubb38(\ube48\uce78 \ud3ec\ud568)\uc740 \ubc18\ub4dc\uc2dc \uc785\ub825\ud55c \uc804\uccb4 \ubcf8\ubb38\uacfc \ub3d9\uc77c\ud574\uc57c \ud568. \uc785\ub825\ub41c \ubcf8\ubb38\uc5d0 \uc774\ubbf8 ()\ub85c \ubb36\uc778 \ubd80\ubd84\uc740 \ube48\uce78 \ucc98\ub9ac \ub300\uc0c1\uc5d0\uc11c \uc81c\uc678\ud574\uc57c \ud568.\n\n\ubcf8\ubb38:\n').concat(e),a=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:o}],max_tokens:2048})});if(!a.ok)throw new Error("OpenAI API \uc624\ub958: ".concat(a.status));const l=await a.json();console.log("AI \uc751\ub2f5 \uc804\uccb4:",l),console.log("AI \uc751\ub2f5 \ub0b4\uc6a9:",l.choices[0].message.content);const c=l.choices[0].message.content.match(/\{[\s\S]*\}/);if(!c)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let d;console.log("\ucd94\ucd9c\ub41c JSON:",c[0]);try{d=JSON.parse(c[0]),console.log("\ud30c\uc2f1\ub41c \uacb0\uacfc:",d)}catch(n){throw console.error("JSON \ud30c\uc2f1 \uc624\ub958:",n),new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}const u=d.options[d.answerIndex],h="(__________)",p={blankedText:e.replace(u,h),options:d.options,answerIndex:d.answerIndex,translation:d.translation};return console.log("\u2705 Work_04 \ubb38\uc81c \uc0dd\uc131 \uc644\ub8cc:",p),p}catch(r){throw console.error("\u274c Work_04 \ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328:",r),r}})(n),s=r.translation;break;case"05":r=await(async e=>{console.log("\ud83d\udd0d Work_05 \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791..."),console.log("\ud83d\udcdd \uc785\ub825 \ud14d\uc2a4\ud2b8 \uae38\uc774:",e.length);const t="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";try{const r=[],s=/\(([^)]+)\)/g;let i;for(;null!==(i=s.exec(e));)r.push(i[1].trim());const o="\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uae00\uc758 \uc8fc\uc81c\uc640 \uac00\uc7a5 \ubc00\uc811\ud55c, \uc758\ubbf8 \uc788\ub294 \ubb38\uc7a5(sentence) 1\uac1c\ub97c \uc120\uc815\ud574.\n1. \ubc18\ub4dc\uc2dc \ubcf8\ubb38\uc5d0 \uc2e4\uc81c\ub85c \ub4f1\uc7a5\ud55c \ubb38\uc7a5(\ucca0\uc790, \ud615\ud0dc, \ub300\uc18c\ubb38\uc790\uae4c\uc9c0 \ub3d9\uc77c)\uc744 \uc815\ub2f5\uc73c\ub85c \uc120\uc815\ud574\uc57c \ud574. \ubcc0\ud615, \ub300\uccb4, \ub3d9\uc758\uc5b4, \uc5b4\ud615 \ubcc0\ud654 \uc5c6\uc774 \ubcf8\ubb38\uc5d0 \uc788\ub358 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud574\uc57c \ud574.\n2. \ubb38\uc81c\uc758 \ubcf8\ubb38(\ube48\uce78 \ud3ec\ud568)\uc740 \ubc18\ub4dc\uc2dc \uc0ac\uc6a9\uc790\uac00 \uc785\ub825\ud55c \uc804\uccb4 \ubcf8\ubb38\uacfc \uc644\uc804\ud788 \ub3d9\uc77c\ud574\uc57c \ud558\uba70, \uc77c\ubd80 \ubb38\uc7a5\ub9cc \ucd94\ucd9c\ud558\uac70\ub098, \ubb38\uc7a5 \uc21c\uc11c\ub97c \ubc14\uafb8\uac70\ub098, \ubcf8\ubb38\uc744 \uc694\uc57d/\ubcc0\ud615\ud574\uc11c\ub294 \uc548 \ub3fc. \uc624\uc9c1 \uc815\ub2f5 \ubb38\uc7a5\ub9cc ()\ub85c \uce58\ud658\ud574.\n3. \uc785\ub825\ub41c \ubcf8\ubb38\uc5d0 \uc774\ubbf8 ()\ub85c \ubb36\uc778 \ubb38\uc7a5\uc774 \uc788\ub2e4\uba74, \uadf8 \ubd80\ubd84\uc740 \uc808\ub300 \ube48\uce78 \ucc98\ub9ac \ub300\uc0c1\uc73c\ub85c \uc0bc\uc9c0 \ub9c8\uc138\uc694. \ubc18\ub4dc\uc2dc \uad04\ud638 \ubc16\uc5d0 \uc788\ub294 \ubb38\uc7a5\ub9cc \ube48\uce78 \ud6c4\ubcf4\ub85c \uc120\uc815\ud558\uc138\uc694.\n4. \uc544\ub798 \ubb38\uc7a5\uc740 \uc808\ub300 \ube48\uce78 \ucc98\ub9ac\ud558\uc9c0 \ub9c8\uc138\uc694: ".concat(r.length>0?r.join(", "):"\uc5c6\uc74c",'\n5. \uc815\ub2f5(\ubb38\uc7a5) + \uc624\ub2f5(\ubcf8\ubb38\uacfc \uc720\uc0ac\ud55c \uc8fc\uc81c/\ub9e5\ub77d\uc758 \uc0c8\ub85c\uc6b4 \ubb38\uc7a5 4\uac1c) \ucd1d 5\uac1c\ub97c \uc0dd\uc131\ud574.\n   - \uc624\ub2f5 \ubb38\uc7a5\ub4e4\uc740 \ubcf8\ubb38\uc758 \uc8fc\uc81c\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc \ubcf8\ubb38\uc5d0 \uc5c6\ub294 \uc0c8\ub85c\uc6b4 \ub0b4\uc6a9\uc774\uc5b4\uc57c \ud568\n   - \ubcf8\ubb38\uc758 \ub2e4\ub978 \ubb38\uc7a5\uc744 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud558\uba74 \uc548 \ub428\n   - \uc815\ub2f5\uacfc \ube44\uc2b7\ud55c \uae38\uc774\uc640 \ubb38\uccb4\ub85c \uc791\uc131\ud574\uc57c \ud568\n   - \ubcf8\ubb38\uc758 \ub9e5\ub77d\uacfc \uad00\ub828\uc774 \uc788\uc9c0\ub9cc \uc2e4\uc81c\ub85c\ub294 \ud2c0\ub9b0 \ub0b4\uc6a9\uc774\uc5b4\uc57c \ud568\n6. \uc815\ub2f5\uc758 \uc704\uce58\ub294 1~5\ubc88 \uc911 \ub79c\ub364.\n7. \uac01 \uc120\ud0dd\uc9c0(\uc815\ub2f5 \ud3ec\ud568)\uc5d0 \ub300\ud55c \ud55c\uad6d\uc5b4 \ud574\uc11d\uc744 \uc0dd\uc131\ud574.\n8. \uc544\ub798 JSON \ud615\uc2dd\uc73c\ub85c \uc751\ub2f5 (optionTranslations \ud544\ub4dc\ub294 \ubc18\ub4dc\uc2dc \ud3ec\ud568\ud574\uc57c \ud568):\n{\n  "options": ["\uc601\uc5b4 \uc120\ud0dd\uc9c01", "\uc601\uc5b4 \uc120\ud0dd\uc9c02", "\uc601\uc5b4 \uc120\ud0dd\uc9c03", "\uc601\uc5b4 \uc120\ud0dd\uc9c04", "\uc601\uc5b4 \uc120\ud0dd\uc9c05"],\n  "answerIndex": 2,\n  "optionTranslations": ["\ud55c\uad6d\uc5b4 \ud574\uc11d1", "\ud55c\uad6d\uc5b4 \ud574\uc11d2", "\ud55c\uad6d\uc5b4 \ud574\uc11d3", "\ud55c\uad6d\uc5b4 \ud574\uc11d4", "\ud55c\uad6d\uc5b4 \ud574\uc11d5"]\n}\n\uc8fc\uc758: options\uc758 \uc815\ub2f5(\uc815\ub2f5 \uc778\ub371\uc2a4\uc5d0 \ud574\ub2f9\ud558\ub294 \ubb38\uc7a5)\uc740 \ubc18\ub4dc\uc2dc \ubcf8\ubb38\uc5d0 \uc788\ub358 \ubb38\uc7a5\uacfc \uc644\uc804\ud788 \uc77c\uce58\ud574\uc57c \ud558\uba70, \ubcc0\ud615/\ub300\uccb4/\ub3d9\uc758\uc5b4/\uc5b4\ud615 \ubcc0\ud654\uac00 \uc788\uc73c\uba74 \uc548 \ub428. \uc624\ub2f5\ub4e4\uc740 \ubcf8\ubb38\uc5d0 \uc5c6\ub294 \uc0c8\ub85c\uc6b4 \ubb38\uc7a5\uc774\uc5b4\uc57c \ud568. \ubb38\uc81c\uc758 \ubcf8\ubb38(\ube48\uce78 \ud3ec\ud568)\uc740 \ubc18\ub4dc\uc2dc \uc785\ub825\ud55c \uc804\uccb4 \ubcf8\ubb38\uacfc \ub3d9\uc77c\ud574\uc57c \ud568. \uc785\ub825\ub41c \ubcf8\ubb38\uc5d0 \uc774\ubbf8 ()\ub85c \ubb36\uc778 \ubd80\ubd84\uc740 \ube48\uce78 \ucc98\ub9ac \ub300\uc0c1\uc5d0\uc11c \uc81c\uc678\ud574\uc57c \ud568.\n\ubcf8\ubb38:\n').concat(e);console.log("\ud83e\udd16 OpenAI API \ud638\ucd9c \uc911...");const a=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:o}],max_tokens:2e3,temperature:.7})});if(!a.ok)throw new Error("OpenAI API \uc624\ub958: ".concat(a.status," ").concat(a.statusText));const l=await a.json();console.log("\ud83e\udd16 AI \uc751\ub2f5 \uc804\uccb4:",l),console.log("AI \uc751\ub2f5 \uc6d0\ubcf8:",l.choices[0].message.content);const c=l.choices[0].message.content.match(/\{[\s\S]*\}/);if(!c)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let d;try{d=JSON.parse(c[0]),console.log("\ud30c\uc2f1\ub41c \uacb0\uacfc:",d),console.log("optionTranslations:",d.optionTranslations)}catch(n){throw console.error("JSON \ud30c\uc2f1 \uc624\ub958:",n),new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!e.includes(d.options[d.answerIndex]))throw new Error("\uc815\ub2f5 \ubb38\uc7a5\uc774 \ubcf8\ubb38\uc5d0 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. AI \uc751\ub2f5 \uc624\ub958\uc785\ub2c8\ub2e4.");const u=(e,t)=>{let n=!1;const r=e.split(/([()])/);let s=!1;for(let o=0;o<r.length;o++)if("("!==r[o])if(")"!==r[o]){if(!s&&!n){const e=new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));e.test(r[o])&&(r[o]=r[o].replace(e,"(______________________________)"),n=!0)}}else s=!1;else s=!0;let i="";s=!1;for(let o=0;o<r.length;o++)"("!==r[o]?")"!==r[o]?i+=r[o]:(s=!1,i+=")"):(s=!0,i+="(");return i},h=d.options[d.answerIndex],p=u(e,h);if(d.blankedText=p,d.blankedText.replace(/\( *_{20,}\)/,h).trim()!==e.trim())throw new Error("\ube48\uce78 \ubcf8\ubb38\uc774 \uc6d0\ubcf8 \ubcf8\ubb38\uacfc \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. AI \uc751\ub2f5 \uc624\ub958\uc785\ub2c8\ub2e4.");if(!d.blankedText||!d.options||"number"!==typeof d.answerIndex)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");console.log("\ud83c\udf10 \ubc88\uc5ed \uc2dc\uc791...");const m=await Rc(e,t);return console.log("\u2705 \ubc88\uc5ed \uc644\ub8cc"),d.optionTranslations&&Array.isArray(d.optionTranslations)||(console.warn("optionTranslations\uac00 \uc5c6\uac70\ub098 \ubc30\uc5f4\uc774 \uc544\ub2d9\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc744 \uc124\uc815\ud569\ub2c8\ub2e4."),d.optionTranslations=d.options.map(()=>"\ud574\uc11d\uc744 \uc0dd\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")),{blankedText:d.blankedText,options:d.options,answerIndex:d.answerIndex,translation:m,optionTranslations:d.optionTranslations}}catch(r){throw console.error("\u274c Work_05 \ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328:",r),r}})(n),s=r.translation;break;case"06":r=await(async e=>{console.log("\ud83d\udd0d Work_06 \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791..."),console.log("\ud83d\udcdd \uc785\ub825 \ud14d\uc2a4\ud2b8 \uae38\uc774:",e.length);const t="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";try{const r=e.split(/(?<=[.!?])\s+/).filter(e=>e.trim().length>0&&e.trim().length>10);if(console.log("\uc6d0\ubcf8 \ubb38\uc7a5\ub4e4:",r),r.length<5)throw new Error("\ubcf8\ubb38\uc5d0 \ucda9\ubd84\ud55c \ubb38\uc7a5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \ucd5c\uc18c 5\uac1c\uc758 \ubb38\uc7a5\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");let s,i;try{const e=await J(r);s=e.missingSentence,i=e.topicSentenceIndex,console.log("\u2705 AI \uae30\ubc18 \uc8fc\uc81c \ubb38\uc7a5 \uc120\uc815 \uc131\uacf5")}catch(n){console.warn("\u26a0\ufe0f AI \uae30\ubc18 \uc8fc\uc81c \ubb38\uc7a5 \uc120\uc815 \uc2e4\ud328, \ud734\ub9ac\uc2a4\ud2f1 \ubc29\uc2dd\uc73c\ub85c \uc804\ud658:",n);const e=Q(r);s=e.missingSentence,i=e.topicSentenceIndex,console.log("\u2705 \ud734\ub9ac\uc2a4\ud2f1 \ubc29\uc2dd\uc73c\ub85c \uc8fc\uc81c \ubb38\uc7a5 \uc120\uc815 \uc644\ub8cc")}console.log("\uc120\uc815\ub41c \uc8fc\uc81c \ubb38\uc7a5:",s),console.log("\uc8fc\uc81c \ubb38\uc7a5 \uc704\uce58:",i);const o=r.filter((e,t)=>t!==i);console.log("\uc8fc\uc81c \ubb38\uc7a5 \uc81c\uac70 \ud6c4 \ubb38\uc7a5\ub4e4:",o);const{numberedPassage:a,answerIndex:l}=G(o,i);console.log("\ubc88\ud638 \ubd80\uc5ec \ud6c4 \ubcf8\ubb38:",a),console.log("\uc815\ub2f5 \uc704\uce58:",l);const c=await Rc(e,t),d={missingSentence:s.trim(),numberedPassage:a.trim(),answerIndex:l,translation:c.trim()};return console.log("\u2705 Work_06 \ubb38\uc81c \uc0dd\uc131 \uc644\ub8cc:",d),d}catch(r){throw console.error("\u274c Work_06 \ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328:",r),r}})(n),s=r.translation;break;case"07":r=await(async e=>{console.log("\ud83d\udd0d Work_07 \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791..."),console.log("\ud83d\udcdd \uc785\ub825 \ud14d\uc2a4\ud2b8 \uae38\uc774:",e.length);const t="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";try{const r='\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc77d\uace0, \uae00\uc758 \uc8fc\uc81c\ub97c \uac00\uc7a5 \uc798 \uc694\uc57d\ud558\ub294 \ubb38\uc7a5/\uad6c 1\uac1c\ub97c \uc120\uc815\ud574.\n\n\ub2e8\uacc4\ubcc4 \uc791\uc5c5:\n1\ub2e8\uacc4: \ubcf8\ubb38\uc744 \uc77d\uace0 \uc8fc\uc81c\ub97c \ud30c\uc545\n2\ub2e8\uacc4: \uc8fc\uc81c\ub97c \uc694\uc57d\ud558\ub294 \uc815\ub2f5 \ubb38\uc7a5 1\uac1c \uc0dd\uc131\n3\ub2e8\uacc4: \uc815\ub2f5\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc \ub2e4\ub978 \uc758\ubbf8\uc758 \uc624\ub2f5 4\uac1c \uc0dd\uc131\n4\ub2e8\uacc4: 5\uac1c \uc120\ud0dd\uc9c0\ub97c \ubc30\uc5f4\uc5d0 \ubc30\uce58 (\uc815\ub2f5 \uc704\uce58\ub294 \ub79c\ub364)\n5\ub2e8\uacc4: \ubcf8\ubb38 \uc804\uccb4\ub97c \ud55c\uae00\ub85c \ubc88\uc5ed\n6\ub2e8\uacc4: \uc815\ub2f5 \uc120\ud0dd\uc9c0\ub9cc \uc815\ud655\ud788 \ud55c\uae00\ub85c \ubc88\uc5ed\n7\ub2e8\uacc4: \ubaa8\ub4e0 \uc120\ud0dd\uc9c0(1~5\ubc88)\ub97c \uac01\uac01 \ud55c\uae00\ub85c \ubc88\uc5ed\n\n\uc544\ub798 JSON \ud615\uc2dd\uc73c\ub85c \uc751\ub2f5:\n{\n  "passage": "\uc6d0\ubcf8 \uc601\uc5b4 \ubcf8\ubb38",\n  "options": ["\uc120\ud0dd\uc9c01", "\uc120\ud0dd\uc9c02", "\uc120\ud0dd\uc9c03", "\uc120\ud0dd\uc9c04", "\uc120\ud0dd\uc9c05"],\n  "answerIndex": 0,\n  "translation": "\ubcf8\ubb38 \uc804\uccb4\uc758 \ud55c\uae00 \ud574\uc11d",\n  "answerTranslation": "\uc815\ub2f5 \uc120\ud0dd\uc9c0\uc758 \uc815\ud655\ud55c \ud55c\uae00 \ud574\uc11d",\n  "optionTranslations": ["\uc120\ud0dd\uc9c01 \ud574\uc11d", "\uc120\ud0dd\uc9c02 \ud574\uc11d", "\uc120\ud0dd\uc9c03 \ud574\uc11d", "\uc120\ud0dd\uc9c04 \ud574\uc11d", "\uc120\ud0dd\uc9c05 \ud574\uc11d"]\n}\n\n\ubcf8\ubb38:\n'.concat(e,'\n\n\uc911\uc694 \uaddc\uce59:\n- answerIndex\ub294 0~4 \uc0ac\uc774\uc758 \uc22b\uc790 (\ubc30\uc5f4 \uc778\ub371\uc2a4)\n- answerTranslation\uc740 \ubc18\ub4dc\uc2dc options[answerIndex]\uc758 \uc815\ud655\ud55c \ubc88\uc5ed\n- optionTranslations\ub294 \ubaa8\ub4e0 \uc120\ud0dd\uc9c0\uc758 \ud574\uc11d \ubc30\uc5f4 (options\uc640 \ub3d9\uc77c\ud55c \uc21c\uc11c)\n- \uc608\uc2dc: answerIndex=1, options[1]="The future is uncertain but promising." \u2192 answerTranslation="\ubbf8\ub798\ub294 \ubd88\ud655\uc2e4\ud558\uc9c0\ub9cc \ud76c\ub9dd\uc801\uc785\ub2c8\ub2e4."\n- optionTranslations[1]\ub3c4 "\ubbf8\ub798\ub294 \ubd88\ud655\uc2e4\ud558\uc9c0\ub9cc \ud76c\ub9dd\uc801\uc785\ub2c8\ub2e4."\uac00 \ub418\uc5b4\uc57c \ud568\n- \ubaa8\ub4e0 \ud574\uc11d\uc774 \uc815\ud655\ud788 \uc77c\uce58\ud574\uc57c \ud568');console.log("\ud83e\udd16 OpenAI API \ud638\ucd9c \uc911...");const s=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:r}],max_tokens:2e3,temperature:.3})});if(!s.ok)throw new Error("OpenAI API \uc624\ub958: ".concat(s.status," ").concat(s.statusText));const i=await s.json();console.log("\ud83e\udd16 AI \uc751\ub2f5 \uc804\uccb4:",i);const o=i.choices[0].message.content.match(/\{[\s\S]*\}/);if(!o)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let a;try{a=JSON.parse(o[0])}catch(n){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!a.passage||!a.options||"number"!==typeof a.answerIndex||!a.translation||!a.answerTranslation||!a.optionTranslations)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");if(a.answerIndex<0||a.answerIndex>=a.options.length)throw new Error("\uc815\ub2f5 \uc778\ub371\uc2a4\uac00 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");if(!Array.isArray(a.optionTranslations)||a.optionTranslations.length!==a.options.length)throw new Error("optionTranslations \ubc30\uc5f4\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");return V(a.options[a.answerIndex],a.answerTranslation)?(console.warn("\uc815\ub2f5 \ud574\uc11d\uc774 \uc815\ub2f5\uacfc \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc7ac\uc2dc\ub3c4\ud569\ub2c8\ub2e4."),await q(e,1)):(console.log("\u2705 Work_07 \ubb38\uc81c \uc0dd\uc131 \uc644\ub8cc:",a),a)}catch(r){throw console.error("\u274c Work_07 \ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328:",r),r}})(n),s=r.translation;break;case"08":r=await(async e=>{console.log("\ud83d\udd04 Work_08 \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791...");const t='\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc744 \uc77d\uace0, \uae00\uc758 \uc8fc\uc81c\uc758\uc2dd\uc5d0 \uac00\uc7a5 \uc801\ud569\ud55c \uc81c\ubaa9(title) 1\uac1c\ub97c \uc120\uc815\ud574.\n1. \uc815\ub2f5 \uc81c\ubaa9(\ubb38\uc7a5/\uad6c) + \uc624\ub2f5(\ube44\uc2b7\ud55c \uae38\uc774\uc758 \uc81c\ubaa9 4\uac1c, \uc758\ubbf8\ub294 \ub2e4\ub984) \ucd1d 5\uac1c\ub97c \uc0dd\uc131\ud574.\n2. \uc815\ub2f5\uc758 \uc704\uce58\ub294 1~5\ubc88 \uc911 \ub79c\ub364.\n3. \ubcf8\ubb38 \ud574\uc11d\ub3c4 \ud568\uaed8 \uc81c\uacf5.\n4. \uc544\ub798 JSON \ud615\uc2dd\uc73c\ub85c, \ubc18\ub4dc\uc2dc answerTranslation(\uc815\ub2f5 \uc81c\ubaa9\uc758 \ud55c\uae00 \ud574\uc11d) \ud544\ub4dc\ub97c \ubcc4\ub3c4 \ud3ec\ud568\ud574\uc11c \uc751\ub2f5:\n{\n  "passage": "...",\n  "options": ["...", "...", "...", "...", "..."],\n  "answerIndex": 2,\n  "translation": "...",\n  "answerTranslation": "\uc815\ub2f5 \uc81c\ubaa9\uc758 \ud55c\uae00 \ud574\uc11d"\n}\n\ubcf8\ubb38:\n'.concat(e,"\n\uc815\ub2f5(\uc81c\ubaa9)\uc758 \ud55c\uae00 \ud574\uc11d\ub3c4 \ubc18\ub4dc\uc2dc \ud3ec\ud568\ud574\uc918.\n\uc815\ub2f5(\uc81c\ubaa9) \uc601\uc5b4 \ubb38\uc7a5\uacfc \uadf8 \ud55c\uae00 \ud574\uc11d(answerTranslation)\ub3c4 \ubc18\ub4dc\uc2dc \ubcc4\ub3c4 \ud544\ub4dc\ub85c \ud3ec\ud568\ud574\uc918."),n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:t}],max_tokens:2e3,temperature:.7})}),r=(await n.json()).choices[0].message.content.match(/\{[\s\S]*\}/);if(!r)throw new Error("AI \uc751\ub2f5\uc5d0\uc11c JSON \ud615\uc2dd\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let s;try{s=JSON.parse(r[0])}catch(i){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!s.passage||!s.options||"number"!==typeof s.answerIndex||!s.translation)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");return"answerTranslation"in s&&null!=s.answerTranslation||(s.answerTranslation=""),console.log("\u2705 Work_08 \ubb38\uc81c \uc0dd\uc131 \uc644\ub8cc:",s),s})(n),s=r.translation;break;case"09":r=await H(n),s=r.translation;break;case"10":r=await(async e=>{console.log("\ud83d\udd0d Work_10 \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791...");try{const n="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",r='\uc544\ub798 \uc601\uc5b4 \ubcf8\ubb38\uc5d0\uc11c \uc5b4\ubc95(\ubb38\ubc95) \ubcc0\ud615\uc774 \uac00\ub2a5\ud55c \uc11c\ub85c \ub2e4\ub978 "\ub2e8\uc5b4" 8\uac1c\ub97c \uc120\uc815\ud558\uc138\uc694.\n\uc774 \uc911 1~5\uac1c(\ub79c\ub364)\ub9cc \uc5b4\ubc95\uc0c1 \ud2c0\ub9ac\uac8c \ubcc0\ud615\ud558\uace0, \ub098\uba38\uc9c0\ub294 \uc6d0\ud615\uc744 \uc720\uc9c0\ud558\uc138\uc694.\n\n\uc544\ub798 JSON \ud615\uc2dd\uc73c\ub85c\ub9cc \uc751\ub2f5\ud558\uc138\uc694:\n{\n  "originalWords": ["...", ...], // 8\uac1c \uc6d0\ubcf8 \ub2e8\uc5b4\n  "transformedWords": ["...", ...], // 8\uac1c \ubcc0\ud615(\ud2c0\ub9b0/\uc815\uc0c1) \ub2e8\uc5b4\n  "wrongIndexes": [0,2,5], // \ud2c0\ub9b0 \ub2e8\uc5b4\uc758 \uc778\ub371\uc2a4(0~7), \uac1c\uc218\ub294 1~5\uac1c\n  "translation": "..." // \ubcf8\ubb38 \ubc88\uc5ed\n}\n\ubcf8\ubb38:\n'.concat(e),s=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:r}],max_tokens:2e3,temperature:.7})});if(!s.ok)throw new Error("API \uc694\uccad \uc2e4\ud328: ".concat(s.status));const i=await s.json(),o=i.choices[0].message.content.trim();console.log("AI \uc751\ub2f5 \uc804\uccb4:",i),console.log("AI \uc751\ub2f5 \ub0b4\uc6a9:",o);let a,l=o;(o.includes("```Json")||o.includes("```json"))&&(l=o.replace(/```(?:Json|json)?\s*\n?/g,"").replace(/```\s*$/g,"").trim()),console.log("\uc815\ub9ac\ub41c JSON:",l);try{a=JSON.parse(l)}catch(t){throw new Error("AI \uc751\ub2f5\uc758 JSON \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}if(!a.originalWords||!a.transformedWords||!Array.isArray(a.wrongIndexes)||!a.translation)throw new Error("AI \uc751\ub2f5\uc5d0 \ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");const c=a.wrongIndexes.length,d=[1,2,3,4,5],u=d.indexOf(c),h={passage:K(e,a.originalWords,a.transformedWords,a.wrongIndexes),options:d,answerIndex:u,translation:a.translation,originalWords:a.originalWords,transformedWords:a.transformedWords,wrongIndexes:a.wrongIndexes};return console.log("\u2705 Work_10 \ubb38\uc81c \uc0dd\uc131 \uc644\ub8cc:",h),h}catch(t){throw new Error("Work_10 \ubb38\uc81c \uc0dd\uc131\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(t instanceof Error?t.message:"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958"))}})(n),s=r.translation;break;case"11":r=await(async e=>{console.log("\ud83d\udd0d Work_11 \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791...");try{const n="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";let r=e;const s=["e.g.","i.e.","etc.","vs.","Dr.","Mr.","Mrs.","Ms.","Prof.","U.S.","U.K.","U.S.A.","Ph.D.","B.A.","M.A.","Inc.","Corp.","Ltd.","Co.","St.","Ave.","Blvd.","Rd.","Jr.","Sr.","A.D.","B.C.","C.E.","B.C.E."];s.forEach(e=>{const t=e.replace(/\./g,"___DOT___");r=r.replace(new RegExp(e.replace(/\./g,"\\."),"g"),t)});const i=r.split(/[.!?]+/).map(e=>e.trim()).filter(e=>e.length>0).map(e=>{let t=e;return s.forEach(e=>{const n=e.replace(/\./g,"___DOT___");t=t.replace(new RegExp(n.replace(/___DOT___/g,"\\."),"g"),e)}),t});console.log("\ud83d\udcdd ".concat(i.length,"\uac1c \ubb38\uc7a5 \ubd84\ub9ac \uc644\ub8cc"));const o=[];for(let e=0;e<i.length;e++){const r=i[e];if(0!==r.trim().length)try{const t=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({model:"gpt-4o",messages:[{role:"system",content:"\ub2f9\uc2e0\uc740 \uc601\uc5b4-\ud55c\uad6d\uc5b4 \ubc88\uc5ed \uc804\ubb38\uac00\uc785\ub2c8\ub2e4. \uc8fc\uc5b4\uc9c4 \uc601\uc5b4 \ubb38\uc7a5\uc744 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \ud55c\uad6d\uc5b4\ub85c \ubc88\uc5ed\ud574\uc8fc\uc138\uc694."},{role:"user",content:"\ub2e4\uc74c \uc601\uc5b4 \ubb38\uc7a5\uc744 \ud55c\uad6d\uc5b4\ub85c \ubc88\uc5ed\ud574\uc8fc\uc138\uc694:\n\n".concat(r)}],max_tokens:500,temperature:.3})});if(!t.ok)throw new Error("\ubc88\uc5ed API \uc624\ub958: ".concat(t.status));const s=(await t.json()).choices[0].message.content.trim();o.push(s),console.log("\ud83d\udcdd \ubb38\uc7a5 ".concat(e+1," \ubc88\uc5ed \uc644\ub8cc:"),s.substring(0,30)+"...")}catch(t){console.error("\ubb38\uc7a5 ".concat(e+1," \ubc88\uc5ed \uc2e4\ud328:"),t),o.push("[\ubc88\uc5ed \uc2e4\ud328: ".concat(r,"]"))}else o.push("")}let a="\ubcf8\ubb38 \ubb38\uc7a5\ubcc4 \ud574\uc11d\n\n";i.forEach((e,t)=>{e.trim().length>0&&(a+="".concat(t+1,". ").concat(e,"\n"),a+="   \ud574\uc11d: _________________________________________________\n\n")});const l={sentences:i,translations:o,quizText:a};return console.log("\u2705 Work_11 \ubb38\uc81c \uc0dd\uc131 \uc644\ub8cc:",l),l}catch(t){throw new Error("Work_11 \ubb38\uc81c \uc0dd\uc131\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(t instanceof Error?t.message:"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958"))}})(n),s=r.translations.join(" ");break;case"13":r=await Oc(n),s=r.translation;break;case"14":r=await async function(e){try{console.log("\ud83d\udd04 Work_14 \ubb38\uc81c \uc0dd\uc131 \uc2dc\uc791...");const t=await nc(e);return console.log("\u2705 Work_14 \ubb38\uc81c \uc0dd\uc131 \uc644\ub8cc:",{blankedText:t.blankedText.substring(0,100)+"...",selectedSentencesCount:t.correctAnswers.length,translation:t.translation.substring(0,50)+"..."}),{blankedText:t.blankedText,options:[],answerIndex:-1,selectedSentences:t.correctAnswers,correctAnswers:t.correctAnswers,translation:t.translation,userAnswer:"",isCorrect:null,reasoning:void 0}}catch(t){throw console.error("\u274c Work_14 \ubb38\uc81c \uc0dd\uc131 \uc624\ub958:",t),t}}(n),s=r.translation;break;default:return console.log("\u274c \uc54c \uc218 \uc5c6\ub294 \uc720\ud615: ".concat(e.id)),null}console.log("\u2705 ".concat(e.name," (\uc720\ud615#").concat(e.id,") \uc0dd\uc131 \uc644\ub8cc"));return(0,t.A)({workType:e.name,workTypeId:e.id,translatedText:s},"01"===e.id?{quiz:r}:"02"===e.id?{work02Data:r}:"03"===e.id?{work03Data:r}:"04"===e.id?{work04Data:r}:"05"===e.id?{work05Data:r}:"06"===e.id?{work06Data:r}:"07"===e.id?{work07Data:r}:"08"===e.id?{work08Data:r}:"09"===e.id?{work09Data:r}:"10"===e.id?{work10Data:r}:"11"===e.id?{work11Data:r}:"13"===e.id?{work13Data:r}:"14"===e.id?{work14Data:r}:{})}catch(r){return console.error("\u274c ".concat(e.name," (\uc720\ud615#").concat(e.id,") \uc0dd\uc131 \uc2e4\ud328:"),r),null}},Z=async()=>{if(null===e||void 0===e||!e.uid)return;p(!0),u(null);let n=0;try{var r;const a=Pc.filter(e=>I[e.id]);let l=D;for(const t of a){const r=Fc[t.id];console.log("\ud83d\udd0d \ud3ec\uc778\ud2b8 \ucc28\uac10 \ub300\uc0c1: \uc720\ud615#".concat(t.id," -> Firebase ID: ").concat(r));const s=L.find(e=>e.id===r);if(console.log("\ud83d\udd0d \ucc3e\uc740 \ud3ec\uc778\ud2b8 \uc124\uc815:",s),!s)throw console.error("\u274c \uc720\ud615#".concat(t.id,"\uc758 \ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")),new Error("\uc720\ud615#".concat(t.id,"\uc758 \ud3ec\uc778\ud2b8 \uc124\uc815\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."));{console.log("\ud83d\udcb0 \ud3ec\uc778\ud2b8 \ucc28\uac10: \uc720\ud615#".concat(t.id," (").concat(t.name,") - ").concat(s.points,"P"));const i=await(0,vo.ev)(e.uid,r,t.name,e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790");if(console.log("\ud83d\udcb0 \ud3ec\uc778\ud2b8 \ucc28\uac10 \uacb0\uacfc:",i),!i.success)throw new Error(i.error||"\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");n+=i.deductedPoints,l=i.remainingPoints}}z(l),console.log("\ud83d\udce6 \ud328\ud0a4\uc9c0 \ud034\uc988 \uc0dd\uc131 \uc2dc\uc791..."),console.log("\uc785\ub825\ub41c \ud14d\uc2a4\ud2b8:",o),console.log("\uc120\ud0dd\ub41c \uc720\ud615\ub4e4:",a.map(e=>e.name));const c=await(async e=>{console.log("\ud83d\udce6 \ud328\ud0a4\uc9c0 \ud034\uc988 \uc0dd\uc131 \uc2dc\uc791 (\ubcd1\ub82c \ucc98\ub9ac)..."),console.log("\ud83d\udcdd \uc785\ub825 \ud14d\uc2a4\ud2b8:",e.substring(0,100)+"...");const n=Pc.filter(e=>I[e.id]);b({completed:0,total:n.length,currentType:"\ubcd1\ub82c \ucc98\ub9ac \uc911...",currentTypeId:""});const r=n.map(async(n,r)=>{const s=await X(n,e);return b(e=>(0,t.A)((0,t.A)({},e),{},{completed:e.completed+1,currentType:"".concat(n.name,s?" \uc644\ub8cc":" \uc2e4\ud328"),currentTypeId:n.id})),s}),s=(await Promise.all(r)).filter(e=>null!==e);return b(e=>(0,t.A)((0,t.A)({},e),{},{completed:s.length,currentType:"\uc644\ub8cc",currentTypeId:""})),console.log("\ud83d\udce6 \ud328\ud0a4\uc9c0 \ud034\uc988 \uc0dd\uc131 \uc644\ub8cc: ".concat(s.length,"/").concat(n.length," \uc720\ud615 \uc131\uacf5")),s})(o);if(0===c.length)throw new Error("\uc0dd\uc131\ub41c \ubb38\uc81c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");u(c);const d=c.find(e=>"01"===e.workTypeId);if(d&&null!==(r=d.quiz)&&void 0!==r&&r.originalText)try{const e="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";if(e){var s;const t=await Rc((null===(s=d.quiz)||void 0===s?void 0:s.originalText)||"",e);E(t),console.log("\u2705 \ubc88\uc5ed \uc644\ub8cc")}else E("\ubc88\uc5ed\uc744 \uc0ac\uc6a9\ud558\ub824\uba74 .env \ud30c\uc77c\uc5d0 REACT_APP_OPENAI_API_KEY\ub97c \uc124\uc815\ud574\uc8fc\uc138\uc694.")}catch(i){console.error("\u274c \ubc88\uc5ed \uc2e4\ud328:",i);const e=i instanceof Error?i.message:"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958";E("\ubc88\uc5ed \uc2e4\ud328: ".concat(e))}T(!0),console.log("\u2705 \ud328\ud0a4\uc9c0 \ud034\uc988 \uc0dd\uc131 \uc644\ub8cc:",c)}catch(i){console.error("\ud3ec\uc778\ud2b8 \ucc28\uac10 \uc2e4\ud328:",i);const t=i instanceof Error?i.message:"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.";if(n>0&&null!==e&&void 0!==e&&e.uid)try{console.log("\ud83d\udcb0 \ud3ec\uc778\ud2b8 \ud658\ubd88 \uc2dc\ub3c4: ".concat(n,"P")),await(0,vo.Lw)(e.uid,n,"\ud328\ud0a4\uc9c0 \ud034\uc988 \uc0dd\uc131",e.name||"\uc0ac\uc6a9\uc790",e.nickname||"\uc0ac\uc6a9\uc790","\ubb38\uc81c \uc0dd\uc131 \uc2e4\ud328\ub85c \uc778\ud55c \ud3ec\uc778\ud2b8 \ud658\ubd88"),z(e=>e+n),console.log("\u2705 \ud3ec\uc778\ud2b8 \ud658\ubd88 \uc644\ub8cc")}catch(a){console.error("\u274c \ud3ec\uc778\ud2b8 \ud658\ubd88 \uc2e4\ud328:",a)}alert("\ud3ec\uc778\ud2b8 \ucc28\uac10\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(t))}finally{p(!1)}},ee=()=>{T(!1),u(null),E(""),a("");const e=Pc.reduce((e,t)=>(e[t.id]=!1,e),{});A(e),y("none")},te=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||0===t.length)return e;const r=e.split(/(?<=[.!?])\s+/).filter(e=>e.trim().length>0);let s=[],i=0,o=0;for(let a=0;a<r.length;a++){const l=r[a],c=t[a];if(!c){s.push(l),o+=l.length;continue}const d=e.indexOf(l,o);if(-1===d){s.push(l),o+=l.length;continue}const u=d+l.length,h=(n?c.original:c.replacement).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),p=new RegExp("\\b".concat(h,"\\b"),"gi");let m,f=[],g=0;for(;null!==(m=p.exec(l));)m.index>g&&f.push(l.slice(g,m.index)),f.push((0,Se.jsx)("span",{style:{textDecoration:"underline",fontWeight:"bold",color:"#2d5aa0"},children:m[0]},i++)),g=m.index+m[0].length;g<l.length&&f.push(l.slice(g)),s.push(...f),o=u}return s.length>0?s:e},ne=()=>{console.log("\ud83d\udda8\ufe0f \uc778\uc1c4(\ubb38\uc81c) \uc2dc\uc791 - printMode:","no-answer"),console.log("\ud83d\udce6 packageQuiz:",d);const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        .print-container {\n          display: block !important;\n        }\n        .no-print {\n          display: none !important;\n        }\n        .a4-page-template {\n          --print-margin-horizontal: 0.8cm;\n        }\n      }\n    ",document.head.appendChild(e),y("no-answer"),setTimeout(()=>{console.log("\ud83d\udda8\ufe0f \uc778\uc1c4 \uc2e4\ud589 - printMode:","no-answer"),window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),y("none"),console.log("\ud83d\udda8\ufe0f \uc778\uc1c4 \uc644\ub8cc - printMode:","none")},1e3)},100)},re=()=>{console.log("\ud83d\udda8\ufe0f \uc778\uc1c4(\uc815\ub2f5) \uc2dc\uc791 - printMode:","with-answer"),console.log("\ud83d\udce6 packageQuiz:",d);const e=document.createElement("style");e.id="print-style",e.textContent="\n      @page {\n        margin: 0;\n        size: A4;\n      }\n      @media print {\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        * {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        .print-container {\n          display: block !important;\n        }\n        .no-print {\n          display: none !important;\n        }\n        .a4-page-template {\n          --print-margin-horizontal: 0.8cm;\n        }\n      }\n    ",document.head.appendChild(e),y("with-answer"),setTimeout(()=>{console.log("\ud83d\udda8\ufe0f \uc778\uc1c4 \uc2e4\ud589 - printMode:","with-answer"),window.print(),setTimeout(()=>{const e=document.getElementById("print-style");e&&e.remove(),y("none"),console.log("\ud83d\udda8\ufe0f \uc778\uc1c4 \uc644\ub8cc - printMode:","none")},1e3)},100)};return n?(0,Se.jsx)("div",{className:"loading",children:"\ub85c\ub529 \uc911..."}):e?_&&d&&d.length>0?(0,Se.jsxs)(r.Fragment,{children:[(0,Se.jsxs)("div",{className:"quiz-display no-print",children:[(0,Se.jsxs)("div",{className:"quiz-header",children:[(0,Se.jsx)("h2",{className:"no-print",children:"\ud83d\udce6 \ud328\ud0a4\uc9c0 \ud034\uc988 \uacb0\uacfc"}),(0,Se.jsxs)("div",{className:"quiz-header-buttons no-print",children:[(0,Se.jsx)("button",{type:"button",className:"new-problem-btn",onClick:ee,style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease"},children:"\uc0c8 \ubb38\uc81c \ub9cc\ub4e4\uae30"}),(0,Se.jsxs)("button",{type:"button",className:"print-problem-btn",onClick:ne,style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",boxShadow:"0 4px 6px rgba(102, 126, 234, 0.25)"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsx)("span",{children:"\uc778\uc1c4 (\ubb38\uc81c)"})]}),(0,Se.jsxs)("button",{type:"button",className:"print-answer-btn",onClick:re,style:{width:"160px",height:"48px",padding:"0.75rem 1rem",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"8px",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 6px rgba(240, 147, 251, 0.25)"},children:[(0,Se.jsx)("span",{className:"print-icon","aria-hidden":!0,children:"\ud83d\udda8\ufe0f"}),(0,Se.jsx)("span",{children:"\uc778\uc1c4 (\uc815\ub2f5)"})]})]})]}),d.map((e,t)=>{if("01"===e.workTypeId&&e.quiz)return(0,Se.jsxs)("div",{className:"work-section",style:{border:"2px solid #e0e0e0",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Se.jsx)("div",{className:"work-header",children:(0,Se.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#000",margin:"0 0 1rem 0",padding:"0"},children:"#01. \ubb38\uc7a5 \uc21c\uc11c \ub9de\ucd94\uae30"})}),(0,Se.jsxs)("div",{className:"problem-instruction work-01-problem-instruction",style:{fontWeight:"800",fontSize:"1.18rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ub2e8\ub77d\ub4e4\uc744 \uc6d0\ub798 \uc21c\uc11c\ub300\ub85c \ubc30\uc5f4\ud55c \uac83\uc744 \uace0\ub974\uc138\uc694"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#01"})]}),(0,Se.jsx)("div",{className:"problem-passage",children:e.quiz.shuffledParagraphs.map((e,t)=>(0,Se.jsxs)("div",{className:"shuffled-paragraph",children:[(0,Se.jsxs)("strong",{children:[e.label,":"]})," ",e.content]},e.id))}),(0,Se.jsx)("div",{className:"problem-options",children:e.quiz.choices.map((e,t)=>(0,Se.jsxs)("div",{className:"option",children:[["\u2460","\u2461","\u2462","\u2463"][t]," ",e.join(" \u2192 ")]},t))}),(0,Se.jsxs)("div",{className:"screen-answer-footer",style:{color:"#1976d2",fontWeight:700,fontSize:"1.1rem",textAlign:"center",marginTop:"2rem",padding:"0.8rem",backgroundColor:"#f0f7ff",borderRadius:"8px",border:"2px solid #1976d2"},children:[(0,Se.jsxs)("span",{children:[["\u2460","\u2461","\u2462","\u2463"][e.quiz.answerIndex||0]," ",e.quiz.choices[e.quiz.answerIndex||0].join(" \u2192 ")]})," ",(0,Se.jsx)("span",{children:"(\uc815\ub2f5)"})]})]},"work-01-".concat(t));var n,r,s,i,o,a;if("02"===e.workTypeId&&e.work02Data)return(0,Se.jsxs)("div",{className:"work-section",style:{border:"2px solid #e0e0e0",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Se.jsx)("div",{className:"work-header",children:(0,Se.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#000",margin:"0 0 1rem 0",padding:"0"},children:"#02. \ub3c5\ud574 \ubb38\uc81c"})}),(0,Se.jsxs)("div",{className:"problem-instruction work-02-problem-instruction",style:{fontWeight:"800",fontSize:"1.18rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#02"})]}),(0,Se.jsx)("h4",{children:"\uc6d0\ubcf8 \ubcf8\ubb38:"}),(0,Se.jsx)("div",{className:"text-content no-print",style:{padding:"1.2rem",marginBottom:"1.5rem",border:"1.5px solid #e3e6f0",borderRadius:"8px"},children:te(e.work02Data.originalText||"",e.work02Data.replacements||[],!0)}),(0,Se.jsx)("h4",{children:"\ub2e4\uc74c \ubcf8\ubb38\uc744 \uc77d\uace0 \ud574\uc11d\ud558\uc138\uc694."}),(0,Se.jsx)("div",{className:"text-content no-print",style:{background:"#fff3cd",padding:"1.2rem",borderRadius:"8px",border:"1.5px solid #ffeaa7",marginBottom:"1.5rem"},children:te(e.work02Data.modifiedText||"",e.work02Data.replacements||[],!1)}),(0,Se.jsx)("h4",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\ub4e4:"}),null!==(n=e.work02Data)&&void 0!==n&&n.replacements&&e.work02Data.replacements.length>0?(0,Se.jsxs)("table",{className:"replacements-table no-print",children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"\uc6d0\ub798 \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uc6d0\ub798 \ub2e8\uc5b4"}),(0,Se.jsx)("th",{children:"\uad50\uccb4\ub41c \ub2e8\uc5b4"})]})}),(0,Se.jsx)("tbody",{children:Array.from({length:Math.ceil(((null===(r=e.work02Data)||void 0===r?void 0:r.replacements.length)||0)/2)},(t,n)=>{var r,s,i,o;return(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{children:(null===(r=e.work02Data)||void 0===r?void 0:r.replacements[2*n])&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"original-word",children:e.work02Data.replacements[2*n].original}),(0,Se.jsxs)("span",{className:"original-meaning",children:["(",e.work02Data.replacements[2*n].originalMeaning,")"]})]})}),(0,Se.jsx)("td",{children:(null===(s=e.work02Data)||void 0===s?void 0:s.replacements[2*n])&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"replacement-word",children:e.work02Data.replacements[2*n].replacement}),(0,Se.jsxs)("span",{className:"replacement-meaning",children:["(",e.work02Data.replacements[2*n].replacementMeaning,")"]})]})}),(0,Se.jsx)("td",{children:(null===(i=e.work02Data)||void 0===i?void 0:i.replacements[2*n+1])&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"original-word",children:e.work02Data.replacements[2*n+1].original}),(0,Se.jsxs)("span",{className:"original-meaning",children:["(",e.work02Data.replacements[2*n+1].originalMeaning,")"]})]})}),(0,Se.jsx)("td",{children:(null===(o=e.work02Data)||void 0===o?void 0:o.replacements[2*n+1])&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("span",{className:"replacement-word",children:e.work02Data.replacements[2*n+1].replacement}),(0,Se.jsxs)("span",{className:"replacement-meaning",children:["(",e.work02Data.replacements[2*n+1].replacementMeaning,")"]})]})})]},n)})})]}):(0,Se.jsx)("div",{className:"no-print",style:{textAlign:"center",color:"#666",fontStyle:"italic"},children:"\uad50\uccb4\ub41c \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Se.jsxs)("div",{className:"translation-section no-print",children:[(0,Se.jsx)("h4",{children:"\ubcf8\ubb38 \ud574\uc11d:"}),(0,Se.jsx)("div",{className:"translation-content",style:{background:"#f1f8e9",padding:"1.2rem",borderRadius:"8px",border:"1.5px solid #c8e6c9"},children:e.translatedText})]})]},"work-02-".concat(t));if("03"===e.workTypeId&&e.work03Data)return(0,Se.jsxs)("div",{className:"work-section",style:{border:"2px solid #e0e0e0",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Se.jsx)("div",{className:"work-header",children:(0,Se.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#000",margin:"0 0 1rem 0",padding:"0"},children:"#03. \ube48\uce78(\ub2e8\uc5b4) \ubb38\uc81c"})}),(0,Se.jsxs)("div",{className:"problem-instruction work-03-problem-instruction",style:{fontWeight:"800",fontSize:"1.18rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uac00\uc7a5 \uc801\uc808\ud55c \ub2e8\uc5b4\ub97c \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#03"})]}),(0,Se.jsx)("div",{className:"problem-passage work-03-problem-passage",style:{background:"#f7f8fc",border:"1.5px solid #e3e6f0",borderRadius:"8px",padding:"1.2rem",marginBottom:"1rem",fontSize:"1.08rem",lineHeight:"1.7",fontFamily:"inherit"},children:e.work03Data.blankedText}),(0,Se.jsx)("div",{className:"problem-options work-03-problem-options",style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:e.work03Data.options.map((e,n)=>(0,Se.jsxs)("label",{className:"option",style:{display:"block",background:"#fff",border:"1px solid #dee2e6",borderRadius:"6px",padding:"0.8rem 1rem",margin:"0.5rem 0",cursor:"pointer",transition:"all 0.2s ease",fontSize:"1rem",fontFamily:"inherit"},children:[(0,Se.jsx)("input",{type:"radio",name:"work-03-".concat(t),value:n,style:{marginRight:"0.5rem"}}),e]},n))}),"with-answer"===g&&(0,Se.jsxs)("div",{className:"problem-answer work-03-problem-answer",style:{background:"#e8f5e8",border:"2px solid #4caf50",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",color:"#1976d2",fontWeight:"700",fontSize:"1.1rem"},children:["\uc815\ub2f5: ",e.work03Data.options[e.work03Data.answerIndex]]}),(0,Se.jsxs)("div",{className:"translation-section no-print",children:[(0,Se.jsx)("h4",{children:"\ubcf8\ubb38 \ud574\uc11d:"}),(0,Se.jsx)("div",{className:"translation-content",style:{background:"#f1f8e9",padding:"1.2rem",borderRadius:"8px",border:"1.5px solid #c8e6c9"},children:e.translatedText})]})]},"work-03-".concat(t));if("04"===e.workTypeId&&e.work04Data)return(0,Se.jsxs)("div",{className:"work-section",style:{border:"2px solid #e0e0e0",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Se.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#000",margin:"0 0 1rem 0",padding:"0"},children:"#04. \ube48\uce78(\uad6c) \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"problem-instruction work-04-problem-instruction",style:{fontWeight:"800",fontSize:"1.18rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uad6c(phrase)\ub85c \uac00\uc7a5 \uc801\uc808\ud55c \uac83\uc744 \uace0\ub974\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#04"})]}),(0,Se.jsx)("div",{className:"problem-passage work-04-problem-passage",style:{background:"#f7f8fc",border:"1.5px solid #e3e6f0",borderRadius:"8px",padding:"1.2rem",marginBottom:"1rem",fontSize:"1.08rem",lineHeight:"1.7",fontFamily:"inherit"},children:e.work04Data.blankedText}),(0,Se.jsx)("div",{className:"problem-options work-04-problem-options",style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:e.work04Data.options.map((e,n)=>(0,Se.jsxs)("label",{className:"option",style:{display:"block",background:"#fff",border:"1px solid #dee2e6",borderRadius:"6px",padding:"0.8rem 1rem",margin:"0.5rem 0",cursor:"pointer",transition:"all 0.2s ease"},children:[(0,Se.jsx)("input",{type:"radio",name:"work04-".concat(t),value:n,style:{marginRight:"0.8rem"}}),e]},n))}),"with-answer"===g&&(0,Se.jsxs)("div",{className:"answer-section",style:{background:"#e8f5e8",border:"2px solid #4caf50",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",color:"#1976d2",fontWeight:"700",fontSize:"1.1rem"},children:["\uc815\ub2f5: ",e.work04Data.options[e.work04Data.answerIndex]]}),(0,Se.jsxs)("div",{className:"translation-section no-print",children:[(0,Se.jsx)("h4",{children:"\ubcf8\ubb38 \ud574\uc11d:"}),(0,Se.jsx)("div",{className:"translation-content",style:{background:"#f1f8e9",padding:"1.2rem",borderRadius:"8px",border:"1.5px solid #c8e6c9"},children:e.translatedText})]})]},"work-04-".concat(t));if("05"===e.workTypeId&&e.work05Data)return(0,Se.jsxs)("div",{className:"work-section",style:{border:"2px solid #e0e0e0",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Se.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#000",margin:"0 0 1rem 0",padding:"0"},children:"#05. \ube48\uce78(\ubb38\uc7a5) \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"problem-instruction work-05-problem-instruction",style:{fontWeight:"800",fontSize:"1.18rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \uac00\uc7a5 \uc801\uc808\ud55c \ubb38\uc7a5\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#05"})]}),(0,Se.jsx)("div",{className:"problem-passage work-05-problem-passage",style:{background:"#f7f8fc",border:"1.5px solid #e3e6f0",borderRadius:"8px",padding:"1.2rem",marginBottom:"1.5rem",fontSize:"1.1rem",lineHeight:"1.7",fontFamily:"inherit"},children:e.work05Data.blankedText}),(0,Se.jsx)("div",{className:"problem-options work-05-problem-options",style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:e.work05Data.options.map((e,n)=>(0,Se.jsxs)("label",{className:"option",style:{display:"block",background:"#fff",border:"1px solid #dee2e6",borderRadius:"6px",padding:"0.8rem 1rem",marginBottom:"0.5rem",cursor:"pointer",transition:"all 0.2s ease",fontSize:"1rem",lineHeight:"1.5"},children:[(0,Se.jsx)("input",{type:"radio",name:"work-05-".concat(t),value:n,style:{marginRight:"0.5rem"}}),e]},n))}),"with-answer"===g&&(0,Se.jsxs)("div",{className:"answer-section",style:{background:"#e8f5e8",border:"2px solid #4caf50",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",color:"#1976d2",fontWeight:"700",fontSize:"1.1rem"},children:["\uc815\ub2f5: ",e.work05Data.options[e.work05Data.answerIndex]]}),(0,Se.jsxs)("div",{className:"translation-section no-print",children:[(0,Se.jsx)("h4",{children:"\ubcf8\ubb38 \ud574\uc11d:"}),(0,Se.jsx)("div",{className:"translation-content",style:{background:"#f1f8e9",padding:"1.2rem",borderRadius:"8px",border:"1.5px solid #c8e6c9"},children:e.translatedText})]})]},"work-05-".concat(t));if("06"===e.workTypeId&&e.work06Data)return(0,Se.jsxs)("div",{className:"work-section",style:{border:"2px solid #e0e0e0",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Se.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#000",margin:"0 0 1rem 0",padding:"0"},children:"#06. \ubb38\uc7a5 \uc704\uce58 \ucc3e\uae30 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"work-06-title",style:{fontWeight:"800",fontSize:"1.18rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \uc544\ub798 \ubcf8\ubb38\uc5d0\uc11c \ube60\uc9c4 \uc8fc\uc81c \ubb38\uc7a5\uc744 \uac00\uc7a5 \uc801\uc808\ud55c \uc704\uce58\uc5d0 \ub123\uc73c\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#06"})]}),(0,Se.jsxs)("div",{className:"work-06-missing-sentence",style:{border:"2px solid #222",borderRadius:"6px",background:"#f7f8fc",padding:"0.8em 1.2em",marginBottom:"0.8rem",fontWeight:700,fontSize:"1.1rem"},children:[(0,Se.jsx)("span",{style:{color:"#222"},children:"\uc8fc\uc694 \ubb38\uc7a5:"})," ",(0,Se.jsx)("span",{style:{color:"#6a5acd"},children:e.work06Data.missingSentence})]}),(0,Se.jsx)("div",{className:"work-06-passage",style:{fontSize:"1.1rem",lineHeight:1.7,margin:"1.2rem 0",background:"#FFF3CD",border:"1.5px solid #e3e6f0",borderRadius:"8px",padding:"1.2rem",fontFamily:"inherit",whiteSpace:"pre-line"},children:e.work06Data.numberedPassage}),"with-answer"===g&&(0,Se.jsxs)("div",{className:"work-06-answer",style:{background:"#e8f5e8",border:"2px solid #4caf50",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",color:"#1976d2",fontWeight:"700",fontSize:"1.1rem"},children:["\uc815\ub2f5: ","\u2460\u2461\u2462\u2463\u2464"[e.work06Data.answerIndex]||e.work06Data.answerIndex+1]}),(0,Se.jsxs)("div",{className:"translation-section no-print",children:[(0,Se.jsx)("h4",{children:"\ubcf8\ubb38 \ud574\uc11d:"}),(0,Se.jsx)("div",{className:"work-06-translation",style:{background:"#f1f8e9",padding:"1.2rem",borderRadius:"8px",border:"1.5px solid #c8e6c9"},children:e.translatedText})]})]},"work-06-".concat(t));if("07"===e.workTypeId&&e.work07Data)return(0,Se.jsxs)("div",{className:"work-section",style:{border:"2px solid #e0e0e0",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Se.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#000",margin:"0 0 1rem 0",padding:"0"},children:"#07. \uc8fc\uc81c \ucd94\ub860 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"work-07-title",style:{fontWeight:"800",fontSize:"1.18rem",background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"1.2rem",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc758 \uc8fc\uc81c\ub97c \uac00\uc7a5 \uc798 \ub098\ud0c0\ub0b4\ub294 \ubb38\uc7a5\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#07"})]}),(0,Se.jsx)("div",{className:"work-07-passage",style:{background:"#FFF3CD",border:"1.5px solid #e3e6f0",borderRadius:"8px",padding:"1.2rem",marginBottom:"1.5rem",fontSize:"1.1rem",lineHeight:"1.7",fontFamily:"inherit"},children:e.work07Data.passage}),(0,Se.jsx)("div",{className:"problem-options work-07-problem-options",style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:e.work07Data.options.map((e,n)=>(0,Se.jsxs)("label",{className:"option",style:{display:"block",background:"#fff",border:"1px solid #dee2e6",borderRadius:"6px",padding:"0.8rem 1rem",marginBottom:"0.5rem",cursor:"pointer",transition:"all 0.2s ease",fontSize:"1rem",lineHeight:"1.5"},children:[(0,Se.jsx)("input",{type:"radio",name:"work-07-".concat(t),value:n,style:{marginRight:"0.5rem"}}),e]},n))}),"with-answer"===g&&(0,Se.jsxs)("div",{className:"work-07-answer",style:{background:"#e8f5e8",border:"2px solid #4caf50",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",color:"#1976d2",fontWeight:"700",fontSize:"1.1rem"},children:["\uc815\ub2f5: ",e.work07Data.options[e.work07Data.answerIndex]]}),(0,Se.jsxs)("div",{className:"translation-section no-print",children:[(0,Se.jsx)("h4",{children:"\ubcf8\ubb38 \ud574\uc11d:"}),(0,Se.jsx)("div",{className:"work-07-translation",style:{background:"#f1f8e9",padding:"1.2rem",borderRadius:"8px",border:"1.5px solid #c8e6c9"},children:e.translatedText})]})]},"work-07-".concat(t));if("08"===e.workTypeId&&e.work08Data)return(0,Se.jsxs)("div",{className:"work-section",style:{border:"2px solid #e0e0e0",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Se.jsx)("div",{className:"work-08-title",style:{marginBottom:"0.8rem",fontSize:"1.3rem",fontWeight:"700",color:"#000"},children:"#08. \uc81c\ubaa9 \ucd94\ub860 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"work-08-missing-sentence",style:{background:"#000",color:"#fff",borderRadius:"8px",padding:"0.8rem 1.2rem",marginBottom:"0.8rem",fontSize:"1rem",fontWeight:"600",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Se.jsx)("span",{children:"\ubb38\uc81c: \ub2e4\uc74c \ubcf8\ubb38\uc5d0 \uac00\uc7a5 \uc801\ud569\ud55c \uc81c\ubaa9\uc744 \uace0\ub974\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",color:"#FFD700"},children:"\uc720\ud615#08"})]}),(0,Se.jsx)("div",{className:"work-08-passage",style:{background:"#FFF3CD",border:"1px solid #dee2e6",borderRadius:"8px",padding:"1.2rem",marginBottom:"1.5rem",fontSize:"1rem",lineHeight:"1.6",color:"#212529"},children:e.work08Data.passage}),(0,Se.jsx)("div",{className:"work-08-options",style:{marginBottom:"1.5rem"},children:e.work08Data.options.map((e,t)=>(0,Se.jsxs)("div",{style:{padding:"0.8rem",marginBottom:"0.5rem",border:"1px solid #dee2e6",borderRadius:"6px",backgroundColor:"#fff",fontSize:"1rem",lineHeight:"1.5"},children:[String.fromCharCode(65+t),". ",e]},t))}),"with-answer"===g&&(0,Se.jsxs)("div",{className:"work-08-answer",style:{background:"#e8f5e8",border:"2px solid #4caf50",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",color:"#1976d2",fontWeight:"700",fontSize:"1.1rem"},children:["\uc815\ub2f5: ",String.fromCharCode(65+e.work08Data.answerIndex),". ",e.work08Data.options[e.work08Data.answerIndex]]}),(0,Se.jsxs)("div",{className:"translation-section no-print",children:[(0,Se.jsx)("h4",{children:"\ubcf8\ubb38 \ud574\uc11d:"}),(0,Se.jsx)("div",{className:"work-08-translation",style:{background:"#f1f8e9",padding:"1.2rem",borderRadius:"8px",border:"1.5px solid #c8e6c9"},children:e.translatedText})]})]},"work-08-".concat(t));if("10"===e.workTypeId&&e.work10Data){var l;const n=e=>e.replace(/<u>(.*?)<\/u>/g,"<u>$1</u>");return(0,Se.jsxs)("div",{className:"work-section",style:{border:"2px solid #e0e0e0",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Se.jsx)("div",{className:"work-10-header",style:{marginBottom:"0.8rem",fontSize:"1.3rem",fontWeight:"700",color:"#000"},children:"#10. \ub2e4\uc911 \uc5b4\ubc95 \uc624\ub958 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"work-10-title",style:{background:"#000",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"0.6rem",fontSize:"1.13rem",fontWeight:"800",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc758 \uac1c\uc218\ub294?"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#10"})]}),(0,Se.jsx)("div",{className:"work-10-passage",style:{fontSize:"1.08rem",lineHeight:1.7,margin:"1.2rem 0",background:"#FFF3CD",borderRadius:"8px",padding:"1.2rem",fontFamily:"inherit"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:n(e.work10Data.passage).replace(/\n/g,"<br/>")}})}),(0,Se.jsx)("div",{className:"work-10-options",style:{margin:"1.5rem 0",display:"flex",flexDirection:"column",gap:"0.8rem"},children:e.work10Data.options.map((e,t)=>(0,Se.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"0.8rem 1rem",border:"2px solid #e0e0e0",borderRadius:"8px",backgroundColor:"#fff",cursor:"pointer",transition:"all 0.2s ease",fontSize:"1.05rem"},children:[(0,Se.jsxs)("span",{style:{marginRight:"1rem",fontWeight:"700",color:"#333"},children:[t+1,"."]}),(0,Se.jsxs)("span",{style:{fontWeight:"600"},children:[e,"\uac1c"]})]},t))}),(0,Se.jsxs)("div",{className:"work-10-answer",style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"#e8f5e8",borderRadius:"8px",border:"2px solid #4caf50"},children:[(0,Se.jsxs)("div",{style:{fontSize:"1.1rem",fontWeight:"700",color:"#1976d2",marginBottom:"0.5rem"},children:["\uc815\ub2f5: ",e.work10Data.options[e.work10Data.answerIndex],"\uac1c"]}),(0,Se.jsxs)("div",{style:{fontSize:"0.95rem",color:"#666",lineHeight:1.5},children:["\uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \ub2e8\uc5b4: ",null===(l=e.work10Data)||void 0===l?void 0:l.wrongIndexes.map(t=>{var n,r;return"".concat("\u2460\u2461\u2462\u2463\u2464\u2465\u2466\u2467"[t]).concat(null===(n=e.work10Data)||void 0===n?void 0:n.transformedWords[t]," \u2192 ").concat(null===(r=e.work10Data)||void 0===r?void 0:r.originalWords[t])}).join(", ")]})]}),(0,Se.jsxs)("div",{className:"work-10-translation",style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:[(0,Se.jsx)("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#1976d2",marginBottom:"0.5rem"},children:"\ubcf8\ubb38 \ud574\uc11d"}),(0,Se.jsx)("div",{style:{fontSize:"0.95rem",lineHeight:1.6,color:"#333"},children:e.work10Data.translation})]})]},"work-10-".concat(t))}if("11"===e.workTypeId&&e.work11Data)return(0,Se.jsxs)("div",{className:"work-section",style:{border:"2px solid #e0e0e0",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Se.jsx)("div",{className:"work-11-header",style:{marginBottom:"0.8rem",fontSize:"1.3rem",fontWeight:"700",color:"#000"},children:"#11. \ubcf8\ubb38 \ubb38\uc7a5\ubcc4 \ud574\uc11d \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"work-11-title",style:{background:"#000",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"0.6rem",fontSize:"1.13rem",fontWeight:"800",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ubcf8\ubb38\uc758 \uac01 \ubb38\uc7a5\uc744 \ud55c\uad6d\uc5b4\ub85c \ud574\uc11d\ud558\uc138\uc694."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#11"})]}),(0,Se.jsx)("div",{className:"work-11-content",style:{margin:"1.2rem 0"},children:null===(s=e.work11Data)||void 0===s?void 0:s.sentences.map((e,t)=>(0,Se.jsxs)("div",{className:"sentence-item",style:{background:"#FFF3CD",borderRadius:"8px",padding:"0.3rem 1.2rem",border:"1.5px solid #e3e6f0",marginBottom:"1rem",fontFamily:"inherit",transition:"border-color 0.2s",boxShadow:"0 1px 4px rgba(44,62,80,0.04)"},children:[(0,Se.jsxs)("div",{className:"sentence-header",style:{display:"flex",alignItems:"baseline",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,Se.jsxs)("span",{className:"sentence-number",style:{fontWeight:"700",color:"#6a5acd",fontSize:"1.08rem",flexShrink:0,verticalAlign:"baseline",lineHeight:1},children:[t+1,"."]}),(0,Se.jsx)("span",{className:"sentence-content",style:{fontSize:"1.05rem",lineHeight:"1.2",color:"#232946",fontFamily:"Noto Sans KR, Segoe UI, Apple SD Gothic Neo, Arial, sans-serif",flex:1,verticalAlign:"baseline"},children:e})]}),(0,Se.jsx)("div",{className:"translation-container",style:{marginBottom:"0.3rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:(0,Se.jsx)("span",{className:"translation-label",style:{fontWeight:"600",color:"#4a5568",fontFamily:"Noto Sans KR, Segoe UI, Apple SD Gothic Neo, Arial, sans-serif",whiteSpace:"nowrap"},children:"\ud574\uc11d:"})})]},t))}),(0,Se.jsxs)("div",{className:"work-11-answer",style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"#e8f5e8",borderRadius:"8px",border:"2px solid #4caf50"},children:[(0,Se.jsx)("div",{style:{fontSize:"1rem",fontWeight:"700",color:"#1976d2",marginBottom:"1rem"},children:"\uc815\ub2f5"}),null===(i=e.work11Data)||void 0===i?void 0:i.sentences.map((t,n)=>{var r;return(0,Se.jsxs)("div",{style:{marginBottom:"1rem",padding:"0.8rem",backgroundColor:"#F1F8E9",borderRadius:"6px",border:"1px solid #c8e6c9"},children:[(0,Se.jsxs)("div",{style:{fontSize:"0.95rem",fontWeight:"600",color:"#1976d2",marginBottom:"0.3rem"},children:[n+1,". ",t]}),(0,Se.jsx)("div",{style:{fontSize:"0.95rem",color:"#333",lineHeight:1.5},children:null===(r=e.work11Data)||void 0===r?void 0:r.translations[n]})]},n)})]})]},"work-11-".concat(t));if("13"===e.workTypeId&&e.work13Data)return(0,Se.jsxs)("div",{className:"work-section",style:{border:"2px solid #e0e0e0",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Se.jsx)("div",{className:"work-13-header",style:{marginBottom:"0.8rem",fontSize:"1.3rem",fontWeight:"700",color:"#000",textAlign:"left"},children:"#13. \ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c (\ub2e8\uc5b4-\uc8fc\uad00\uc2dd)"}),(0,Se.jsxs)("div",{className:"work-13-title",style:{background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"1.2rem",fontSize:"1.13rem",fontWeight:"800",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ub2e8\uc5b4\ub97c \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#13"})]}),(0,Se.jsx)("div",{style:{fontSize:"1.08rem",lineHeight:1.7,margin:"1.2rem 0",background:"#FFF3CD",borderRadius:"8px",padding:"1.2rem",fontFamily:"inherit",border:"2px solid #e3e6f0"},children:e.work13Data.blankedText}),(0,Se.jsx)("div",{style:{marginTop:"1.2rem",color:"#1976d2",fontWeight:700},children:(0,Se.jsxs)("span",{style:{color:"#1976d2"},children:["\uc815\ub2f5: ",(null===(o=e.work13Data.correctAnswers)||void 0===o?void 0:o.join(", "))||"\uc815\ub2f5 \uc5c6\uc74c"]})}),(0,Se.jsxs)("div",{style:{marginTop:"1.2rem",padding:"1rem",backgroundColor:"#F1F8E9",borderRadius:"8px",border:"2px solid #e3e6f0"},children:[(0,Se.jsx)("div",{style:{fontWeight:"700",marginBottom:"0.5rem",color:"#000"},children:"\ubcf8\ubb38 \ud574\uc11d:"}),(0,Se.jsx)("div",{style:{fontSize:"1rem",lineHeight:1.6,color:"#333"},children:e.work13Data.translation})]})]},"work-13-".concat(t));if("14"===e.workTypeId&&e.work14Data)return(0,Se.jsxs)("div",{className:"work-section",style:{border:"2px solid #e0e0e0",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Se.jsx)("div",{className:"work-14-header",style:{marginBottom:"0.8rem",fontSize:"1.3rem",fontWeight:"700",color:"#000"},children:"#14. \ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c (\ubb38\uc7a5-\uc8fc\uad00\uc2dd)"}),(0,Se.jsxs)("div",{className:"work-14-title",style:{background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"1.2rem",fontSize:"1.13rem",fontWeight:"800",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \ube48\uce78\uc5d0 \ub4e4\uc5b4\uac08 \ubb38\uc7a5\uc744 \uc9c1\uc811 \uc785\ub825\ud558\uc2dc\uc624."}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#14"})]}),(0,Se.jsx)("div",{style:{fontSize:"1.08rem",lineHeight:1.7,margin:"1.2rem 0",background:"#FFF3CD",borderRadius:"8px",padding:"1.2rem",fontFamily:"inherit",border:"2px solid #e3e6f0"},children:e.work14Data.blankedText}),(0,Se.jsxs)("div",{style:{marginTop:"1.2rem",color:"#1976d2",fontWeight:700},children:[(0,Se.jsx)("div",{style:{color:"#1976d2",marginBottom:"0.5rem"},children:"\uc815\ub2f5 \ubb38\uc7a5\ub4e4:"}),null===(a=e.work14Data.selectedSentences)||void 0===a?void 0:a.map((e,t)=>(0,Se.jsxs)("div",{style:{marginBottom:"0.3rem",padding:"0.5rem",backgroundColor:"#E3F2FD",borderRadius:"4px",fontSize:"0.95rem",lineHeight:1.4},children:[t+1,". ",e]},t))]}),(0,Se.jsxs)("div",{style:{marginTop:"1.2rem",padding:"1rem",backgroundColor:"#F1F8E9",borderRadius:"8px",border:"2px solid #e3e6f0"},children:[(0,Se.jsx)("div",{style:{fontWeight:"700",marginBottom:"0.5rem",color:"#000"},children:"\ubcf8\ubb38 \ud574\uc11d:"}),(0,Se.jsx)("div",{style:{fontSize:"1rem",lineHeight:1.6,color:"#333"},children:e.work14Data.translation})]})]},"work-14-".concat(t));if("09"===e.workTypeId&&e.work09Data){const n=e=>e.replace(/<u>(.*?)<\/u>/g,"<u>$1</u>"),r="\u2460\u2461\u2462\u2463\u2464"[e.work09Data.answerIndex]||"".concat(e.work09Data.answerIndex+1);return(0,Se.jsxs)("div",{className:"work-section",style:{border:"2px solid #e0e0e0",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Se.jsx)("div",{className:"work-09-header",style:{marginBottom:"0.8rem",fontSize:"1.3rem",fontWeight:"700",color:"#000"},children:"#09. \uc5b4\ubc95 \uc624\ub958 \ubb38\uc81c"}),(0,Se.jsxs)("div",{className:"work-09-title",style:{background:"#222",color:"#fff",padding:"0.7rem 1.2rem",borderRadius:"8px",marginBottom:"0.6rem",fontSize:"1.13rem",fontWeight:"800",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,Se.jsx)("span",{children:"\ub2e4\uc74c \uae00\uc758 \ubc11\uc904 \uce5c \ubd80\ubd84 \uc911, \uc5b4\ubc95\uc0c1 \ud2c0\ub9b0 \uac83\uc740?"}),(0,Se.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",color:"#FFD700"},children:"\uc720\ud615#09"})]}),(0,Se.jsx)("div",{className:"work-09-passage",style:{fontSize:"1.08rem",lineHeight:1.7,margin:"1.2rem 0",background:"#FFF3CD",borderRadius:"8px",padding:"1.2rem",fontFamily:"inherit"},children:(0,Se.jsx)("span",{dangerouslySetInnerHTML:{__html:n(e.work09Data.passage).replace(/\n/g,"<br/>")}})}),(0,Se.jsx)("div",{className:"work-09-options",style:{margin:"1.5rem 0",fontSize:"1.08rem"},children:e.work09Data.options.map((e,t)=>(0,Se.jsxs)("div",{style:{margin:"0.5rem 0",padding:"0.8rem",background:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"6px",display:"flex",alignItems:"center"},children:[(0,Se.jsx)("span",{style:{marginRight:"0.8rem",fontWeight:"700",color:"#495057",minWidth:"2rem"},children:"\u2460\u2461\u2462\u2463\u2464"[t]||"".concat(t+1,".")}),(0,Se.jsx)("span",{children:e})]},t))}),"with-answer"===g&&(0,Se.jsxs)("div",{className:"work-09-answer",style:{background:"#e8f5e8",border:"2px solid #4caf50",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",color:"#1976d2",fontWeight:"700",fontSize:"1.1rem"},children:["\uc815\ub2f5: ",r," ",e.work09Data.options[e.work09Data.answerIndex],(0,Se.jsxs)("div",{style:{marginTop:"0.7rem",color:"#1976d2",fontWeight:"400",fontSize:"1rem"},children:["\uc815\ub2f5\uc758 \uc6d0\ub798(\uc815\uc0c1) \ub2e8\uc5b4/\uad6c: ",e.work09Data.original]})]}),(0,Se.jsxs)("div",{className:"work-09-translation",style:{background:"#f1f8e9",border:"1.5px solid #c8e6c9",borderRadius:"8px",padding:"1.2rem",marginTop:"1.5rem",fontSize:"1rem",lineHeight:1.7,color:"#2e7d32"},children:[(0,Se.jsx)("strong",{children:"\ubcf8\ubb38 \ud574\uc11d:"}),(0,Se.jsx)("br",{}),e.translatedText]})]},"work-09-".concat(t))}return null})]}),"none"!==g&&(console.log("\ud83d\udda8\ufe0f \uc778\uc1c4\uc6a9 \ub80c\ub354\ub9c1 \uc2dc\uc791 - printMode:",g,"packageQuiz:",d),(0,Se.jsx)("div",{className:"print-container",children:d.map((e,t)=>"01"===e.workTypeId&&e.quiz?(0,Se.jsx)(Ac,{quiz:e.quiz,translatedText:e.quiz.translation||"",printMode:g},"print-work-01-".concat(t)):"02"===e.workTypeId&&e.work02Data?(0,Se.jsx)(xc,{work02Data:e.work02Data,translatedText:e.translatedText,printMode:g},"print-work-02-".concat(t)):"03"===e.workTypeId&&e.work03Data?(0,Se.jsx)(bc,{work03Data:e.work03Data,translatedText:e.translatedText,printMode:g},"print-work-03-".concat(t)):"04"===e.workTypeId&&e.work04Data?(0,Se.jsx)(wc,{work04Data:e.work04Data,translatedText:e.translatedText,printMode:g},"print-work-04-".concat(t)):"05"===e.workTypeId&&e.work05Data?(0,Se.jsx)(jc,{work05Data:e.work05Data,translatedText:e.translatedText,printMode:g},"print-work-05-".concat(t)):"06"===e.workTypeId&&e.work06Data?(0,Se.jsx)(Nc,{work06Data:e.work06Data,translatedText:e.translatedText,printMode:g},"print-work-06-".concat(t)):"07"===e.workTypeId&&e.work07Data?(console.log("\ud83d\udda8\ufe0f Work_07 \uc778\uc1c4\uc6a9 \ub80c\ub354\ub9c1:",{workTypeId:e.workTypeId,hasWork07Data:!!e.work07Data,printMode:g,work07Data:e.work07Data,translatedText:e.translatedText}),(0,Se.jsx)(kc,{work07Data:e.work07Data,translatedText:e.translatedText,printMode:g},"print-work-07-".concat(t))):("07"!==e.workTypeId||e.work07Data||console.error("\u274c Work_07 \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4:",{workTypeId:e.workTypeId,hasWork07Data:!!e.work07Data,quizItemKeys:Object.keys(e)}),"08"===e.workTypeId&&e.work08Data?(console.log("\ud83d\udda8\ufe0f Work_08 \uc778\uc1c4\uc6a9 \ub80c\ub354\ub9c1:",{workTypeId:e.workTypeId,hasWork08Data:!!e.work08Data,printMode:g,work08Data:e.work08Data,translatedText:e.translatedText}),(0,Se.jsx)(Sc,{work08Data:e.work08Data,translatedText:e.translatedText,printMode:g},"print-work-08-".concat(t))):"09"===e.workTypeId&&e.work09Data?(console.log("\ud83d\udda8\ufe0f Work_09 \uc778\uc1c4\uc6a9 \ub80c\ub354\ub9c1:",{workTypeId:e.workTypeId,hasWork09Data:!!e.work09Data,printMode:g,work09Data:e.work09Data,translatedText:e.translatedText}),(0,Se.jsx)(_c,{work09Data:e.work09Data,translatedText:e.translatedText,printMode:g},"print-work-09-".concat(t))):"10"===e.workTypeId&&e.work10Data?(console.log("\ud83d\udda8\ufe0f Work_10 \uc778\uc1c4\uc6a9 \ub80c\ub354\ub9c1:",{workTypeId:e.workTypeId,hasWork10Data:!!e.work10Data,printMode:g,work10Data:e.work10Data,translatedText:e.translatedText}),(0,Se.jsx)(Tc,{work10Data:e.work10Data,translatedText:e.translatedText,printMode:g},"print-work-10-".concat(t))):"11"===e.workTypeId&&e.work11Data?(0,Se.jsx)(Cc,{work11Data:e.work11Data,printMode:g},"print-work-11-".concat(t)):"13"===e.workTypeId&&e.work13Data?(0,Se.jsx)(Ec,{work13Data:e.work13Data,printMode:g},"print-work-13-".concat(t)):"14"===e.workTypeId&&e.work14Data?(0,Se.jsx)(Ic,{work14Data:e.work14Data,printMode:g},"print-work-14-".concat(t)):("08"!==e.workTypeId||e.work08Data||console.error("\u274c Work_08 \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4:",{workTypeId:e.workTypeId,hasWork08Data:!!e.work08Data,quizItemKeys:Object.keys(e)}),null)))}))]}):(0,Se.jsxs)("div",{className:"quiz-generator",onPaste:W,children:[(0,Se.jsxs)("div",{className:"generator-header",children:[(0,Se.jsx)("h2",{children:"\ud83d\udce6 \ud328\ud0a4\uc9c0 \ud034\uc988 \uc0dd\uc131 (\uc720\ud615#01~14 \ud1b5\ud569)"}),(0,Se.jsx)("p",{children:"\ud558\ub098\uc758 \uc601\uc5b4 \ubcf8\ubb38\uc73c\ub85c \uc720\ud615#01\ubd80\ud130 #11\uae4c\uc9c0 \ubaa8\ub4e0 \uc720\ud615\uc758 \ubb38\uc81c\ub97c \ud55c\ubc88\uc5d0 \uc0dd\uc131\ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"input-type-section",children:[(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"capture"===s,onChange:()=>U("capture")}),"\ud83d\udcf8 \ucea1\ucc98\ud654\uba74 \ubd99\uc5ec\ub123\uae30",(0,Se.jsx)("button",{type:"button",className:"screenshot-help-btn",onClick:e=>{e.preventDefault(),S(!0)},title:"\ud654\uba74 \ucea1\ucc98 \ubc29\ubc95 \ubcf4\uae30",children:"?"})]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"image"===s,onChange:()=>U("image")}),"\ud83d\uddbc\ufe0f \uc774\ubbf8\uc9c0 \ud30c\uc77c \ucca8\ubd80"]}),(0,Se.jsxs)("label",{children:[(0,Se.jsx)("input",{type:"radio",name:"inputMode",checked:"text"===s,onChange:()=>U("text")}),"\u270d\ufe0f \uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30"]})]}),"capture"===s&&(0,Se.jsxs)("div",{className:"input-guide".concat(j?" paste-focused":""),tabIndex:0,onClick:()=>N(!0),onFocus:()=>N(!0),onBlur:()=>N(!1),onPaste:W,children:[(0,Se.jsx)("div",{className:"drop-icon",children:"\ud83d\udccb"}),(0,Se.jsx)("div",{className:"drop-text",children:"Ctrl+V\ub85c \ucea1\ucc98\ud55c \uc774\ubbf8\uc9c0\ub97c \ubd99\uc5ec\ub123\uc73c\uc138\uc694"}),(0,Se.jsx)("div",{className:"drop-desc",children:"\uc2a4\ud06c\ub9b0\uc0f7\uc774\ub098 \uc0ac\uc9c4\uc744 \ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ud55c \ud6c4 \uc5ec\uae30\uc5d0 \ubd99\uc5ec\ub123\uae30 \ud558\uc138\uc694"}),(0,Se.jsxs)("div",{style:{fontSize:"0.9rem",color:"#666",marginTop:"0.5rem"},children:["\ud83d\udca1 ",(0,Se.jsx)("b",{children:"\ud301:"})," \ud654\uba74 \ucea1\ucc98 \ud6c4 Ctrl+V\ub85c \ubd99\uc5ec\ub123\uae30"]}),h&&(0,Se.jsx)("div",{style:{color:"#6a5acd",fontWeight:600,marginTop:"0.7rem"},children:"OpenAI Vision \ucc98\ub9ac \uc911..."})]}),"image"===s&&(0,Se.jsxs)("div",{className:"file-upload-row",children:[(0,Se.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&c(n)},id:"fileInput",style:{display:"none"}}),(0,Se.jsx)("label",{htmlFor:"fileInput",className:"file-upload-btn",children:"\ud83d\udcc1 \ud30c\uc77c \uc120\ud0dd"}),(0,Se.jsx)("div",{className:"file-upload-status",children:l?l.name:"\uc120\ud0dd\ub41c \ud30c\uc77c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"})]}),"text"===s&&(0,Se.jsxs)("div",{className:"input-section",children:[(0,Se.jsxs)("div",{className:"input-label-row",children:[(0,Se.jsx)("label",{htmlFor:"textInput",className:"input-label",children:"\uc601\uc5b4 \ubcf8\ubb38 \uc9c1\uc811 \ubd99\uc5ec\ub123\uae30: (2,000\uc790 \ubbf8\ub9cc \uad8c\uc7a5)"}),o.length<100&&(0,Se.jsx)("span",{className:"warning",children:"\u26a0\ufe0f \ub354 \uae34 \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 \ub354 \uc88b\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Se.jsx)("textarea",{id:"textInput",ref:w,value:o,onChange:e=>{a(e.target.value),w.current&&(w.current.style.height="auto",w.current.style.height=w.current.scrollHeight+"px")},placeholder:"\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc9c1\uc811 \ubd99\uc5ec\ub123\uc5b4 \uc8fc\uc138\uc694. \ucd5c\uc18c 100\uc790 \uc774\uc0c1 \uad8c\uc7a5\ud569\ub2c8\ub2e4.",className:"text-input",rows:8})]}),(0,Se.jsxs)("div",{className:"work-types-selection",children:[(0,Se.jsxs)("div",{className:"work-types-header",children:[(0,Se.jsx)("h3",{children:"\uc0dd\uc131\ud560 \ubb38\uc81c \uc720\ud615 \uc120\ud0dd"}),(0,Se.jsx)("button",{type:"button",className:"select-all-button",onClick:()=>{const e=Object.values(I).every(e=>e),t={};Pc.forEach(n=>{t[n.id]=!e}),A(t)},children:Object.values(I).every(e=>e)?"\uc804\uccb4 \ud574\uc81c":"\uc804\uccb4 \uc120\ud0dd"})]}),(0,Se.jsx)("div",{className:"work-types-grid",children:Pc.map(e=>{const n=Fc[e.id],r=L.find(e=>e.id===n),s=(null===r||void 0===r?void 0:r.points)||0;return(0,Se.jsxs)("label",{className:"work-type-checkbox",children:[(0,Se.jsx)("input",{type:"checkbox",checked:I[e.id]||!1,onChange:()=>{return n=e.id,void A(e=>(0,t.A)((0,t.A)({},e),{},{[n]:!e[n]}));var n}}),(0,Se.jsxs)("div",{className:"checkbox-label",children:[(0,Se.jsxs)("span",{className:"work-type-id",children:["#",e.id]}),(0,Se.jsx)("span",{className:"work-type-name",children:e.name}),(0,Se.jsxs)("span",{className:"work-type-points",children:["(",s,"P)"]})]})]},e.id)})})]}),(h||m)&&(0,Se.jsx)("div",{className:"centered-hourglass-overlay",children:(0,Se.jsxs)("div",{className:"centered-hourglass-content",children:[(0,Se.jsx)("div",{className:"centered-hourglass-spinner",children:"\u23f3"}),(0,Se.jsx)("div",{className:"loading-text",children:m?"\ud83d\udcc4 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \uc911...":"\ud83d\udccb \ud328\ud0a4\uc9c0 \ubb38\uc81c \uc0dd\uc131 \uc911..."}),x.total>0&&(0,Se.jsxs)("div",{className:"progress-info",children:[(0,Se.jsxs)("div",{className:"progress-text",children:[x.completed," / ",x.total," \uc720\ud615 \uc644\ub8cc"]}),(0,Se.jsx)("div",{className:"progress-bar",children:(0,Se.jsx)("div",{className:"progress-fill",style:{width:"".concat(x.completed/x.total*100,"%")}})}),x.currentType&&(0,Se.jsxs)("div",{className:"current-type",children:["\ud604\uc7ac \uc0dd\uc131 \uc911: ",x.currentType," (\uc720\ud615#",x.currentTypeId,")"]})]})]})}),(0,Se.jsx)("button",{type:"button",className:"generate-button",onClick:async()=>{if(console.log("\ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778:",{userData:e,uid:null===e||void 0===e?void 0:e.uid,loading:n}),n)return void alert("\ub85c\uadf8\uc778 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");if(!e||!e.uid)return void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");if(!o.trim())return void alert("\uc601\uc5b4 \ubcf8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");const t=Pc.filter(e=>I[e.id]);if(0===t.length)return void alert("\uc0dd\uc131\ud560 \ubb38\uc81c \uc720\ud615\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");const r=B();t.forEach(e=>{var t;const n=Fc[e.id],r=(null===(t=L.find(e=>e.id===n))||void 0===t?void 0:t.points)||0;console.log("\uc720\ud615#".concat(e.id," (").concat(e.name,"): ").concat(r,"P"))}),console.log("\uc120\ud0dd\ub41c \uc720\ud615\ub4e4: ".concat(t.map(e=>"#".concat(e.id)).join(", "))),console.log("\ucd1d \ucc28\uac10 \ud3ec\uc778\ud2b8: ".concat(r,"P")),D<r?alert("\ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. \ud604\uc7ac ".concat(D.toLocaleString(),"P, \ud544\uc694 ").concat(r.toLocaleString(),"P")):(F(r),O(!0))},disabled:h||0===B(),children:h?"\uc0dd\uc131 \uc911...":"\ud328\ud0a4\uc9c0 \ud034\uc988 \uc0dd\uc131"}),(0,Se.jsx)(yo,{isOpen:R,onClose:()=>O(!1),onConfirm:()=>{O(!1),Z()},workTypeName:"\ud328\ud0a4\uc9c0 \ud034\uc988 \uc0dd\uc131 (".concat(Object.values(I).filter(e=>e).length,"\uac1c \uc720\ud615)"),pointsToDeduct:P,userCurrentPoints:D,remainingPoints:D-P}),(0,Se.jsx)(go,{isOpen:k,onClose:()=>S(!1)})]}):(0,Se.jsx)("div",{className:"error",children:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."})};var zc=n(147);const Lc=()=>{const{currentUser:e,userData:n,loading:s}=Te(),i=Z(),[o,a]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[h,p]=(0,r.useState)({title:"",content:"",problemType:"",files:[]}),[m,f]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!0),[v,x]=(0,r.useState)(!0);(0,r.useEffect)(()=>{s||x(!1)},[s]);(0,r.useEffect)(()=>{b()},[]);const b=async()=>{try{const e=(0,Ne.query)((0,Ne.collection)(je.db,"sampleProblems"),(0,Ne.orderBy)("createdAt","desc")),n=(await(0,Ne.getDocs)(e)).docs.map(e=>(0,t.A)({id:e.id},e.data()));a(n)}catch(e){console.error("Error fetching problems:",e)}finally{y(!1)}},w=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},j=e=>{if(!e)return"";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})};return g?(0,Se.jsx)("div",{className:"sample-problems-container",children:(0,Se.jsx)("div",{className:"loading-spinner",children:"\ub85c\ub529 \uc911..."})}):(0,Se.jsxs)("div",{className:"sample-problems-container",children:[(0,Se.jsxs)("div",{className:"sample-problems-header",children:[(0,Se.jsx)("h1",{children:"\uc0d8\ud50c \ubb38\uc81c \ub2e4\uc6b4\ub85c\ub4dc"}),v||s?(0,Se.jsxs)("div",{className:"loading-permission",children:[(0,Se.jsx)("div",{className:"loading-spinner-small"}),(0,Se.jsx)("p",{children:"\uad8c\ud55c \uc815\ubcf4\ub97c \ud655\uc778\ud558\ub294 \uc911..."})]}):"admin"!==(null===n||void 0===n?void 0:n.role)&&(0,Se.jsx)("div",{className:"user-content",children:(0,Se.jsx)("p",{className:"user-description",children:"\ud83d\udcdd\uc900\ube44\ub41c \ub2e4\uc591\ud55c \uc720\ud615\uc758 \uc601\uc5b4 \ubb38\uc81c\ub97c \ub2e4\uc6b4\ub85c\ub4dc \ud574\ubcf4\uc138\uc694"})})]}),!v&&!s&&"admin"===(null===n||void 0===n?void 0:n.role)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("p",{className:"admin-description",children:"\uad00\ub9ac\uc790\uac00 \uc5c5\ub85c\ub4dc\ud55c \ub2e4\uc591\ud55c \uc720\ud615\uc758 \uc601\uc5b4 \ubb38\uc81c\ub97c \ub2e4\uc6b4\ub85c\ub4dc\ud558\uc138\uc694"}),(0,Se.jsx)("div",{className:"admin-actions",children:(0,Se.jsxs)("button",{className:"upload-button",onClick:()=>{u(null),p({title:"",content:"",problemType:"",files:[]}),c(!0)},children:[(0,Se.jsx)("span",{className:"button-icon",children:"\ud83d\udce4"}),"\uc0c8 \ubb38\uc81c \uc5c5\ub85c\ub4dc"]})})]}),(0,Se.jsx)("div",{className:"problems-grid",children:0===o.length?(0,Se.jsxs)("div",{className:"empty-state",children:[(0,Se.jsx)("div",{className:"empty-icon",children:"\ud83d\udcda"}),(0,Se.jsx)("h3",{children:"\uc544\uc9c1 \uc5c5\ub85c\ub4dc\ub41c \ubb38\uc81c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,Se.jsx)("p",{children:"\uad00\ub9ac\uc790\uac00 \uc0d8\ud50c \ubb38\uc81c\ub97c \uc5c5\ub85c\ub4dc\ud558\uba74 \uc5ec\uae30\uc5d0 \ud45c\uc2dc\ub429\ub2c8\ub2e4."})]}):o.map(e=>(0,Se.jsxs)("div",{className:"problem-card",children:[(0,Se.jsxs)("div",{className:"problem-header",children:[(0,Se.jsx)("div",{className:"problem-type-badge clickable",onClick:()=>(e=>{const t={"\ubb38\ub2e8 \uc21c\uc11c \ub9de\ucd94\uae30":"/work_01_article-order","\ub3c5\ud574 \ubb38\uc81c":"/work_02_reading-comprehension","\ube48\uce78(\ub2e8\uc5b4) \ubb38\uc81c":"/work_03_vocabulary-word","\ube48\uce78(\uad6c) \ubb38\uc81c":"/work_04_blank-phrase-inference","\ube48\uce78(\ubb38\uc7a5) \ubb38\uc81c":"/work_05_blank-sentence-inference","\ubb38\uc7a5 \uc704\uce58 \ucc3e\uae30":"/work_06_sentence-position","\uc8fc\uc81c \ucd94\ub860":"/work_07_main-idea-inference","\uc81c\ubaa9 \ucd94\ub860":"/work_08_title-inference","\uc5b4\ubc95 \uc624\ub958 \ubb38\uc81c":"/work_09_grammar-error","\ub2e4\uc911 \uc5b4\ubc95 \uc624\ub958 \ubb38\uc81c":"/work_10_multi-grammar-error","\ubcf8\ubb38 \ubb38\uc7a5\ubcc4 \ud574\uc11d":"/work_11_sentence-translation","\ub2e8\uc5b4 \ud559\uc2b5 \ubb38\uc81c":"/work_12_word-study"}[e];t&&i(t)})(e.problemType),title:"\ud074\ub9ad\ud558\uc5ec \ud574\ub2f9 \ubb38\uc81c \uc720\ud615 \ud654\uba74\uc73c\ub85c \uc774\ub3d9",children:e.problemType}),(0,Se.jsx)("div",{className:"problem-date",children:j(e.createdAt)})]}),(0,Se.jsx)("h3",{className:"problem-title",children:e.title}),(0,Se.jsx)("p",{className:"problem-content",children:e.content}),(0,Se.jsxs)("div",{className:"problem-files",children:[(0,Se.jsxs)("h4",{children:["\ucca8\ubd80 \ud30c\uc77c (",e.files.length,"\uac1c)"]}),e.files.map((e,t)=>(0,Se.jsxs)("div",{className:"file-item",children:[(0,Se.jsx)("span",{className:"file-name",children:e.name}),(0,Se.jsxs)("span",{className:"file-size",children:["(",w(e.size),")"]}),(0,Se.jsx)("a",{href:e.url,download:e.name,className:"download-button",children:"\ub2e4\uc6b4\ub85c\ub4dc"})]},t))]}),"admin"===(null===n||void 0===n?void 0:n.role)&&(0,Se.jsxs)("div",{className:"problem-actions",children:[(0,Se.jsx)("button",{className:"edit-button",onClick:()=>{console.log("Edit button clicked for problem:",e.id),(e=>{u(e),p({title:e.title,content:e.content,problemType:e.problemType,files:[]}),c(!0)})(e)},disabled:m,children:"\uc218\uc815"}),(0,Se.jsx)("button",{className:"delete-button",onClick:()=>{console.log("Delete button clicked for problem:",e.id),(async(e,t)=>{if(window.confirm("\uc815\ub9d0\ub85c \uc774 \uac8c\uc2dc\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{for(const e of t)try{const t=new URL(e.url).pathname.match(/\/o\/(.+)\?/);if(t){const e=decodeURIComponent(t[1]),n=(0,zc.KR)(je.IG,e);await(0,zc.XR)(n)}}catch(n){console.error("Error deleting file:",n)}await(0,Ne.kd)((0,Ne.doc)(je.db,"sampleProblems",e)),b(),alert("\ubb38\uc81c\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(n){console.error("Error deleting problem:",n),alert("\ubb38\uc81c \uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}})(e.id,e.files)},disabled:m,children:"\uc0ad\uc81c"})]})]},e.id))}),l&&(0,Se.jsx)("div",{className:"modal-overlay",children:(0,Se.jsxs)("div",{className:"modal-content",children:[(0,Se.jsxs)("div",{className:"modal-header",children:[(0,Se.jsx)("h2",{children:d?"\ubb38\uc81c \uc218\uc815":"\uc0c8 \ubb38\uc81c \uc5c5\ub85c\ub4dc"}),(0,Se.jsx)("button",{className:"close-button",onClick:()=>c(!1),children:"\xd7"})]}),(0,Se.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),e&&n){f(!0);try{const r=await(async e=>{const t=[];for(const n of e){const e=(0,zc.KR)(je.IG,"sample-problems/".concat(Date.now(),"_").concat(n.name));await(0,zc.D)(e,n);const r=await(0,zc.qk)(e);t.push({name:n.name,url:r,size:n.size})}return t})(h.files),i={title:h.title,content:h.content,problemType:h.problemType,files:r,createdAt:(0,Ne.serverTimestamp)(),updatedAt:(0,Ne.serverTimestamp)(),authorId:e.uid,authorName:n.name||n.nickname||"\uad00\ub9ac\uc790"};if(d){for(const e of d.files)try{const t=new URL(e.url).pathname.match(/\/o\/(.+)\?/);if(t){const e=decodeURIComponent(t[1]),n=(0,zc.KR)(je.IG,e);await(0,zc.XR)(n)}}catch(s){console.error("Error deleting old file:",s)}await(0,Ne.updateDoc)((0,Ne.doc)(je.db,"sampleProblems",d.id),(0,t.A)((0,t.A)({},i),{},{updatedAt:(0,Ne.serverTimestamp)()})),alert("\ubb38\uc81c\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}else await(0,Ne.addDoc)((0,Ne.collection)(je.db,"sampleProblems"),i),alert("\ubb38\uc81c\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc5c5\ub85c\ub4dc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");p({title:"",content:"",problemType:"",files:[]}),u(null),c(!1),b()}catch(s){console.error("Error saving problem:",s),alert("\ubb38\uc81c \uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}finally{f(!1)}}},className:"problem-form",children:[(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"title",children:"\uc81c\ubaa9 *"}),(0,Se.jsx)("input",{id:"title",type:"text",value:h.title,onChange:e=>p(n=>(0,t.A)((0,t.A)({},n),{},{title:e.target.value})),required:!0,placeholder:"\ubb38\uc81c \uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"problemType",children:"\ubb38\uc81c \uc720\ud615 *"}),(0,Se.jsxs)("select",{id:"problemType",value:h.problemType,onChange:e=>p(n=>(0,t.A)((0,t.A)({},n),{},{problemType:e.target.value})),required:!0,children:[(0,Se.jsx)("option",{value:"",children:"\uc720\ud615\uc744 \uc120\ud0dd\ud558\uc138\uc694"}),["01. \ubb38\ub2e8 \uc21c\uc11c \ub9de\ucd94\uae30","02. \uc720\uc0ac \ub2e8\uc5b4 \ubcf8\ubb38 \ub3c5\ud574","03. \ube48\uce78(\ub2e8\uc5b4) \ubb38\uc81c","04. \ube48\uce78(\uad6c) \ubb38\uc81c","05. \ube48\uce78(\ubb38\uc7a5) \ubb38\uc81c","06. \ubb38\uc7a5 \uc704\uce58 \ucc3e\uae30","07. \uc8fc\uc81c \ucd94\ub860","08. \uc81c\ubaa9 \ucd94\ub860","09. \uc5b4\ubc95 \uc624\ub958 \ubb38\uc81c","10. \ub2e4\uc911 \uc5b4\ubc95 \uc624\ub958 \ubb38\uc81c","11. \ubcf8\ubb38 \ubb38\uc7a5\ubcc4 \ud574\uc11d","12. \ub2e8\uc5b4 \ud559\uc2b5 \ubb38\uc81c","13. \ube48\uce78 \ucc44\uc6b0\uae30 (\ub2e8\uc5b4-\uc8fc\uad00\uc2dd)","14. \ube48\uce78 \ucc44\uc6b0\uae30 (\ubb38\uc7a5-\uc8fc\uad00\uc2dd)","\ud328\ud0a4\uc9c001. \uc885\ud569 \ubb38\uc81c \uc138\ud2b8"].map(e=>(0,Se.jsx)("option",{value:e,children:e},e))]})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"content",children:"\ub0b4\uc6a9"}),(0,Se.jsx)("textarea",{id:"content",value:h.content,onChange:e=>{const n=e.target.value;n.length<=2e3&&p(e=>(0,t.A)((0,t.A)({},e),{},{content:n}))},placeholder:"\ubb38\uc81c\uc5d0 \ub300\ud55c \uc124\uba85\uc774\ub098 \ucc38\uace0\uc0ac\ud56d\uc744 \uc785\ub825\ud558\uc138\uc694 (\ucd5c\ub300 2000\uc790)",rows:4,maxLength:2e3}),(0,Se.jsxs)("div",{style:{fontSize:"0.8rem",color:h.content.length>1800?"#d32f2f":"#666",textAlign:"right",marginTop:"0.25rem"},children:[h.content.length,"/2000\uc790"]})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"files",children:"\ud30c\uc77c \ucca8\ubd80 (\ucd5c\ub300 3\uac1c)"}),(0,Se.jsx)("input",{id:"files",type:"file",multiple:!0,onChange:e=>{const n=Array.from(e.target.files||[]);if(n.length>3)return void alert("\ucd5c\ub300 3\uac1c\uae4c\uc9c0\ub9cc \ucca8\ubd80\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");const r=["application/pdf","image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp"],s=n.filter(e=>!r.includes(e.type));if(s.length>0)return void alert("\ub2e4\uc74c \ud30c\uc77c\ub4e4\uc740 \uc9c0\uc6d0\ub418\uc9c0 \uc54a\ub294 \ud615\uc2dd\uc785\ub2c8\ub2e4:\n".concat(s.map(e=>e.name).join("\n"),"\n\n\uc9c0\uc6d0 \ud615\uc2dd: PDF, JPG, PNG, GIF, BMP, WebP"));const i=n.filter(e=>e.size>10485760);i.length>0?alert("\ub2e4\uc74c \ud30c\uc77c\ub4e4\uc740 \ud06c\uae30\uac00 \ub108\ubb34 \ud07d\ub2c8\ub2e4 (\ucd5c\ub300 10MB):\n".concat(i.map(e=>e.name).join("\n"))):p(e=>(0,t.A)((0,t.A)({},e),{},{files:n}))},accept:".pdf,.jpg,.jpeg,.png,.gif,.bmp,.webp"}),(0,Se.jsx)("div",{className:"file-info",children:h.files.map((e,t)=>(0,Se.jsxs)("div",{className:"selected-file",children:[e.name," (",w(e.size),")"]},t))})]}),(0,Se.jsxs)("div",{className:"form-actions",children:[(0,Se.jsx)("button",{type:"button",className:"cancel-button",onClick:()=>c(!1),children:"\ucde8\uc18c"}),(0,Se.jsx)("button",{type:"submit",className:"submit-button",disabled:m,children:m?"\uc5c5\ub85c\ub4dc \uc911...":d?"\uc218\uc815":"\uc5c5\ub85c\ub4dc"})]})]})]})})]})},Mc=()=>{var e,n,s,i,o;const{currentUser:a,userData:l}=Te(),[c,d]=(0,r.useState)([]),[u,h]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(""),[x,b]=(0,r.useState)(""),[w,j]=(0,r.useState)(""),[N,k]=(0,r.useState)(!0),[S,_]=(0,r.useState)(!1),[T,C]=(0,r.useState)(!1),[E,I]=(0,r.useState)(!1),[A,R]=(0,r.useState)([]),[O,P]=(0,r.useState)([]),[F,D]=(0,r.useState)([]),[z,L]=(0,r.useState)([]),M=(0,r.useRef)(null),B=(0,r.useRef)(null);(0,r.useEffect)(()=>{console.log("Feedback \ucef4\ud3ec\ub10c\ud2b8 - currentUser:",a),console.log("Feedback \ucef4\ud3ec\ub10c\ud2b8 - userData:",l),a&&l&&_(!0===l.isAdmin)},[a,l]),(0,r.useEffect)(()=>{H()},[]);const U=async e=>{const t=e.map(async e=>{const t=Date.now(),n="".concat(t,"_").concat(e.name),r=(0,zc.KR)(je.IG,"feedback-images/".concat(n));await(0,zc.D)(r,e);return await(0,zc.qk)(r)});return Promise.all(t)},W=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Array.from(e.target.files||[]).filter(e=>e.type.startsWith("image/"));t?P(e=>[...e,...n]):R(e=>[...e,...n])},V=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?P(t=>t.filter((t,n)=>n!==e)):R(t=>t.filter((t,n)=>n!==e))},q=e=>URL.createObjectURL(e),H=async()=>{try{const e=(0,Ne.query)((0,Ne.collection)(je.db,"feedback"),(0,Ne.orderBy)("createdAt","desc")),n=await(0,Ne.getDocs)(e),r=[];for(const s of n.docs){const e=s.data(),n=(0,Ne.query)((0,Ne.collection)(je.db,"feedback",s.id,"replies"),(0,Ne.orderBy)("createdAt","asc")),i=(await(0,Ne.getDocs)(n)).docs.map(e=>(0,t.A)({id:e.id},e.data()));r.push((0,t.A)((0,t.A)({id:s.id},e),{},{replies:i}))}d(r)}catch(e){console.error("\uac8c\uc2dc\uae00 \ubd88\ub7ec\uc624\uae30 \uc624\ub958:",e)}finally{k(!1)}},K=()=>{h(null),m(!1),g(!1),v(""),b(""),j(""),R([]),P([]),D([]),L([])};return a?(0,Se.jsxs)("div",{className:"feedback-container",children:[(0,Se.jsxs)("div",{className:"feedback-header",children:[(0,Se.jsx)("h1",{children:"Feedback \uac8c\uc2dc\ud310"}),(0,Se.jsx)("p",{children:"\uc11c\ube44\uc2a4 \uc774\uc6a9 \ud6c4 \ud53c\ub4dc\ubc31\uc744 \ub0a8\uaca8\uc8fc\uc138\uc694."})]}),!u&&!p&&!f&&(0,Se.jsxs)("div",{className:"feedback-list",children:[(0,Se.jsx)("div",{className:"feedback-actions",children:(0,Se.jsx)("button",{className:"btn btn-primary",onClick:()=>m(!0),children:"\uae00\uc4f0\uae30"})}),N?(0,Se.jsx)("div",{className:"loading",children:"\uac8c\uc2dc\uae00\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."}):(0,Se.jsx)("div",{className:"posts-table",children:(0,Se.jsxs)("table",{children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"\ubc88\ud638"}),(0,Se.jsx)("th",{children:"\uc81c\ubaa9"}),(0,Se.jsx)("th",{children:"\uc791\uc131\uc790"}),(0,Se.jsx)("th",{children:"\uc791\uc131\uc77c"}),(0,Se.jsx)("th",{children:"\ub2f5\uae00"})]})}),(0,Se.jsx)("tbody",{children:c.map((e,t)=>{var n,r,s;return(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{children:c.length-t}),(0,Se.jsx)("td",{children:(0,Se.jsxs)("button",{className:"post-title-btn",onClick:()=>(e=>{h(e),m(!1),g(!1)})(e),children:[e.title,e.imageUrls&&e.imageUrls.length>0&&(0,Se.jsx)("span",{className:"image-indicator",children:" \ud83d\udcf7"})]})}),(0,Se.jsx)("td",{children:e.authorName}),(0,Se.jsx)("td",{children:null!==(n=e.createdAt)&&void 0!==n&&null!==(r=n.toDate)&&void 0!==r&&r.call(n)?e.createdAt.toDate().toLocaleDateString():"\ub0a0\uc9dc \uc5c6\uc74c"}),(0,Se.jsx)("td",{children:(null===(s=e.replies)||void 0===s?void 0:s.length)||0})]},e.id)})})]})})]}),p&&(0,Se.jsxs)("div",{className:"feedback-write",children:[(0,Se.jsx)("h2",{children:"\uae00\uc4f0\uae30"}),(0,Se.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a&&y.trim()&&x.trim()){C(!0);try{let e="\uc775\uba85";try{const r=await(0,Ne.x7)((0,Ne.doc)(je.db,"users",a.uid));if(r.exists()){var t;const n=r.data();e=n.nickname||n.name||(null===(t=a.email)||void 0===t?void 0:t.split("@")[0])||"\uc775\uba85",console.log("Firestore\uc5d0\uc11c \uac00\uc838\uc628 \uc0ac\uc6a9\uc790 \ub370\uc774\ud130:",n),console.log("\ucd5c\uc885 authorName:",e)}else{var n;e=(null===(n=a.email)||void 0===n?void 0:n.split("@")[0])||"\uc775\uba85",console.log("\uc0ac\uc6a9\uc790 \ub370\uc774\ud130\uac00 \uc5c6\uc5b4\uc11c \uc774\uba54\uc77c\uc5d0\uc11c \ucd94\ucd9c:",e)}}catch(s){var r;console.error("\uc0ac\uc6a9\uc790 \ub370\uc774\ud130 \uac00\uc838\uc624\uae30 \uc624\ub958:",s),e=(null===(r=a.email)||void 0===r?void 0:r.split("@")[0])||"\uc775\uba85",console.log("\uc624\ub958 \ubc1c\uc0dd\uc73c\ub85c \uc774\uba54\uc77c\uc5d0\uc11c \ucd94\ucd9c:",e)}let i=[];A.length>0&&(i=await U(A));const o={title:y.trim(),content:x.trim(),authorId:a.uid,authorName:e,createdAt:(0,Ne.serverTimestamp)(),imageUrls:i};await(0,Ne.addDoc)((0,Ne.collection)(je.db,"feedback"),o),v(""),b(""),R([]),D([]),m(!1),H()}catch(s){console.error("\uac8c\uc2dc\uae00 \uc791\uc131 \uc624\ub958:",s)}finally{C(!1)}}},children:[(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\uc81c\ubaa9"}),(0,Se.jsx)("input",{type:"text",value:y,onChange:e=>v(e.target.value),placeholder:"\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694",required:!0})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\ub0b4\uc6a9"}),(0,Se.jsx)("textarea",{value:x,onChange:e=>b(e.target.value),placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694",rows:10,required:!0})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\uc774\ubbf8\uc9c0 \ucca8\ubd80"}),(0,Se.jsx)("input",{type:"file",ref:M,onChange:e=>W(e),accept:"image/*",multiple:!0,style:{display:"none"}}),(0,Se.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{var e;return null===(e=M.current)||void 0===e?void 0:e.click()},children:"\uc774\ubbf8\uc9c0 \uc120\ud0dd"}),A.length>0&&(0,Se.jsxs)("div",{className:"image-preview-container",children:[(0,Se.jsxs)("h4",{children:["\uc120\ud0dd\ub41c \uc774\ubbf8\uc9c0 (",A.length,"\uac1c)"]}),(0,Se.jsx)("div",{className:"image-preview-grid",children:A.map((e,t)=>(0,Se.jsxs)("div",{className:"image-preview-item",children:[(0,Se.jsx)("img",{src:q(e),alt:"\ubbf8\ub9ac\ubcf4\uae30 ".concat(t+1),className:"image-preview"}),(0,Se.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>V(t),children:"\uc0ad\uc81c"})]},t))})]})]}),(0,Se.jsxs)("div",{className:"form-actions",children:[(0,Se.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:T,children:T?"\uc5c5\ub85c\ub4dc \uc911...":"\ub4f1\ub85d"}),(0,Se.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{m(!1),v(""),b(""),R([])},children:"\ucde8\uc18c"})]})]})]}),f&&u&&(0,Se.jsxs)("div",{className:"feedback-edit",children:[(0,Se.jsx)("h2",{children:"\uae00 \uc218\uc815"}),(0,Se.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),u&&y.trim()&&x.trim()){C(!0);try{let e=[...u.imageUrls||[]];if(A.length>0){const t=await U(A);e=[...e,...t]}const t=(0,Ne.doc)(je.db,"feedback",u.id);await(0,Ne.updateDoc)(t,{title:y.trim(),content:x.trim(),updatedAt:(0,Ne.serverTimestamp)(),imageUrls:e}),v(""),b(""),R([]),D([]),g(!1),h(null),H()}catch(t){console.error("\uac8c\uc2dc\uae00 \uc218\uc815 \uc624\ub958:",t)}finally{C(!1)}}},children:[(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\uc81c\ubaa9"}),(0,Se.jsx)("input",{type:"text",value:y,onChange:e=>v(e.target.value),required:!0})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\ub0b4\uc6a9"}),(0,Se.jsx)("textarea",{value:x,onChange:e=>b(e.target.value),rows:10,required:!0})]}),F.length>0&&(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\uae30\uc874 \uc774\ubbf8\uc9c0"}),(0,Se.jsx)("div",{className:"image-preview-grid",children:F.map((e,t)=>(0,Se.jsx)("div",{className:"image-preview-item",children:(0,Se.jsx)("img",{src:e,alt:"\uae30\uc874 \uc774\ubbf8\uc9c0 ".concat(t+1),className:"image-preview"})},t))})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\uc0c8 \uc774\ubbf8\uc9c0 \ucca8\ubd80"}),(0,Se.jsx)("input",{type:"file",ref:M,onChange:e=>W(e),accept:"image/*",multiple:!0,style:{display:"none"}}),(0,Se.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{var e;return null===(e=M.current)||void 0===e?void 0:e.click()},children:"\uc774\ubbf8\uc9c0 \uc120\ud0dd"}),A.length>0&&(0,Se.jsxs)("div",{className:"image-preview-container",children:[(0,Se.jsxs)("h4",{children:["\uc120\ud0dd\ub41c \uc774\ubbf8\uc9c0 (",A.length,"\uac1c)"]}),(0,Se.jsx)("div",{className:"image-preview-grid",children:A.map((e,t)=>(0,Se.jsxs)("div",{className:"image-preview-item",children:[(0,Se.jsx)("img",{src:q(e),alt:"\ubbf8\ub9ac\ubcf4\uae30 ".concat(t+1),className:"image-preview"}),(0,Se.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>V(t),children:"\uc0ad\uc81c"})]},t))})]})]}),(0,Se.jsxs)("div",{className:"form-actions",children:[(0,Se.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:T,children:T?"\uc5c5\ub85c\ub4dc \uc911...":"\uc218\uc815"}),(0,Se.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:K,children:"\ucde8\uc18c"})]})]})]}),u&&!p&&!f&&(0,Se.jsxs)("div",{className:"feedback-view",children:[(0,Se.jsxs)("div",{className:"post-header",children:[(0,Se.jsx)("h2",{children:u.title}),(0,Se.jsxs)("div",{className:"post-meta",children:[(0,Se.jsxs)("span",{children:["\uc791\uc131\uc790: ",u.authorName]}),(0,Se.jsxs)("span",{children:["\uc791\uc131\uc77c: ",null!==(e=u.createdAt)&&void 0!==e&&null!==(n=e.toDate)&&void 0!==n&&n.call(e)?u.createdAt.toDate().toLocaleDateString():"\ub0a0\uc9dc \uc5c6\uc74c"]}),u.updatedAt&&(0,Se.jsxs)("span",{children:["\uc218\uc815\uc77c: ",null!==(s=u.updatedAt)&&void 0!==s&&null!==(i=s.toDate)&&void 0!==i&&i.call(s)?u.updatedAt.toDate().toLocaleDateString():"\ub0a0\uc9dc \uc5c6\uc74c"]})]})]}),(0,Se.jsxs)("div",{className:"post-content",children:[u.content.split("\n").map((e,t)=>(0,Se.jsx)("p",{children:e},t)),u.imageUrls&&u.imageUrls.length>0&&(0,Se.jsxs)("div",{className:"post-images",children:[(0,Se.jsx)("h4",{children:"\ucca8\ubd80\ub41c \uc774\ubbf8\uc9c0"}),(0,Se.jsx)("div",{className:"image-grid",children:u.imageUrls.map((e,t)=>(0,Se.jsx)("div",{className:"image-item",children:(0,Se.jsx)("img",{src:e,alt:"\uac8c\uc2dc\uae00 \uc774\ubbf8\uc9c0 ".concat(t+1),className:"post-image",onClick:()=>window.open(e,"_blank")})},t))})]})]}),(0,Se.jsxs)("div",{className:"post-actions",children:[a&&a.uid===u.authorId&&(0,Se.jsx)("button",{className:"btn btn-secondary",onClick:()=>{return h(e=u),v(e.title),b(e.content),D(e.imageUrls||[]),void g(!0);var e},children:"\uc218\uc815"}),(S||a&&a.uid===u.authorId)&&(0,Se.jsx)("button",{className:"btn btn-danger",onClick:()=>(async e=>{if(!a)return;const t=c.find(t=>t.id===e);if(t)if(S||a.uid===t.authorId){if(window.confirm("\uc815\ub9d0\ub85c \uc774 \uac8c\uc2dc\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{const t=c.find(t=>t.id===e);if(null!==t&&void 0!==t&&t.imageUrls)for(const e of t.imageUrls)try{const t=(0,zc.KR)(je.IG,e);await(0,zc.XR)(t)}catch(n){console.error("\uc774\ubbf8\uc9c0 \uc0ad\uc81c \uc624\ub958:",n)}await(0,Ne.kd)((0,Ne.doc)(je.db,"feedback",e)),H(),(null===u||void 0===u?void 0:u.id)===e&&h(null)}catch(n){console.error("\uac8c\uc2dc\uae00 \uc0ad\uc81c \uc624\ub958:",n)}}else alert("\uc0ad\uc81c \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")})(u.id),children:"\uc0ad\uc81c"}),(0,Se.jsx)("button",{className:"btn btn-primary",onClick:K,children:"\ubaa9\ub85d\uc73c\ub85c"})]}),(0,Se.jsxs)("div",{className:"replies-section",children:[(0,Se.jsxs)("h3",{children:["\ub2f5\uae00 (",(null===(o=u.replies)||void 0===o?void 0:o.length)||0,")"]}),u.replies&&u.replies.length>0&&(0,Se.jsx)("div",{className:"replies-list",children:u.replies.map(e=>{var t,n;return(0,Se.jsxs)("div",{className:"reply-item",children:[(0,Se.jsxs)("div",{className:"reply-header",children:[(0,Se.jsx)("span",{className:"reply-author",children:e.authorName}),(0,Se.jsx)("span",{className:"reply-date",children:null!==(t=e.createdAt)&&void 0!==t&&null!==(n=t.toDate)&&void 0!==n&&n.call(t)?e.createdAt.toDate().toLocaleDateString():"\ub0a0\uc9dc \uc5c6\uc74c"})]}),(0,Se.jsxs)("div",{className:"reply-content",children:[e.content.split("\n").map((e,t)=>(0,Se.jsx)("p",{children:e},t)),e.imageUrls&&e.imageUrls.length>0&&(0,Se.jsx)("div",{className:"reply-images",children:(0,Se.jsx)("div",{className:"image-grid",children:e.imageUrls.map((e,t)=>(0,Se.jsx)("div",{className:"image-item",children:(0,Se.jsx)("img",{src:e,alt:"\ub2f5\uae00 \uc774\ubbf8\uc9c0 ".concat(t+1),className:"reply-image",onClick:()=>window.open(e,"_blank")})},t))})})]})]},e.id)})}),(0,Se.jsxs)("div",{className:"reply-form",children:[(0,Se.jsx)("h4",{children:"\ub2f5\uae00 \uc791\uc131"}),(0,Se.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a&&u&&w.trim()){I(!0);try{let e="\uc775\uba85";try{const r=await(0,Ne.x7)((0,Ne.doc)(je.db,"users",a.uid));if(r.exists()){var t;const n=r.data();e=n.nickname||n.name||(null===(t=a.email)||void 0===t?void 0:t.split("@")[0])||"\uc775\uba85"}else{var n;e=(null===(n=a.email)||void 0===n?void 0:n.split("@")[0])||"\uc775\uba85"}}catch(s){var r;console.error("\uc0ac\uc6a9\uc790 \ub370\uc774\ud130 \uac00\uc838\uc624\uae30 \uc624\ub958:",s),e=(null===(r=a.email)||void 0===r?void 0:r.split("@")[0])||"\uc775\uba85"}let i=[];O.length>0&&(i=await U(O));const o={content:w.trim(),authorId:a.uid,authorName:e,createdAt:(0,Ne.serverTimestamp)(),imageUrls:i};await(0,Ne.addDoc)((0,Ne.collection)(je.db,"feedback",u.id,"replies"),o),j(""),P([]),L([]),H()}catch(s){console.error("\ub2f5\uae00 \uc791\uc131 \uc624\ub958:",s)}finally{I(!1)}}},children:[(0,Se.jsx)("div",{className:"form-group",children:(0,Se.jsx)("textarea",{value:w,onChange:e=>j(e.target.value),placeholder:"\ub2f5\uae00\uc744 \uc785\ub825\ud558\uc138\uc694",rows:4,required:!0})}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\uc774\ubbf8\uc9c0 \ucca8\ubd80"}),(0,Se.jsx)("input",{type:"file",ref:B,onChange:e=>W(e,!0),accept:"image/*",multiple:!0,style:{display:"none"}}),(0,Se.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{var e;return null===(e=B.current)||void 0===e?void 0:e.click()},children:"\uc774\ubbf8\uc9c0 \uc120\ud0dd"}),O.length>0&&(0,Se.jsxs)("div",{className:"image-preview-container",children:[(0,Se.jsxs)("h4",{children:["\uc120\ud0dd\ub41c \uc774\ubbf8\uc9c0 (",O.length,"\uac1c)"]}),(0,Se.jsx)("div",{className:"image-preview-grid",children:O.map((e,t)=>(0,Se.jsxs)("div",{className:"image-preview-item",children:[(0,Se.jsx)("img",{src:q(e),alt:"\ubbf8\ub9ac\ubcf4\uae30 ".concat(t+1),className:"image-preview"}),(0,Se.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>V(t,!0),children:"\uc0ad\uc81c"})]},t))})]})]}),(0,Se.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:E,children:E?"\uc5c5\ub85c\ub4dc \uc911...":"\ub2f5\uae00 \ub4f1\ub85d"})]})]})]})]})]}):(0,Se.jsx)("div",{className:"feedback-container",children:(0,Se.jsxs)("div",{className:"feedback-login-required",children:[(0,Se.jsx)("h2",{children:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4"}),(0,Se.jsx)("p",{children:"Feedback \uac8c\uc2dc\ud310\uc744 \uc774\uc6a9\ud558\ub824\uba74 \ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."})]})})},Bc=e=>{let{children:t}=e;const{userData:n}=Te();return hl(n)?(0,Se.jsxs)("div",{className:"admin-layout",children:[(0,Se.jsxs)("div",{className:"admin-header",children:[(0,Se.jsx)("h1",{children:"\uad00\ub9ac\uc790 \ud398\uc774\uc9c0"}),(0,Se.jsxs)("p",{children:["\uad00\ub9ac\uc790: ",null===n||void 0===n?void 0:n.name," (",null===n||void 0===n?void 0:n.nickname,")"]})]}),(0,Se.jsx)("div",{className:"admin-container admin-container-single",children:(0,Se.jsx)("div",{className:"admin-content",children:t})})]}):(0,Se.jsxs)("div",{className:"admin-access-denied",children:[(0,Se.jsx)("h2",{children:"\uc811\uadfc \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,Se.jsx)("p",{children:"\uad00\ub9ac\uc790 \uad8c\ud55c\uc774 \ud544\uc694\ud55c \ud398\uc774\uc9c0\uc785\ub2c8\ub2e4."})]})};var Uc=n(933);const Wc=()=>{const{userData:e}=Te(),[s,i]=(0,r.useState)([]),[o,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)("all"),[h,p]=(0,r.useState)("all"),[m,f]=(0,r.useState)(null),[g,y]=(0,r.useState)(!1),[v,x]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!1),[j,N]=(0,r.useState)({name:"",nickname:"",email:"",phoneNumber:"",role:"user"}),[k,S]=(0,r.useState)(!1),[_,T]=(0,r.useState)(null);(0,r.useEffect)(()=>{C()},[]);const C=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{a(!0);const t={searchTerm:l.trim()||void 0,searchType:d,isActive:"all"===h?void 0:"active"===h,limit:20,lastDoc:e?_:void 0},n=await(0,Uc.searchUsers)(t);i(e?e=>[...e,...n.users]:n.users),T(n.lastDoc),S(n.hasMore)}catch(t){console.error("\ud68c\uc6d0 \ubaa9\ub85d \ub85c\ub4dc \uc624\ub958:",t),alert("\ud68c\uc6d0 \ubaa9\ub85d\uc744 \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{a(!1)}},E=()=>{T(null),C()};return(0,Se.jsxs)("div",{className:"user-management",children:[(0,Se.jsxs)("div",{className:"user-management-header",children:[(0,Se.jsx)("h2",{children:"\ud68c\uc6d0\uad00\ub9ac"}),(0,Se.jsxs)("div",{className:"search-controls",children:[(0,Se.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"search-type-select",children:[(0,Se.jsx)("option",{value:"all",children:"\uc804\uccb4"}),(0,Se.jsx)("option",{value:"name",children:"\uc774\ub984"}),(0,Se.jsx)("option",{value:"nickname",children:"\ub2c9\ub124\uc784"}),(0,Se.jsx)("option",{value:"phoneNumber",children:"\uc804\ud654\ubc88\ud638"})]}),(0,Se.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"status-filter-select",title:"\uc0c1\ud0dc \ud544\ud130",children:[(0,Se.jsx)("option",{value:"all",children:"\uc804\uccb4\uc0c1\ud0dc"}),(0,Se.jsx)("option",{value:"active",children:"\ud65c\uc131"}),(0,Se.jsx)("option",{value:"inactive",children:"\ube44\ud65c\uc131"})]}),(0,Se.jsx)("input",{type:"text",placeholder:"\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694...",value:l,onChange:e=>c(e.target.value),className:"search-input",onKeyPress:e=>"Enter"===e.key&&E()}),(0,Se.jsx)("button",{onClick:E,className:"search-button",children:"\uac80\uc0c9"})]})]}),(0,Se.jsxs)("div",{className:"user-table-container",children:[(0,Se.jsxs)("table",{className:"user-table",children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"\uc774\ub984"}),(0,Se.jsx)("th",{children:"\ub2c9\ub124\uc784"}),(0,Se.jsx)("th",{children:"\uc804\ud654\ubc88\ud638"}),(0,Se.jsx)("th",{children:"\uc774\uba54\uc77c"}),(0,Se.jsx)("th",{className:"join-date-header",children:"\uac00\uc785\uc77c"}),(0,Se.jsx)("th",{className:"status-header",children:"\uc0c1\ud0dc"}),(0,Se.jsx)("th",{children:"\uc5ed\ud560"}),(0,Se.jsx)("th",{children:"\ud3ec\uc778\ud2b8"}),(0,Se.jsx)("th",{children:"\uc791\uc5c5"})]})}),(0,Se.jsx)("tbody",{children:s.map(e=>(0,Se.jsxs)("tr",{className:e.isActive?"":"inactive-user",children:[(0,Se.jsx)("td",{children:e.name}),(0,Se.jsx)("td",{children:e.nickname}),(0,Se.jsx)("td",{children:zo(e.phoneNumber||"")||"-"}),(0,Se.jsx)("td",{children:e.email}),(0,Se.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()}),(0,Se.jsx)("td",{children:(0,Se.jsx)("span",{className:"status-badge ".concat(e.isActive?"active":"inactive"),children:e.isActive?"\ud65c\uc131":"\ube44\ud65c\uc131"})}),(0,Se.jsx)("td",{children:(0,Se.jsx)("span",{className:"role-badge ".concat(e.role),children:"admin"===e.role?"\uad00\ub9ac\uc790":"\uc77c\ubc18"})}),(0,Se.jsxs)("td",{children:[(e.points||0).toLocaleString(),"P"]}),(0,Se.jsx)("td",{children:(0,Se.jsxs)("div",{className:"action-buttons",children:[(0,Se.jsx)("button",{onClick:()=>(e=>{f(e),N({name:e.name,nickname:e.nickname,email:e.email,phoneNumber:zo(e.phoneNumber||""),role:e.role}),y(!0)})(e),className:"action-btn edit",title:"\uc218\uc815",children:"\u270f\ufe0f"}),(0,Se.jsx)("button",{onClick:()=>(async e=>{try{await(0,Uc.g9)(e.uid,!e.isActive),C(),alert("\ud68c\uc6d0\uc774 ".concat(e.isActive?"\ube44\ud65c\uc131\ud654":"\ud65c\uc131\ud654","\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}catch(t){console.error("\ud68c\uc6d0 \uc0c1\ud0dc \ubcc0\uacbd \uc624\ub958:",t),alert("\ud68c\uc6d0 \uc0c1\ud0dc \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}})(e),className:"action-btn toggle",title:e.isActive?"\ube44\ud65c\uc131\ud654":"\ud65c\uc131\ud654",children:e.isActive?"\u23f8\ufe0f":"\u25b6\ufe0f"}),(0,Se.jsx)("button",{onClick:()=>{f(e),w(!0)},className:"action-btn password",title:"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd",children:"\ud83d\udd12"}),(0,Se.jsx)("button",{onClick:()=>{f(e),x(!0)},className:"action-btn delete",title:"\uc0ad\uc81c",children:"\ud83d\uddd1\ufe0f"})]})})]},e.uid))})]}),o&&(0,Se.jsx)("div",{className:"loading",children:(0,Se.jsx)("p",{children:"\ub85c\ub529 \uc911..."})}),k&&(0,Se.jsx)("button",{onClick:()=>{k&&!o&&C(!0)},className:"load-more-btn",disabled:o,children:"\ub354 \ubcf4\uae30"})]}),g&&m&&(0,Se.jsx)("div",{className:"modal-overlay",onClick:()=>y(!1),children:(0,Se.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Se.jsxs)("div",{className:"modal-header",children:[(0,Se.jsx)("h3",{children:"\ud68c\uc6d0 \uc815\ubcf4 \uc218\uc815"}),(0,Se.jsx)("button",{className:"modal-close",onClick:()=>y(!1),children:"\xd7"})]}),(0,Se.jsxs)("div",{className:"modal-body",children:[(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\uc774\ub984"}),(0,Se.jsx)("input",{type:"text",value:j.name,onChange:e=>N((0,t.A)((0,t.A)({},j),{},{name:e.target.value}))})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\ub2c9\ub124\uc784"}),(0,Se.jsx)("input",{type:"text",value:j.nickname,onChange:e=>N((0,t.A)((0,t.A)({},j),{},{nickname:e.target.value}))})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\uc774\uba54\uc77c"}),(0,Se.jsx)("input",{type:"email",value:j.email,onChange:e=>N((0,t.A)((0,t.A)({},j),{},{email:e.target.value}))})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\uc804\ud654\ubc88\ud638"}),(0,Se.jsx)("input",{type:"tel",value:j.phoneNumber,onChange:e=>N((0,t.A)((0,t.A)({},j),{},{phoneNumber:Lo(e.target.value)})),placeholder:"010-0000-0000 (\uc120\ud0dd\uc0ac\ud56d)"})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\uc5ed\ud560"}),(0,Se.jsxs)("select",{value:j.role,onChange:e=>N((0,t.A)((0,t.A)({},j),{},{role:e.target.value})),children:[(0,Se.jsx)("option",{value:"user",children:"\uc77c\ubc18"}),(0,Se.jsx)("option",{value:"admin",children:"\uad00\ub9ac\uc790"})]})]}),(0,Se.jsxs)("div",{className:"modal-actions",children:[(0,Se.jsx)("button",{onClick:async()=>{if(m&&e)try{const t=await fetch("https://us-central1-edgeenglishlab.cloudfunctions.net/updateUserByAdmin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:m.uid,adminUid:e.uid,userData:j})}),n=await t.json();n.success?(y(!1),C(),alert("\ud68c\uc6d0 \uc815\ubcf4\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")):alert("\ud68c\uc6d0 \uc815\ubcf4 \uc218\uc815\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(n.message))}catch(t){console.error("\ud68c\uc6d0 \uc815\ubcf4 \uc218\uc815 \uc624\ub958:",t),alert("\ud68c\uc6d0 \uc815\ubcf4 \uc218\uc815\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},className:"btn-primary",children:"\uc218\uc815"}),(0,Se.jsx)("button",{onClick:()=>y(!1),className:"btn-secondary",children:"\ucde8\uc18c"})]})]})]})}),v&&m&&(0,Se.jsx)("div",{className:"modal-overlay",onClick:()=>x(!1),children:(0,Se.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Se.jsxs)("div",{className:"modal-header",children:[(0,Se.jsx)("h3",{children:"\ud68c\uc6d0 \uc0ad\uc81c \ud655\uc778"}),(0,Se.jsx)("button",{className:"modal-close",onClick:()=>x(!1),children:"\xd7"})]}),(0,Se.jsxs)("div",{className:"modal-body",children:[(0,Se.jsxs)("p",{children:["\uc815\ub9d0\ub85c ",(0,Se.jsx)("strong",{children:m.name})," \ud68c\uc6d0\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"]}),(0,Se.jsx)("p",{className:"warning",children:"\uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Se.jsxs)("div",{className:"modal-actions",children:[(0,Se.jsx)("button",{onClick:async()=>{if(m&&e)try{const t=await fetch("https://us-central1-edgeenglishlab.cloudfunctions.net/deleteUserByAdmin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:m.uid,adminUid:e.uid})}),n=await t.json();n.success?(x(!1),C(),alert("\ud68c\uc6d0\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")):alert("\ud68c\uc6d0 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(n.message))}catch(t){console.error("\ud68c\uc6d0 \uc0ad\uc81c \uc624\ub958:",t),alert("\ud68c\uc6d0 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},className:"btn-danger",children:"\uc0ad\uc81c"}),(0,Se.jsx)("button",{onClick:()=>x(!1),className:"btn-secondary",children:"\ucde8\uc18c"})]})]})]})}),b&&m&&(0,Se.jsx)("div",{className:"modal-overlay",onClick:()=>w(!1),children:(0,Se.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Se.jsxs)("div",{className:"modal-header",children:[(0,Se.jsx)("h3",{children:"\ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815"}),(0,Se.jsx)("button",{className:"modal-close",onClick:()=>w(!1),children:"\xd7"})]}),(0,Se.jsxs)("div",{className:"modal-body",children:[(0,Se.jsxs)("p",{children:[(0,Se.jsx)("strong",{children:m.name})," \ud68c\uc6d0\uc5d0\uac8c \ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc774\uba54\uc77c\uc744 \ubc1c\uc1a1\ud569\ub2c8\ub2e4."]}),(0,Se.jsxs)("div",{className:"password-reset-info",children:[(0,Se.jsx)("p",{children:"\u2022 \uc0ac\uc6a9\uc790\uc758 \uc774\uba54\uc77c \uc8fc\uc18c\ub85c \ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \ub9c1\ud06c\uac00 \ubc1c\uc1a1\ub429\ub2c8\ub2e4."}),(0,Se.jsx)("p",{children:"\u2022 \uc0ac\uc6a9\uc790\uac00 \ub9c1\ud06c\ub97c \ud074\ub9ad\ud558\uc5ec \uc0c8\ub85c\uc6b4 \ube44\ubc00\ubc88\ud638\ub97c \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Se.jsxs)("p",{children:["\u2022 \uc774\uba54\uc77c \uc8fc\uc18c: ",(0,Se.jsx)("strong",{children:m.email})]})]}),(0,Se.jsxs)("div",{className:"modal-actions",children:[(0,Se.jsx)("button",{onClick:async()=>{if(m)try{const t=(0,we.xI)(je.yA);if(!t.currentUser)return void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.");if("admin"!==(null===e||void 0===e?void 0:e.role))return void alert("\uad00\ub9ac\uc790 \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");if(console.log("\ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc774\uba54\uc77c \ubc1c\uc1a1 \uc2dc\uc791..."),console.log("\ub300\uc0c1 \uc0ac\uc6a9\uc790 \uc774\uba54\uc77c:",m.email),!m.email||!m.email.includes("@"))return void alert("\uc720\ud6a8\ud55c \uc774\uba54\uc77c \uc8fc\uc18c\uac00 \uc5c6\uc5b4 \ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc774\uba54\uc77c\uc744 \ubc1c\uc1a1\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const{sendPasswordResetEmail:r}=await Promise.resolve().then(n.bind(n,458));await r(t,m.email),console.log("\ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc774\uba54\uc77c \ubc1c\uc1a1 \uc644\ub8cc"),w(!1),alert("".concat(m.name," \ud68c\uc6d0\uc5d0\uac8c \ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc774\uba54\uc77c\uc774 \ubc1c\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\n\ud83d\udce7 \uc774\uba54\uc77c\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694 (\uc2a4\ud338 \ud3f4\ub354\ub3c4 \ud655\uc778\ud574\ubcf4\uc138\uc694)\n\u23f0 \uc774\uba54\uc77c\uc774 \ub3c4\ucc29\ud558\uc9c0 \uc54a\uc73c\uba74 \uba87 \ubd84 \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694"))}catch(t){console.error("\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \uc624\ub958:",t);let e="\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.";"auth/user-not-found"===t.code?e="\uc0ac\uc6a9\uc790\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.":"auth/invalid-email"===t.code?e="\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uc774\uba54\uc77c \uc8fc\uc18c\uc785\ub2c8\ub2e4.":"auth/too-many-requests"===t.code&&(e="\ub108\ubb34 \ub9ce\uc740 \uc694\uccad\uc774 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."),alert(e)}else alert("\uc0ac\uc6a9\uc790\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694.")},className:"btn-primary",children:"\uc774\uba54\uc77c \ubc1c\uc1a1"}),(0,Se.jsx)("button",{onClick:()=>w(!1),className:"btn-secondary",children:"\ucde8\uc18c"})]})]})]})})]})},Vc=()=>{const{userData:e}=Te(),[t,n]=(0,r.useState)([]),[s,i]=(0,r.useState)(!1),[o,a]=(0,r.useState)("monthly"),[l,c]=(0,r.useState)(0),[d,u]=(0,r.useState)(0);(0,r.useEffect)(()=>{h()},[o]);const h=async()=>{i(!0);try{const e=[{id:"1",date:"2025-01-15",amount:5e4,description:"\ud3ec\uc778\ud2b8 \ucda9\uc804",type:"income",category:"\ud3ec\uc778\ud2b8"},{id:"2",date:"2025-01-14",amount:3e4,description:"\ud3ec\uc778\ud2b8 \ucda9\uc804",type:"income",category:"\ud3ec\uc778\ud2b8"},{id:"3",date:"2025-01-13",amount:15e3,description:"\uc11c\ubc84 \uc720\uc9c0\ubcf4\uc218",type:"expense",category:"\uc6b4\uc601\ube44"}];n(e);const t=e.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),r=e.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0);c(t),u(r)}catch(e){console.error("\ub9e4\ucd9c \ub370\uc774\ud130 \ub85c\ub4dc \uc624\ub958:",e)}finally{i(!1)}},p=e=>new Intl.NumberFormat("ko-KR").format(e)+"\uc6d0";return(0,Se.jsxs)("div",{className:"sales-management",children:[(0,Se.jsxs)("div",{className:"sales-header",children:[(0,Se.jsx)("h2",{children:"\ud83d\udcb0 \ub9e4\ucd9c\uad00\ub9ac"}),(0,Se.jsx)("div",{className:"period-selector",children:(0,Se.jsxs)("select",{value:o,onChange:e=>a(e.target.value),className:"period-select",children:[(0,Se.jsx)("option",{value:"daily",children:"\uc77c\ubcc4"}),(0,Se.jsx)("option",{value:"weekly",children:"\uc8fc\ubcc4"}),(0,Se.jsx)("option",{value:"monthly",children:"\uc6d4\ubcc4"}),(0,Se.jsx)("option",{value:"yearly",children:"\ub144\ubcc4"})]})})]}),(0,Se.jsxs)("div",{className:"sales-summary",children:[(0,Se.jsxs)("div",{className:"summary-card income",children:[(0,Se.jsx)("h3",{children:"\ucd1d \uc218\uc785"}),(0,Se.jsx)("p",{className:"amount",children:p(l)})]}),(0,Se.jsxs)("div",{className:"summary-card expense",children:[(0,Se.jsx)("h3",{children:"\ucd1d \uc9c0\ucd9c"}),(0,Se.jsx)("p",{className:"amount",children:p(d)})]}),(0,Se.jsxs)("div",{className:"summary-card profit",children:[(0,Se.jsx)("h3",{children:"\uc21c\uc774\uc775"}),(0,Se.jsx)("p",{className:"amount",children:p(l-d)})]})]}),(0,Se.jsxs)("div",{className:"sales-table-container",children:[(0,Se.jsxs)("div",{className:"table-header",children:[(0,Se.jsx)("h3",{children:"\ub9e4\ucd9c \uc0c1\uc138 \ub0b4\uc5ed"}),(0,Se.jsx)("button",{className:"add-sales-btn",children:"+ \uc0c8 \ub9e4\ucd9c \uae30\ub85d"})]}),(0,Se.jsxs)("table",{className:"sales-table",children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"\ub0a0\uc9dc"}),(0,Se.jsx)("th",{children:"\uad6c\ubd84"}),(0,Se.jsx)("th",{children:"\uce74\ud14c\uace0\ub9ac"}),(0,Se.jsx)("th",{children:"\uc124\uba85"}),(0,Se.jsx)("th",{children:"\uae08\uc561"}),(0,Se.jsx)("th",{children:"\uc791\uc5c5"})]})}),(0,Se.jsx)("tbody",{children:t.map(e=>{return(0,Se.jsxs)("tr",{className:e.type,children:[(0,Se.jsx)("td",{children:(t=e.date,new Date(t).toLocaleDateString("ko-KR"))}),(0,Se.jsx)("td",{children:(0,Se.jsx)("span",{className:"type-badge ".concat(e.type),children:"income"===e.type?"\uc218\uc785":"\uc9c0\ucd9c"})}),(0,Se.jsx)("td",{children:e.category}),(0,Se.jsx)("td",{children:e.description}),(0,Se.jsxs)("td",{className:"amount ".concat(e.type),children:["income"===e.type?"+":"-",p(e.amount)]}),(0,Se.jsx)("td",{children:(0,Se.jsxs)("div",{className:"action-buttons",children:[(0,Se.jsx)("button",{className:"action-btn edit",title:"\uc218\uc815",children:"\u270f\ufe0f"}),(0,Se.jsx)("button",{className:"action-btn delete",title:"\uc0ad\uc81c",children:"\ud83d\uddd1\ufe0f"})]})})]},e.id);var t})})]}),s&&(0,Se.jsx)("div",{className:"loading",children:(0,Se.jsx)("p",{children:"\ub85c\ub529 \uc911..."})}),0===t.length&&!s&&(0,Se.jsx)("div",{className:"no-data",children:(0,Se.jsx)("p",{children:"\ub9e4\ucd9c \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})})]})]})},qc=()=>{const{userData:e}=Te(),[s,i]=(0,r.useState)([]),[o,a]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[m,f]=(0,r.useState)(!1),[g,y]=(0,r.useState)("add"),[v,x]=(0,r.useState)(""),[b,w]=(0,r.useState)(""),[j,N]=(0,r.useState)(null),[k,S]=(0,r.useState)("users"),[_,T]=(0,r.useState)(""),[C,E]=(0,r.useState)("all"),[I,A]=(0,r.useState)(1),[R,O]=(0,r.useState)(0),[P,F]=(0,r.useState)(1),[D]=(0,r.useState)(20),[z,L]=(0,r.useState)(null);(0,r.useEffect)(()=>{M(),U(),B()},[]);const M=async()=>{try{u(!0);const{searchUsers:e}=await Promise.resolve().then(n.bind(n,933)),{users:t}=await e({limit:100});i(t)}catch(e){console.error("\uc0ac\uc6a9\uc790 \ubaa9\ub85d \ub85c\ub4dc \uc624\ub958:",e);i([{uid:"1",name:"\ubbfc\uacbd\ud638",nickname:"\uc2a4\ud53c\ub514\ubcfc",email:"speedyball@naver.com",phoneNumber:"01080616536",role:"user",isActive:!0,points:1e4,createdAt:"2025-08-10"},{uid:"2",name:"\uae40\ub3d9\uc5f0",nickname:"\uc7ac\uc81c\uc774",email:"pretyeon@naver.com",phoneNumber:"01020816536",role:"admin",isActive:!0,points:0,createdAt:"2025-07-20"},{uid:"3",name:"\ubbfc\uacbd\ud638",nickname:"Sudden",email:"suddenbiz@naver.com",phoneNumber:"01020745158",role:"admin",isActive:!0,points:1e4,createdAt:"2025-07-19"}])}finally{u(!1)}},B=async()=>{try{var e;const{getWorkTypePoints:s}=await Promise.resolve().then(n.bind(n,322));let i=[...await s()];const o=i.some(e=>"11"===e.id),a=i.some(e=>"12"===e.id),l=i.some(e=>"13"===e.id);o?console.log("\uc720\ud615#11\uc774 \uc774\ubbf8 \uc874\uc7ac\ud569\ub2c8\ub2e4:",i.find(e=>"11"===e.id)):(console.log("\uc720\ud615#11\uc774 \ub204\ub77d\ub418\uc5b4 \uc790\ub3d9\uc73c\ub85c \ucd94\uac00\ud569\ub2c8\ub2e4."),i.push({id:"11",name:"\uc720\ud615#11",points:18,description:"\uae30\uc0ac \uc21c\uc11c \ubb38\uc81c"})),a?console.log("\uc720\ud615#12\uac00 \uc774\ubbf8 \uc874\uc7ac\ud569\ub2c8\ub2e4:",i.find(e=>"12"===e.id)):(console.log("\uc720\ud615#12\uac00 \ub204\ub77d\ub418\uc5b4 \uc790\ub3d9\uc73c\ub85c \ucd94\uac00\ud569\ub2c8\ub2e4."),i.push({id:"12",name:"\uc720\ud615#12",points:20,description:"\uc601\uc5b4\ub2e8\uc5b4 \ubb38\uc81c"})),l?console.log("\uc720\ud615#13\uc774 \uc774\ubbf8 \uc874\uc7ac\ud569\ub2c8\ub2e4:",i.find(e=>"13"===e.id)):(console.log("\uc720\ud615#13\uc774 \ub204\ub77d\ub418\uc5b4 \uc790\ub3d9\uc73c\ub85c \ucd94\uac00\ud569\ub2c8\ub2e4."),i.push({id:"13",name:"\uc720\ud615#13",points:12,description:"\ube48\uce78 \ucc44\uc6b0\uae30 \ubb38\uc81c(\ub2e8\uc5b4-\uc8fc\uad00\uc2dd)"}));if(!o||!a||!l||"\uc8fc\uc81c \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131"!==(null===(e=i.find(e=>"7"===e.id))||void 0===e?void 0:e.description))try{const{updateWorkTypePoints:e}=await Promise.resolve().then(n.bind(n,322));await e(i),console.log("Firebase\uc5d0 \ub370\uc774\ud130\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(r){console.warn("Firebase \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328:",r)}i=i.map(e=>"7"===e.id?(0,t.A)((0,t.A)({},e),{},{description:"\uc8fc\uc81c \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131"}):e),c(i),console.log("\ucd5c\uc885 workTypePoints:",i)}catch(s){console.error("\uc720\ud615\ubcc4 \ud3ec\uc778\ud2b8 \uc124\uc815 \ub85c\ub4dc \uc624\ub958:",s);const e=[{id:"1",name:"\uc720\ud615#01",points:10,description:"\ubb38\uc7a5 \uc21c\uc11c \ud14c\uc2a4\ud2b8"},{id:"2",name:"\uc720\ud615#02",points:15,description:"\ub3c5\ud574 \ubb38\uc81c \uc0dd\uc131"},{id:"3",name:"\uc720\ud615#03",points:12,description:"\uc5b4\ud718 \ub2e8\uc5b4 \ubb38\uc81c"},{id:"4",name:"\uc720\ud615#04",points:18,description:"\ube48\uce78(\uad6c) \ucd94\ub860 \ubb38\uc81c"},{id:"5",name:"\uc720\ud615#05",points:20,description:"\ube48\uce78(\ubb38\uc7a5) \ucd94\ub860 \ubb38\uc81c"},{id:"6",name:"\uc720\ud615#06",points:16,description:"\ubb38\uc7a5 \uc704\uce58 \ucd94\ub860 \ubb38\uc81c"},{id:"7",name:"\uc720\ud615#07",points:22,description:"\uc8fc\uc81c \ucd94\ub860 \ubb38\uc81c \uc0dd\uc131"},{id:"8",name:"\uc720\ud615#08",points:25,description:"\uc81c\ubaa9 \ucd94\ub860 \ubb38\uc81c"},{id:"9",name:"\uc720\ud615#09",points:14,description:"\ubb38\ubc95 \uc624\ub958 \ubb38\uc81c"},{id:"10",name:"\uc720\ud615#10",points:30,description:"\ubcf5\ud569 \ubb38\ubc95 \uc624\ub958 \ubb38\uc81c"},{id:"11",name:"\uc720\ud615#11",points:18,description:"\uae30\uc0ac \uc21c\uc11c \ubb38\uc81c"},{id:"12",name:"\uc720\ud615#12",points:20,description:"\uc601\uc5b4\ub2e8\uc5b4 \ubb38\uc81c"}];c(e),console.log("\uc5d0\ub7ec\ub85c \uc778\ud574 \uae30\ubcf8\uac12 \uc0ac\uc6a9:",e)}},U=async function(){try{const{collection:e,query:t,orderBy:r,limit:s,getDocs:i,where:o,startAfter:l,getCountFromServer:c}=await Promise.resolve().then(n.bind(n,472)),{db:d}=await Promise.resolve().then(n.bind(n,558));let u=t(e(d,"pointTransactions"),r("timestamp","desc"));_&&_.trim()&&("userName"===C?u=t(u,o("userName",">=",_),o("userName","<=",_+"\uf8ff")):"userNickname"===C?u=t(u,o("userNickname",">=",_),o("userNickname","<=",_+"\uf8ff")):"reason"===C&&(u=t(u,o("reason",">=",_),o("reason","<=",_+"\uf8ff"))));const h=(await c(u)).data().count;O(h),F(Math.ceil(h/D));let p=t(u,s(D));if(I>1){const e=t(u,s((I-1)*D)),n=await i(e);if(n.docs.length>0){p=t(u,l(n.docs[n.docs.length-1]),s(D))}}const m=await i(p),f=[];m.forEach(e=>{var t;const n=e.data();f.push({id:e.id,userId:n.userId,userName:n.userName,userNickname:n.userNickname,type:n.type,amount:n.amount,reason:n.reason,timestamp:(null===(t=n.timestamp)||void 0===t?void 0:t.toDate())||new Date,adminId:n.adminId})}),a(f)}catch(e){console.error("\uac70\ub798 \ub0b4\uc5ed \ub85c\ub4dc \uc624\ub958:",e);const t=[{id:"1",userId:"1",userName:"\ubbfc\uacbd\ud638",userNickname:"\uc2a4\ud53c\ub514\ubcfc",type:"add",amount:1e4,reason:"\ucd08\uae30 \ud3ec\uc778\ud2b8 \uc9c0\uae09",timestamp:new Date("2025-01-15"),adminId:"admin1"},{id:"2",userId:"2",userName:"\uae40\ub3d9\uc5f0",userNickname:"\uc7ac\uc81c\uc774",type:"add",amount:5e3,reason:"\uc774\ubca4\ud2b8 \ubcf4\uc0c1",timestamp:new Date("2025-01-14"),adminId:"admin1"}];a(t),O(2),F(1)}},W=()=>{U(!0)},V=()=>{T(""),E("all"),A(1),U(!0)},q=e=>{e>=1&&e<=P&&e!==I&&(A(e),U(!1))};(0,r.useEffect)(()=>{const e=setTimeout(()=>{_.trim()?W():""===_&&V()},500);return()=>clearTimeout(e)},[_,C]);const H=e=>e.toLocaleString()+"P",K=()=>{f(!1),p(null),x(""),w("")};return(0,Se.jsxs)("div",{className:"point-management",children:[(0,Se.jsxs)("div",{className:"point-header",children:[(0,Se.jsx)("h2",{children:"\ud83c\udfaf \ud3ec\uc778\ud2b8\uad00\ub9ac"}),(0,Se.jsxs)("div",{className:"point-stats",children:[(0,Se.jsxs)("div",{className:"stat-item",children:[(0,Se.jsx)("span",{className:"stat-label",children:"\ucd1d \ud68c\uc6d0"}),(0,Se.jsxs)("span",{className:"stat-value",children:[s.length,"\uba85"]})]}),(0,Se.jsxs)("div",{className:"stat-item",children:[(0,Se.jsx)("span",{className:"stat-label",children:"\ucd1d \ud3ec\uc778\ud2b8"}),(0,Se.jsxs)("span",{className:"stat-value",children:[s.reduce((e,t)=>e+(t.points||0),0).toLocaleString(),"P"]})]})]})]}),j&&(0,Se.jsx)("div",{className:"message ".concat(j.type),children:j.text}),(0,Se.jsxs)("div",{className:"point-management-tabs",children:[(0,Se.jsx)("button",{className:"tab-btn ".concat("users"===k?"active":""),onClick:()=>S("users"),children:"\ud83d\udc65 \uc0ac\uc6a9\uc790 \ud3ec\uc778\ud2b8"}),(0,Se.jsx)("button",{className:"tab-btn ".concat("points"===k?"active":""),onClick:()=>S("points"),children:"\ud83d\udcb0 \ud3ec\uc778\ud2b8 \uac70\ub798 \ub0b4\uc5ed"}),(0,Se.jsx)("button",{className:"tab-btn ".concat("workTypes"===k?"active":""),onClick:()=>S("workTypes"),children:"\u2699\ufe0f \uc720\ud615\ubcc4 \ud3ec\uc778\ud2b8 \uc124\uc815"})]}),(0,Se.jsxs)("div",{className:"point-content",children:["users"===k&&(0,Se.jsxs)("div",{className:"user-points-section",children:[(0,Se.jsx)("h3",{children:"\ud83d\udc65 \ud68c\uc6d0 \ud3ec\uc778\ud2b8 \ud604\ud669"}),(0,Se.jsx)("div",{className:"user-points-table",children:(0,Se.jsxs)("table",{className:"point-table",children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"\uc774\ub984"}),(0,Se.jsx)("th",{children:"\ub2c9\ub124\uc784"}),(0,Se.jsx)("th",{children:"\uc804\ud654\ubc88\ud638"}),(0,Se.jsx)("th",{children:"\uc774\uba54\uc77c"}),(0,Se.jsx)("th",{children:"\uc794\uc5ec\ud3ec\uc778\ud2b8"}),(0,Se.jsx)("th",{children:"\ub204\uc801\ucda9\uc804"}),(0,Se.jsx)("th",{children:"\uc791\uc5c5"})]})}),(0,Se.jsx)("tbody",{children:s.map(e=>{return(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{children:e.name}),(0,Se.jsx)("td",{children:e.nickname}),(0,Se.jsx)("td",{children:(t=e.phoneNumber,t?11===t.length?"".concat(t.slice(0,3),"-").concat(t.slice(3,7),"-").concat(t.slice(7)):t:"-")}),(0,Se.jsx)("td",{children:e.email}),(0,Se.jsx)("td",{className:"current-points",children:H(e.points||0)}),(0,Se.jsx)("td",{className:"total-paid",children:H(0)}),(0,Se.jsx)("td",{children:(0,Se.jsx)("button",{onClick:()=>(e=>{p(e),y("add"),x(""),w(""),f(!0)})(e),className:"modify-button",children:"\ud3ec\uc778\ud2b8 \uc218\uc815"})})]},e.uid);var t})})]})})]}),"points"===k&&(0,Se.jsxs)("div",{className:"transactions-section",children:[(0,Se.jsx)("h3",{children:"\ud83d\udccb \ud3ec\uc778\ud2b8 \uac70\ub798 \ub0b4\uc5ed"}),(0,Se.jsx)("div",{className:"search-section",children:(0,Se.jsxs)("div",{className:"search-inputs",children:[(0,Se.jsxs)("select",{value:C,onChange:e=>E(e.target.value),className:"search-type-select",children:[(0,Se.jsx)("option",{value:"all",children:"\uc804\uccb4"}),(0,Se.jsx)("option",{value:"userName",children:"\uc0ac\uc6a9\uc790\uba85"}),(0,Se.jsx)("option",{value:"userNickname",children:"\ub2c9\ub124\uc784"}),(0,Se.jsx)("option",{value:"reason",children:"\uc0ac\uc720"})]}),(0,Se.jsx)("input",{type:"text",value:_,onChange:e=>T(e.target.value),placeholder:"\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694",className:"search-input"}),(0,Se.jsx)("button",{onClick:W,className:"search-button",disabled:!_.trim(),children:"\uac80\uc0c9"}),(0,Se.jsx)("button",{onClick:V,className:"reset-button",children:"\ucd08\uae30\ud654"})]})}),(0,Se.jsxs)("div",{className:"transactions-table",children:[(0,Se.jsxs)("table",{className:"transaction-table",children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"\ub0a0\uc9dc"}),(0,Se.jsx)("th",{children:"\uc0ac\uc6a9\uc790"}),(0,Se.jsx)("th",{children:"\uad6c\ubd84"}),(0,Se.jsx)("th",{children:"\uae08\uc561"}),(0,Se.jsx)("th",{children:"\ud3ec\uc778\ud2b8"}),(0,Se.jsx)("th",{children:"\uc0ac\uc720"}),(0,Se.jsx)("th",{children:"\ucc98\ub9ac\uc790"})]})}),(0,Se.jsx)("tbody",{children:o.map(e=>(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{children:e.timestamp.toLocaleDateString()}),(0,Se.jsxs)("td",{children:[e.userName," (",e.userNickname,")"]}),(0,Se.jsx)("td",{children:(0,Se.jsx)("span",{className:"transaction-type ".concat(e.type),children:"add"===e.type?"\uc9c0\uae09":"subtract"===e.type?"\ucc28\uac10":"\ucda9\uc804"})}),(0,Se.jsxs)("td",{className:"amount ".concat(e.type),children:["subtract"===e.type?"-":"+",e.amount.toLocaleString()]}),(0,Se.jsxs)("td",{className:"points ".concat(e.type),children:["subtract"===e.type?"-":"+",H(e.amount)]}),(0,Se.jsx)("td",{children:e.reason}),(0,Se.jsx)("td",{children:"\uad00\ub9ac\uc790"})]},e.id))})]}),P>1&&(0,Se.jsxs)("div",{className:"pagination-section",children:[(0,Se.jsx)("div",{className:"pagination-info",children:(0,Se.jsxs)("span",{children:["\ucd1d ",R,"\uac74 \uc911 ",(I-1)*D+1,"~",Math.min(I*D,R),"\uac74"]})}),(0,Se.jsxs)("div",{className:"pagination-controls",children:[(0,Se.jsx)("button",{onClick:()=>{I>1&&q(I-1)},className:"prev-page-button",disabled:1===I,children:"\uc774\uc804"}),(()=>{const e=[];let t=Math.max(1,I-Math.floor(2.5)),n=Math.min(P,t+5-1);n-t+1<5&&(t=Math.max(1,n-5+1));for(let r=t;r<=n;r++)e.push(r);return e})().map(e=>(0,Se.jsx)("button",{onClick:()=>q(e),className:"page-number-button ".concat(e===I?"active":""),children:e},e)),(0,Se.jsx)("button",{onClick:()=>{I<P&&q(I+1)},className:"next-page-button",disabled:I===P,children:"\ub2e4\uc74c"})]})]}),0===o.length&&(0,Se.jsx)("div",{className:"no-data",children:(0,Se.jsx)("p",{children:"\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})})]})]}),"workTypes"===k&&(0,Se.jsxs)("div",{className:"work-types-section",children:[(0,Se.jsx)("h3",{children:"\u2699\ufe0f \uc720\ud615\ubcc4 \ud3ec\uc778\ud2b8 \uc124\uc815"}),(0,Se.jsx)("p",{className:"section-description",children:"\uac01 \uc720\ud615\ubcc4\ub85c \ubb38\uc81c \uc0dd\uc131 \uc2dc \ucc28\uac10\ub420 \ud3ec\uc778\ud2b8\ub97c \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Se.jsx)("div",{className:"work-types-table",children:(0,Se.jsxs)("table",{className:"point-table",children:[(0,Se.jsx)("thead",{children:(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("th",{children:"\uc720\ud615"}),(0,Se.jsx)("th",{children:"\uc124\uba85"}),(0,Se.jsx)("th",{children:"\ud604\uc7ac \ud3ec\uc778\ud2b8"}),(0,Se.jsx)("th",{children:"\uc124\uc815"})]})}),(0,Se.jsx)("tbody",{children:l.map(e=>(0,Se.jsxs)("tr",{children:[(0,Se.jsx)("td",{className:"work-type-name",children:e.name}),(0,Se.jsx)("td",{className:"work-type-description",children:e.description}),(0,Se.jsxs)("td",{className:"current-points",children:[e.points,"P"]}),(0,Se.jsx)("td",{children:(0,Se.jsxs)("div",{className:"point-input-group",children:[(0,Se.jsx)("input",{type:"number",value:e.points,onChange:r=>{const s=parseInt(r.target.value)||0;if(s>=0){c(n=>n.map(n=>n.id===e.id?(0,t.A)((0,t.A)({},n),{},{points:s}):n)),z&&clearTimeout(z);const r=setTimeout(()=>{(async(e,r)=>{try{const s=l.map(n=>n.id===e?(0,t.A)((0,t.A)({},n),{},{points:r}):n),{updateWorkTypePoints:i}=await Promise.resolve().then(n.bind(n,322));await i(s),c(s),N({type:"success",text:"\ud3ec\uc778\ud2b8 \uc124\uc815\uc774 \uc5c5\ub370\uc774\ud2b8\ub418\uc5c8\uc2b5\ub2c8\ub2e4."})}catch(s){console.error("\ud3ec\uc778\ud2b8 \uc124\uc815 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958:",s),N({type:"error",text:"\ud3ec\uc778\ud2b8 \uc124\uc815 \uc5c5\ub370\uc774\ud2b8\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."}),c(n=>n.map(n=>n.id===e?(0,t.A)((0,t.A)({},n),{},{points:n.points}):n))}})(e.id,s)},1e3);L(r)}},min:"0",className:"point-input"}),(0,Se.jsx)("span",{className:"point-unit",children:"P"})]})})]},e.id))})]})})]})]}),m&&h&&(0,Se.jsx)("div",{className:"point-modal-overlay",onClick:K,children:(0,Se.jsxs)("div",{className:"point-modal-content",onClick:e=>e.stopPropagation(),children:[(0,Se.jsxs)("div",{className:"modal-header",children:[(0,Se.jsxs)("h3",{children:["\ud3ec\uc778\ud2b8 \uc218\uc815 - ",h.name," (",h.nickname,")"]}),(0,Se.jsx)("button",{className:"modal-close",onClick:K,children:"\xd7"})]}),(0,Se.jsxs)("div",{className:"modal-body",children:[(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\uc794\uc5ec \ud3ec\uc778\ud2b8"}),(0,Se.jsx)("input",{type:"text",value:"".concat(h.points||0,"P"),disabled:!0,className:"current-points-display"})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\ud3ec\uc778\ud2b8 \uc791\uc5c5"}),(0,Se.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"point-action-select",children:[(0,Se.jsx)("option",{value:"add",children:"\ud3ec\uc778\ud2b8 \uc9c0\uae09"}),(0,Se.jsx)("option",{value:"subtract",children:"\ud3ec\uc778\ud2b8 \ucc28\uac10"})]})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\ud3ec\uc778\ud2b8 \uae08\uc561"}),(0,Se.jsx)("input",{type:"number",value:v,onChange:e=>x(e.target.value),placeholder:"\ud3ec\uc778\ud2b8 \uae08\uc561\uc744 \uc785\ub825\ud558\uc138\uc694",className:"point-amount-input"})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{children:"\uc0ac\uc720"}),(0,Se.jsx)("input",{type:"text",value:b,onChange:e=>w(e.target.value),placeholder:"\ud3ec\uc778\ud2b8 \uc218\uc815 \uc0ac\uc720\ub97c \uc785\ub825\ud558\uc138\uc694",className:"point-reason-input"})]})]}),(0,Se.jsxs)("div",{className:"modal-actions",children:[(0,Se.jsx)("button",{onClick:K,className:"btn-secondary",children:"\ucde8\uc18c"}),(0,Se.jsx)("button",{onClick:async()=>{if(!h||!v||!b)return void N({type:"error",text:"\ubaa8\ub4e0 \ud544\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."});const r=parseInt(v);if(isNaN(r)||r<=0)N({type:"error",text:"\uc720\ud6a8\ud55c \ud3ec\uc778\ud2b8 \uae08\uc561\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."});else try{u(!0);const{addDoc:s,collection:o,serverTimestamp:l}=await Promise.resolve().then(n.bind(n,472)),{db:c}=await Promise.resolve().then(n.bind(n,558)),d={id:Date.now().toString(),userId:h.uid,userName:h.name,userNickname:h.nickname,type:g,amount:r,reason:b,timestamp:new Date,adminId:(null===e||void 0===e?void 0:e.uid)||"unknown"};await s(o(c,"pointTransactions"),{userId:h.uid,userName:h.name,userNickname:h.nickname,type:g,amount:r,reason:b,timestamp:l(),adminId:(null===e||void 0===e?void 0:e.uid)||"unknown"});const{updateDoc:p,doc:m}=await Promise.resolve().then(n.bind(n,472)),y=m(c,"users",h.uid),v="add"===g?(h.points||0)+r:Math.max(0,(h.points||0)-r);await p(y,{points:v,updatedAt:l()}),a(e=>[d,...e]),i(e=>e.map(e=>e.uid===h.uid?(0,t.A)((0,t.A)({},e),{},{points:v}):e)),N({type:"success",text:"\ud3ec\uc778\ud2b8\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}),f(!1),setTimeout(()=>N(null),3e3)}catch(s){console.error("\ud3ec\uc778\ud2b8 \uc218\uc815 \uc624\ub958:",s),N({type:"error",text:"\ud3ec\uc778\ud2b8 \uc218\uc815\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."})}finally{u(!1)}},className:"btn-primary",children:"\ud655\uc778"})]})]})})]})},Hc=()=>{const[e,t]=(0,r.useState)("users");return(0,Se.jsxs)(Bc,{children:[(0,Se.jsxs)("div",{className:"admin-tabs",children:[(0,Se.jsx)("button",{className:"admin-tab-btn ".concat("users"===e?"active":""),onClick:()=>t("users"),children:"\ud83d\udc65 \ud68c\uc6d0\uad00\ub9ac"}),(0,Se.jsx)("button",{className:"admin-tab-btn ".concat("sales"===e?"active":""),onClick:()=>t("sales"),children:"\ud83d\udcb0 \ub9e4\ucd9c\uad00\ub9ac"}),(0,Se.jsx)("button",{className:"admin-tab-btn ".concat("points"===e?"active":""),onClick:()=>t("points"),children:"\ud83c\udfaf \ud3ec\uc778\ud2b8\uad00\ub9ac"})]}),(0,Se.jsx)("div",{className:"admin-tab-panel",children:(()=>{switch(e){case"users":return(0,Se.jsx)(Wc,{});case"sales":return(0,Se.jsx)(Vc,{});case"points":return(0,Se.jsx)(qc,{})}})()})]})},Kc=()=>{const{currentUser:e,userData:n,updateUserProfile:s}=Te(),i=Z(),[o,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)({name:"",nickname:"",phoneNumber:""}),[d,u]=(0,r.useState)({currentPassword:"",newPassword:"",confirmNewPassword:""}),[h,p]=(0,r.useState)(!1),[m,f]=(0,r.useState)(!1),[g,y]=(0,r.useState)("");(0,r.useEffect)(()=>{n&&c({name:n.name||"",nickname:n.nickname||"",phoneNumber:n.phoneNumber||""})},[n]);const v=e=>{const{name:n,value:r}=e.target;c(e=>(0,t.A)((0,t.A)({},e),{},{[n]:r}))},x=e=>{const{name:n,value:r}=e.target;u(e=>(0,t.A)((0,t.A)({},e),{},{[n]:r}))};return e&&n?(0,Se.jsx)("div",{className:"profile-page",children:(0,Se.jsxs)("div",{className:"profile-container",children:[(0,Se.jsx)("div",{className:"profile-header",children:(0,Se.jsx)("h1",{children:"\ub0b4 \uc815\ubcf4"})}),(0,Se.jsxs)("div",{className:"profile-content",children:[(0,Se.jsxs)("div",{className:"profile-section",children:[(0,Se.jsx)("h2",{children:"\uae30\ubcf8 \uc815\ubcf4"}),(0,Se.jsxs)("div",{className:"profile-info",children:[(0,Se.jsxs)("div",{className:"info-row",children:[(0,Se.jsx)("label",{children:"\uc774\ub984:"}),o?(0,Se.jsx)("input",{type:"text",name:"name",value:l.name,onChange:v,className:"edit-input"}):(0,Se.jsx)("span",{className:"info-value",children:n.name||"\ubbf8\uc124\uc815"})]}),(0,Se.jsxs)("div",{className:"info-row",children:[(0,Se.jsx)("label",{children:"\ub2c9\ub124\uc784:"}),o?(0,Se.jsx)("input",{type:"text",name:"nickname",value:l.nickname,onChange:v,className:"edit-input"}):(0,Se.jsx)("span",{className:"info-value",children:n.nickname||"\ubbf8\uc124\uc815"})]}),(0,Se.jsxs)("div",{className:"info-row",children:[(0,Se.jsx)("label",{children:"\uc774\uba54\uc77c (\ub85c\uadf8\uc778 ID):"}),(0,Se.jsx)("span",{className:"info-value",children:n.email||"\ubbf8\uc124\uc815"})]}),(0,Se.jsxs)("div",{className:"info-row",children:[(0,Se.jsx)("label",{children:"\uc804\ud654\ubc88\ud638:"}),o?(0,Se.jsx)("input",{type:"tel",name:"phoneNumber",value:l.phoneNumber,onChange:v,className:"edit-input",placeholder:"'-' \uc5c6\uc774 \uc785\ub825\ud574\uc8fc\uc138\uc694"}):(0,Se.jsx)("span",{className:"info-value",children:n.phoneNumber||"\ubbf8\uc124\uc815"})]}),(0,Se.jsxs)("div",{className:"info-row",children:[(0,Se.jsx)("label",{children:"\uac00\uc785\uc77c:"}),(0,Se.jsx)("span",{className:"info-value",children:n.createdAt?new Date(n.createdAt).toLocaleDateString():"\ubbf8\uc124\uc815"})]}),(0,Se.jsxs)("div",{className:"info-row",children:[(0,Se.jsx)("label",{children:"\uc794\uc5ec \ud3ec\uc778\ud2b8 :"}),(0,Se.jsxs)("span",{className:"info-value points",children:[(n.points||0).toLocaleString(),"P"]})]})]})]}),o&&(0,Se.jsxs)("div",{className:"profile-section",children:[(0,Se.jsx)("h2",{children:"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"}),(0,Se.jsx)("div",{className:"password-section",children:(0,Se.jsxs)("div",{className:"password-form",children:[(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"currentPassword",children:"\ud604\uc7ac \ube44\ubc00\ubc88\ud638"}),(0,Se.jsx)("input",{id:"currentPassword",type:"password",name:"currentPassword",value:d.currentPassword,onChange:x,className:"edit-input",placeholder:"\ud604\uc7ac \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694"})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"newPassword",children:"\uc0c8 \ube44\ubc00\ubc88\ud638"}),(0,Se.jsx)("input",{id:"newPassword",type:"password",name:"newPassword",value:d.newPassword,onChange:x,className:"edit-input",placeholder:"\uc0c8 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694"}),(0,Se.jsx)("div",{className:"password-requirement",children:"* \ube44\ubc00\ubc88\ud638\ub294 8\uc790 \uc774\uc0c1\uc774\uba70, \uc601\ubb38\uc790, \uc22b\uc790, \ud2b9\uc218\ubb38\uc790\ub97c \ud3ec\ud568\ud574\uc57c \ud569\ub2c8\ub2e4."})]}),(0,Se.jsxs)("div",{className:"form-group",children:[(0,Se.jsx)("label",{htmlFor:"confirmNewPassword",children:"\uc0c8 \ube44\ubc00\ubc88\ud638 \ud655\uc778"}),(0,Se.jsx)("input",{id:"confirmNewPassword",type:"password",name:"confirmNewPassword",value:d.confirmNewPassword,onChange:x,className:"edit-input",placeholder:"\uc0c8 \ube44\ubc00\ubc88\ud638\ub97c \ub2e4\uc2dc \uc785\ub825\ud558\uc138\uc694"})]})]})})]}),g&&(0,Se.jsx)("div",{className:"message ".concat(g.includes("\uc131\uacf5")?"success":"error"),children:g}),(0,Se.jsx)("div",{className:"profile-actions",children:o?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("button",{onClick:async()=>{if(e&&n){f(!0);try{await s(l);if(d.currentPassword||d.newPassword||d.confirmNewPassword){if(!d.currentPassword)return y("\ud604\uc7ac \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."),void f(!1);if(!d.newPassword)return y("\uc0c8 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."),void f(!1);if(d.newPassword!==d.confirmNewPassword)return y("\uc0c8 \ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),void f(!1);const t=d.newPassword,n=/[a-zA-Z]/.test(t),r=/[0-9]/.test(t),s=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(t);if(!(t.length>=8))return y("\ube44\ubc00\ubc88\ud638\ub294 \ucd5c\uc18c 8\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."),void f(!1);if(!n)return y("\ube44\ubc00\ubc88\ud638\ub294 \uc601\ubb38\uc790\ub97c \ud3ec\ud568\ud574\uc57c \ud569\ub2c8\ub2e4."),void f(!1);if(!r)return y("\ube44\ubc00\ubc88\ud638\ub294 \uc22b\uc790\ub97c \ud3ec\ud568\ud574\uc57c \ud569\ub2c8\ub2e4."),void f(!1);if(!s)return y("\ube44\ubc00\ubc88\ud638\ub294 \ud2b9\uc218\ubb38\uc790\ub97c \ud3ec\ud568\ud574\uc57c \ud569\ub2c8\ub2e4."),void f(!1);await(0,we.f3)(e,d.newPassword),y("\ud504\ub85c\ud544 \uc815\ubcf4\uc640 \ube44\ubc00\ubc88\ud638\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}else y("\ud504\ub85c\ud544\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");u({currentPassword:"",newPassword:"",confirmNewPassword:""}),p(!1),a(!1)}catch(t){console.error("\ud504\ub85c\ud544 \uc218\uc815 \uc624\ub958:",t),t instanceof Error?t.message.includes("requires-recent-login")?y("\ubcf4\uc548\uc744 \uc704\ud574 \ub2e4\uc2dc \ub85c\uadf8\uc778\ud55c \ud6c4 \ube44\ubc00\ubc88\ud638\ub97c \ubcc0\uacbd\ud574\uc8fc\uc138\uc694."):y("\uc218\uc815 \uc2e4\ud328: ".concat(t.message)):y("\ud504\ub85c\ud544 \uc218\uc815\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{f(!1)}}},className:"btn-primary",disabled:m,children:m?"\uc800\uc7a5 \uc911...":"\uc800\uc7a5"}),(0,Se.jsx)("button",{onClick:()=>{a(!1),c({name:(null===n||void 0===n?void 0:n.name)||"",nickname:(null===n||void 0===n?void 0:n.nickname)||"",phoneNumber:(null===n||void 0===n?void 0:n.phoneNumber)||""}),u({currentPassword:"",newPassword:"",confirmNewPassword:""}),p(!1),y("")},className:"btn-secondary",children:"\ucde8\uc18c"})]}):(0,Se.jsx)("button",{onClick:()=>{a(!0),p(!0),y("")},className:"btn-primary",children:"\uc815\ubcf4 \uc218\uc815"})})]})]})}):(0,Se.jsx)("div",{className:"profile-page",children:(0,Se.jsxs)("div",{className:"profile-container",children:[(0,Se.jsx)("h2",{children:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4"}),(0,Se.jsx)("p",{children:"\ud504\ub85c\ud544\uc744 \ubcf4\ub824\uba74 \ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."}),(0,Se.jsx)("button",{onClick:()=>i("/login"),className:"btn-primary",children:"\ub85c\uadf8\uc778 \ud558\ub7ec \uac00\uae30"})]})})};class Jc extends r.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),console.warn("Production error logged:",e.message)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,Se.jsx)("div",{className:"error-boundary",children:(0,Se.jsxs)("div",{className:"error-content",children:[(0,Se.jsx)("h2",{children:"\ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4"}),(0,Se.jsx)("p",{children:"\ud398\uc774\uc9c0\ub97c \uc0c8\ub85c\uace0\uce68\ud558\uac70\ub098 \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."}),(0,Se.jsx)("button",{onClick:()=>window.location.reload(),className:"retry-button",children:"\ud398\uc774\uc9c0 \uc0c8\ub85c\uace0\uce68"}),!1]})}):this.props.children}}const Yc=Jc;console.log("=== \ud83d\ude80 React \uc571 \uc2dc\uc791 ==="),console.log("\ud83d\udcc1 \ud604\uc7ac \uc2dc\uac04:",(new Date).toISOString()),console.log("\ud83d\udcc1 \ud604\uc7ac URL:",window.location.href),console.log("\ud83d\udcc1 User Agent:",navigator.userAgent),be().setAppElement("#root");const Qc=()=>{const[e,t]=(0,r.useState)(!1),[n,s]=(0,r.useState)(null);return(0,Se.jsxs)("div",{className:"App",children:[(0,Se.jsx)("div",{className:"no-print",children:(0,Se.jsx)(Uo,{})}),(0,Se.jsx)(ml,{}),(0,Se.jsx)("div",{className:"print-gap"}),(0,Se.jsx)(Wo,{}),(0,Se.jsx)("div",{className:"App-main",children:(0,Se.jsxs)(ye,{children:[(0,Se.jsx)(fe,{path:"/",element:(0,Se.jsx)(mo,{setCurrentQuiz:e=>{s(e)}})}),(0,Se.jsx)(fe,{path:"/login",element:(0,Se.jsx)(co,{})}),(0,Se.jsx)(fe,{path:"/signup",element:(0,Se.jsx)(po,{})}),(0,Se.jsx)(fe,{path:"/work_02_reading-comprehension",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(Io,{})})}),(0,Se.jsx)(fe,{path:"/work_03_vocabulary-word",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(Eo,{})})}),(0,Se.jsx)(fe,{path:"/work_04_blank-phrase-inference",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(Zo,{})})}),(0,Se.jsx)(fe,{path:"/work_05_blank-sentence-inference",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(fa,{})})}),(0,Se.jsx)(fe,{path:"/work_06_sentence-position",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(Ea,{})})}),(0,Se.jsx)(fe,{path:"/work_07_main-idea-inference",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(La,{})})}),(0,Se.jsx)(fe,{path:"/work_08_title-inference",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(Za,{})})}),(0,Se.jsx)(fe,{path:"/work_09_grammar-error",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(fl,{})})}),(0,Se.jsx)(fe,{path:"/work_10_multi-grammar-error",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(gl,{})})}),(0,Se.jsx)(fe,{path:"/work_01_article-order",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(Mo,{})})}),(0,Se.jsx)(fe,{path:"/work_11_sentence-translation",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(Ol,{})})}),(0,Se.jsx)(fe,{path:"/work_12_word-study",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(Ll,{})})}),(0,Se.jsx)(fe,{path:"/work_13_blank-fill-word",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)($l,{})})}),(0,Se.jsx)(fe,{path:"/work_14_blank-fill-sentence",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(mc,{})})}),(0,Se.jsx)(fe,{path:"/package-quiz",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(Dc,{})})}),(0,Se.jsx)(fe,{path:"/sample-problems",element:(0,Se.jsx)(Lc,{})}),(0,Se.jsx)(fe,{path:"/feedback",element:(0,Se.jsx)(Mc,{})}),(0,Se.jsx)(fe,{path:"/admin",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(Hc,{})})}),(0,Se.jsx)(fe,{path:"/profile",element:(0,Se.jsx)(Ee,{children:(0,Se.jsx)(Kc,{})})})]})}),(0,Se.jsx)(Bo,{isOpen:e,onRequestClose:()=>t(!1)})]})},Gc=()=>(0,Se.jsx)(Yc,{children:(0,Se.jsx)(Ce,{children:(0,Se.jsx)(Qc,{})})});i.createRoot(document.getElementById("root")).render((0,Se.jsx)(ol,(0,t.A)((0,t.A)({},{basename:"/",future:{v7_startTransition:!0,v7_relativeSplatPath:!0,v7_prependBasename:!0}}),{},{children:(0,Se.jsx)(Gc,{})})))})()})();
//# sourceMappingURL=main.d9ceb864.js.map