# 🤖 EngQuiz 프로젝트 AI 모델 기술 분석 보고서

## 1. 개요

EngQuiz 프로젝트는 **OpenAI의 GPT 모델들을 핵심으로 한 AI 기반 영어 교육 문제 생성 시스템**입니다. 다양한 영어 문제 유형을 자동으로 생성하고, 이미지에서 텍스트를 추출하는 기능을 제공합니다.

## 2. 사용된 AI 모델 기술

### 2.1 OpenAI GPT-4o (GPT-4 Omni)
**주요 사용 영역:**
- 이미지에서 텍스트 추출 (OCR)
- 복잡한 문제 생성 및 분석
- 자연어 이해 기반 텍스트 처리

**특성:**
- **멀티모달 기능**: 텍스트와 이미지를 동시에 처리
- **고성능 자연어 이해**: 복잡한 문맥 분석 가능
- **정확한 JSON 응답 생성**: 구조화된 데이터 출력
- **한국어-영어 이중 언어 지원**: 번역 및 해석 기능

**사용 사례:**
```typescript
// 이미지에서 텍스트 추출
model: 'gpt-4o',
messages: [
  { role: 'user', content: [
    { type: 'text', text: prompt },
    { type: 'image_url', image_url: { url: base64 } }
  ]}
]
```

### 2.2 OpenAI GPT-4
**주요 사용 영역:**
- 의미 기반 단락 분할
- 복잡한 텍스트 분석

**특성:**
- **고정밀 텍스트 분석**: 의미 단위 분할에 특화
- **일관성 있는 출력**: temperature 0.1로 설정하여 안정적 결과
- **규칙 기반 처리**: 엄격한 제약 조건 하에서 작업 수행

**사용 사례:**
```typescript
// 의미 단락 분할
model: "gpt-4",
temperature: 0.1, // 일관된 결과를 위해 낮은 온도
max_tokens: 2000
```

### 2.3 OpenAI GPT-3.5-turbo
**주요 사용 영역:**
- 단순한 JSON 응답 생성
- 빠른 처리 속도가 필요한 작업
- 단계별 처리 (MCP - Model Context Protocol)

**특성:**
- **빠른 응답 속도**: 실시간 처리에 적합
- **비용 효율성**: 상대적으로 낮은 API 비용
- **정확한 JSON 파싱**: 구조화된 데이터 생성에 특화

**사용 사례:**
```typescript
// 단어 선정 및 변형
model: 'gpt-3.5-turbo',
temperature: 0.3,
max_tokens: 200
```

## 3. AI 모델 동작 방식

### 3.1 멀티모달 처리 (GPT-4o)
**이미지 → 텍스트 변환 과정:**
1. **이미지 인코딩**: File → Base64 변환
2. **프롬프트 구성**: 텍스트 지시사항 + 이미지 URL
3. **API 호출**: OpenAI Vision API 엔드포인트 사용
4. **응답 파싱**: 추출된 텍스트 정제 및 반환

```typescript
const fileToBase64 = (file: File) => new Promise<string>((resolve, reject) => {
  const reader = new FileReader();
  reader.onload = () => resolve(reader.result as string);
  reader.onerror = reject;
  reader.readAsDataURL(file);
});
```

### 3.2 단계별 처리 (MCP - Model Context Protocol)
**Work_09_GrammarError에서 구현된 방식:**

1. **MCP 1: 단어 선정 서비스**
   - 본문에서 어법 변형 가능한 5개 단어 선정
   - GPT-3.5-turbo 사용 (빠른 처리)

2. **MCP 2: 번호/밑줄 적용 서비스**
   - 선정된 단어에 번호 매기기 및 밑줄 적용
   - 순서 기반 처리 알고리즘

3. **MCP 3: 어법 변형 서비스**
   - 1개 단어를 문법적으로 틀리게 변형
   - 재시도 로직 포함 (최대 3회)

4. **MCP 4: 번역 서비스**
   - 본문 한국어 번역
   - 자연스러운 한국어 생성

### 3.3 의미 기반 단락 분할
**AI 기반 분할 과정:**
1. **시스템 프롬프트 설정**: 엄격한 규칙과 제약 조건 정의
2. **사용자 프롬프트 전송**: 분석할 텍스트 전달
3. **AI 응답 파싱**: 구조화된 단락 추출
4. **검증 및 폴백**: 원본 순서 검증, 실패 시 규칙 기반 분할

**핵심 검증 로직:**
```typescript
function validateOriginalOrder(originalText: string, paragraphs: string[]): boolean {
  // 원본 문장 순서와 AI 결과 비교
  // 문장 수, 순서, 내용 일치성 검증
}
```

## 4. AI 모델 특성 및 최적화

### 4.1 Temperature 설정 최적화
- **GPT-4o**: 기본값 (0.7) - 창의적 문제 생성
- **GPT-4**: 0.1 - 일관된 단락 분할
- **GPT-3.5-turbo**: 0.3-0.7 - 작업별 조정

### 4.2 Max Tokens 제한
- **이미지 처리**: 2048 tokens
- **문제 생성**: 2000-3000 tokens
- **단순 응답**: 200-300 tokens

### 4.3 에러 처리 및 폴백
**다층적 안전장치:**
1. **API 키 검증**: 환경변수 확인
2. **응답 형식 검증**: JSON 파싱 및 필드 검증
3. **재시도 로직**: 실패 시 자동 재시도
4. **규칙 기반 폴백**: AI 실패 시 전통적 알고리즘 사용

### 4.4 비용 최적화
- **작업별 모델 선택**: 복잡도에 따른 모델 분리
- **토큰 사용량 제한**: max_tokens 설정으로 비용 통제
- **캐싱 전략**: 동일 입력에 대한 중복 호출 방지

## 5. 기술적 특징

### 5.1 프롬프트 엔지니어링
**구조화된 프롬프트 설계:**
- 명확한 지시사항과 제약 조건
- JSON 형식 강제 지정
- 한국어-영어 이중 언어 지원
- 에러 방지를 위한 상세한 규칙

### 5.2 응답 검증 시스템
**다단계 검증:**
1. **형식 검증**: JSON 파싱 가능성 확인
2. **필드 검증**: 필수 필드 존재 확인
3. **로직 검증**: 비즈니스 규칙 준수 확인
4. **일관성 검증**: 원본 데이터와의 일치성 확인

### 5.3 실시간 처리 최적화
**성능 향상 기법:**
- 비동기 처리 (async/await)
- 로딩 상태 관리
- 사용자 피드백 제공
- 점진적 결과 표시

## 6. 보안 및 안정성

### 6.1 API 키 관리
- 환경변수를 통한 안전한 키 저장
- 클라이언트 사이드에서 서버 키 사용
- 키 노출 방지를 위한 프록시 패턴

### 6.2 에러 처리
- 네트워크 오류 처리
- API 한도 초과 대응
- 사용자 친화적 에러 메시지

## 7. 구현된 문제 유형별 AI 활용

### 7.1 Work_01_SentenceOrderTest
- **AI 모델**: GPT-4o (이미지 처리), GPT-4 (단락 분할)
- **기능**: 의미 기반 4단락 분할 및 순서 맞추기 문제 생성

### 7.2 Work_02_ReadingComprehension
- **AI 모델**: GPT-4o
- **기능**: 단어 교체 및 독해 문제 생성
- **특징**: 5-8개 단어 선정 및 유의어 교체

### 7.3 Work_03_VocabularyWord
- **AI 모델**: GPT-4o
- **기능**: 핵심 단어 빈칸 문제 생성
- **특징**: 본문에 실제 등장하는 단어만 정답으로 선정

### 7.4 Work_04_BlankPhraseInference
- **AI 모델**: GPT-4o
- **기능**: 구(phrase) 단위 빈칸 문제 생성
- **특징**: 3-10단어 이내의 의미 있는 구 선정

### 7.5 Work_05_BlankSentenceInference
- **AI 모델**: GPT-4o
- **기능**: 문장 단위 빈칸 문제 생성
- **특징**: 본문에 실제 등장하는 문장만 정답으로 선정

### 7.6 Work_06_SentencePosition
- **AI 모델**: GPT-4o
- **기능**: 문장 삽입 위치 찾기 문제 생성
- **특징**: 빠진 문장의 적절한 위치 선정

### 7.7 Work_07_MainIdeaInference
- **AI 모델**: GPT-4o
- **기능**: 주제 추론 문제 생성
- **특징**: 본문의 핵심 주제와 오답 4개 생성

### 7.8 Work_08_TitleInference
- **AI 모델**: GPT-4o
- **기능**: 제목 추론 문제 생성
- **특징**: 적절한 제목과 오답 4개 생성

### 7.9 Work_09_GrammarError
- **AI 모델**: GPT-4o (이미지), GPT-3.5-turbo (단계별 처리)
- **기능**: 어법 오류 찾기 문제 생성
- **특징**: MCP 방식의 단계별 처리, 재시도 로직

### 7.10 Work_10_MultiGrammarError
- **AI 모델**: GPT-4o
- **기능**: 다중 어법 오류 개수 세기 문제 생성
- **특징**: 1-5개 랜덤 어법 오류 생성

## 8. 결론

EngQuiz 프로젝트는 **OpenAI의 GPT 모델들을 전략적으로 활용한 고도화된 AI 기반 교육 시스템**입니다. 각 모델의 특성을 최대한 활용하여 정확하고 효율적인 영어 문제 생성 서비스를 제공하며, 다층적 안전장치와 최적화 기법을 통해 안정적인 서비스를 구현하고 있습니다.

**주요 성과:**
- 10가지 다양한 문제 유형 지원
- 이미지 기반 텍스트 추출 기능
- 실시간 AI 기반 문제 생성
- 높은 정확도의 한국어 번역 및 해석
- 안정적인 에러 처리 및 폴백 시스템

**기술적 혁신:**
- 멀티모달 AI 활용으로 이미지-텍스트 통합 처리
- MCP 방식의 단계별 AI 처리로 복잡한 문제 생성
- 의미 기반 단락 분할로 자연스러운 문제 구성
- 다층적 검증 시스템으로 높은 품질 보장

---

*본 보고서는 EngQuiz 프로젝트의 AI 모델 기술 구현 현황을 종합적으로 분석한 내용입니다.* 